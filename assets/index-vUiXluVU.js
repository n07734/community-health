import{r as b,j as o,R as yn,C as Rn,t as En,c as Sn,a as Gt,S as vn,T as js,I as wn,b as Ns,d as Ps,P as bn,e as Cs,V as An,L as Is,f as _s,g as Tn,h as Dn,i as ks,k as jn,G as Nn,l as Pn,m as Os,n as Ls,o as Cn,p as Ms,u as In,q as ss,s as Pt,v as _n,w as kn,x as On,y as fe,z as os,A as dt,B as mt,D as ns,E as Ln,F as Mn,H as $n,J as Fn,K as Un,M as $s,N as Fs,O as M,Q as Us,U as Gn,W as Ct,X as Vn,_ as Bn,Y as Gs,Z as qn,$ as Kn,a0 as le,a1 as re,a2 as A,a3 as G,a4 as It,a5 as zn,a6 as I,a7 as gt,a8 as Be,a9 as Vt,aa as ft,ab as xt,ac as Vs,ad as Bs,ae as qs,af as Hn,ag as st,ah as qe,ai as oe,aj as ae,ak as yt,al as Je,am as je,an as at,ao as Se,ap as lt,aq as Ks,ar as _t,as as kt,at as zs,au as Wn,av as Yn,aw as Hs,ax as Ws,ay as Qn,az as Xn,aA as Jn,aB as Zn,aC as rs,aD as Le,aE as er,aF as Ys,aG as Qs,aH as tr,aI as sr,aJ as as,aK as ls,aL as or,aM as nr,aN as cs,aO as rr,aP as Xs,aQ as ar,aR as is,aS as lr,aT as cr,aU as ir,aV as dr,aW as mr,aX as ur}from"./vendor-BV_vXboj.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();const Js=b.createContext({}),hr=({children:e})=>{const[t,s]=b.useState(!0),r={showNumbers:t,toggleShowNumbers:()=>s(!t)};return o.jsx(Js.Provider,{value:r,children:e})},ot=()=>b.useContext(Js),Zs=b.createContext({}),pr=({children:e})=>{const[t,s]=b.useState(!0),r={showNames:t,toggleShowNames:()=>s(!t)};return o.jsx(Zs.Provider,{value:r,children:e})},ve=()=>b.useContext(Zs),eo=b.createContext({}),gr=({children:e})=>{const[t,s]=b.useState(!1),[n,r]=b.useState(""),i={showPvP:t,togglePvPPage:()=>{s(!t),r("")},userPage:n,setUserPage:(m="")=>{s(!1),r(m)},clearUserPage:()=>{s(!1),r("")}};return o.jsx(eo.Provider,{value:i,children:e})},Ke=()=>b.useContext(eo),fr={theme:"dark",toggleTheme:()=>null},to=b.createContext(fr),xr=({children:e,defaultTheme:t="dark",storageKey:s="vite-ui-theme",...n})=>{const[r,a]=b.useState(()=>localStorage.getItem(s)||t);b.useEffect(()=>{const c=window.document.documentElement;c.classList.remove("light","dark"),c.classList.add(r)},[r]);const l={theme:r,toggleTheme:()=>{const c=r==="dark"?"light":"dark";localStorage.setItem(s,c),a(c)}};return o.jsx(to.Provider,{...n,value:l,children:e})},K=()=>{const e=b.useContext(to);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},yr=yn,Rr=Rn,ds=({setIsOpen:e,isOpen:t,expandText:s,qaId:n,className:r})=>o.jsx("a",{className:`text-base text-primary ${r}`,href:"#desc",...n&&{"data-qa-id":n},onClick:a=>{a.preventDefault(),e(!t)},children:t?"hide":s}),Er=({hLevel:e,children:t})=>{const s=`h${e}`;return o.jsx(s,{children:t})},ie=({title:e,intro:t,children:s,hLevel:n=3,expandText:r="info",className:a="",expandQaId:l})=>{const[c,i]=b.useState(!1);return o.jsxs("div",{className:`w-full flex flex-grow flex-wrap ${a} ${t?"[&>*]:basis-full":""}`,children:[e&&typeof e=="string"?o.jsxs(Er,{hLevel:n,children:[e,s&&o.jsx(ds,{isOpen:c,setIsOpen:i,expandText:r,qaId:l,className:"ml-2"})]}):e,o.jsxs("p",{children:[t," ",t&&s&&o.jsx(ds,{isOpen:c,setIsOpen:i,expandText:r,qaId:l})]}),o.jsx(yr,{open:c,onOpenChange:i,className:"wrapper basis-full",children:o.jsx(Rr,{children:s})})]})},Q=({className:e="",children:t})=>o.jsx("div",{className:`paper ${e}`,children:t});function N(...e){return En(Sn(e))}const Sr=Gt("uppercase inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),O=b.forwardRef(({className:e,variant:t,size:s,asChild:n=!1,...r},a)=>{const l=n?vn:"button";return o.jsx(l,{className:N(Sr({variant:t,size:s,className:e})),ref:a,...r})});O.displayName="Button";const we=({children:e})=>o.jsx("div",{className:"w-full relative flex flex-col flex-wrap gap-0 items-center 3xl:flex-row 3xl:gap-0 3xl:gap-x-5 3xl:justify-center",children:e}),We='"Nunito", "Roboto", "Helvetica", "Arial", sans-serif',Ye=12,Tt={legendOrientation:"horizontal",legendPosition:"top-right",height:10,legendOffsetX:0,legendOffsetY:-4},nt=(e="dark")=>{const t={light:"#232023",dark:"#eee"}[e],s={light:"#fff",dark:"#232023"}[e],n={light:"#077314",dark:"#077314"}[e],r={light:"#8b4ff0",dark:"#6b3dba"}[e],a={light:"#87cac6",dark:"#6b3dba"}[e];return{fontFamily:We,fontSize:Ye,textColor:t,crosshair:{line:{stroke:t}},axis:{legend:{text:{fill:t}},ticks:{text:{fill:t}}},legends:{hidden:{symbol:{fill:"#eee",opacity:1},text:{fill:"#eee",fontWeight:"400",opacity:1}},text:{fontWeight:"800"}},legendsTextFill:t,dotColor:t,tooltip:{container:{fontFamily:We,fontSize:Ye,background:s,color:t,boxShadow:`0 1px 2px ${t}`}},grid:{line:{stroke:"#999"}},markers:{primary:{lineStyle:{stroke:n,strokeWidth:1},textStyle:{fontFamily:We,fontSize:Ye,fill:n},...Tt},secondary:{lineStyle:{stroke:r,strokeWidth:1},textStyle:{fontFamily:We,fontSize:Ye,fill:r},...Tt},tertiary:{lineStyle:{stroke:a,strokeWidth:1,strokeDasharray:"2 6"},textStyle:{fontFamily:We,fontSize:Ye,fill:a},...Tt}}}},Ge=({className:e="",items:t=[],text:s="",type:n})=>{const r=d=>{const u=t.length-1,p={zero:"",max:" and ",more:", "},h=[d===0&&"zero",d===u&&"max",d>0&&"more"].find(Boolean);return p[h]},a=({color:d,label:u})=>o.jsx("span",{style:{color:d,borderBottomColor:d},className:"saved-line",children:u}),l=({color:d,label:u})=>o.jsx("span",{style:{color:d},children:u}),c={average:"Average",trimmedAverage:"Trimmed Average",sum:"Total",count:"Total",teamDistribution:"",median:"",percentWith:"",growth:"",averagePerDev:""},i=[...new Set(t.filter(d=>"groupMath"in d).map(d=>"groupMath"in d&&d.groupMath))],m=(t.length>0&&n==="line"&&i.length<2?i[0]||"average":"")||"";return o.jsxs("h4",{className:e,children:[`${s} `,m&&`${c[m]} `,t.map((d,u)=>o.jsxs(b.Fragment,{children:[r(u),n==="line"?o.jsx(a,{...d}):o.jsx(l,{...d})]},u))]})},Me=jn,$e=Nn,Fe=Pn,Ne=b.forwardRef(({className:e,children:t,...s},n)=>o.jsxs(js,{ref:n,className:N("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,o.jsx(wn,{asChild:!0,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 opacity-50","aria-hidden":"true",children:o.jsx("path",{d:"m6 9 6 6 6-6"})})})]}));Ne.displayName=js.displayName;const so=b.forwardRef(({className:e,...t},s)=>o.jsx(Ns,{ref:s,className:N("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4","aria-hidden":"true",children:o.jsx("path",{d:"m18 15-6-6-6 6"})})}));so.displayName=Ns.displayName;const oo=b.forwardRef(({className:e,...t},s)=>o.jsx(Ps,{ref:s,className:N("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 opacity-50","aria-hidden":"true",children:o.jsx("path",{d:"m6 9 6 6 6-6"})})}));oo.displayName=Ps.displayName;const Pe=b.forwardRef(({className:e,children:t,position:s="popper",...n},r)=>o.jsx(bn,{children:o.jsxs(Cs,{ref:r,className:N("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...n,children:[o.jsx(so,{}),o.jsx(An,{className:N("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(oo,{})]})}));Pe.displayName=Cs.displayName;const vr=b.forwardRef(({className:e,...t},s)=>o.jsx(Is,{ref:s,className:N("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));vr.displayName=Is.displayName;const Z=b.forwardRef(({className:e,children:t,...s},n)=>o.jsxs(_s,{ref:n,className:N("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Tn,{children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4","aria-hidden":"true",children:o.jsx("path",{d:"M20 6 9 17l-5-5"})})})}),o.jsx(Dn,{children:t})]}));Z.displayName=_s.displayName;const wr=b.forwardRef(({className:e,...t},s)=>o.jsx(ks,{ref:s,className:N("-mx-1 my-1 h-px bg-muted",e),...t}));wr.displayName=ks.displayName;const no=b.forwardRef(({className:e,...t},s)=>o.jsx(Os,{className:N("grid gap-2",e),...t,ref:s}));no.displayName=Os.displayName;const Ot=b.forwardRef(({className:e,...t},s)=>o.jsx(Ls,{ref:s,className:N("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:o.jsx(Cn,{className:"flex items-center justify-center",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-2.5 w-2.5 fill-current text-current",children:o.jsx("circle",{cx:"12",cy:"12",r:"10"})})})}));Ot.displayName=Ls.displayName;const br=Gt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tt=b.forwardRef(({className:e,...t},s)=>o.jsx(Ms,{ref:s,className:N(br(),e),...t}));tt.displayName=Ms.displayName;const _=["#E82573","#8b4ff0","#1F77B4","#4ECC7A","#DBD523","#EB9830","#D14B41"],$={dark:{primary:"#E82573",secondary:"#1F77B4",tertiary:"#E2E2E2"},light:{primary:"#E82573",secondary:"#1F77B4",tertiary:"#777"}},ne=["average","trimmedAverage","sum","median"],Bt=[{label:"Comments",dataKey:"comments",groupMaths:[...ne,"percentWith","teamDistribution"]},{label:"Code comments",dataKey:"codeComments",groupMaths:[...ne,"percentWith"]},{label:"Review comments",dataKey:"generalComments",groupMaths:[...ne,"percentWith"]},{label:"Approvals",dataKey:"approvals",groupMaths:[...ne,"percentWith","teamDistribution"]},{label:"Additions",dataKey:"additions",groupMaths:ne},{label:"Deletions",dataKey:"deletions",groupMaths:ne},{label:"PR size (additions + deletions)",dataKey:"prSize",groupMaths:ne},{label:"Codebase change (additions - deletions)",dataKey:"growth",groupMaths:["growth"]},{label:"PR count",dataKey:"author",groupMaths:["count","averagePerDev"]},{label:"PR Age(days)",dataKey:"age",groupMaths:ne},{label:"Sentiment",dataKey:"commentSentimentTotalScore",groupMaths:ne},{label:"Sentiment to team",dataKey:"commentSentimentScore",groupMaths:ne},{label:"Sentiment from team",dataKey:"commentAuthorSentimentScore",groupMaths:ne},{label:"Bug count",dataKey:"isBug",groupMaths:["count"]},{label:"Feature count",dataKey:"isFeature",groupMaths:["count"]}],Ar={average:"Average",trimmedAverage:"*Trimmed Average",sum:"Total",count:"Total",median:"Median",teamDistribution:"Team's % spread of",percentWith:"% of PRs with",growth:"",averagePerDev:"Average per Dev"},ms=e=>({color:t,label:s="",dataKey:n,groupMath:r="average"},a)=>o.jsxs("div",{style:{color:t},children:[o.jsx("p",{className:"saved-line text-xl",children:s}),o.jsx("svg",{className:"w-[22px] h-[22px] fill-current inline-block",focusable:"false","aria-hidden":"true",viewBox:"0 0 32 32","data-qa-id":"RemoveCircleIcon",onClick:l=>{l.preventDefault(),e(n,r)},children:o.jsx("path",{d:"M15.5 3.5c-7.18 0-13 5.82-13 13s5.82 13 13 13c7.18 0 13-5.82 13-13s-5.82-13-13-13zM22 16.875c0 0.553-0.448 1-1 1h-11c-0.553 0-1-0.447-1-1v-1c0-0.552 0.447-1 1-1h11c0.552 0 1 0.448 1 1v1z"})})]},`${a}`),ro=e=>[...e.left||[],...e.right||[]],Lt=e=>{const t=ro(e),s=[];return Bt.forEach(({label:n="",dataKey:r,groupMaths:a=[]})=>{const l=t.filter(i=>(i==null?void 0:i.dataKey)===r),c=a.filter(i=>l.every(m=>(m==null?void 0:m.groupMath)!==i));c.length>0&&s.push({label:n,dataKey:r,groupMaths:c})}),s},Tr=e=>{const s=ro(e).map(r=>r==null?void 0:r.dataKey);return Bt.find(({dataKey:r})=>!s.includes(r))},Dr=(e,t)=>{const s=Lt(t),n=e.dataKey,r=s.findIndex(a=>a.dataKey===n);return s[r+1]||s[0]||Bt[0]},us={average:()=>"Average",trimmedAverage:()=>"Trimmed Average",sum:()=>"Total",median:()=>"Median",growth:()=>"Growth",percentWith:({label:e=""}={})=>`% of PRs with ${e}`,teamDistribution:({label:e=""}={})=>`Team's % spread of ${e}`,count:()=>"Total",averagePerDev:({label:e=""}={})=>`Average ${e} per DEV`},ao=({graphInfo:e,setGraph:t=()=>{},graphs:s=[]})=>{var p;const n=Tr(e),[r,a]=b.useState({label:(n==null?void 0:n.label)||"Comments",dataKey:(n==null?void 0:n.dataKey)||"comments",color:s.length>1?_[0]:_[1],lineSide:"left",groupMath:(p=n==null?void 0:n.groupMaths)==null?void 0:p[0]}),l=(h={})=>{a({...r,...h})},c=h=>{h.preventDefault();const{lineSide:g,label:f,groupMath:x}=r,E=e[g]||[];E.push({...r,label:`${Ar[x]} ${f}`,groupMath:x,.../teamDistribution|percentWith/.test(x)&&{yMax:100}});const S={...e,[g]:E},v=s.map(T=>S.graphId===T.graphId?S:T);t(v);const y=Dr(r,S),w=_.findIndex(T=>T===r.color);a({label:y.label,dataKey:y.dataKey,color:_[(w+1)%_.length],lineSide:g,groupMath:y==null?void 0:y.groupMaths[0]})},i=h=>(g,f)=>{const E=(e[h]||[]).filter(w=>!(w.dataKey===g&&w.groupMath===f)),S={...e,[h]:E},v=s.map(w=>S.graphId===w.graphId?S:w);t(v);const[y]=Lt(S);a({label:y.label,dataKey:y.dataKey,color:_[0],lineSide:"left",groupMath:y.groupMaths[0]})},m=Lt(e),d=m.find(h=>h.dataKey===r.dataKey),u=((d==null?void 0:d.groupMaths)||[]).filter(h=>!/growth/.test(h));return o.jsxs("div",{className:"w-full max-w-mw",children:[m.length>0&&o.jsxs("form",{className:"flex flex-wrap rounded-2xl justify-center paper pt-2 gap-4 mb-3",onSubmit:c,children:[o.jsxs(Me,{onValueChange:h=>{const g=m.find(f=>f.dataKey===h);l({dataKey:h,groupMath:g.groupMaths[0],label:g.label})},value:d==null?void 0:d.dataKey,children:[o.jsx(Ne,{className:"w-auto",children:o.jsx(Fe,{children:d==null?void 0:d.label})}),o.jsx(Pe,{children:o.jsx($e,{children:m.map(({label:h,dataKey:g})=>o.jsx(Z,{value:g,children:h},`${d==null?void 0:d.dataKey}${g}${h}`))})})]}),u.length>0&&o.jsxs(Me,{onValueChange:h=>h&&l({groupMath:h}),value:r.groupMath,children:[o.jsx(Ne,{className:"w-auto",children:o.jsx(Fe,{children:us[r.groupMath](r)})}),o.jsx(Pe,{children:o.jsx($e,{children:u.map(h=>o.jsx(Z,{value:h,children:us[h](r)},`${r.dataKey}${h}`))})})]}),o.jsx(no,{defaultValue:r.lineSide,onValueChange:h=>h&&l({lineSide:h}),children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ot,{value:"left",id:"r1"}),o.jsx(tt,{htmlFor:"r1",children:"Axis: Left"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ot,{value:"right",id:"r2"}),o.jsx(tt,{htmlFor:"r2",children:"Right"})]})]})}),o.jsxs(Me,{onValueChange:h=>h&&l({color:h}),value:r.color,children:[o.jsx(Ne,{className:"w-auto",children:o.jsx(Fe,{placeholder:o.jsx("div",{style:{backgroundColor:r.color,width:"70px",height:"10px"}})})}),o.jsx(Pe,{children:o.jsx($e,{children:_.map(h=>o.jsx(Z,{value:h,children:o.jsx("div",{style:{backgroundColor:h,width:"70px",height:"10px"}})},h))})})]}),o.jsx(O,{color:"primary",type:"submit",children:"Add to graph"})]}),o.jsxs("div",{className:"custom-lines",children:[o.jsx("div",{children:(e.left||[]).map(ms(i("left")))}),o.jsx("div",{children:(e.right||[]).map(ms(i("right")))})]})]})},lo=b.forwardRef(({className:e,...t},s)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:s,className:N("w-full caption-bottom text-sm",e),...t})}));lo.displayName="Table";const co=b.forwardRef(({className:e,...t},s)=>o.jsx("thead",{ref:s,className:N("[&_tr]:border-b",e),...t}));co.displayName="TableHeader";const io=b.forwardRef(({className:e,...t},s)=>o.jsx("tbody",{ref:s,className:N("[&_tr:last-child]:border-0",e),...t}));io.displayName="TableBody";const jr=b.forwardRef(({className:e,...t},s)=>o.jsx("tfoot",{ref:s,className:N("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));jr.displayName="TableFooter";const it=b.forwardRef(({className:e,...t},s)=>o.jsx("tr",{ref:s,className:N("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));it.displayName="TableRow";const mo=b.forwardRef(({className:e,...t},s)=>o.jsx("th",{ref:s,className:N("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));mo.displayName="TableHead";const Mt=b.forwardRef(({className:e,...t},s)=>o.jsx("td",{ref:s,className:N("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Mt.displayName="TableCell";const Nr=b.forwardRef(({className:e,...t},s)=>o.jsx("caption",{ref:s,className:N("mt-4 text-sm text-muted-foreground",e),...t}));Nr.displayName="TableCaption";const Pr=({sort:e})=>({asc:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 h-4 w-4",children:[o.jsx("path",{d:"m5 12 7-7 7 7"}),o.jsx("path",{d:"M12 19V5"})]}),desc:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 h-4 w-4",children:[o.jsx("path",{d:"M12 5v14"}),o.jsx("path",{d:"m19 12-7 7-7-7"})]}),none:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 h-4 w-4",children:[o.jsx("path",{d:"m21 16-4 4-4-4"}),o.jsx("path",{d:"M17 20V4"}),o.jsx("path",{d:"m3 8 4-4 4 4"}),o.jsx("path",{d:"M7 4v16"})]})})[e],Qe=e=>({column:t})=>{const s=t.getIsSorted()||"none";return o.jsxs(O,{variant:"link",className:"p-0",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:[e,o.jsx(Pr,{sort:s})]})},Cr=[{accessorKey:"age",header:Qe("PR Age (days)")},{accessorKey:"prSize",header:Qe("PR Size")},{accessorKey:"author",header:Qe("Author")},{accessorKey:"mergedAt",header:Qe("Date"),cell:({row:e})=>{const t=e.getValue("mergedAt");return Pt(new Date(t),"do MMM yy")}},{accessorKey:"url",header:Qe("Link"),cell:({row:e})=>{const t=e.getValue("url"),s=t.split("/").at(-1);return o.jsx("a",{className:"text-primary",href:t,children:s})}}],Ir=({dataKeys:e,data:t,addClass:s=""})=>{var d;const[n,r]=b.useState([]),[a,l]=b.useState({pageIndex:0,pageSize:4}),c=[...e,"mergedAt","url"],i=Cr.filter(u=>c.includes(u.accessorKey)),m=In({data:t,columns:i,getCoreRowModel:_n(),getPaginationRowModel:kn(),onSortingChange:r,getSortedRowModel:On(),onPaginationChange:l,state:{sorting:n,pagination:a}});return o.jsxs("div",{className:`rounded-md border-2 border-primary mx-50 ${s}`,children:[o.jsxs(lo,{children:[o.jsx(co,{children:m.getHeaderGroups().map(u=>o.jsx(it,{children:u.headers.map(p=>o.jsx(mo,{children:p.isPlaceholder?null:ss(p.column.columnDef.header,p.getContext())},p.id))},u.id))}),o.jsx(io,{children:(d=m.getRowModel().rows)!=null&&d.length?m.getRowModel().rows.map(u=>o.jsx(it,{"data-state":u.getIsSelected()&&"selected",children:u.getVisibleCells().map(p=>o.jsx(Mt,{children:ss(p.column.columnDef.cell,p.getContext())},p.id))},u.id)):o.jsx(it,{children:o.jsx(Mt,{colSpan:i.length,className:"h-24 text-center",children:"No results."})})})]}),o.jsxs("div",{className:"flex items-center justify-end space-x-2 p-4",children:[o.jsxs("p",{children:[a.pageIndex+1," of ",m.getPageCount()]}),o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>m.previousPage(),disabled:!m.getCanPreviousPage(),children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>m.nextPage(),disabled:!m.getCanNextPage(),children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:o.jsx("path",{d:"m9 18 6-6-6-6"})})})]})]})},uo=()=>o.jsx("svg",{className:"w-[22px] h-[22px] fill-background inline-block",focusable:"false","aria-hidden":"true",viewBox:"0 0 32 32","data-qa-id":"RemoveCircleIcon",children:o.jsx("path",{d:"M15.5 3.5c-7.18 0-13 5.82-13 13s5.82 13 13 13c7.18 0 13-5.82 13-13s-5.82-13-13-13zM22 16.875c0 0.553-0.448 1-1 1h-11c-0.553 0-1-0.447-1-1v-1c0-0.552 0.447-1 1-1h11c0.552 0 1 0.448 1 1v1z"})}),_r=()=>o.jsx("svg",{className:"w-[22px] h-[22px] fill-current inline-block",focusable:"false","aria-hidden":"true",viewBox:"0 0 32 32","data-qa-id":"RemoveCircleIcon",children:o.jsx("path",{d:"M15.5 29.5c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM21.938 15.938c0-0.552-0.448-1-1-1h-4v-4c0-0.552-0.447-1-1-1h-1c-0.553 0-1 0.448-1 1v4h-4c-0.553 0-1 0.448-1 1v1c0 0.553 0.447 1 1 1h4v4c0 0.553 0.447 1 1 1h1c0.553 0 1-0.447 1-1v-4h4c0.552 0 1-0.447 1-1v-1z"})}),kr=({showTable:e=!1})=>e?o.jsx(_r,{}):o.jsx(uo,{}),Or=({dataKeys:e,data:t,tableOpenedByDefault:s=!1})=>{var h;const[n,r]=b.useState(t.length-1),[a,l]=b.useState(s),c=t.flat(),m=c.length>30?t:[c],d=n===0?"rounded-tl-none":"",u=n===t.length-1?"rounded-tr-none":"",p=d||u||"";return o.jsxs("div",{className:"mb-4",children:[m.length>0&&o.jsx("div",{className:"px-50 flex flex-row justify-stretch gap-x-1",children:m.map((g,f)=>o.jsx(O,{className:`rounded-lg relative w-full px-0 py-1 h-full ${n===f&&a?"slice rounded-t-lg rounded-b-none border-b-4 border-primary hover:bg-primary":"mb-1 bg-secondary hover:bg-secondary"}`,onClick:()=>{n===f&&l(!a),n!==f&&!a&&l(!0),r(f)},children:n===f?o.jsx(kr,{showTable:a}):o.jsx(uo,{})},f))}),((h=m[n])==null?void 0:h.length)>0&&a&&o.jsx(Ir,{data:m[n],dataKeys:e,addClass:p})]})},Lr=(e,t)=>{const s=e&&os(new Date(e))+1,n=t&&os(new Date(t))+1;return!!(s&&n&&s!==n)},Mr=(e,t)=>{const s=e&&dt(new Date(e)),n=t&&dt(new Date(t));return!!(s&&n&&s!==n)},hs=e=>(t,s)=>{const n=t&&dt(new Date(t)),r=s&&dt(new Date(s));return!!(n&&r&&n%e>0&&r%e===0)},$r=(e,t)=>{const s=e&&mt(new Date(e))+1,n=t&&mt(new Date(t))+1;return!!(s&&n&&s!==n)},Fr=e=>(t,s)=>{const n=t&&mt(new Date(t))+1,r=s&&mt(new Date(s))+1;return!!(n&&r&&n%e>0&&r%e===0)},Ur=(e,t)=>{const s=e&&ns(new Date(e)),n=t&&ns(new Date(t));return!!(s&&n&&s!==n)},Gr={"1day":Lr,"1week":Mr,"2week":hs(2),"3week":hs(3),"1month":$r,"1quarter":Fr(3),"1year":Ur},Vr=(e,t,s=[])=>{const n=[];return s.forEach(r=>{const l=(n.at(-1)||[]).at(-1)||{};!l[e]||Gr[t](l[e],r[e])?n.push([r]):n.at(-1).push(r)}),n},Br=(e=[])=>{const{mergedAt:t}=e.at(0),{mergedAt:s}=e.at(-1),n=fe(new Date(s),new Date(t)),r=[{batchType:"1year",maxPoints:Math.ceil(n/365)},{batchType:"1quarter",maxPoints:Math.ceil(n/89)},{batchType:"1month",maxPoints:Math.ceil(n/30)},{batchType:"2week",maxPoints:Math.ceil(n/14)},{batchType:"1week",maxPoints:Math.ceil(n/7)},{batchType:"1day",maxPoints:n}],{batchType:a}=r.reduce((l,c)=>!l.maxPoints||Math.abs(c.maxPoints-15)<Math.abs(l.maxPoints-15)?c:l,{});return Vr("mergedAt",a,e)},ho=(e=[])=>e.length<1?[]:Br(e),$t=e=>(t=[])=>t.reduce((s,n)=>(n[e]||0)+s,0),qr=e=>t=>e.reduce((s,n)=>s+(t&&t[n]||0),0),be=(e=[])=>(t,s)=>{const n=qr(e),r=n(t);return n(s)-r},Kr=e=>(t,s)=>e==="DESC"?new Date(s).getTime()-new Date(t).getTime():new Date(t).getTime()-new Date(s).getTime(),po=e=>{const t=[];return e.forEach(({data:s})=>{const n=s.map(r=>r.y);t.push(...n)}),t.sort((s,n)=>s-n)},ps=e=>{const t=po(e),s=Math.round(t.length*.95),n=t[s]||0,r=t.at(-1)||0,a=n&&Math.round(n/r*100)||0;return n&&a<30?n:r},gs=e=>{const t=po(e),s=t.length>0?Ln(Math.min,t):0;return s>0?0:s},zr=e=>{const t=new Date(e),s=t.getMonth()+1,n=t.getDate();return`${t.getFullYear()}-${s<10?`0${s}`:s}-${n<10?`0${n}`:n}`},Hr=({filteredBatch:e=[]})=>{const t={};return e.forEach(s=>"prSize"in s&&(t[s.author]=1)),Math.round(e.length/Object.keys(t).length)},Wr=({filteredBatch:e=[],dataKey:t})=>{const s=t,n=e.sort(be([s])),r=n.length,a=r>4?n.slice(Math.ceil(r*.05),Math.floor(r*.95)):n,l=a.reduce((c,i)=>c+(s&&i[s]||0),0)/a.length;return Math.round(l)},Yr=({filteredBatch:e=[],dataKey:t="comments"})=>{const s=new Set([]),n={};e.forEach(g=>{if(!("prSize"in g))return;const{teamApprovers:f={},teamCommenters:x={}}=g,E=/approvals/i.test(t)?f:x;Object.entries(E).forEach(([v,y])=>{n[v]=(n[v]||0)+y});const S=[...Object.keys(f)||[],...Object.keys(x)||[]];S.length>0&&S.map(v=>s.add(v))});const r={};s.forEach(g=>r[g]=0);const a={...r,...n},l=Object.values(a),c=l.length,i=l.reduce((g,f)=>g+f,0),m=i/c,d=m*(c-1)+(i-m),u=l.reduce((g,f)=>g+Math.abs(f-m),0),p=d-u,h=Math.round(100/d*p);return isNaN(h)?0:h},Qr=({filteredBatch:e=[],dataKey:t="comments"})=>{const s=e.length,r=e.filter(l=>!l[t]).length;return r>0?Math.round((s-r)/s*100):0},Xr=({filteredBatch:e,dataKey:t})=>{const s=e.length,n=e.sort(be([t])),r=Math.floor(s/2);return n[r][t]||0},Jr=({filteredBatch:e})=>e.reduce((s=0,n)=>{if(!("prSize"in n))return s;const{additions:r=0,deletions:a=0}=n;return s+(r-a)},0),Zr=({filterForKey:e=!1,dataKey:t,groupMath:s="average"},n=[])=>{const r=[];return n.forEach(a=>{const l=a.filter(i=>t&&e?/\d+/.test(`${i[t]}`):!0),c=l.length;if(!e||c>0){const i={average:()=>c>0?Math.round($t(t)(l)/c):0,trimmedAverage:Wr,sum:()=>$t(t)(l),count:()=>c,averagePerDev:Hr,median:Xr,percentWith:Qr,teamDistribution:Yr,growth:Jr};r.push({y:i[s]({filteredBatch:l,dataKey:t}),x:zr(a[0].mergedAt)})}}),r},fs=({lines:e=[]})=>{const t=[];return e.forEach(s=>{const{label:n,color:r,data:a}=s,l=ho(a),c=Zr(s,l);c.length&&t.push({id:n,color:r,data:c})}),t},ea=(e,t,s)=>{let n,r;s.forEach(({data:i=[]})=>{const m=i[0].x,d=i[i.length-1].x;(!n||new Date(m)<n)&&(n=new Date(m)),(!r||new Date(d)>r)&&(r=new Date(d))});const a={MAJOR:"primary",MINOR:"secondary",PATCH:"tertiary",EVENT:"primary"},l=[0,18,36,54,72,90];return e.filter(({date:i,releaseType:m})=>{const d=new Date(i);return m!=="PATCH"&&d>n&&d<r}).map((i,m)=>({axis:"x",value:new Date(i.date).getTime(),legend:i.description,...t.markers[a[i.releaseType]]||{},legendOffsetY:l[m%l.length]}))},ta=e=>{const t=`${e}`,s=Math.ceil(t.length*.4),[n]=t.split("").reduceRight(([a=[],l=!1],c,i)=>{const m=parseInt(c),d=l?m+1:m,u=i!==0&&(d>9||i>s&&d>4),p=u||i>s?0:d;return[[...a,p],u]},[[],!1]);return n.reverse().join("")},Ce=(e=[])=>{var i,m,d,u;const t=ho(e),s=t.at(0)||[],n=t.at(-1)||[],r=s.at(0)&&new Date(((i=s.at(0))==null?void 0:i.mergedAt)||((m=s.at(0))==null?void 0:m.createdAt)),a=n.at(0)&&new Date(((d=n.at(0))==null?void 0:d.mergedAt)||((u=n.at(0))==null?void 0:u.createdAt)),l=r&&a?fe(a,r):0,c=[];return t.forEach((p=[])=>{const h=c.length,g=new Date((p.at(0)||{}).mergedAt||(p.at(0)||{}).createdAt),f=fe(g,r),x=Math.floor(f/l*100),E=10*h;h<1||x>=E&&h<10?c.push(p):c.at(-1).push(...p)}),c},sa=(e=[])=>{const t=[];return e.forEach(({data:s=[]})=>{t.push(new Date(s.at(0).x)),t.push(new Date(s.at(-1).x))}),t},oa=(e=[],t=[])=>{const s=sa([...e,...t]),n=Mn(s),r=$n(s);return Fn(r,n)},go=({pullRequests:e=[],showNames:t=!0,usersInfo:s={}})=>{const n={};return e.forEach(l=>{const{author:c}=l,i=n[c]||[];i.push(l),n[c]=i}),[{lines:Object.entries(n).map(([l="",c=[]],i)=>{var d;const m=c.map(u=>({value:1,mergedAt:u.mergedAt}));return{label:t?((d=s[l])==null?void 0:d.name)||l:`${Array(i).fill(" ").join("")}Spartacus`,color:_[i%_.length],dataKey:"value",groupMath:"count",data:m}}),xAxis:"left"}]},fo=(e="repo",t={})=>{const s=Object.entries(t).sort(([,i],[,m])=>i-m),n=s.slice(-20),r=s.length>19?n.map(([i])=>i):Object.keys(t),a=n.map(([i,m],d)=>({id:i,label:i,color:_[d%_.length],value:m})),l=s.length>r.length?`PR rainbow split by top 20 ${e}s out of ${s.length}`:`PR ${e} rainbow (${r.length})`;return{pieData:a,reportItems:r,pieTitle:`PR by ${e} rainbow`,sectionTitle:l}},na=e=>{var n;const t=r=>{const a=r.data.yFormatted,l=r.data.originalY;return/[\d.]/.test(l)?l:a},s=((n=e==null?void 0:e.slice)==null?void 0:n.points)||[];return o.jsx($s,{rows:s.map((r,a)=>[o.jsx("span",{style:{display:"block",width:"12px",height:"12px",background:r.serieColor}},a),r.serieId,o.jsx("strong",{children:t(r)},a)])})},ra=(e=[])=>({series:t,lineGenerator:s,xScale:n,yScale:r})=>t.map((a={})=>{const{id:l,data:c,color:i}=a,{lineStyles:m={strokeWidth:2}}=e.find(d=>d.label===l)||{};return o.jsx("path",{d:s(c.map(d=>({x:n(d.data.x),y:r(d.data.y)}))),fill:"none",stroke:i,style:m},l)}),xs=(e=[])=>e.filter(t=>t.yMax).map(t=>t.yMax),ys=(e,t)=>t-e,Y=({title:e,combineTitles:t=!1,blockHeading:s=!1,data:n=[],markers:r=[],showLegends:a=!1,tableData:l=[],tableKeys:c=[],graphInfo:i,setGraph:m=()=>{},graphs:d=[],tableOpenedByDefault:u=!1}={})=>{const{theme:p}=K(),h=nt(p),{showNumbers:g}=ot(),f=n.find(({xAxis:P})=>P==="left")||{data:[],lines:[],xAxis:"left"},x=xs(f.lines),E=fs(f),[S]=[...x,ps(E)].sort(ys),v=gs(E),y=n.find(({xAxis:P})=>P==="right")||{data:[],lines:[],xAxis:"right"},w=xs(y.lines),T=fs(y),[j]=[...w,ps(T)].sort(ys),D=gs(T),L=S||j,B=v>D?D:v,C=[];T.forEach(P=>{const k=P.data.map(U=>({y:U.y<0?U.y:Math.round(U.y*(L/j)),x:U.x,originalY:U.y}));k.length&&C.push({...P,data:k})});const F=f.lines,de=!t&&e||s?[]:F,me=y.lines,Re=[...f.lines,...y.lines],ee=Re.map(P=>({label:P.label,default:P.color,current:P.color,clicked:!1})),[H=[],z]=b.useState(ee);(ee.length!==H.length||H.length===1&&H[0].color!==ee[0].color)&&z(ee);const V="rgba(120, 119, 120, 0.27)",ue=(P={})=>{const k=ee.findIndex(U=>U.label===P.label);z(H.map((U,q)=>({...U,current:q===k||U.clicked?U.default:V})))},Ae=()=>{const P=H.some(k=>k.clicked);z(H.map(k=>({...k,current:P&&k.clicked||!P?k.default:V})))},he=(P={})=>{const k=ee.findIndex(q=>q.label===P.label),U=H.map((q,te)=>{const X=te===k&&!q.clicked;return{...q,current:X||te!==k&&q.clicked?q.default:V,clicked:te===k?X:q.clicked}});z(U)},ce={anchor:"top-right",direction:"column",justify:!1,translateX:-10,translateY:10,itemsSpacing:0,itemDirection:"right-to-left",itemWidth:80,itemHeight:20,itemOpacity:1,symbolSize:12,symbolShape:"square",symbolBorderColor:"rgba(0, 0, 0, .9)",itemTextColor:h.textColor},Ee=[];if(y.lines.length<1&&F.length>10){const P=[],k=[],U=Math.ceil(F.length/2);F.forEach(({label:q,color:te},X)=>{const{current:se}=H.find(pe=>pe.label===q)||{},J={label:q,color:se||te};X<U?P.push(J):k.push(J)}),Ee.push({...ce,data:P,anchor:"top-left",direction:"column",translateX:10,itemDirection:"left-to-right"},{...ce,data:k})}const rt=Ee.length>0?Ee.map(P=>({...P,onMouseEnter:ue,onMouseLeave:Ae,onClick:he})):[{...ce,onMouseEnter:ue,onMouseLeave:Ae,onClick:he}],Te=E.concat(C),_e=ea(r,h,Te),De=P=>P.some(k=>((k==null?void 0:k.data)||[]).length),He=oa(E,T)>90?"%Y":"%y/%m";return De(Te)&&o.jsxs("div",{className:"z-10 w-full max-w-mw",children:[i&&d.length>0&&o.jsx(ao,{graphInfo:i,setGraph:m,graphs:d}),o.jsxs("div",{className:"flex flex-wrap justify-between",children:[o.jsx(Ge,{type:"line",text:e,items:de}),!s&&me.length>0&&o.jsx(Ge,{type:"line",items:me})]}),o.jsx("div",{className:"chart-wrap",children:o.jsx(Un,{margin:{top:14,right:50,bottom:50,left:50},data:Te,colors:H.map(P=>P.current),lineWidth:2,curve:"monotoneX",animate:!1,isInteractive:g,xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",min:B,max:L},axisBottom:{format:He,tickSize:0,tickPadding:10,tickRotation:-45},legends:a?rt:[],axisLeft:{...!g&&{renderTick:void 0},tickSize:0,tickValues:8},pointLabelYOffset:0,..._e.length&&{markers:_e},...C.length&&{axisRight:{...!g&&{renderTick:void 0},tickSize:0,tickValues:8,format:P=>{const k=Math.round(P*(j/L));return P<0?P:ta(k)}}},enableGridX:!1,enableSlices:"x",sliceTooltip:na,theme:h,layers:["grid","markers","areas",ra(Re),"slices","points","axes","legends"]})}),l.length>0&&o.jsx(Or,{data:l,dataKeys:c,tableOpenedByDefault:u})]})},aa=(e,t)=>{const s=(e==null?void 0:e.date)||"",n=(t==null?void 0:t.date)||"";return new Date(s).getTime()-new Date(n).getTime()},Ze=e=>(e==null?void 0:e.description)||"",la=(e,t)=>{let s;try{s=Fs.lt(Ze(e),Ze(t))?-1:1}catch{s=0}return s},xo=(e=[])=>{const t=e.filter(a=>/^v?\d+\.\d+\.\d+$/.test(Ze(a))).sort(la),s=t.map((a,l)=>{const c=Ze(a);let i="";try{const u=l>0?Ze(t[l-1]):"v0.0.0",p=Fs.diff(u,c)||"EMPTY";i={minor:"MINOR",major:"MAJOR",patch:"PATCH",premajor:"PATCH",preminor:"PATCH",prepatch:"PATCH",prerelease:"PATCH",EMPTY:"PATCH"}[p]||"PATCH"}catch{i="PATCH"}const m=/T/.test(a.date)?a.date.split("T")[0]:a.date;return{...a,date:m,releaseType:i||"MAJOR"}}),n=s.length>70?a=>a.releaseType!=="PATCH":()=>!0;return s.filter(n).sort((a,l)=>aa(a,l))},Ie=({usersInfo:e={},releases:t=[],events:s=[]})=>{const n=[];Object.values(e).forEach(({name:c="",userId:i="",dates:m=[]})=>{m.forEach(d=>{const{startDate:u,endDate:p}=d;u&&n.push({date:u,description:c||i,releaseType:"MINOR"}),p&&n.push({date:p,description:c||i,releaseType:"PATCH"})})});const r=s.map(({date:c,name:i}={})=>({date:c,description:i,releaseType:"EVENT"})),a=(c,i)=>{const m=(c==null?void 0:c.date)||"",d=(i==null?void 0:i.date)||"";return new Date(m).getTime()-new Date(d).getTime()};return[...n,...r,...t].sort(a)},ca=(e=[],t=[])=>s=>{const n=m=>{const d=m.dataKey;return["isBug","isFeature"].includes(d)?t.filter(({isBug:h=!1})=>h&&d==="isBug"||!h&&d==="isFeature"):e},{left:r=[],right:a=[]}=s,l={lines:r.map(m=>({...m,data:n(m)})),xAxis:"left"},c={lines:a.map(m=>({...m,data:n(m)})),xAxis:"right"};return[...r.length>0?[l]:[],...a.length>0?[c]:[]]},ia=e=>{const t=[...(e==null?void 0:e.left)||[],...(e==null?void 0:e.right)||[]].map(n=>n.dataKey);return t.length>0?[...t,"author"]:["comments","approvals","age","prSize","author"]};let da=1;const ma=()=>++da,ua=(e=[])=>{const t=[];return e.forEach(({left:s=[],right:n=[]})=>{s.forEach(r=>(r==null?void 0:r.groupMath)&&t.push(r.groupMath)),n.forEach(r=>(r==null?void 0:r.groupMath)&&t.push(r.groupMath))}),t},ha=(e=[])=>ua(e).includes("trimmedAverage"),pa=({chunkyData:e=[],pullRequests:t=[],issues:s=[],releases:n=[],events:r=[],usersInfo:a={},tableOpenedByDefault:l=!1})=>{const{theme:c}=K(),i=$[c].secondary,m=$[c].primary,d=Ie({events:r,releases:n,usersInfo:a}),u=[{graphId:1,left:[{label:"*Trimmed Average PR Age (days)",color:i,dataKey:"age",groupMath:"trimmedAverage"}],right:[{label:"*Trimmed Average PR Size",color:m,dataKey:"prSize",groupMath:"trimmedAverage"}]}],[p,h]=b.useState(u),g=ha(p),f=ca(t,s);return t.length>0&&o.jsxs(Q,{children:[o.jsxs(ie,{title:"Your graphs",expandText:"guidance",children:[o.jsx("p",{children:"You can build multiple graphs with data you want to see to help you find insights and track trends."}),o.jsx("p",{children:"Questions worth asking (with team context):"}),o.jsxs("ul",{children:[o.jsx("li",{children:"What metrics do you want to look and and compare against?"}),o.jsx("li",{children:"Any insights or things you would like to try to impact these metrics?"}),o.jsx("li",{children:"This graph initially had PR age and size as they are often impactful metrics, what do you think about the trends of these metrics?"})]})]}),o.jsxs(we,{children:[p.map((x,E)=>{var v,y;const S=f(x);return((v=x==null?void 0:x.left)==null?void 0:v.length)<1&&((y=x==null?void 0:x.right)==null?void 0:y.length)<1?o.jsx(ao,{graphInfo:x,setGraph:h,graphs:p},E):o.jsx(Y,{graphInfo:x,setGraph:h,graphs:p,blockHeading:!0,markers:d,showLegends:!1,data:S,tableKeys:ia(x),tableData:e,tableOpenedByDefault:E===0&&l},E)}),g&&o.jsx("p",{children:"*Trimmed average is the average after the top and bottom 5% is trimmed."})]}),o.jsxs("div",{className:"flex flex-nowrap basis-full justify-center gap-x-3 mb-08",children:[p.length>1&&o.jsx(O,{variant:"secondary",onClick:x=>{x.preventDefault(),h(p.slice(0,-1))},children:"Remove above graph"}),o.jsx(O,{onClick:x=>{x.preventDefault(),h([...p,{graphId:ma(),left:[],right:[]}])},children:"Add another custom graph"})]})]})},ga=e=>({issues:e.issues,releases:e.releases,events:e.fetches.events,usersInfo:e.fetches.usersInfo}),Rt=M(ga)(pa),yo=(e,t)=>t.some(s=>e.some(n=>n[s])),ut=({data:e=[],bars:t=[],sortBy:s="",indexBy:n="user",max:r=20,title:a=""})=>{const{theme:l}=K(),c=nt(l),{showNumbers:i}=ot(),m=Us(g=>t.some(f=>g[f.dataKey]),e),d=g=>(f,x)=>+((f[g]||0)<(x[g]||0))||+((f[g]||0)===(x[g]||0))-1,u=s?m.sort(d(s)):m,p=r?u.slice(0,r):u,h=t.map(g=>g.dataKey);return yo(e,h)&&o.jsxs("div",{className:"w-full max-w-mw mb-4",children:[o.jsx(Ge,{text:a,items:t}),o.jsx("div",{className:"chart-wrap",children:o.jsx(Gn,{data:p,keys:h,indexBy:n,margin:{top:5,right:50,bottom:60,left:50},padding:.3,groupMode:"grouped",layout:"vertical",valueFormat:g=>`${g}`,colors:t.map(g=>g.color),axisBottom:{tickSize:0,tickRotation:-45},axisLeft:{...!i&&{renderTick:void 0},tickSize:0},isInteractive:i,enableLabel:!1,animate:!1,theme:c})})]})},fa=(e,t,s=!1)=>{const n={},r={};e.forEach(u=>{const p=u.author,h=u[t]||{},g=Ct(Object.values(h));n[p]=g,r[p]=u.name||p});const a=Object.entries(n).sort(([,u],[,p])=>p-u),l=Ct(Object.values(n)),c=u=>{const p=100/l;return u*p},i=[];a.forEach(([u,p])=>{const h=c(p);p>0&&h>5&&i.push(u)});const m=i.length===e.length-1?a.map(([u])=>u):i,d=s?e.filter(u=>m.includes(u.author)).map(u=>u.author):m;return[d,d.map(u=>r[u]||u)]},xa=(e=[],t)=>{const s=Object.entries(t).filter(([r])=>!e.some(a=>a===r));return Ct(s.map(r=>r[1]))},ya=(e=[],t,s=[],n=!1)=>{const r=c=>[...s.map(i=>{var m;return((m=c==null?void 0:c[t])==null?void 0:m[i])||0}),...n?[xa(s,c[t])]:[]],a=s.map(c=>{const i=e.find(m=>m.author===c);return r(i)});let l=[];return e.forEach(c=>{if(!s.some(i=>i===c.author)){const m=r(c).map((d,u)=>d+(l[u]||0));l=[...m.slice(0,m.length-1),0]}}),[...a,...l.length?[l]:[]]},Ra=({data:e,dataKey:t,preSorted:s,showNames:n=!0})=>{const[r,a]=fa(e,t,s),l=a.length<e.length,c=ya(e,t,r,l),i=[...a,...l?["Others"]:[]];return{names:n?i:i.map((m,d)=>`Spartacus${Array(d).fill(" ").join("")}`),matrix:c}},ht=({title:e,data:t=[],preSorted:s=!1,dataKey:n})=>{const{theme:r}=K(),a=nt(r),{showNumbers:l}=ot(),{showNames:c}=ve(),{names:i,matrix:m}=Ra({data:t,dataKey:n,preSorted:s,showNames:c});return(u=>u.some(p=>p.some(Boolean)))(m)&&o.jsxs("div",{children:[o.jsx(Ge,{text:e,className:"text-center"}),o.jsx("div",{className:"chord-wrap",children:o.jsx(Vn,{label:"id",data:m,keys:i,margin:{top:0,right:10,bottom:10,left:10},arcBorderColor:{from:"color",modifiers:[["darker",.4]]},ribbonOpacity:.5,ribbonBorderWidth:.5,ribbonBorderColor:{from:"color",modifiers:[["darker",.4]]},innerRadiusRatio:.85,labelRotation:0,padAngle:.06,innerRadiusOffset:.03,labelOffset:-23,labelTextColor:{from:"color",modifiers:[["darker",2]]},colors:_,isInteractive:l,activeArcOpacity:1,inactiveArcOpacity:1,activeRibbonOpacity:.75,inactiveRibbonOpacity:.25,animate:!1,motionConfig:"stiff",theme:a})})]})},Ro=({title:e="",data:t=[]})=>{const{theme:s}=K(),n=nt(s),{showNumbers:r}=ot();return t.length&&o.jsxs("div",{className:"z-10 w-full max-w-mw",children:[o.jsx("div",{className:"flex flex-wrap justify-between",children:o.jsx(Ge,{type:"line",text:e})}),o.jsx("div",{className:"pie-wrap",children:o.jsx(Bn,{data:t,colors:{datum:"data.color"},margin:{top:15,right:80,bottom:0,left:80},animate:!1,innerRadius:.65,padAngle:1,cornerRadius:4,activeOuterRadiusOffset:5,borderWidth:1,startAngle:-90,endAngle:90,enableArcLabels:!1,arcLinkLabelsSkipAngle:4,arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLinkLabelsDiagonalLength:10,arcLinkLabelsStraightLength:15,arcLinkLabelsTextColor:n.textColor,theme:n,isInteractive:r})})]})},Ea=({pullRequests:e=[],chunkyData:t=[],usersData:s=[],allRepos:n={},userIds:r=[],releases:a=[],events:l=[],usersInfo:c={}})=>{var T,j;const{theme:i}=K(),m=$[i].secondary,d=$[i].primary,{showNames:u}=ve(),p=Ie({events:l,releases:a,usersInfo:c}),h=r.length||15,g=["commentsGiven","approvalsGiven"],f=s.sort(be(g)),x=f.map((D,L)=>{var B;return{commentsGiven:D.commentsGiven,commentsReceived:D.commentsReceived,uniquePRsApproved:D.uniquePRsApproved,totalPRs:D.totalPRs,author:u?D.author:`${Array(L).fill(" ").join("")}Spartacus`,name:u?((B=c[D.author])==null?void 0:B.name)||D.author:`${Array(L).fill(" ").join("")}Spartacus`}}),E=f.map(D=>{var L;return{...D,name:((L=c[D.author])==null?void 0:L.name)||D.author}}),S=fo("repo",n),v=go({pullRequests:e,showNames:u,usersInfo:c}),y=E.filter(D=>D.approvalsGiven>0).length,w=E.filter(D=>D.commentsGiven>0).length;return s.length>0&&o.jsxs(Q,{children:[o.jsxs(ie,{title:"Contributions",expandText:"guidance",children:[o.jsx("p",{children:"Questions worth asking (with team context):"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Is there a bus factor risk?"}),o.jsx("li",{children:"Are there any data points that stand out?"}),o.jsx("li",{children:"How do the given and received metrics look?"}),o.jsx("li",{children:"How well spread are the collaboration metrics?"}),o.jsx("li",{children:"Any insights or things you would like to try to impact these metrics?"})]})]}),o.jsxs(we,{children:[o.jsxs("div",{className:"flex flex-wrap justify-center w-full",children:[o.jsxs("div",{className:"w-1/2 max-mm:w-full",children:[o.jsx(ut,{data:x,indexBy:"name",title:"Comments",sortBy:"commentsGiven",max:h,bars:[{dataKey:"commentsGiven",color:m,label:"given"},{dataKey:"commentsReceived",color:d,label:"*received"}]}),o.jsx("p",{children:"*Received comments can also come from out of team so can be higher."})]}),o.jsx("div",{className:"w-1/2 max-mm:w-full",children:o.jsx(ut,{data:x,indexBy:"name",title:"PRs",sortBy:"uniquePRsApproved",max:h,bars:[{dataKey:"uniquePRsApproved",color:m,label:"approved"},{dataKey:"totalPRs",color:d,label:"opened"}]})})]}),(w>0||y>0)&&o.jsxs("div",{className:"w-full flex flex-wrap justify-center gap-4",children:[w>0&&o.jsx(ht,{data:E,preSorted:!0,dataKey:"commentsByUser",title:"Comment contributions"}),y>0&&o.jsx(ht,{data:E,preSorted:!0,dataKey:"approvalsByUser",title:"Approval contributions"})]}),o.jsx("p",{children:"These chord charts show how contributions are given and received, the dominant colour indicates more contribution"}),v.length>0&&((j=(T=v==null?void 0:v[0])==null?void 0:T.lines)==null?void 0:j.length)<21&&o.jsx(Y,{title:"PRs by author",markers:p,showLegends:!0,data:v,tableData:t,tableKeys:["author","repo"]}),S.pieData.length>0&&o.jsx(Ro,{data:S.pieData,title:S.sectionTitle})]})]})},Sa=e=>({releases:e.releases,usersData:e.usersData,userIds:e.fetches.userIds,events:e.fetches.events,usersInfo:e.fetches.usersInfo}),qt=M(Sa)(Ea),Eo=b.forwardRef(({className:e,...t},s)=>o.jsx(Gs,{className:N("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:o.jsx(qn,{className:N("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Eo.displayName=Gs.displayName;const va={warn:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 fill-current",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),error:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 fill-current",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})})},Kt=({error:{level:e="error",message:t},className:s})=>{const n=e==="error"?"bg-error":"bg-warn";return o.jsxs("div",{className:`${n} p-3 flex items-center rounded-sm ${s}`,children:[va[e],o.jsx("p",{className:"m-0 ml-2 p-0",children:t})]})},wa=(e,t)=>[e&&"fetching",t.length&&"Get more data","Get data"].find(Boolean),ba=e=>{const{fetching:t,error:s,pullRequests:n=[],qaId:r}=e;return o.jsxs("div",{className:"grid grid-cols-1 gap-2 max-mm:grid-cols-2",children:[o.jsx(O,{className:"m-0 w-full col-span-full",type:"submit",disabled:t,color:"primary","data-qa-id":r,children:wa(t,n)}),s&&o.jsx(Kt,{error:s,className:"col-span-full"})]})},Aa=e=>({fetching:e.fetching,error:e.error,pullRequests:e.pullRequests}),So=M(Aa)(ba),Ta=e=>{const{setValue:t,amountOfData:s,pullRequests:n=[],preFetchedName:r="",className:a=""}=e,l=!r&&n.length>0,c=i=>`Get ${i} ${i===1?"month":"months"} ${l?"more ":""}data`;return o.jsxs(Me,{onValueChange:i=>t("amountOfData",i==="all"?i:Number(i)),value:`${s}`,children:[o.jsx(Ne,{className:`w-auto ${a}`,children:o.jsx(Fe,{children:s==="all"?"Get it all!":c(Number(s))})}),o.jsx(Pe,{children:o.jsxs($e,{children:[o.jsx(Z,{value:"1",children:c(1)}),o.jsx(Z,{value:"3",children:c(3)}),o.jsx(Z,{value:"6",children:c(6)}),o.jsx(Z,{value:"12",children:c(12)}),o.jsx(Z,{value:"24",children:c(24)}),o.jsx(Z,{value:"all",children:"Get it all!"})]})})]})},Da=e=>({pullRequests:e.pullRequests,preFetchedName:e.preFetchedName}),vo=M(Da)(Ta),wo=b.forwardRef(({className:e,type:t,...s},n)=>o.jsx("input",{type:t,"data-qa-id":`input-${t}`,className:N("flex mt-8 h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground  focus:border-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring  disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));wo.displayName="Input";const bo={org:"Organization",repo:"Repository",team:"Team name (from GitHub Org team url)",gitTeamUrl:"Org's team url",token:"Token",excludeIds:"Exclude GitHub users e.g. remove bot PRs and comments, ',' separated",enterpriseAPI:"Enterprise API full url",userIds:"Comma separated list GitHub users",userId:"GitHub user ID",startDate:"Joined yyyy/mm/dd",endDate:"Left yyyy/mm/dd",events:"Comma separated list of events (optional)",teamName:"Team name",name:"Name"},ja=({dates:e=[]})=>{const t=e.every(({startDate:a="",endDate:l=""})=>{const c=!a||It(new Date(a)),i=!l||It(new Date(l));return c&&i}),s=[];e.forEach(({startDate:a="",endDate:l=""})=>{a&&s.push(a),l&&s.push(l)});const n=zn((a,l)=>new Date(a).getTime()-new Date(l).getTime(),s),r=re(s,n);return t&&r},Na=(e={})=>{const t=Object.values(e).every(s=>ja(s));return Object.keys(e).length>0&&t},Rs=(e="")=>!e||/^\d{4}[/-]\d{2}[/-]\d{2}$/.test(e)&&It(new Date(e)),Ao=({key:e,value:t})=>le([[re("gitTeamUrl"),A(/^(https:\/\/.+\..+$)/.test(t))],[re("enterpriseAPI"),A(/^(https:\/\/.+\..+|^$)/.test(t))],[re("excludeIds"),A(/^([\w-.,\s]+|)$/.test(t))],[re("events"),A(/^([\w-.,&\s=]+|)$/.test(t))],[re("name"),A(/.?/.test(t))],[re("usersInfo"),()=>Na(t)],[re("startDate"),()=>Rs(t)],[re("endDate"),()=>Rs(t)],[G,A(/^[\w-_.]+$/.test(t))]])(e),Pa=e=>t=>{const s=e[t];return!Ao({key:t,value:s})},To=e=>{const t=Pa(e),s={};return Object.keys(e).forEach(r=>{s[r]=t(r)}),{isValid:Object.values(s).every(r=>!r),validationErrors:s}},Ft=(e,t)=>{const s=e[t],n=typeof s=="object"?"":s;return Array.isArray(s)?Kn(", ",s):n},W=e=>{const{type:t,className:s="",inputError:n={},setInputError:r=()=>{},formInfo:a={},setValue:l}=e,c=n[t]?"border-red-500":"";return o.jsxs(tt,{children:[o.jsx("p",{className:"mb-1 block",children:bo[t]}),o.jsx(wo,{className:`${s} m-0 w-full ${c}`,value:Ft(a,t),type:t,onBlur:i=>{const m=I("",["target","value"],i),d=Ao({key:t,value:m});r({...n,[t]:!d}),d&&l(t,m)},onChange:i=>{const m=I("",["target","value"],i);r({...n,[t]:!1}),l(t,m)},onFocus:()=>r({...n,[t]:!1})}),o.jsx("p",{className:"text-red-500 text-xs",children:n[t]&&"Invalid input"})]})},Do=Bs,Ca=qs,jo=Vs,zt=b.forwardRef(({className:e,...t},s)=>o.jsx(gt,{ref:s,className:N("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));zt.displayName=gt.displayName;const No=b.forwardRef(({className:e,children:t,...s},n)=>o.jsxs(jo,{children:[o.jsx(zt,{}),o.jsxs(Be,{ref:n,className:N("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,o.jsxs(Vt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[o.jsx("path",{d:"M18 6 6 18"}),o.jsx("path",{d:"m6 6 12 12"})]}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));No.displayName=Be.displayName;const Po=b.forwardRef(({className:e,children:t,...s},n)=>o.jsxs(jo,{children:[o.jsx(zt,{}),o.jsx(Be,{ref:n,className:N("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:t})]}));Po.displayName=Be.displayName;const ze=b.forwardRef(({className:e,...t},s)=>o.jsx(ft,{ref:s,className:N("text-lg font-semibold leading-none tracking-tight",e),...t}));ze.displayName=ft.displayName;const Ia=b.forwardRef(({className:e,...t},s)=>o.jsx(xt,{ref:s,className:N("text-sm text-muted-foreground",e),...t}));Ia.displayName=xt.displayName;const _a=({onSubmit:e=()=>{},gitUsers:t=[],usersInfo:s={}})=>{const n=Object.entries(s).map(([E,{name:S="",dates:v=[]}])=>({userId:E,name:S,dates:v})),r=n.length>0?n:[{userId:"",name:"",dates:[]}],[a,l]=b.useState(r),c=E=>(S,v)=>{const y=[...a];y[E][S]=v,l(y)},i=(E,S)=>(v,y)=>{const w=[...a];w[E].dates[S][v]=y,l(w)},m=E=>{E.preventDefault();const S={};a.forEach(({userId:v,name:y,dates:w})=>{S[v]={userId:v,name:y,dates:w}}),e(S)},d=E=>{E.preventDefault(),l([...a,{userId:"",name:"",dates:[]}])},u=(E,S)=>{S.preventDefault();const v=[...a];v.splice(E,1),l(v)},p=(E,S)=>{S.preventDefault();const v=[...a],y={startDate:"",endDate:""};v[E].dates.push(y),l(v)},h=({userIndex:E,dateIndex:S})=>{const v=[...a],w=v[E].dates.filter((T,j)=>j!==S);v[E].dates=w,l(v)},[g,f]=b.useState({}),x=t.length>0&&"Edit Github Team members"||Object.keys(s).length>0&&"Edit team members"||"Or manually add team members";return o.jsxs("form",{children:[o.jsx("h4",{children:x}),a.map((E,S)=>o.jsxs("div",{className:"grid grid-cols-1 gap-2 max-mm:grid-cols-2 mb-8",children:[o.jsx(W,{type:"userId",formInfo:E,inputError:g,setInputError:f,setValue:c(S)}),o.jsx(W,{type:"name",formInfo:E,setValue:c(S),inputError:g,setInputError:f}),E.dates.map((v,y)=>o.jsxs("div",{className:"flex items-stretch gap-2 justify-between col-span-full",children:[o.jsx(W,{type:"startDate",formInfo:v,inputError:g,setInputError:f,setValue:i(S,y)}),o.jsx(W,{type:"endDate",inputError:g,formInfo:v,setInputError:f,setValue:i(S,y)}),o.jsx("svg",{onClick:()=>h({userIndex:S,dateIndex:y}),className:"w-6 fill-current min-h-12 rounded-sm bg-destructive test-[#CCC] px-0 py-2 h-auto",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-testid":"DeleteIcon",children:o.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})})]},y)),o.jsx(O,{className:"min-h-12 m-0",color:"primary",onClick:v=>p(S,v),children:`Add ${E.dates.length>0?"more dates":"dates"}`}),o.jsx(O,{className:"bg-destructive text=[#CCC] min-h-12 m-0",onClick:v=>u(S,v),children:"Remove User"})]},S)),o.jsx(O,{className:"mr-0 w-full min-h-12",color:"primary",onClick:E=>d(E),children:"Create new user"}),o.jsx(O,{className:"mr-0 w-full min-h-12",color:"primary",onClick:E=>m(E),children:"Save and close"})]})},R={SET_TEAM_NAME:"SET_TEAM_NAME",CLEAR_TEAM_NAME:"CLEAR_TEAM_NAME",STORE_ORG:"STORE_ORG",CLEAR_ORG:"CLEAR_ORG",STORE_TOKEN:"STORE_TOKEN",STORE_FORM_UNTIL_DATE:"STORE_FORM_UNTIL_DATE",CLEAR_FORM_UNTIL_DATE:"CLEAR_FORM_UNTIL_DATE",STORE_UNTIL_DATE:"STORE_UNTIL_DATE",CLEAR_UNTIL_DATE:"CLEAR_UNTIL_DATE",SET_PR_PAGINATION:"SET_PR_PAGINATION",CLEAR_PR_PAGINATION:"CLEAR_PR_PAGINATION",SET_PR_REVIEWED_PAGINATION:"SET_PR_REVIEWED_PAGINATION",CLEAR_PR_REVIEWED_PAGINATION:"CLEAR_PR_REVIEWED_PAGINATION",SET_RELEASES_PAGINATION:"SET_RELEASES_PAGINATION",CLEAR_RELEASES_PAGINATION:"CLEAR_RELEASES_PAGINATION",SET_ISSUES_PAGINATION:"SET_ISSUES_PAGINATION",CLEAR_ISSUES_PAGINATION:"CLEAR_ISSUES_PAGINATION",SET_DESC:"SET_DESC",CLEAR_DESC:"CLEAR_DESC",FETCH_STATUS:"FETCH_STATUS",FETCH_START:"FETCH_START",PRE_FETCH_ERROR:"PRE_FETCH_ERROR",CLEAR_PRE_FETCH_ERROR:"CLEAR_PRE_FETCH_ERROR",FETCH_ERROR:"FETCH_ERROR",CLEAR_FETCH_ERROR:"CLEAR_FETCH_ERROR",FETCH_END:"FETCH_END",STORE_REPOS:"STORE_REPOS",STORE_REPO:"STORE_REPO",CLEAR_REPO:"CLEAR_REPO",STORE_AMOUNT:"STORE_AMOUNT",STORE_SORT:"STORE_SORT",STORE_ENT_URL:"STORE_ENT_URL",STORE_EX_IDS:"STORE_EX_IDS",CLEAR_EX_IDS:"CLEAR_EX_IDS",STORE_EVENTS:"STORE_EVENTS",CLEAR_EVENTS:"CLEAR_EVENTS",STORE_USERS_INFO:"STORE_USERS_INFO",CLEAR_USERS_INFO:"CLEAR_USERS_INFO",STORE_USER_IDS:"STORE_USER_IDS",CLEAR_USER_IDS:"CLEAR_USER_IDS",ADD_ITEMS_DATE_RANGE:"ADD_ITEMS_DATE_RANGE",CLEAR_ITEMS_DATE_RANGE:"CLEAR_ITEMS_DATE_RANGE",ADD_TRIMMED_ITEMS:"ADD_TRIMMED_ITEMS",CLEAR_TRIMMED_ITEMS:"CLEAR_TRIMMED_ITEMS",ADD_PRS:"ADD_PRS",ADD_FILTERED_PRS:"ADD_FILTERED_PRS",CLEAR_PRS:"CLEAR_PRS",CLEAR_FILTERED_PRS:"CLEAR_FILTERED_PRS",ADD_REVIEWED_PRS:"ADD_REVIEWED_PRS",ADD_REVIEWED_FILTERED_PRS:"ADD_REVIEWED_FILTERED_PRS",CLEAR_REVIEWED_PRS:"CLEAR_REVIEWED_PRS",CLEAR_REVIEWED_FILTERED_PRS:"CLEAR_REVIEWED_FILTERED_PRS",ADD_ISSUES:"ADD_ISSUES",ADD_FILTERED_ISSUES:"ADD_FILTERED_ISSUES",CLEAR_FILTERED_ISSUES:"CLEAR_FILTERED_ISSUES",CLEAR_ISSUES:"CLEAR_ISSUES",ADD_RELEASES:"ADD_RELEASES",CLEAR_RELEASES:"CLEAR_RELEASES",ADD_FILTERED_RELEASES:"ADD_FILTERED_RELEASES",CLEAR_FILTERED_RELEASES:"CLEAR_FILTERED_RELEASES",PREFETCHED_NAME:"PREFETCHED_NAME",CLEAR_PREFETCHED_NAME:"CLEAR_PREFETCHED_NAME",ADD_USERS_DATA:"ADD_USERS_DATA",CLEAR_USERS_DATA:"CLEAR_USERS_DATA"},Co=(e,t,s=[])=>new Promise((n,r)=>{const[a,...l]=e;Promise.all(a.map(c=>t(c))).then(c=>l&&l.length?Co(l,t,c).then(i=>n(s.concat(i))).catch(r):n(s.concat(c))).catch(r)}),et=(e=[],t,s=2)=>{const n=Hn(s,e);return e.length?Co(n,t):[]},Ht=(e,t="DESC",s="")=>n=>{const r=I("",e,n),a=r&&new Date(r),l=s?new Date(s):new Date;return t==="DESC"?a&&st(a,l):a&&qe(a,l)},Et=e=>e?` after:"${e}" `:"",Wt=(e,{oldest:t,newest:s})=>{const n=e==="DESC"?t:s,a=n?` ${e==="DESC"?"after":"before"}:"${n}" `:"",l=a?50:10;return`
    ${e==="DESC"?`last: ${l}`:`first: ${l}`}
    ${a}
  `},Yt=e=>({oldest:t,newest:s})=>Et(e==="DESC"?t:s),xe="pageInfo { endCursor hasNextPage hasPreviousPage startCursor }",Ve=e=>`
    comments(first: ${e?100:10} ${Et(e)}) {
      totalCount
      edges {
        node {
          author {
            login
            url
          }
          publishedAt
          body
        }
      }
      ${xe}
    }
`,Io=e=>t=>`
pullRequests(
  first: 50
  ${Yt(e)(t)}
  states: [MERGED]
  orderBy: {field: CREATED_AT direction: ${e}}
) {
  totalCount
  edges {
    node {
      id
      url
      author {
        login
        url
      }
      repository {
        name
        owner {
          login
        }
      }
      additions
      deletions
      mergedAt
      createdAt
      commits(first:1) {
        edges {
          node {
            commit {
              committedDate
            }
          }
        }
      }
      ${ko(void 0)}
      ${Ve(void 0)}
    }
  }
  ${xe}
}`,_o=e=>t=>`
issues(
  ${Yt(e)(t)}
  first: 50
  orderBy: { field:CREATED_AT direction: ${e} }
) {
  totalCount
  edges {
    node {
      title
      url
      createdAt
      closedAt
      state
      labels(first:5) {
        edges {
          node {
            name
          }
        }
      }
    }
  }
  ${xe}
}`,ka=e=>t=>`
releases(
  ${Yt(e)(t)}
  first: 50
  orderBy:{ field:CREATED_AT direction: ${e} }
) {
  totalCount
  edges {
    node {
      id
      name
      createdAt
      tag {
        name
      }
    }
  }
  ${xe}
}`,ko=e=>`
    reviews(first: ${e?100:10} ${Et(e)}) {
      edges {
        node {
          id
          state
          author {
            login
            url
          }
          ${Ve(void 0)}
        }
      }
      ${xe}
    }
`,Oo=(e={},t="",s={},n)=>r=>{const{hasNextPage:a=!1,startCursor:l,endCursor:c}=I({},["data","result",r,"pageInfo"],s),i=I([],["data","result",r,"edges"],s),m=r==="pullRequests"?"mergedAt":"createdAt",d=oe(t)?i.filter(Ht(["node",m],n,t)):[],u={pullRequests:"prPagination",issues:"issuesPagination",releases:"releasesPagination"},h=I(n==="DESC"?c:l,[u[r],"oldest"],e),f=I(n==="ASC"?c:l,[u[r],"newest"],e),x=d.length,E=le([[A(a===!1),ae],[A(!oe(t)),A(a)],[A(x===0),ae],[A(x>0&&i.length>x),ae],[G,A(a)]])();return{newest:n==="ASC"&&c?c:f,oldest:n==="DESC"&&c?c:h,hasNextPage:a,hasNextPageForDate:E}},Oa=(e={},t="",s={},n)=>r=>{const a=r==="usersReviews"?["data","result"]:["data","result",r],{hasNextPage:l=!1,hasPreviousPage:c=!1,startCursor:i,endCursor:m}=I({},[...a,"pageInfo"],s),d=I([],[...a,"edges"],s),u=["pullRequests","usersReviews"].includes(r)?"mergedAt":"createdAt",p=oe(t)?d.filter(Ht(["node",u],n,t)):[],h={commitComments:"commitCommentsPagination",issueComments:"issueCommentsPagination",usersReviews:"usersReviewsPagination"},g=r==="usersReviews"||n==="ASC"?"right":"left",x=I(g==="right"?m:i,[h[r],"oldest"],e),S=I(g==="right"?i:m,[h[r],"newest"],e),v=g==="right"?l:c,y=p.length,w=le([[A(v===!1),ae],[A(!oe(t)),A(v)],[A(y===0),ae],[A(y>0&&d.length>y),ae],[G,A(v)]])();return{newest:g==="right"&&m?m:S,oldest:g==="left"&&i?i:x,hasNextPage:v,hasNextPageForDate:w}},La=(e={},t="",s={},n)=>{const{hasNextPage:r=!1,hasPreviousPage:a=!1,startCursor:l,endCursor:c}=I({},["data","result","pageInfo"],s),i=I([],["data","result","edges"],s),m=oe(t)?i.filter(Ht(["node","mergedAt"],n,t)):[],u=I(n==="DESC"?c:l,["usersReviewsPagination","oldest"],e),h=I(n==="DESC"?l:c,["usersReviewsPagination","newest"],e),g=n==="DESC"?r:a,f=m.length,x=le([[A(g===!1),ae],[A(!oe(t)),A(g)],[A(f===0),ae],[G,A(g)]])();return{newest:n==="ASC"&&l?l:h,oldest:n==="DESC"&&c?c:u,hasNextPage:g,hasNextPageForDate:x}},Qt=e=>{const t=["issues","pullRequests","releases"],[s]=t.map(n=>{var r,a,l;return((l=(a=(r=e==null?void 0:e.data)==null?void 0:r.result)==null?void 0:a[n])==null?void 0:l.totalCount)||0}).sort((n,r)=>r-n);return Math.ceil(s/50)-1},Ma=e=>t=>`
    commitComments(
      ${Wt(e,t)}
    ) {
      edges {
        cursor
        node {
          createdAt
          commit {
            repository {
              nameWithOwner
            }
            url
            associatedPullRequests(last: 10) {
              edges {
                node {
                  number
                  url
                }
              }
            }
          }
          body
        }
      }
      ${xe}
    }
`,$a=e=>t=>`
    issueComments(
      ${Wt(e,t)}
    ) {
      edges {
        cursor
        node {
          createdAt
          url
          repository {
            nameWithOwner
          }
          issue {
            number
          }
          pullRequest {
            number
          }
          body
        }
      }
      ${xe}
    }
`,Fa=e=>({user:t,sortDirection:s="DESC",amountOfData:n,usersReviewsPagination:r={}})=>({query:`{
    result: search(
      query: "type:pr state:closed reviewed-by:${t}"
      type: ISSUE
      ${Wt(s,r)}
    ) {
      issueCount
      ${xe}
      edges {
        node {
          ... on PullRequest {
            id
            number
            url
            author {
              login
              url
            }
            repository {
              name
              owner {
                login
              }
            }
            additions
            deletions
            mergedAt
            createdAt
            ${Ve(void 0)}
            reviews(last: 10 states: [COMMENTED,APPROVED,CHANGES_REQUESTED] author: "${t}") {
              ${xe}
              edges {
                node {
                  id
                  state
                  author {
                    login
                    url
                  }
                  ${Ve(void 0)}
                }
              }
            }
          }
        }
      }
    }
  }`,sortDirection:s,user:t,resultInfo:a=>{const l=La({usersReviewsPagination:r,amountOfData:n},e,a,s),c=le([[A(n==="all"),A(n)],[A(oe(e)),A(n)],[A(Number.isInteger(n)),A(n-1)],[G,Qt]])(a),i={usersReviewsPagination:Object.assign(l,{hasNextPage:!1})},m=oe(e)?"hasNextPageForDate":"hasNextPage";return{hasNextPage:i.usersReviewsPagination[m]===!0,nextPageInfo:{...i,amountOfData:c}}},fillerType:"pullRequests",hasMoreResults:[r.hasNextPage].some(a=>a!==!1)}),Ue=e=>{const{hasNextPageForDate:t}=e;return t!==!1},Lo=e=>({user:t,sortDirection:s="DESC",amountOfData:n,issuesPagination:r={},prPagination:a={},commitCommentsPagination:l={},issueCommentsPagination:c={}})=>({query:`{
    result: user(login: "${t}") {
      login
      ${Ue(c)?$a(s)(c):""}
      ${Ue(l)?Ma(s)(l):""}
      ${Ue(a)?Io(s)(a):""}
      ${r[e?"hasNextPageForDate":"hasNextPage"]!==!1?_o(s)(r):""}
    }
  }`,sortDirection:s,user:t,resultInfo:i=>{const m=Oo({issuesPagination:r,prPagination:a,amountOfData:n},e,i,s),d=Oa({commitCommentsPagination:l,issueCommentsPagination:c,amountOfData:n},e,i,s),u=le([[A(n==="all"),A(n)],[A(oe(e)),A(n)],[A(Number.isInteger(n)),A(n-1)],[G,Qt]])(i);Object.assign(m("pullRequests"),{hasNextPage:!1});const p={prPagination:Object.assign(m("pullRequests"),{hasNextPage:!1}),issuesPagination:Object.assign(m("issues"),{hasNextPage:!1}),commitCommentsPagination:Object.assign(d("commitComments"),{hasNextPage:!1}),issueCommentsPagination:Object.assign(d("issueComments"),{hasNextPage:!1})},h=oe(e)?"hasNextPageForDate":"hasNextPage";return{hasNextPage:Object.values(p).some(f=>f[h]===!0),nextPageInfo:{...p,amountOfData:u}}},hasMoreResults:[a.hasNextPage,r.hasNextPage,l.hasNextPage,c.hasNextPage].some(i=>i!==!1)}),Mo=e=>({org:t,repo:s,sortDirection:n="DESC",amountOfData:r,issuesPagination:a={},releasesPagination:l={},prPagination:c={}})=>({query:`{
      result: repository(name: "${s}" owner: "${t}") {
        id
        description
        name
        owner {
          org: login
        }
        ${Ue(c)?Io(n)(c):""}
        ${Ue(a)?_o(n)(a):""}
        ${Ue(l)?ka(n)(l):""}
      }
    }`,sortDirection:n,resultInfo:i=>{const m=Oo({issuesPagination:a,releasesPagination:l,prPagination:c},e,i,n),d=le([[A(r==="all"),A(r)],[A(oe(e)),A(r)],[A(Number.isInteger(r)),A(r-1)],[G,Qt]])(i),u={prPagination:Object.assign({hasNextPage:!1},m("pullRequests")),issuesPagination:Object.assign({hasNextPage:!1},m("issues")),releasesPagination:Object.assign({hasNextPage:!1},m("releases"))},p=oe(e)?"hasNextPageForDate":"hasNextPage";return{hasNextPage:Object.values(u).some(g=>g[p]===!0),nextPageInfo:{...u,amountOfData:d}}},fillerType:"batchedQuery",hasMoreResults:[c.hasNextPage,a.hasNextPage,l.hasNextPage].some(i=>i!==!1)}),Ua=({nodeId:e,cursor:t})=>({query:`{
      node(id:"${e}") {
          ... on PullRequest {
            id
            ${Ve(t)}
          }
        }
    }`,resultInfo:s=>{var n,r,a,l,c,i,m,d,u,p,h,g,f;return{rawData:s,results:((a=(r=(n=s==null?void 0:s.data)==null?void 0:n.node)==null?void 0:r.comments)==null?void 0:a.edges)||[],hasNextPage:((m=(i=(c=(l=s==null?void 0:s.data)==null?void 0:l.node)==null?void 0:c.comments)==null?void 0:i.pageInfo)==null?void 0:m.hasNextPage)||!1,nextArgs:{nodeId:((u=(d=s==null?void 0:s.data)==null?void 0:d.node)==null?void 0:u.id)||"",cursor:((f=(g=(h=(p=s==null?void 0:s.data)==null?void 0:p.node)==null?void 0:h.comments)==null?void 0:g.pageInfo)==null?void 0:f.endCursor)||""}}},fillerType:""}),Ga=({nodeId:e,cursor:t})=>({query:`{
      node(id:"${e}") {
          ... on PullRequest {
            id
            ${ko(t)}
          }
        }
    }`,resultInfo:s=>{var n,r,a,l,c,i,m,d,u,p,h,g,f;return{rawData:s,results:((a=(r=(n=s==null?void 0:s.data)==null?void 0:n.node)==null?void 0:r.reviews)==null?void 0:a.edges)||[],hasNextPage:((m=(i=(c=(l=s==null?void 0:s.data)==null?void 0:l.node)==null?void 0:c.reviews)==null?void 0:i.pageInfo)==null?void 0:m.hasNextPage)||!1,nextArgs:{nodeId:((u=(d=s==null?void 0:s.data)==null?void 0:d.node)==null?void 0:u.id)||"",cursor:((f=(g=(h=(p=s==null?void 0:s.data)==null?void 0:p.node)==null?void 0:h.reviews)==null?void 0:g.pageInfo)==null?void 0:f.endCursor)||""}}},fillerType:"pullRequestReviewComments"}),Va=({nodeId:e,cursor:t})=>({query:`{
      node(id:"${e}") {
          ... on PullRequestReview {
            id
            ${Ve(t)}
          }
        }
    }`,resultInfo:s=>{var n,r,a,l,c,i,m,d,u,p,h,g,f;return{rawData:s,results:((a=(r=(n=s==null?void 0:s.data)==null?void 0:n.node)==null?void 0:r.comments)==null?void 0:a.edges)||[],hasNextPage:((m=(i=(c=(l=s==null?void 0:s.data)==null?void 0:l.node)==null?void 0:c.comments)==null?void 0:i.pageInfo)==null?void 0:m.hasNextPage)||!1,nextArgs:{nodeId:((u=(d=s==null?void 0:s.data)==null?void 0:d.node)==null?void 0:u.id)||"",cursor:((f=(g=(h=(p=s==null?void 0:s.data)==null?void 0:p.node)==null?void 0:h.comments)==null?void 0:g.pageInfo)==null?void 0:f.endCursor)||""}}},fillerType:""}),Ba=({org:e,orgPagination:t={}})=>({query:`{
    organization(login: "${e}") {
      repositories(
        first:100
        ${Et(t==null?void 0:t.cursor)}
        orderBy: {field: NAME, direction: ASC}
      ) {
        edges {
          node {
            name
          }
          cursor
        }
        pageInfo {
          endCursor
          hasNextPage
        }
      }
    }
  }`,fillerType:"org",resultInfo:s=>{var a,l,c,i,m,d,u,p,h,g,f,x,E,S,v;const n=((i=(c=(l=(a=s==null?void 0:s.data)==null?void 0:a.organization)==null?void 0:l.repositories)==null?void 0:c.pageInfo)==null?void 0:i.hasNextPage)||!1,r=((p=(u=(d=(m=s==null?void 0:s.data)==null?void 0:m.organization)==null?void 0:d.repositories)==null?void 0:u.pageInfo)==null?void 0:p.endCursor)||"";return{rawData:s,results:((f=(g=(h=s==null?void 0:s.data)==null?void 0:h.organization)==null?void 0:g.repositories)==null?void 0:f.edges)||[],hasNextPage:((v=(S=(E=(x=s==null?void 0:s.data)==null?void 0:x.organization)==null?void 0:E.repositories)==null?void 0:S.pageInfo)==null?void 0:v.hasNextPage)||!1,nextPageInfo:{orgPagination:{cursor:r,hasNextPage:n,hasNextPageForDate:n},amountOfData:"all"}}}}),qa=({org:e,team:t})=>({query:`{
    organization(login: "${e}") {
      team(slug:"${t}") {
        members(
          first:100
        ) {
          edges {
            node {
              name
              email
              login
              createdAt
            }
          }
          pageInfo {
            endCursor
            hasNextPage
          }
        }
      }
    }
  }`,fillerType:"team",resultInfo:s=>{var n,r,a,l,c;return{results:((c=(l=(a=(r=(n=s[0])==null?void 0:n.data)==null?void 0:r.organization)==null?void 0:a.team)==null?void 0:l.members)==null?void 0:c.edges)||[],hasNextPage:!1}}}),Ka=(e,t)=>{const n={org:["data","organization","repositories","edges"],team:["data","organization","team","members","edges"]}[e];return n?I([],n,t):t},za=e=>{const t=m=>{const u={pullRequests:[i,l],pullRequestReviewComments:[a],batchedQuery:[i,l]}[m]||[];return p=>u.length?Promise.all(u.map(h=>h(p))).then(h=>h.reduce((g,f)=>f(g),p)):Ka(m,p)},s=m=>d=>async(u=[])=>{const{hasNextPage:p}=d,{query:h,resultInfo:g,fillerType:f}=m(d),x=p?await e(h):{},{results:E=[],hasNextPage:S,nextArgs:v}=g(x),y=[...u,...E];return S&&f?s(m)(v)(y):await t(f)(y)},n=m=>d=>u=>{const p=Object.assign(m.node,{[d]:u});return Object.assign(m,{node:p})},r=m=>d=>{var u,p,h,g,f,x,E;return{nodeId:((u=d==null?void 0:d.node)==null?void 0:u.id)||"",cursor:((g=(h=(p=d==null?void 0:d.node)==null?void 0:p[m])==null?void 0:h.pageInfo)==null?void 0:g.endCursor)||"",hasNextPage:((E=(x=(f=d==null?void 0:d.node)==null?void 0:f[m])==null?void 0:x.pageInfo)==null?void 0:E.hasNextPage)||!1}},a=async(m=[])=>{const u=await et(m,async p=>{var x,E;const h=((E=(x=p==null?void 0:p.node)==null?void 0:x.comments)==null?void 0:E.edges)||[],g=r("comments")(p),f=await s(Va)(g)(h);return n(p)("comments")({edges:f})},5);return()=>u},l=async m=>{var h,g,f;const d=((f=(g=(h=m==null?void 0:m.data)==null?void 0:h.result)==null?void 0:g.pullRequests)==null?void 0:f.edges)||[],p=await et(d,async x=>{var y,w,T;const E=((w=(y=x==null?void 0:x.node)==null?void 0:y.reviews)==null?void 0:w.edges)||[],S=r("reviews")(x),v=await s(Ga)(S)(E);return{nodeId:(T=x==null?void 0:x.node)==null?void 0:T.id,results:{edges:v}}},5);return x=>{const E=c(x)("reviews")(p);return{data:Object.assign((x==null?void 0:x.data)||{},{result:Object.assign(I({pullRequests:E},["data","result"],x))})}}},c=m=>d=>u=>{var f,x,E,S,v;const p=((x=(f=m==null?void 0:m.data)==null?void 0:f.result)==null?void 0:x.pullRequests)||{},g=(((v=(S=(E=m==null?void 0:m.data)==null?void 0:E.result)==null?void 0:S.pullRequests)==null?void 0:v.edges)||[]).map(y=>{var j;const w=((j=y==null?void 0:y.node)==null?void 0:j.id)||"",T=u.find(D=>D.nodeId===w);return T?n(y)(d)(T.results):y});return Object.assign(p,{edges:g})},i=async m=>{var h,g,f;const d=((f=(g=(h=m==null?void 0:m.data)==null?void 0:h.result)==null?void 0:g.pullRequests)==null?void 0:f.edges)||[],p=await et(d,async x=>{var y,w,T;const E=((w=(y=x==null?void 0:x.node)==null?void 0:y.comments)==null?void 0:w.edges)||[],S=r("comments")(x),v=await s(Ua)(S)(E);return{nodeId:((T=x==null?void 0:x.node)==null?void 0:T.id)||"",results:{edges:v}}},5);return x=>{var S;const E=c(x)("comments")(p);return{data:Object.assign((x==null?void 0:x.data)||{},{result:Object.assign(((S=x==null?void 0:x.data)==null?void 0:S.result)||{pullRequests:E})})}}};return t},Ha=e=>new Promise((t,s)=>{e.json().then(n=>e.status===200?t(n):s(Object.assign(n,{status:e.status}))).catch(n=>{console.log("-=-=--parseJSON error",n),n.status=e.status,s(n)})}),Es=({message:e=""})=>/(You have triggered an abuse detection mechanism|You have exceeded a secondary rate limit)/.test(e),Wa=({message:e=""})=>/Unexpected end of JSON input/.test(e),Ya=e=>t=>fetch(e.enterpriseAPI||"https://api.github.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify({query:t})}).then(Ha),Qa=(e,{amountOfData:t})=>le([[A(e===!1),ae],[A(e&&typeof t=="number"&&t>=1),G],[A(e&&t==="all"),G],[G,ae]])(),Xa=(e=3e4)=>new Promise(t=>setTimeout(()=>t(),e));let Ss=0;const Ja=async(e,t)=>(console.log("-=-=--paused",Date.now()),await Xa(),console.log("-=-=--resume",Date.now()),++Ss,Ss<=10?ye(e,t):{errorMessage:{level:"error",message:"Hit rate limit over ten times"},fetchInfo:e.fetchInfo,results:t,reviewResults:[]}),Dt=(e,t)=>t.reduce((n,r)=>{var l,c,i;const a=((i=(c=(l=r==null?void 0:r.data)==null?void 0:l.result)==null?void 0:c[e])==null?void 0:i.edges)||[];return n+a.length},0),Za=e=>(t,s=[])=>{var m,d,u,p;const r=I(!1,[{pullRequests:"prPagination",issues:"issuesPagination",releases:"releasesPagination"}[t],"hasNextPageForDate"],e),a=s[s.length-1]||{},l=((u=(d=(m=a==null?void 0:a.data)==null?void 0:m.result)==null?void 0:d[t])==null?void 0:u.edges)||[],c=l[l.length-1],i=t==="pullRequests"?"createdAt":"closedAt";return r&&((p=c==null?void 0:c.node)==null?void 0:p[i])||""},ye=async({fetchInfo:e,queryInfo:t,dispatch:s=()=>{}},n=[])=>{const{query:r,resultInfo:a,fillerType:l,user:c,sortDirection:i}=t(e),m=Za(e),[d]=[m("pullRequests",n),m("issues",n),m("releases",n)].filter(Boolean).sort(Kr(i)),u={prCount:Dt("pullRequests",n),issueCount:Dt("issues",n),releasesCount:Dt("releases",n),latestItemDate:d,user:c,repo:e.repo,repos:e.repos||[],paused:!1};s({type:R.FETCH_STATUS,payload:u});const p=Ya(e);try{const h=await p(r);if(Es(h))throw new Error("Abuse rate triggered");const g=await za(p)(l)(h),f=[...n,g],{hasNextPage:x,nextPageInfo:E={}}=a(h),S=yt(e,E);return Qa(x,S)?ye({fetchInfo:S,queryInfo:t,dispatch:s},f):{fetchInfo:S,results:f,reviewResults:[]}}catch(h){const g=h,f=le([[Es,G],[Wa,G],[S=>S.status===500,G],[S=>S.status===502,G],[S=>S.message==="Abuse rate triggered",G],[Je(at(/ENOTFOUND|ECONNRESET/),je("","code")),G],[Je(at(/fetch/i),je("","message")),G],[G,ae]]),E=le([[f,A({level:"warn",message:"You may have triggered the api's abuse detection, please wait a minute before trying again"})],[Je(at(/50\d/i),je("","status")),A({level:"error",message:"GitHub API 500 error, could be CORS or rate limiting"})],[S=>S.status===401,A({level:"error",message:"GitHub token does not have correct settings, please see README"})],[Je(at(/40\d/i),je("","status")),S=>({level:"error",message:`Auth error: ${S.message||"UNKOWN"}`})],[S=>S.status===void 0,A({level:"error",message:"Error while processing data after, please check the console"})],[G,S=>({level:"error",message:`ERROR: ${S.message||"UNKOWN"}`})]])(g);if(f(g))return s({type:R.FETCH_STATUS,payload:{...u,paused:!0}}),Ja({fetchInfo:e,queryInfo:t,dispatch:s},n);throw new Error(E.message)}},el=async({fetchInfo:e,setGitUsers:t,setInputError:s})=>{try{const{results:n=[]}=await ye({fetchInfo:e,queryInfo:qa,dispatch:()=>{}}),r=[];n.flat().forEach(({node:a})=>{const{name:l,email:c,login:i}=a,m=l?l.replace(",",""):c.split(".")[0];r.push({userId:i,name:m})}),t(r)}catch(n){const r=n;s({level:"error",message:`Api call error: ${(r==null?void 0:r.message)||"unknown"}`})}},tl=e=>{var m;const{setGitUsers:t}=e,[s,n]=b.useState({}),r={gitTeamUrl:"",token:""},[a,l]=b.useState(r),i={inputError:s,setInputError:n,formInfo:a,setValue:(d,u)=>l({...a,[d]:u})};return o.jsxs("form",{onSubmit:d=>{d.preventDefault();const{gitTeamUrl:u="",token:p=""}=a,h=u.split("/"),g=h.at(-2)||"",f=h.at(-2)||"";[g,f,p].every(E=>E&&E.length>0)?el({fetchInfo:{name:g,org:f,token:p},setGitUsers:t,setInputError:n}):n({level:"error",message:"Invalid inputs"})},children:[o.jsx("h4",{children:"Getting team members from a GitHub Org team page"}),o.jsx(W,{type:"gitTeamUrl",...i},"gitTeamUrl"),o.jsx(W,{type:"token",...i}),o.jsx(O,{className:"w-full mr-0 min-h-12",type:"submit",children:"Get team members"}),((m=s==null?void 0:s.message)==null?void 0:m.length)>0&&o.jsx(Kt,{error:s})]})},$o=({setParentValues:e,usersInfo:t={}})=>{const[s,n]=b.useState(!1),[r,a]=b.useState([]),l=r.length>0&&"Edit Github Team members"||Object.keys(t).length>0&&"Edit team members"||"Fill in team by:";return o.jsxs("div",{children:[o.jsxs("p",{className:"mb-1",children:["Team members: ",Object.values(t).map(({name:c,userId:i})=>c||i).join(", ")||"None"]}),o.jsxs(Do,{open:s,onOpenChange:n,children:[o.jsx(Ca,{asChild:!0,children:o.jsx(O,{className:"w-full",type:"button",children:Object.keys(t).length===0?"Add team members":"Edit team members"})}),o.jsxs(No,{className:"overflow-scroll max-h-full w-4/5",children:[o.jsx(ze,{children:l}),Object.keys(t).length===0&&o.jsx(tl,{setGitUsers:a}),o.jsx(_a,{gitUsers:r,usersInfo:t,onSubmit:c=>{const i=Object.keys(c).filter(Boolean).length>0;e(i?{usersInfo:c}:{usersInfo:{}}),n(!1)}})]})]})]})},sl=async({fetchInfo:e,untilDate:t,dispatch:s})=>{try{const r=e.userIds.map(d=>({fetchInfo:{...e,issuesPagination:e.issuesPagination[d]||{hasNextPage:!0},prPagination:e.prPagination[d]||{hasNextPage:!0},user:d},queryInfo:Lo(t),dispatch:s})),a=await et(r,ye,1),l={issuesPagination:{},prPagination:{}},c=[];return a.forEach(({fetchInfo:d,results:u})=>{c.push(u);const p=(d==null?void 0:d.user)||"";l.issuesPagination[p]=Se("issuesPagination",d),l.prPagination[p]=Se("prPagination",d)}),{fetchInfo:yt(e,l),results:c.flat(),reviewResults:[]}}catch(n){throw console.log("-=-=--getUsersData:error",n),n}},ol=async({fetchInfo:e,untilDate:t,dispatch:s})=>{var n;try{const[r]=e.userIds,a={fetchInfo:{...e,issuesPagination:e.issuesPagination[r]||{hasNextPage:!0},prPagination:e.prPagination[r]||{hasNextPage:!0},user:r},queryInfo:Lo(t),dispatch:s},l=await ye(a),c=l.results,i={fetchInfo:{...e,usersReviewsPagination:((n=e.usersReviewsPagination)==null?void 0:n[r])||{hasNextPage:!0},user:r},queryInfo:Fa(t),dispatch:s},m=await ye(i),d=m.results,u={issuesPagination:{[r]:Se("issuesPagination",l.fetchInfo)},prPagination:{[r]:Se("prPagination",l.fetchInfo)},usersReviewsPagination:{[r]:Se("usersReviewsPagination",m.fetchInfo)}};return{fetchInfo:yt(e,u),results:c.flat(),reviewResults:d.flat()}}catch(r){throw console.log("-=-=--getUserData:error",r),r}},nl=async({fetchInfo:e,untilDate:t,dispatch:s})=>{try{const n=await ye({fetchInfo:e,queryInfo:Ba,dispatch:s}),a=((n==null?void 0:n.results.flat())||[]).filter(h=>{var g;return(g=h==null?void 0:h.node)==null?void 0:g.name}).map(h=>{var g;return(g=h==null?void 0:h.node)==null?void 0:g.name}),l=e.org,c=a.map(h=>({fetchInfo:{...e,issuesPagination:(e==null?void 0:e.issuesPagination[h])||{hasNextPage:!0},prPagination:(e==null?void 0:e.prPagination[h])||{hasNextPage:!0},org:l,repo:h,repos:a},queryInfo:Mo(t),dispatch:s})),i=await et(c,ye,1),m={issuesPagination:{},releasesPagination:{},prPagination:{}},d=[];return i.forEach(({fetchInfo:h,results:g=[]})=>{d.push(g);const{repo:f,issuesPagination:x,releasesPagination:E,prPagination:S}=h;m.issuesPagination[f]=x,m.releasesPagination[f]=E,m.prPagination[f]=S}),{fetchInfo:yt(e,m),results:d.flat(),reviewResults:[]}}catch(n){throw console.log("-=-=--getOrgData:error",n),n}},rl=(e,t=[])=>{var a;const s=e==="DESC"?0:-1,n=t.at(s),r=((a=n==null?void 0:n.node)==null?void 0:a.mergedAt)||(n==null?void 0:n.mergedAt);return new Date(r)},al=(e,t=[])=>{const{untilDate:s="",amountOfData:n=0,sortDirection:r="DESC"}=e,a={months:n},l=lt(Ks(String),Se("amountOfData")),c=lt(u=>!(typeof u=="string"&&u.length>1),Se("untilDate")),i=lt(u=>_t(u,a),u=>u?new Date(u):new Date,Se("untilDate")),m=lt(({prDate:u,sortDirection:p})=>p==="DESC"?_t(u,a):kt(u,a),u=>({prDate:rl(u,t),sortDirection:u}),je("","sortDirection")),[,d]=[[l(e),""],[c(e)&&t.length>0,m(e)],[r==="DESC",i(e)],[r==="ASC",kt(new Date(s),a)],[!0,""]].find(([u])=>u)||[];return d},ll=e=>t=>{const s={};return t.forEach(n=>{const r=Wn(e,n);s[r]=(s[r]||0)+1}),s},Fo=ll(["node","author","login"]),cl=e=>{const t={};return e.forEach(({author:s="",score:n=0})=>{t[s]=(t[s]||0)+n}),t},vs=(e=[])=>{const t=new Yn,s=e.map(n=>{var l,c,i;const r=((l=n==null?void 0:n.node)==null?void 0:l.body)||"";return{author:((i=(c=n==null?void 0:n.node)==null?void 0:c.author)==null?void 0:i.login)||"",score:t.analyze(r).score}});return{sentimentScore:$t("score")(s),sentiments:cl(s)}},il=e=>{var n,r;const t=((r=(n=e==null?void 0:e.node)==null?void 0:n.reviews)==null?void 0:r.edges)||[],s=[];return t.forEach(a=>{var c,i;const l=((i=(c=a==null?void 0:a.node)==null?void 0:c.comments)==null?void 0:i.edges)||[];s.push(...l)}),s},Uo=e=>t=>{var s,n;return e.includes((n=(s=t==null?void 0:t.node)==null?void 0:s.author)==null?void 0:n.login)},dl=e=>t=>{var r,a;const s=!Uo(e)(t);return!/\/apps\//.test(((a=(r=t==null?void 0:t.node)==null?void 0:r.author)==null?void 0:a.url)||"")&&s},jt=(e,t,s)=>{var g,f;const n=(f=(g=s==null?void 0:s.node)==null?void 0:g.author)==null?void 0:f.login,r=I([],["node","comments","edges"],s),a=il(s),c={general:r,code:a,all:[...a,...r]}[e]||[],i=c.filter(dl([...t,n])),{sentimentScore:m=0,sentiments:d={}}=vs(i),u=c.filter(Uo([n])),{sentimentScore:p=0}=vs(u),h=e==="all"?"c":`${e}C`;return{[`${h}omments`]:i.length,[`${h}ommenters`]:Fo(i),[`${h}ommentSentimentScore`]:m,[`${h}ommentSentiments`]:d,[`${h}ommentsAuthor`]:u.length,[`${h}ommentAuthorSentimentScore`]:p,[`${h}ommentSentimentTotalScore`]:(p||0)+(m||0)}},ml=(e,t)=>{const s=jt("general",e,t),n=jt("code",e,t),r=jt("all",e,t);return{...s,...n,...r}},ul=e=>{var r,a;const s=(((a=(r=e==null?void 0:e.node)==null?void 0:r.reviews)==null?void 0:a.edges)||[]).filter(l=>{var c;return((c=l==null?void 0:l.node)==null?void 0:c.state)==="APPROVED"}),n=Fo(s);return{approvals:s.length,approvers:n}},hl=(e=[],t)=>{var E,S,v,y,w,T;const s=I("",["node","repository","owner","login"],t),n=I("",["node","repository","name"],t),r=I("",["node","author","login"],t),a=I("",["node","author","url"],t),l=I("",["node","url"],t),c=I(0,["node","additions"],t),i=I(0,["node","deletions"],t),m=I("",["node","createdAt"],t),d=I("",["node","mergedAt"],t),u=((T=(w=(y=(v=(S=(E=t==null?void 0:t.node)==null?void 0:E.commits)==null?void 0:S.edges)==null?void 0:v[0])==null?void 0:y.node)==null?void 0:w.commit)==null?void 0:T.committedDate)||"",p=qe(new Date(u),new Date(m))?u:m,h=ml(e,t),{approvals:g,approvers:f}=ul(t);return{repo:n,org:s,author:/\/apps\//.test(a)?"GIT_APP_PR":r,url:l,additions:c,deletions:i,prSize:c+i,mergedAt:d,cycleTime:fe(new Date(d),new Date(p))||1,age:fe(new Date(d),new Date(m))||1,approvals:g,approvers:f,...h}},Go=(e,t)=>(s,n)=>{const r=s[e],a=n[e];return t==="DESC"?new Date(a).getTime()-new Date(r).getTime():new Date(r).getTime()-new Date(a).getTime()},ws=(e,t=[])=>{const{excludeIds:s=[]}=e;return t.map(r=>{var a,l,c,i,m;return((c=(l=(a=r==null?void 0:r.data)==null?void 0:a.result)==null?void 0:l.pullRequests)==null?void 0:c.edges)||((m=(i=r==null?void 0:r.data)==null?void 0:i.result)==null?void 0:m.edges)}).flat().map(r=>hl(s,r))},pl=(e="")=>({startDate:t="",endDate:s=""}={})=>{const n=new Date(e),r=t?st(n,new Date(t)):!0,a=s?qe(n,new Date(s)):!0;return r&&a},gl=(e,t=[])=>{const s=e.usersInfo||{};return t.filter(r=>{const a=r.author,{dates:l=[]}=s[a]||{},c=pl(r.mergedAt);return l.length>0?l.some(c):!0})},bs=({excludeIds:e=[]},{reportStartDate:t="",reportEndDate:s=""},n=[])=>{const r=[];return[n.filter(l=>{const c=je("","author",l),i=["GIT_APP_PR",...e].some(p=>p===c),m=l.mergedAt,u=st(new Date(m),new Date(t))&&qe(new Date(m),new Date(s))&&!i;return!u&&r.push(l),u}).sort(Go("mergedAt","ASC")),r]},Vo=e=>({reportStartDate:t="",reportEndDate:s=""},n=[])=>{const r=[];return[n.filter(l=>{const c=l==null?void 0:l[e],i=st(new Date(c),new Date(t))&&qe(new Date(c),new Date(s));return!i&&r.push(l),i}).sort(Go(e,"ASC")),r]},fl=Vo("mergedAt"),xl=Vo("date"),yl=e=>{var l,c,i,m,d,u;const t=((l=e==null?void 0:e.node)==null?void 0:l.createdAt)||"",s=((c=e==null?void 0:e.node)==null?void 0:c.closedAt)||"",n=((i=e==null?void 0:e.node)==null?void 0:i.title)||"",r=((m=e==null?void 0:e.node)==null?void 0:m.url)||"",a=((u=(d=e==null?void 0:e.node)==null?void 0:d.labels)==null?void 0:u.edges)||[];return{mergedAt:t,createdAt:t,age:fe(new Date(s),new Date(t))||1,url:r,isBug:/bug/i.test(n)||a.some(p=>{var h;return/bug/i.test((h=p==null?void 0:p.node)==null?void 0:h.name)})}},Rl=(e=[])=>{const t=e.map(a=>{var l,c,i;return((i=(c=(l=a==null?void 0:a.data)==null?void 0:l.result)==null?void 0:c.issues)==null?void 0:i.edges)||[]});return zs(t).filter(Boolean).map(a=>yl(a))},El=e=>{var n,r,a;const t=((n=e==null?void 0:e.node)==null?void 0:n.createdAt)||"",s=((a=(r=e==null?void 0:e.node)==null?void 0:r.tag)==null?void 0:a.name)||"";return{date:t,description:s}},Sl=(e=[])=>{const t=e.map(a=>{var l,c,i;return((i=(c=(l=a==null?void 0:a.data)==null?void 0:l.result)==null?void 0:c.releases)==null?void 0:i.edges)||[]});return zs(t).filter(Boolean).map(a=>El(a))},Bo=e=>typeof e=="string"&&e.length&&e||/^-?[\d.]+$/.test(`${e}`)&&/^-?[^0]/.test(`${e}`)&&e||Array.isArray(e)&&e.length&&vl(e)||e&&Object.keys(e).length&&qo(e)||typeof e=="boolean"&&e,vl=e=>{const t=[];return e.forEach(s=>{const n=Bo(s);n&&t.push(n)}),t.length&&t},qo=e=>{const t={};return Object.entries(e).forEach(([s,n])=>{const r=Bo(n);r&&(t[s]=r)}),Object.keys(t).length&&t},pt={author:"",approvalsGiven:0,approvalsByUser:{},commentsGiven:0,commentsReceived:0,codeCommentsGiven:0,codeCommentsReceived:0,generalCommentsGiven:0,generalCommentsReceived:0,totalPRs:0,uniquePRsContributedTo:0,commentsByUser:{},prSizes:[],prTotalAdditions:0,prTotalDeletions:0,prAdditions:[],prDeletions:[],prAges:[],sentimentTotalScores:[],orgs:new Set,repos:new Set,sentimentTotalPositiveScore:0,sentimentAveragePositiveScore:0,sentimentPositiveCount:0,sentimentTotalNegativeScore:0,sentimentNegativeCount:0,sentimentAverageNegativeScore:0},Xe=(e,t,s,n)=>{const r={};return Object.entries(s).forEach(([a,l])=>{const c=e[a]||{},i={...pt,...c,user:a,[t]:(c[t]||0)+(n||l)};r[a]=i}),r},As=(e,t,s,n,r,a)=>{const l={};return Object.entries(s).filter(([c])=>a&&n!==a?c===a:!0).forEach(([c,i])=>{const m=e[c]||{},d=m[t]||{},u={...d,[n]:(d[n]||0)+(r||i||0)},p={...pt,...m,author:c,[t]:u};l[c]=p}),l},St=(e=[],t={},s="")=>{const n=new Set,r={};e.forEach(i=>{var se;const{org:m,repo:d,author:u,additions:p=0,deletions:h=0,age:g=0,approvals:f=0,approvers:x={},comments:E=0,commenters:S={},codeComments:v=0,codeCommenters:y={},generalComments:w=0,generalCommenters:T={},commentSentimentTotalScore:j=0,commentSentimentScore:D=0,commentAuthorSentimentScore:L=0}=i;n.add(u);const B=As(r,"commentsByUser",S,u,0,s);Object.assign(r,B);const C=As(r,"approvalsByUser",x,u,1,s);Object.assign(r,C);const F=Xe(r,"commentsGiven",S);Object.assign(r,F);const de=Xe(r,"codeCommentsGiven",y);Object.assign(r,de);const me=Xe(r,"generalCommentsGiven",T);Object.assign(r,me);const Re=Xe(r,"approvalsGiven",x);Object.assign(r,Re);const ee=Xe(r,"uniquePRsApproved",x,1);Object.assign(r,ee),[...new Set([...Object.keys(y),...Object.keys(T),...Object.keys(x)])].forEach(J=>{const pe=r[J]||{},Oe={...pt,...pe,author:J,uniquePRsContributedTo:(pe.uniquePRsContributedTo||0)+1};r[J]=Oe}),r[u]||(r[u]={...pt}),r[u].orgs.add(m),r[u].repos.add(d);const z=j||D+L;r[u].sentimentTotalScores.push(z);const V=(J="",pe=0)=>(r[u][J]||0)+pe,ue=V("totalPRs",1),Ae=V("prTotalAge",g),he=Math.round(Ae/ue),ce=V("prTotalAdditions",p),Ee=V("prTotalDeletions",h),rt=Math.round((ce+Ee)/ue),Te=z>0?z:0,_e=z>0?1:0,De=V("sentimentTotalPositiveScore",Te),ke=V("sentimentPositiveCount",_e),He=ke?Math.round(De/ke):0,P=z<0?z:0,k=z<0?1:0,U=V("sentimentNegativeCount",k),q=V("sentimentTotalNegativeScore",P),te=U?Math.round(q/U):0,X={author:u,name:((se=t[u])==null?void 0:se.name)||u,user:u,totalPRs:ue,age:he,prTotalAge:Ae,prSize:rt,prTotalAdditions:ce,prTotalDeletions:Ee,approvalsReceived:V("approvalsReceived",f),commentsReceived:V("commentsReceived",E),codeCommentsReceived:V("codeCommentsReceived",v),generalCommentsReceived:V("generalCommentsReceived",w),commentSentimentTotalScore:V("commentSentimentTotalScore",z),sentimentPositiveCount:ke,sentimentTotalPositiveScore:De,sentimentAveragePositiveScore:He,sentimentNegativeCount:U,sentimentTotalNegativeScore:q,sentimentAverageNegativeScore:te,orgCount:r[u].orgs.size,repoCount:r[u].repos.size};Object.assign(r[u],X)});const a=Object.values(r).filter(({author:i})=>n.has(i)).map((i={})=>Hs(["author","user","name","approvalsGiven","approvalsByUser","uniquePRsApproved","commentsGiven","commentsReceived","codeCommentsGiven","codeCommentsReceived","generalCommentsGiven","generalCommentsReceived","totalPRs","uniquePRsContributedTo","commentsByUser","prTotalAdditions","prTotalDeletions","orgCount","repoCount","user","approvalsReceived","prSize","prTotalAge","age","sentimentAveragePositiveScore","sentimentTotalPositiveScore","sentimentAverageNegativeScore","sentimentTotalNegativeScore"],i)),l=["commentsGiven","commentsReceived","approvalsGiven","approvalsReceived"];return a.filter(({author:i})=>Object.keys(t).length>0?t[i]:!0).sort(be(l))},Ko=(e="")=>({type:R.STORE_TOKEN,payload:e}),wl=(e="")=>t=>t({type:R.STORE_ORG,payload:e}),bl=(e="")=>t=>t({type:R.STORE_ENT_URL,payload:e}),Al=(e="")=>t=>t({type:R.SET_TEAM_NAME,payload:e}),Xt=Ws(Jn(","),Qn(Xn),Us(Boolean)),zo=(e={})=>t=>{const s=Object.keys(e);return t({type:R.STORE_USERS_INFO,payload:e}),t({type:R.STORE_USER_IDS,payload:s})},Ho=(e="")=>t=>{const s=Xt(e);return t({type:R.STORE_EX_IDS,payload:s})},Wo=(e="")=>t=>{const n=Xt(e).map((r="")=>{const[a,l]=r.split("=");return{name:a,date:l}});return t({type:R.STORE_EVENTS,payload:n})},Tl=(e="")=>t=>t({type:R.STORE_REPO,payload:e}),Yo=e=>t=>t({type:R.STORE_AMOUNT,payload:e||""}),Qo=e=>(t,s)=>{const{fetches:n,pullRequests:r=[]}=s(),a=al({...n,amountOfData:e||""},r);t({type:R.STORE_FORM_UNTIL_DATE,payload:a})},Xo=(e="DESC")=>t=>t({type:R.STORE_SORT,payload:e}),Dl=(e={},t={})=>(s="")=>e[s]&&t[s]&&e[s]!==t[s],jl=(e={},t={})=>(s="")=>{const n=je("",s,e),r=Xt(n),a=t[s];return a.length&&Ys(re(a,r))},Nl=(e={},t={})=>{const s=e.userId,[n]=t.userIds,r=(e==null?void 0:e.usersInfo)||{},a=t.usersInfo||{},l=s&&n&&s!==n,c=Ys(re(r,a));return l||c},Pl=e=>(t,s)=>{const{fetches:n={}}=s(),r=Dl(e,n),a=jl(e,n);(r("org")||r("repo")||r("teamName")||r("enterpriseAPI")||Nl(e,n)||a("excludeIds"))&&vt(t)},vt=e=>{e({type:R.CLEAR_ORG}),e({type:R.CLEAR_REPO}),e({type:R.CLEAR_TRIMMED_ITEMS}),e({type:R.CLEAR_PRS}),e({type:R.CLEAR_FILTERED_PRS}),e({type:R.CLEAR_REVIEWED_PRS}),e({type:R.CLEAR_REVIEWED_FILTERED_PRS}),e({type:R.CLEAR_ITEMS_DATE_RANGE}),e({type:R.CLEAR_PR_PAGINATION}),e({type:R.CLEAR_PREFETCHED_NAME}),e({type:R.CLEAR_DESC}),e({type:R.CLEAR_UNTIL_DATE}),e({type:R.CLEAR_FORM_UNTIL_DATE}),e({type:R.CLEAR_USER_IDS}),e({type:R.CLEAR_USERS_INFO}),e({type:R.CLEAR_EX_IDS}),e({type:R.CLEAR_EVENTS}),e({type:R.CLEAR_USERS_DATA}),e({type:R.CLEAR_TEAM_NAME}),e({type:R.CLEAR_RELEASES}),e({type:R.CLEAR_RELEASES_PAGINATION}),e({type:R.CLEAR_ISSUES}),e({type:R.CLEAR_FILTERED_ISSUES}),e({type:R.CLEAR_ISSUES_PAGINATION}),e({type:R.CLEAR_FETCH_ERROR}),e({type:R.CLEAR_PRE_FETCH_ERROR})},Cl=vt,Il=e=>{const{fetches:{org:t="",repo:s="",token:n="",userIds:r=[]}={}}=e,a=r.length<1,l=[a&&!t&&"Organization",a&&!s&&"Repository",!n&&"GitHib token",!t&&!s&&a&&"GitHub Ids"].filter(Boolean),c=m=>{const d=l.length-1;return[m===0?"Missing ":"",m===d?" and ":"",m>0?", ":""].find(p=>p.length>0)||""};return l.reduce((m,d,u)=>m+c(u)+d,"")},_l=e=>{const{fetches:{org:t="",repo:s="",token:n="",userIds:r=[]}={}}=e,a=[n];t&&a.push(t),s&&a.push(s);const l=a.every(d=>typeof d=="string"&&d.length>0),i=(r.length?[r]:[]).every(d=>d.length>0),m=l&&i;return{isValid:m,error:m?null:{level:"error",message:Il(e)}}},kl=(e="",t="")=>(s="mergedAt",n=[])=>{const r=[],a=[],l=[],c=(i=[])=>i.forEach(m=>{const d=new Date(m[s]);qe(d,new Date(e))?r.push(m):st(d,new Date(t))?l.push(m):a.push(m)});return n.forEach(c),[r,a,l]},Ol=(e="",t="")=>async(s,n)=>{const{fetches:{usersInfo:r={}}={},trimmedItems:{trimmedPRs:{trimmedLeftPrs:a=[],trimmedRightPrs:l=[]}={},trimmedReviewedPRs:{trimmedLeftReviewedPrs:c=[],trimmedRightReviewedPrs:i=[]}={},trimmedReleases:{trimmedLeftReleases:m=[],trimmedRightReleases:d=[]}={},trimmedIssues:{trimmedLeftIssues:u=[],trimmedRightIssues:p=[]}={}}={},pullRequests:h=[],reviewedPullRequests:g=[],releases:f=[],issues:x=[]}=n(),E=kl(e,t),S=[a,h,l],[v,y,w]=E("mergedAt",S);s({type:R.ADD_PRS,payload:y});const T=[c,g,i],[j,D,L]=E("mergedAt",T);s({type:R.ADD_REVIEWED_PRS,payload:D}),s({type:R.ADD_USERS_DATA,payload:St(y.concat(D),r)});const B=[m,f,d],[C,F,de]=E("date",B);s({type:R.ADD_RELEASES,payload:F});const me=[u,x,p],[Re,ee,H]=E("mergedAt",me);s({type:R.ADD_ISSUES,payload:ee}),s({type:R.ADD_TRIMMED_ITEMS,payload:{trimmedPRs:{trimmedLeftPrs:v,trimmedRightPrs:w},trimmedReviewedPRs:{trimmedLeftReviewedPrs:j,trimmedRightReviewedPrs:L},trimmedReleases:{trimmedLeftReleases:C,trimmedRightReleases:de},trimmedIssues:{trimmedLeftIssues:Re,trimmedRightIssues:H}}})},Jo=(e=[])=>{const{mergedAt:t=""}=e.at(0)||{mergedAt:""},{mergedAt:s=""}=e.at(-1)||{mergedAt:""};return[t,s]},Zo=()=>async(e,t)=>{var r,a,l,c,i,m;const s=t(),{isValid:n}=_l(s);n&&e({type:R.CLEAR_FETCH_ERROR}),n&&e({type:R.FETCH_START});try{if(!n)throw new Error("Not a valid request");const{fetches:d,filteredPRs:u=[],pullRequests:p=[],filteredReviewedPRs:h=[],reviewedPullRequests:g=[],issues:f=[],filteredIssues:x=[],formUntilDate:E="",releases:S=[],filteredReleases:v=[]}=t(),{usersInfo:y}=d,w=(d==null?void 0:d.userIds)||[],T=(d==null?void 0:d.repo)||"",j=(d==null?void 0:d.org)||"",D=E,L=w.length===1&&"user"||w.length>1&&"team"||!T&&j&&"org"||"repo",B={user:()=>ol({fetchInfo:d,untilDate:D,dispatch:e}),team:()=>sl({fetchInfo:d,untilDate:D,dispatch:e}),repo:()=>ye({fetchInfo:d,queryInfo:Mo(D),dispatch:e}),org:()=>nl({fetchInfo:d,untilDate:D,dispatch:e})},{fetchInfo:C={},results:F=[],reviewResults:de=[]}=await B[L](),me=ws(d,F),Re=gl(d,me),ee=p.concat(u).concat(Re),H=(a=(r=p.at(-1))==null?void 0:r.mergedAt)==null?void 0:a.slice(0,10),z=(c=(l=p.at(0))==null?void 0:l.mergedAt)==null?void 0:c.slice(0,10),V=(m=(i=me.at(-1))==null?void 0:i.mergedAt)==null?void 0:m.slice(0,10),ue=new Date().toISOString().slice(0,10),{sortDirection:Ae="DESC"}=d,he=Ae==="DESC"?{reportStartDate:D||V,reportEndDate:H||ue}:{reportStartDate:z,reportEndDate:D||ue},[ce,Ee]=bs(d,he,ee);e({type:R.ADD_PRS,payload:ce}),e({type:R.ADD_FILTERED_PRS,payload:Ee});const Te=ws(d,de).filter(({author:X="",mergedAt:se=""})=>se&&X!==w[0]),_e=g.concat(h).concat(Te),[De=[],ke=[]]=bs(d,he,_e);e({type:R.ADD_REVIEWED_PRS,payload:De}),e({type:R.ADD_REVIEWED_FILTERED_PRS,payload:ke});const He=Jo(ce);if(e({type:R.ADD_ITEMS_DATE_RANGE,payload:He}),e({type:R.ADD_USERS_DATA,payload:St(ce.concat(De),y)}),L==="repo"){const X=Sl(F),se=xo([...v,...S,...X]),[J,pe]=xl(he,se);e({type:R.ADD_RELEASES,payload:J}),e({type:R.ADD_FILTERED_RELEASES,payload:pe})}const P=Rl(F),k=f.concat(x).concat(P),[U,q]=fl(he,k);e({type:R.ADD_ISSUES,payload:U}),e({type:R.ADD_FILTERED_ISSUES,payload:q}),e({type:R.STORE_UNTIL_DATE,payload:E});const te=(X={})=>{const se=Hs(["newest","oldest"]),J={};return Object.entries(X).filter(([,Oe])=>Ks(Object,Oe)&&Zn(se(Oe)).length>0).forEach(([Oe,xn])=>{J[Oe]=se(xn)}),{...se(X),...J}};e({type:R.SET_PR_PAGINATION,payload:te(C.prPagination)}),e({type:R.SET_PR_REVIEWED_PAGINATION,payload:te(C.usersReviewsPagination)}),e({type:R.SET_ISSUES_PAGINATION,payload:te(C.issuesPagination)}),e({type:R.SET_RELEASES_PAGINATION,payload:te(C.releasesPagination)}),e({type:R.FETCH_END})}catch(d){const u=d;e({type:R.FETCH_ERROR,payload:{level:"error",message:u.message||"Unknown error"}}),e({type:R.FETCH_END})}},Ll=(e,t)=>{const{fetches:s,preFetchedName:n="",reportDescription:r="",pullRequests:a=[],filteredPRs:l=[],reviewedPullRequests:c=[],filteredReviewedPRs:i=[],usersData:m=[],issues:d=[],filteredIssues:u=[],releases:p=[],filteredReleases:h=[]}=e,{teamName:g="",userIds:f=[],usersInfo:x={},excludeIds:E=[],events:S=[],repo:v="",org:y=""}=s;vt(t),[["token","STORE_TOKEN",""],["org","STORE_ORG",""],["repo","STORE_REPO",""],["enterpriseAPI","STORE_ENT_URL",""],["prPagination","SET_PR_PAGINATION",{}],["usersReviewsPagination","SET_PR_REVIEWED_PAGINATION",{}],["releasesPagination","SET_RELEASES_PAGINATION",{}],["issuesPagination","SET_ISSUES_PAGINATION",{}]].forEach(([D,L="",B])=>{t({type:R[L],payload:(s==null?void 0:s[D])||B})}),t({type:R.PREFETCHED_NAME,payload:n}),t({type:R.STORE_SORT,payload:"ASC"}),t({type:R.STORE_AMOUNT,payload:"all"}),t({type:R.SET_DESC,payload:r}),t({type:R.SET_TEAM_NAME,payload:g}),t({type:R.STORE_USER_IDS,payload:f}),t({type:R.STORE_USERS_INFO,payload:x}),t({type:R.STORE_EX_IDS,payload:E}),t({type:R.STORE_EVENTS,payload:S});const T=Jo(a);t({type:R.ADD_ITEMS_DATE_RANGE,payload:T}),t({type:R.ADD_PRS,payload:a}),t({type:R.ADD_FILTERED_PRS,payload:l}),t({type:R.ADD_REVIEWED_PRS,payload:c}),t({type:R.ADD_REVIEWED_FILTERED_PRS,payload:i}),t({type:R.ADD_USERS_DATA,payload:m.length?m:St(a.concat(c),x)});const j=d.sort(({mergedAt:D=""},{mergedAt:L=""})=>new Date(D).getTime()-new Date(L).getTime());if(t({type:R.ADD_ISSUES,payload:j}),t({type:R.ADD_FILTERED_ISSUES,payload:u}),v&&y){const D=xo(p);t({type:R.ADD_RELEASES,payload:D}),t({type:R.ADD_FILTERED_RELEASES,payload:h})}t({type:R.FETCH_END})},Ml=e=>new Promise((t,s)=>{e.json().then(n=>e.status===200?t(n):s(new Error(`Error status code ${e.status}`))).catch(n=>{const r=n;console.log("-=-=--parseJSON error",r),r.status=e.status,s(r)})}),en=({fileName:e="",externalURL:t="",localData:s}={})=>async n=>{vt(n),n({type:R.CLEAR_PRE_FETCH_ERROR}),n({type:R.FETCH_START}),n({type:R.FETCH_STATUS,payload:{savedReportName:e}});const r=t?`${t}${e}.json`:`https://n07734.github.io/community-health/data/${e}.json`;try{const a=s||await fetch(r).then(Ml);Ll(a,n)}catch(a){const l=a;console.log("-=-=--api data error",l,l.status);const c=l.status!==200?`Error status code ${l.status} loading ${e}`:`${l.message} loading ${e}`;n({type:R.PRE_FETCH_ERROR,payload:{level:"error",message:c||"Unknown error"}}),n({type:R.FETCH_END})}},tn=(e,t)=>{const s=t(),{repo:n,org:r,teamName:a,userIds:l=[]}=(s==null?void 0:s.fetches)||{},c=(l==null?void 0:l.length)===1?l[0]:"",i=a||c||`${r}${n?`-${n}`:""}`,d=Ws(rs("HOW_TO","1: Add this file to ./src/myReports 2: Run the app. If you want multiple reports you will need to edit ./src/myReports/myReportsConfig.js."),er(["fetches","pullRequests","filteredPRs","reviewedPullRequests","filteredReviewedPRs","userData","issues","filteredIssues","releases","teamName"]),Le(["fetches","token"]),Le(["sortDirection"]),Le(["fetches","amountOfData"]),Le(["fetches","prPagination","hasNextPage"]),Le(["fetches","issuesPagination","hasNextPage"]),Le(["fetches","releasesPagination","hasNextPage"]),rs("preFetchedName",i),qo)(s),u=JSON.stringify(d,null,2),p=new Blob([u],{type:"application/json"});return{href:URL.createObjectURL(p),download:`${i}.json`}},$l=(e="")=>(t,s)=>{const{fetches:{sortDirection:n=""}={}}=s();n!==e&&t({type:R.CLEAR_UNTIL_DATE})&&t({type:R.CLEAR_FORM_UNTIL_DATE})},Fl=({fetching:e,pullRequests:t,getDownloadInfo:s})=>{const n=s();return!e&&t.length>0?o.jsx("p",{children:o.jsx("a",{className:"text-primary",...n,children:"Download report data"})}):null},Ul=e=>({fetching:e.fetching,pullRequests:e.pullRequests}),Gl=e=>({getDownloadInfo:()=>e(tn)}),sn=M(Ul,Gl)(Fl),Vl=e=>{const{setValues:t,getData:s,fetches:n,fetching:r}=e,{repo:a,org:l,excludeIds:c=[],userIds:i=[],usersInfo:m={},events:d=[]}=n,u=i.length>1&&"team"||i.length===1&&"user"||!a&&l&&"org"||"repo",p=d.map(({name:C,date:F})=>`${C}=${F}`).join(", "),h=c.join(", "),[g,f]=b.useState({sortDirection:n.sortDirection,amountOfData:n.amountOfData||"all",token:n.token,...p&&{events:p},...h&&{excludeIds:h},...n.org&&{org:n.org},...n.repo&&{repo:n.repo}}),[x,E]=b.useState({}),[S,v]=b.useState(!1),y=(C,F)=>f({...g,[C]:F}),w=(C={})=>{const F={...g,...C};f(F)},T={inputError:x,setInputError:E,formInfo:g,setValue:y},j=C=>{C.preventDefault();const{isValid:F,validationErrors:de}=To(g);E(de),F&&!r&&t(g),F&&!r&&s(),F&&v(!0)},B=[...{repo:["org","repo"],org:["org"],team:["teamName"],user:["userId","name"]}[u],"enterpriseAPI"];return o.jsx(ie,{className:"mb-0 col-span-full",title:"",expandText:"here",intro:"Top up this report's data",expandQaId:"expand-prefetch-form",children:o.jsxs("div",{className:"mb-3",children:[o.jsxs("form",{onSubmit:j,children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 max-mm:grid-cols-1 items-end mb-4",children:[o.jsxs("div",{className:"col-span-full",children:[B.filter(C=>Ft(n,C)).map(C=>o.jsxs("p",{children:[bo[C],": ",o.jsx("b",{children:Ft(n,C)})]},C)),u==="team"&&o.jsx($o,{usersInfo:m,setParentValues:w})]}),o.jsx(W,{type:"events",className:"col-span-full",...T}),o.jsx("p",{className:"col-span-full",children:"Key events can impact the data e.g. starting or launching a new feature or major version. These events can help give more context while viewing the data. e.g. ProjectA=2013-12-01."}),o.jsx(W,{type:"excludeIds",...T}),o.jsx(W,{type:"token",...T}),o.jsxs("p",{className:"col-span-full",children:["To create a token go to your GitHub ",o.jsx("a",{className:"text-primary",href:"https://github.com/settings/tokens",children:"tokens"})," page, click on 'generate new token', choose the settings 'repo' (all), 'read:org' and 'user' then click 'Generate token'."]}),o.jsxs(Me,{onValueChange:C=>y("sortDirection",C),value:g.sortDirection,children:[o.jsx(Ne,{className:"w-auto",children:o.jsx(Fe,{children:g.sortDirection==="DESC"?"Prepend data":"Append data"})}),o.jsx(Pe,{children:o.jsxs($e,{children:[o.jsx(Z,{value:"DESC",children:"Prepend data"}),o.jsx(Z,{value:"ASC",children:"Append data"})]})})]}),o.jsx(vo,{setValue:y,amountOfData:g.amountOfData})]}),o.jsx(So,{qaId:"prefetch-top-up"})]}),S&&o.jsx(sn,{})]})})},Bl=e=>({fetches:e.fetches,fetching:e.fetching,error:e.error,pullRequests:e.pullRequests}),ql=e=>({setValues:t=>{const{token:s,amountOfData:n,sortDirection:r,excludeIds:a,events:l,userId:c,usersInfo:i={},name:m}=t;c&&m&&(i[c]={userId:c,name:m}),e($l(r)),e(Ko(s)),e(Ho(a)),e(Yo(n)),e(Xo(r)),e(Qo(n)),e(Wo(l)),Object.keys(i).length>0&&e(zo(i))},getData:()=>e(Zo()),getDownloadInfo:()=>e(tn)}),Kl=M(Bl,ql)(Vl),on=b.forwardRef(({className:e,...t},s)=>o.jsxs(Qs,{ref:s,className:N("relative flex w-full touch-none select-none items-center",e),...t,children:[o.jsx(tr,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:o.jsx(sr,{className:"absolute h-full bg-primary"})}),o.jsx(as,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),o.jsx(as,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));on.displayName=Qs.displayName;const zl=({pullRequests:e=[],itemsDateRange:t=["",""],issues:s=[],usersInfo:n,trim:r})=>{const[a,l]=t,c=a?fe(new Date(l),new Date(a)):0,i=c/100,[[m,d],u]=b.useState([0,100]),p=Math.floor(i*m),h=Math.ceil(i*d),g=a?ls(kt(new Date(a),{days:p}),{representation:"date"}):"",f=l?ls(_t(new Date(l),{days:c-h}),{representation:"date"}):"",x=w=>{Array.isArray(w)&&w.length===2&&u(w)},E=()=>{r(g,f)},S=Object.keys(n).length,v=S>1?`by ${S} contributors`:"",y=s.length>0?`and ${s.length} issues`:"";return e.length>0&&g&&o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"w-full",children:[o.jsxs("b",{children:["Showing ",e.length," PRs ",v," ",y]}),". Drag the points to change the date range of the report."]}),o.jsxs("div",{className:"w-full flex justify-between",children:[o.jsx("p",{className:"text-2xl mb-1",children:Pt(new Date(g),"do MMM yy")}),o.jsx("p",{className:"text-2xl mb-1",children:Pt(new Date(f),"do MMM yy")})]}),o.jsx(on,{value:[m,d],onValueChange:x,onValueCommit:E,className:"pb-08"})]})},Hl=e=>({pullRequests:e.pullRequests,issues:e.issues,itemsDateRange:e.itemsDateRange,usersInfo:e.fetches.usersInfo}),Wl=e=>({trim:(t,s)=>e(Ol(t,s))}),Yl=M(Hl,Wl)(zl),Ql=e=>{const{repo:t="",org:s="",teamName:n="",usersInfo:r={},userIds:a=[],colorA:l="",colorB:c=""}=e,{userId:i="",name:m=""}=r[a[0]]||{},d=s||n||m||i,u=!n&&m&&i||t&&s!==t&&t||"",p=u?l:c;return o.jsxs(o.Fragment,{children:[o.jsx("span",{style:{color:p},children:d}),u&&o.jsxs(o.Fragment,{children:["/",o.jsx("span",{style:{color:c},children:u})]})]})},Xl=({fetches:e,preFetchedName:t="",pullRequests:s=[],issues:n=[],userIds:r=[],reportDescription:a=""})=>{const{theme:l}=K(),c=$[l].secondary,i=$[l].primary,{showNames:m,toggleShowNames:d}=ve();return(s.length>0||n.length>0)&&o.jsxs(Q,{children:[o.jsx("h2",{"data-qa-id":"report-title",className:"truncate",children:o.jsx(Ql,{...e,colorA:c,colorB:i})}),a&&o.jsx("p",{children:a}),r.length>1&&o.jsxs("p",{children:["Team's GitHub IDs: ",r.join(", ")]}),o.jsxs("div",{className:"flex items-center space-x-2 pb-08",children:[o.jsx(Eo,{id:"spartacus-mode",onCheckedChange:d,checked:!m,name:"checkedA",className:"dark:data-[state=unchecked]:bg-white"}),o.jsx(tt,{htmlFor:"spartacus-mode",children:m?"Who is Spartacus?":"Spartacus mode can help look for trends."})]}),o.jsx(Yl,{}),t.length>0&&o.jsx(Kl,{})]})},Jl=e=>({fetches:e.fetches,preFetchedName:e.preFetchedName,pullRequests:e.pullRequests,issues:e.issues,userIds:e.fetches.userIds,reportDescription:e.reportDescription}),wt=M(Jl)(Xl),Zl=({chunkyData:e=[],pullRequests:t=[],releases:s=[],events:n=[],userIds:r=[],usersInfo:a={}})=>{const{theme:l}=K(),c=$[l].secondary,i=$[l].primary,m=$[l].tertiary,{showNames:d}=ve(),u=r.length>0,p=u?go({pullRequests:t,showNames:d,usersInfo:a}):[],h=Ie({events:n,releases:s,usersInfo:a});return t.length>0&&o.jsxs(Q,{children:[o.jsx(ie,{title:"Pull Request trends",children:s.length>1&&o.jsx("div",{children:o.jsx("p",{children:"Vertical lines are releases: Green is a Major release, solid purple is Minor and dotted purple is Patch or Alpha"})})}),o.jsxs(we,{children:[u&&o.jsx(o.Fragment,{children:o.jsx(Y,{title:"PRs by author",markers:h,showLegends:!0,data:p,tableData:e,tableKeys:["author","repo"]})}),o.jsx(Y,{markers:h,data:[{lines:[{label:"PRs over time",color:c,dataKey:"url",groupMath:"count",data:t}],xAxis:"left"}],tableData:e,tableKeys:["author"]}),o.jsx(Y,{markers:h,data:[{lines:[{label:"Comments",color:c,dataKey:"comments",data:t},{label:"Approvals",color:i,dataKey:"approvals",data:t}],xAxis:"left"},{lines:[{label:"PR Size",color:m,dataKey:"prSize",data:t}],xAxis:"right"}],tableData:e,tableKeys:["comments","approvals","prSize","author"]}),o.jsx(Y,{markers:h,data:[{lines:[{label:"Age (days)",color:i,dataKey:"age",data:t}],xAxis:"left"},{lines:[{label:"PR Size",color:m,dataKey:"prSize",data:t}],xAxis:"right"}],tableData:e,tableKeys:["age","prSize","author"]})]})]})},ec=e=>({releases:e.releases,events:e.fetches.events,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),nn=M(ec)(Zl),tc=({pullRequests:e=[]})=>{const t={},s=e.map((r,a)=>(t[r.repo]=(t[r.repo]||0)+1,{...r,id:`${a}-${r.repo}-${r.number}`,[`repo-${r.repo}`]:1,commentSentimentTotalScore:(r.commentSentimentScore||0)+(r.commentAuthorSentimentScore||0)})),n=Ce(s);return o.jsxs(o.Fragment,{children:[o.jsx(wt,{}),o.jsx(qt,{pullRequests:s,chunkyData:n,allRepos:t}),o.jsx(Rt,{pullRequests:s,chunkyData:n,tableOpenedByDefault:!0}),o.jsx(nn,{pullRequests:s,chunkyData:n})]})},sc=e=>({pullRequests:e.pullRequests}),oc=M(sc)(tc),nc=(e=[])=>e.map(t=>({mergedAt:t.mergedAt,...t.isBug?{bug:1}:{issue:1}})),rc=({issues:e=[],releases:t=[],events:s=[],usersInfo:n={}})=>{const{theme:r}=K(),a=$[r].secondary,l=$[r].primary,c=nc(e),i=Ce(e),m=Ie({events:s,releases:t,usersInfo:n});return c&&c.length>0&&o.jsxs(Q,{children:[o.jsx(ie,{title:"Feature and bug trends"}),o.jsx(we,{children:o.jsx(Y,{markers:m,data:[{lines:[{label:"Issues",color:a,filterForKey:!0,dataKey:"issue",groupMath:"count",data:c},{label:"Bugs*",color:l,filterForKey:!0,dataKey:"bug",groupMath:"count",data:c}],xAxis:"left"}],tableKeys:["isBug"],tableData:i})}),o.jsx("p",{className:"w-full text-center",children:"*Bugs in this graph are issues that have a title or a label that contains the word 'bug'"})]})},ac=e=>({issues:e.issues,releases:e.releases,events:e.fetches.events,usersInfo:e.fetches.usersInfo}),Jt=M(ac)(rc),lc=({chunkyData:e=[],pullRequests:t=[],releases:s=[],events:n=[],userIds:r=[],usersInfo:a={}})=>{const{showNames:l}=ve(),c=Ie({events:n,releases:s,usersInfo:a}),i=r.map((m,d)=>{const u=l?m:`Spartacus${Array(d).fill(" ").join("")}`;return[{label:`To ${u}`,color:_[d%_.length],filterForKey:!0,dataKey:`${m}-commentsSentimentScore`,data:t},{label:`From ${u}`,color:_[d%_.length],filterForKey:!0,dataKey:`${m}-commentAuthorSentimentScore`,data:t}]}).flat();return t.length>0&&o.jsx(o.Fragment,{children:o.jsxs(Q,{children:[o.jsx(ie,{title:"Sentiment analysis*",children:o.jsxs("div",{children:[o.jsx("p",{children:"*Adding this is an experiment to see if it can provide useful insights."}),o.jsxs("p",{children:["Uses npm package ",o.jsx("a",{className:"text-primary",href:"https://github.com/thisandagain/sentiment",children:"sentiment"})," which uses AFINN-165 word list and Emoji ranking to perform sentiment analysis."]})]})}),o.jsxs(we,{children:[o.jsx(Y,{markers:c,showLegends:!0,title:"Sentiment in PRs between team and reviewers",data:[{lines:[{label:"To team",color:_[0],dataKey:"commentSentimentScore",data:t},{label:"From team",color:_[2],dataKey:"commentAuthorSentimentScore",data:t}],xAxis:"left"}],tableKeys:["commentSentimentScore","commentAuthorSentimentScore","author"],tableData:e}),r.length>0&&o.jsx(o.Fragment,{children:o.jsx(Y,{showLegends:!0,title:"Sentiment in PRs between authors and reviewers",data:[{lines:i,xAxis:"left"}],tableKeys:["commentSentimentScore","commentAuthorSentimentScore","author"],tableData:e})})]})]})})},cc=e=>({releases:e.releases,userIds:e.fetches.userIds,events:e.fetches.events,usersInfo:e.fetches.usersInfo}),ic=M(cc)(lc),dc=e=>({index:t,data:s})=>{const n=e.find(a=>a.area===t),r=s.map(({id:a,color:l})=>[o.jsx(nr,{color:l},a),a,n[`${a}Original`]]);return o.jsx($s,{title:o.jsx("strong",{children:t}),rows:r})},mc=({title:e="",showTitle:t=!0,data:s=[],keys:n=[],colors:r=[],width:a=410,height:l=300})=>{const{theme:c}=K(),i=nt(c),m=$[c].secondary,d=$[c].primary,u=r.length>0?r:[m,d],{showNumbers:p}=ot();return yo(s,n)&&o.jsxs("div",{children:[t&&o.jsx(Ge,{className:"text-center",items:[{label:e,color:d}]}),o.jsx(or,{width:a,height:l,margin:{top:0,bottom:0,right:100,left:100},dotSize:8,dotBorderColor:i.dotColor,dotBorderWidth:2,colors:u,gridShape:"linear",enableDotLabel:!1,gridLabelOffset:10,gridLevels:3,animate:!1,indexBy:"area",keys:n,data:s,maxValue:100,theme:i,sliceTooltip:dc(s),isInteractive:p})]})},uc=(e,t)=>{const s={age:0,approvalsGiven:0,approvalsReceived:0,codeCommentsGiven:0,codeCommentsReceived:0,commentsGiven:0,commentsReceived:0,generalCommentsGiven:0,generalCommentsReceived:0,prSize:0,totalPRs:0,uniquePRsApproved:0,uniquePRsContributedTo:0},n=["commentsGiven","commentsReceived","uniquePRsApproved","totalPRs"],a=e.filter(p=>n.some(f=>p[f]>1)).sort(be(n)),l=Math.ceil(a.length/100*10),c=l>10?a.slice(0,l):a,i={};c.filter(p=>!t).forEach(p=>{Object.entries(p).filter(([,h])=>!Array.isArray(h)&&/^\d+$/.test(h)&&h>0).forEach(([h,g])=>{const f=i[h]||0;i[h]=+g+f})});const m=c.length,d={...s,user:"Peers",userCount:m};Object.entries(i).forEach(([p,h])=>{d[p]=Math.round(h/m)}),e.find(p=>p.author===t);const u=s;return e.forEach(p=>{Object.entries(p).filter(([,h])=>!Array.isArray(h)&&/^\d+$/.test(h)&&h>0).forEach(([h,g])=>{const f=u[h]||0,x=+g;u[h]=f>x?f:x})}),{averagedData:d,maxValues:u,users:e,user:{}}},hc=({maxValues:e={},users:t=[]},s)=>{const n=["commentsGiven","commentsReceived","uniquePRsApproved","totalPRs"],r=s?t:t.sort(be(n)).slice(0,6),a=[{area:"Comments received",dataKey:"commentsReceived"},{area:"Comments given",dataKey:"commentsGiven"},{area:"Approved PRs",dataKey:"uniquePRsApproved"},{area:"PR count",dataKey:"totalPRs"},{area:"PR size",dataKey:"prSize"}];return r.map(c=>{const i=a.map(({area:m,dataKey:d})=>{const u=c[d]||0,p=e[d]||0;return{area:m,value:u&&p?u/p*100:0,valueOriginal:u}});return{title:c.author,data:i,keys:["value"]}})},pc=({usersData:e=[],userIds:t=[],usersInfo:s={}})=>{const{theme:n}=K(),{togglePvPPage:r,setUserPage:a}=Ke(),l=$[n].secondary,c=$[n].primary,{showNames:i}=ve(),m=uc(e),d=hc(m,t.length>0),u=t.length>0,p=u?"Team members":"Top contributors";return d.length>0&&o.jsxs(Q,{className:"flex flex-wrap flex-row justify-center",children:[o.jsx(ie,{title:p}),d.map((h,g)=>{var E;const f=h.title,x=((E=s[f])==null?void 0:E.name)||f;return o.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[o.jsx(mc,{showTitle:!1,height:240,colors:[(g+1)%2===0?l:c],...h}),o.jsx(O,{variant:(g+1)%2===0?"secondary":void 0,onClick:S=>{S.preventDefault(),a(f),window&&window.scrollTo(0,0)},children:i?x:"Spartacus"})]},g)}),u&&o.jsx(O,{className:"w-full mb-4",color:"primary",onClick:h=>{h.preventDefault(),r(),window&&window.scrollTo(0,0)},children:"PvP arena"})]})},gc=e=>({usersData:e.usersData,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),rn=M(gc)(pc),fc=({usersData:e=[]})=>{const{showNames:t}=ve(),{togglePvPPage:s,setUserPage:n}=Ke();return e.length>0&&o.jsx(o.Fragment,{children:o.jsxs(Q,{className:"justify-between",children:[o.jsx(O,{className:"w-full mb-4",color:"primary",onClick:r=>{r.preventDefault(),s(),window&&window.scrollTo(0,0)},children:"PvP arena"}),o.jsx("h3",{className:"w-full",children:"User pages"}),o.jsx("div",{className:"flex flex-wrap justify-between gap-2",children:e.map(({author:r,user:a},l)=>o.jsx(O,{className:"flex-grow",variant:"secondary",onClick:c=>{c.preventDefault(),n(a),window&&window.scrollTo(0,0)},children:t?r:"Spartacus"},`${l}`))})]})})},xc=e=>({usersData:e.usersData}),yc=M(xc)(fc),Rc=({pullRequests:e=[]})=>{const t=e.map((n,r)=>({...n,id:`${r}-${n.repo}-${n.number}`,commentSentimentTotalScore:(n.commentSentimentScore||0)+(n.commentAuthorSentimentScore||0),[`${n.author}-commentsSentimentScore`]:n.commentSentimentScore,[`${n.author}-commentAuthorSentimentScore`]:n.commentAuthorSentimentScore})),s=Ce(t);return o.jsxs(o.Fragment,{children:[o.jsx(wt,{}),o.jsx(qt,{pullRequests:t,chunkyData:s}),o.jsx(Rt,{pullRequests:t,chunkyData:s,tableOpenedByDefault:!0}),o.jsx(ic,{pullRequests:t,chunkyData:s}),o.jsx(nn,{pullRequests:t,chunkyData:s}),o.jsx(Jt,{}),o.jsx(rn,{}),o.jsx(yc,{})]})},Ec=e=>({pullRequests:e.pullRequests}),Sc=M(Ec)(Rc),Ts=({player:e="",className:t="",otherPlayer:s,setPlayerId:n,players:r=[]})=>o.jsxs(Me,{value:e,onValueChange:a=>n(a),children:[o.jsx(Ne,{className:`text-3xl w-auto ${t}`,children:o.jsx(Fe,{children:e})}),o.jsx(Pe,{children:o.jsx($e,{children:r.filter(({author:a})=>a!==s).map(({author:a,name:l})=>o.jsx(Z,{value:a,children:l},a))})})]}),an=({player1:e,player2:t,setPlayer1Id:s=()=>({}),setPlayer2Id:n=()=>({}),players:r=[]})=>{const{theme:a}=K(),l=$[a].secondary,c=$[a].primary,m=[{title:"Total Merged",id:"totalPRs"},{title:"Total approved",id:"uniquePRsApproved"},{title:"Comments given",id:"commentsGiven"},{title:"Comments received",id:"commentsReceived"},{title:"Average positive sentiment",id:"sentimentAveragePositiveScore"},{title:"Average negative sentiment",id:"sentimentAverageNegativeScore"},{title:"Average size",id:"prSize"},{title:"Total additions",id:"prTotalAdditions"},{title:"Total deletions",id:"prTotalDeletions"},{title:"Average days open",id:"age"},{title:"Orgs contributed to",id:"orgCount"},{title:"Repos contributed to",id:"repoCount"}].filter(({id:d})=>Number.isInteger(e[d])&&Number.isInteger(t[d])&&(!["orgCount","repoCount"].includes(d)||["orgCount","repoCount"].includes(d)&&e[d]!==1&&t[d]!==1)).map(d=>{const u=d.id,p=e[u],h=t[u],g=l,f=c,x=Math.ceil(100*p/(p+h)),E=100-x;return{...d,lValue:p,lColor:g,lPercent:x,rValue:h,rColor:f,rPercent:E}});return o.jsxs("div",{className:"w-full flex flex-col items-center basis-full",children:[o.jsx("div",{className:"w-full flex flex-nowrap justify-between mb-4 max-w-mw",children:r.length>0?o.jsxs(o.Fragment,{children:[o.jsx(Ts,{player:e.author,className:"text-secondary",otherPlayer:t.author,setPlayerId:s,players:r}),o.jsx(Ts,{player:t.author,className:"text-primary",otherPlayer:e.author,setPlayerId:n,players:r})]}):o.jsxs(o.Fragment,{children:[o.jsx("h3",{style:{color:l,margin:0},children:e.name}),o.jsx("h3",{style:{color:c,margin:0},children:t.name})]})}),m.map((d,u)=>o.jsxs("div",{className:"w-full relative max-w-mw mb-2",children:[o.jsx("p",{className:"z-[1] absolute w-full top-2 text-center m-0",children:d.title}),o.jsxs("div",{className:"w-full flex flex-nowrap content-stretch justify-between",children:[o.jsx("div",{className:"relative h-9",style:{width:`${d.lPercent}%`,backgroundColor:`${d.lColor}`},children:o.jsx("p",{className:"z-[1] min-w-3 w-full absolute top-2 left-2 text-left m-0",children:d.lValue})}),o.jsx("div",{className:"relative h-9",style:{width:`${d.rPercent}%`,backgroundColor:`${d.rColor}`},children:o.jsx("p",{className:"z-[1] min-w-3 w-full absolute top-2 right-2 text-right m-0",children:d.rValue})})]},d.id)]},`${d.id}${u}`))]})},vc=(e,t)=>{const s={age:0,approvalsGiven:0,approvalsReceived:0,codeCommentsGiven:0,codeCommentsReceived:0,commentsGiven:0,commentsReceived:0,generalCommentsGiven:0,generalCommentsReceived:0,prSize:0,prTotalAdditions:0,prTotalDeletions:0,totalPRs:0,uniquePRsApproved:0,uniquePRsContributedTo:0,sentimentAveragePositiveScore:0,sentimentAverageNegativeScore:0,orgCount:0,repoCount:0},n=["commentsGiven","commentsReceived","approvalsGiven","approvalsReceived"],a=e.filter(h=>{const g=h.author!==t,f=n.some(x=>h[x]>1);return g&&f}).sort(be(n)),l=Math.ceil(a.length/100*10),c=l>10?a.slice(0,l):a,i={};c.filter(h=>h.author!==t).forEach(h=>{Object.entries(h).filter(([,g])=>!Array.isArray(g)&&/^\d+$/.test(g)&&g>0).forEach(([g,f])=>{const x=i[g]||0;i[g]=+f+x})});const m=c.length,d={...s};Object.entries(i).forEach(([h,g])=>{d[h]=Math.round(g/m)});const u={...d,user:"Peers",name:"Peers"},p=e.find(h=>h.author===t)||{approvalsGivenByTeam:{}};return[{...p,user:p.author,name:p.name||p.author},u,m]},wc=(e=[],t=[],s,n,r)=>{const a=[],l=[],c=new Set;e.forEach(u=>{const{author:p,repo:h}=u;c.add(h),u[`repo-${h}`]=1,p===s?l.push(u):a.push(u)});const i=[];Array.from(c).forEach((u,p)=>{i.push({label:u,color:_[p%_.length],groupMath:"count",filterForKey:!0,dataKey:`repo-${u}`,data:l})});const d=Ce(l);return[{markers:t,showLegends:!0,title:"Sentiments in PR",data:[{lines:[{label:`${s} received`,color:_[2],dataKey:"commentSentimentScore",data:l},{label:`${s} given`,color:_[1],dataKey:"commentAuthorSentimentScore",data:l},{label:"Peer received",color:_[4],dataKey:"commentSentimentScore",data:a},{label:"Peer given",color:_[5],dataKey:"commentAuthorSentimentScore",data:a}],xAxis:"left"}],tableKeys:["commentSentimentScore","commentAuthorSentimentScore"],tableData:d},{markers:t,data:[{lines:[{label:"User PR size",color:n,dataKey:"prSize",data:l},{label:"Peer PR size",color:r,dataKey:"prSize",data:a}],xAxis:"left"}],tableKeys:["prSize"],tableData:d},{markers:t,data:[{lines:[{label:"User PR age",color:n,dataKey:"age",data:l},{label:"Peer PR age",color:r,dataKey:"age",data:a}],xAxis:"left"}],tableKeys:["age"],tableData:d}]},bc=({pullRequests:e=[],releases:t=[],usersData:s=[]})=>{const{userPage:n,clearUserPage:r}=Ke(),{theme:a}=K(),l=$[a].secondary,c=$[a].primary,i=wc(e,t,n,l,c),[m,d,u]=vc(s,n),p=m.name||n;return o.jsxs(Q,{children:[o.jsx(O,{className:"w-full mb-4",color:"secondary",onClick:h=>{h.preventDefault(),r(),window&&window.scrollTo(0,0)},children:"Back to main view"}),o.jsxs("p",{className:"w-full text-center",children:["A collection metrics showing ",p,"'s data and average data from the top ",u," peers"]}),o.jsx(an,{player1:m,player2:d}),i.length&&i.map((h,g)=>o.jsx(Y,{...h},`${g}-${n}`)),o.jsx(O,{className:"w-full mb-4",color:"secondary",onClick:h=>{h.preventDefault(),r(),window&&window.scrollTo(0,0)},children:"Back to main view"})]})},Ac=e=>({pullRequests:e.pullRequests,releases:e.releases,usersData:e.usersData}),Tc=M(Ac)(bc),Dc=I("",["location","search"],window),ln=new URLSearchParams(Dc),jc=(e=[])=>{var t;return ln.get("player1")||((t=e[0])==null?void 0:t.author)},Nc=(e=[])=>{var t;return ln.get("player2")||((t=e[1])==null?void 0:t.author)},Pc=({pullRequests:e=[],releases:t=[],usersData:s=[],events:n=[],usersInfo:r={}})=>{const{togglePvPPage:a}=Ke(),{theme:l}=K(),c=$[l].secondary,i=$[l].primary,[m,d]=b.useState(jc(s)),[u,p]=b.useState(Nc(s)),h=s.find(y=>y.author===m),g=s.find(y=>y.author===u),f=[],x=[],E=[];e.forEach(y=>{const w=y.author;w===m?(f.push(y),E.push(y)):w===u&&(x.push(y),E.push(y))});const S=Ce(E),v=Ie({events:n,releases:t,usersInfo:r});return s.length>0&&o.jsx(o.Fragment,{children:o.jsxs(Q,{children:[o.jsx(O,{className:"w-full mr-0 mb-4",color:"secondary",onClick:y=>{y.preventDefault(),a()},children:"Back to main view"}),o.jsx("p",{className:"w-full text-center",children:"This page is just for fun, a bigger or smaller number could be good, bad or not mean much, it depends on context."}),o.jsx(an,{player1:h,player2:g,setPlayer1Id:d,setPlayer2Id:p,players:s}),o.jsx("p",{className:"w-full text-center",children:"And the winner is.... Both! Thanks for your great work!"}),o.jsxs(we,{children:[o.jsx(Y,{markers:v,showLegends:!0,title:"Sentiments in PR",data:[{lines:[{label:`${h.name} received`,color:_[0],dataKey:"commentSentimentScore",data:f},{label:`${h.name} given`,color:_[2],dataKey:"commentAuthorSentimentScore",data:f},{label:`${g.name} received`,color:_[0],dataKey:"commentSentimentScore",data:x},{label:`${g.name} given`,color:_[2],dataKey:"commentAuthorSentimentScore",data:x}],xAxis:"left"}],tableData:S,tableKeys:["author","commentSentimentScore","commentAuthorSentimentScore"]}),o.jsx(Y,{markers:v,data:[{lines:[{label:`${h.name} PR size`,color:c,dataKey:"prSize",data:f},{label:`${g.name} PR size`,color:i,dataKey:"prSize",data:x}],xAxis:"left"}],tableKeys:["author","prSize"],tableData:S}),o.jsx(Y,{markers:v,data:[{lines:[{label:`${h.name} PR age`,color:c,dataKey:"age",data:f},{label:`${g.name} PR age`,color:i,dataKey:"age",data:x}],xAxis:"left"}],tableKeys:["author","age"],tableData:S})]}),o.jsx(O,{className:"w-full mr-0 mb-4",color:"secondary",onClick:y=>{y.preventDefault(),a(),window&&window.scrollTo(0,0)},children:"Back to main view"})]})})},Cc=e=>({pullRequests:e.pullRequests,releases:e.releases,usersData:e.usersData,events:e.fetches.events,usersInfo:e.fetches.usersInfo}),Ic=M(Cc)(Pc),_c=({pullRequests:e=[],releases:t=[],events:s=[],usersInfo:n={}})=>{const{theme:r}=K(),a=$[r].secondary,l=$[r].primary,c=Ie({events:s,releases:t,usersInfo:n});return e.length>0&&o.jsxs(Q,{children:[o.jsxs(ie,{title:"Team's contribution spread",expandText:"guidance",children:[o.jsx("p",{children:"Questions worth asking (with team context):"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Is there a healthy percentage spread?"}),o.jsx("li",{children:"Are the Approval and comments spreads similar?"}),o.jsx("li",{children:"Any insights or things you would like to try to impact these metrics?"})]})]}),o.jsx("p",{children:"Y axis is the percentage spread of approvals and comments within the active team*, 100% is an EVEN spread across the team, 0% is contribution from only ONE engineer."}),o.jsx(we,{children:o.jsx(Y,{title:"Percentage spread within team for ",markers:c,data:[{lines:[{label:"Comments given",color:a,dataKey:"comments",groupMath:"teamDistribution",yMax:100,data:e},{label:"Approvals given",color:l,dataKey:"approvals",groupMath:"teamDistribution",yMax:100,data:e}],xAxis:"left"}]})}),o.jsx("p",{children:"*Active team per data point are those who have approved, commented or raised a PR within that time frame."})]})},kc=e=>({releases:e.releases,events:e.fetches.events,usersInfo:e.fetches.usersInfo}),Oc=M(kc)(_c),Lc=({pullRequests:e=[],userIds:t=[]})=>{const s=l=>{const c={};return t.forEach(i=>{const m=l==null?void 0:l[i];m&&(c[i]=m)}),c},n={},r=e.map((l,c)=>(n[l.repo]=(n[l.repo]||0)+1,{...l,id:`${c}-${l.repo}-${l.number}`,teamApprovers:s(l.approvers),teamCommenters:s(l.commenters),[`repo-${l.repo}`]:1,commentSentimentTotalScore:(l.commentSentimentScore||0)+(l.commentAuthorSentimentScore||0),[`${l.author}-commentsSentimentScore`]:l.commentSentimentScore,[`${l.author}-commentAuthorSentimentScore`]:l.commentAuthorSentimentScore})),a=Ce(r);return o.jsxs(o.Fragment,{children:[o.jsx(wt,{}),o.jsx(Oc,{pullRequests:r}),o.jsx(Rt,{pullRequests:r,chunkyData:a,tableOpenedByDefault:!0}),o.jsx(qt,{pullRequests:r,chunkyData:a,allRepos:n}),o.jsx(Jt,{}),o.jsx(rn,{})]})},Mc=e=>({pullRequests:e.pullRequests,userIds:e.fetches.userIds}),$c=M(Mc)(Lc),Fc=({pullRequests:e=[],reviewedPullRequests:t=[],userIds:s=[],usersInfo:n={}})=>{const[r]=s,{showNames:a}=ve(),{theme:l}=K(),c=$[l].secondary,i=$[l].primary,m={},d={},u={},p=e.map(y=>{const w=y.commenters||{};Object.keys(w).forEach(j=>{const D=w[j]||0;u[j]||(u[j]={}),u[j].commentsReceived=(u[j].commentsReceived||0)+D});const T=y.approvers||{};return Object.keys(T).forEach(j=>{const D=T[j]||0;u[j]||(u[j]={}),u[j].approvalsReceived=(u[j].approvalsReceived||0)+D}),m[y.repo]=(m[y.repo]||0)+1,d[y.org]=(d[y.org]||0)+1,{...y,[`repo-${y.repo}`]:1,commentSentimentTotalScore:(y.commentSentimentScore||0)+(y.commentAuthorSentimentScore||0),[`${y.author}-commentsSentimentScore`]:y.commentSentimentScore,[`${y.author}-commentAuthorSentimentScore`]:y.commentAuthorSentimentScore}}),h={...n};t.map(y=>{var D,L;const w=y.author;h[w]={userId:w};const T=((D=y==null?void 0:y.commenters)==null?void 0:D[r])||0,j=((L=y==null?void 0:y.approvers)==null?void 0:L[r])||0;u[w]||(u[w]={}),u[w].commentsGiven=(u[w].commentsGiven||0)+T,u[w].approvalsGiven=(u[w].approvalsGiven||0)+j});const g=Object.entries(u).map(([y,w],T)=>{var j;return{...w,author:a?y:`${Array(T).fill(" ").join("")}Spartacus`,name:a?((j=n[y])==null?void 0:j.name)||y:`${Array(T).fill(" ").join("")}Spartacus`}}),f=St(e.concat(t),h,r),x=["commentsGiven","approvalsGiven"],E=f.sort(be(x)),S=Ce(p),v=fo("repo",m);return o.jsxs(o.Fragment,{children:[o.jsx(wt,{}),o.jsx(Q,{children:o.jsxs(we,{children:[o.jsxs("div",{className:"flex flex-wrap justify-center w-full",children:[o.jsx(ut,{data:g,indexBy:"name",title:"Comments",sortBy:"commentsGiven",bars:[{dataKey:"commentsGiven",color:c,label:"given"},{dataKey:"commentsReceived",color:i,label:"received"}]}),o.jsx(ut,{data:g,indexBy:"name",title:"Approvals",sortBy:"approvalsGiven",bars:[{dataKey:"approvalsGiven",color:c,label:"given"},{dataKey:"approvalsReceived",color:i,label:"received"}]})]}),o.jsxs("div",{className:"w-full flex flex-wrap justify-center gap-4",children:[o.jsx(ht,{data:E,preSorted:!0,dataKey:"commentsByUser",title:"Comment contributions"}),o.jsx(ht,{data:E,preSorted:!0,dataKey:"approvalsByUser",title:"Approval contributions"})]}),v.pieData.length>0&&o.jsx(Ro,{data:v.pieData,title:v.sectionTitle})]})}),o.jsx(Rt,{pullRequests:p,chunkyData:S,tableOpenedByDefault:!0}),o.jsx(Jt,{})]})},Uc=e=>({pullRequests:e.pullRequests,reviewedPullRequests:e.reviewedPullRequests,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),Gc=M(Uc)(Fc),Vc=e=>{const{showPvP:t,userPage:s}=Ke(),n=!!(s&&s.length>0);return o.jsx("div",{children:le([[A(t),A(o.jsx(Ic,{}))],[A(n),A(o.jsx(Tc,{}))],[cs(Boolean,"teamName"),A(o.jsx($c,{}))],[cs(r=>r.length===1,"userIds"),A(o.jsx(Gc,{}))],[({repo:r,org:a})=>r===""&&a&&a.length>0,A(o.jsx(oc,{}))],[G,A(o.jsx(Sc,{}))]])(e)})},Bc=e=>({userIds:e.fetches.userIds,teamName:e.fetches.teamName,repo:e.fetches.repo,org:e.fetches.org}),qc=M(Bc)(Vc),Kc=()=>{const{toggleTheme:e}=K();return o.jsxs("div",{className:"grow self-center flex flex-nowrap justify-end gap-x-2 mr-2",children:[o.jsx("a",{className:"hover:text-primary",href:"https://bsky.app/profile/chris-n07734.bsky.social",children:o.jsx("svg",{className:"h-6 w-6 fill-current",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-qa-id":"BlueSkyIcon",children:o.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})})}),o.jsx("a",{className:"hover:text-primary",href:"https://github.com/n07734/community-health",children:o.jsx("svg",{className:"h-6 w-6 fill-current",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-testid":"GitHubIcon",children:o.jsx("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"})})}),o.jsxs("a",{href:"#theme",onClick:t=>{t.preventDefault(),e()},className:"theme-icon hover:text-primary",children:[o.jsx("svg",{className:"h-6 w-6 sun fill-current dark:display-none",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-qa-id":"SunnyIcon",children:o.jsx("path",{d:"m6.76 4.84-1.8-1.79-1.41 1.41 1.79 1.79zM4 10.5H1v2h3zm9-9.95h-2V3.5h2zm7.45 3.91-1.41-1.41-1.79 1.79 1.41 1.41zm-3.21 13.7 1.79 1.8 1.41-1.41-1.8-1.79zM20 10.5v2h3v-2zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6m-1 16.95h2V19.5h-2zm-7.45-3.91 1.41 1.41 1.79-1.8-1.41-1.41z"})}),o.jsx("svg",{className:"h-6 w-6 moon fill-current",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-qa-id":"MoonIcon",children:o.jsx("path",{d:"M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2"})})]})]})},cn=Bs,dn=qs,mn=Vt,zc=Vs,un=b.forwardRef(({className:e,...t},s)=>o.jsx(gt,{className:N("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));un.displayName=gt.displayName;const Hc=Gt("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Zt=b.forwardRef(({side:e="right",className:t,children:s,...n},r)=>o.jsxs(zc,{children:[o.jsx(un,{}),o.jsxs(Be,{ref:r,className:N(Hc({side:e}),t),...n,children:[s,o.jsxs(Vt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx(rr,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zt.displayName=Be.displayName;const es=({className:e,...t})=>o.jsx("div",{className:N("flex flex-col space-y-2 text-center sm:text-left",e),...t});es.displayName="SheetHeader";const ts=b.forwardRef(({className:e,...t},s)=>o.jsx(ft,{ref:s,className:N("text-lg font-semibold text-foreground",e),...t}));ts.displayName=ft.displayName;const hn=b.forwardRef(({className:e,...t},s)=>o.jsx(xt,{ref:s,className:N("text-sm text-muted-foreground",e),...t}));hn.displayName=xt.displayName;const Wc=[["Individual report","user"],["Team report","team"],["Repo report","repo"],["Org report","org"]],Yc=({setNewReportType:e,clearReport:t})=>o.jsxs(cn,{children:[o.jsx(dn,{asChild:!0,children:o.jsx(O,{variant:"link",className:"normal-case text-report-title hover:text-primary text-base",children:"Make a report"})}),o.jsxs(Zt,{className:"bg-background",children:[o.jsxs(es,{children:[o.jsx(ts,{children:"Make a report"}),o.jsx(hn,{children:o.jsx("p",{children:"Choose the type of report you want to make"})})]}),o.jsx("div",{children:Wc.map(([s,n],r)=>o.jsx(mn,{asChild:!0,children:o.jsx(O,{className:"text-xl normal-case mr-2 mb-3 w-full",variant:"secondary",onClick:()=>{const a=new URL(window.location.href);a.searchParams.delete("report"),history.pushState(null,"",a),t(),e(n)},children:s})},`${r}`))})]})]}),Qc=e=>({clearReport:()=>e(Cl)}),Xc=M(()=>({}),Qc)(Yc),Ut=[],pn=[{name:"React",fileName:"facebook-react"},{name:"NextJS",fileName:"vercel-next.js"},{name:"Remix",fileName:"remix-run-remix"},{name:"Vue",fileName:"vuejs-core"},{name:"Svelte",fileName:"sveltejs-svelte"},{name:"Typescript",fileName:"microsoft-typescript"},{name:"Typescript 10th anniversary",fileName:"microsoft-typescript-10"},{name:"MSW",fileName:"mswjs-msw"},{name:"SWC",fileName:"swc-project-swc"},{name:"vscode",fileName:"microsoft-vscode"},{name:"Node",fileName:"nodejs-node"},{name:"Bluesky",fileName:"bluesky-social-social-app"}],gn=[{name:"Vite",fileName:"vitejs"},{name:"testing-library",fileName:"testing-library"},{name:"TanStack",fileName:"TanStack"}],fn=[{name:"ReactCore",fileName:"ReactCore"},{name:"ViteCore",fileName:"ViteCore"},{name:"TypeScriptCore",fileName:"TypeScriptCore"}],Jc=[{name:"Theo",fileName:"t3dotgg"},{name:"Daniel Roe",fileName:"danielroe"},{name:"Kent",fileName:"kentcdodds"},{name:"Hailey",fileName:"haileyok"},{name:"shadcn",fileName:"shadcn"},{name:"Dominik",fileName:"tkdodo"},{name:"Tyler",fileName:"coolsoftwaretyler"}],Zc=[{name:"Vite",fileName:"vitejs"},{name:"Vitest",fileName:"vitest-dev-vitest"},{name:"Playwright",fileName:"microsoft-playwright"},{name:"Astro",fileName:"withastro-astro"},{name:"PNPM",fileName:"pnpm-pnpm"},{name:"esbuild",fileName:"evanw-esbuild"},{name:"Testing Library",fileName:"testing-library"},{name:"SvelteKit",fileName:"sveltejs-kit"}],ei=({setNewReportType:e,getPreFetchedReport:t,preFetchedName:s})=>{const n=(r,a=1)=>o.jsx(mn,{asChild:!0,children:o.jsx(O,{className:"mr-2 mb-3","data-qa-id":`prefetch-${r.name}`,variant:s===r.fileName?void 0:"secondary",onClick:()=>{const l=new URL(window.location.href);l.searchParams.set("report",r.fileName),history.pushState(null,"",l),e(""),t(r)},children:(r==null?void 0:r.name)||"Report"})},`${a}`);return o.jsxs(cn,{children:[o.jsx(dn,{asChild:!0,children:o.jsx(O,{variant:"link",className:"normal-case text-foreground hover:text-primary text-base",children:"Other reports"})}),o.jsxs(Zt,{className:"bg-background overflow-scroll",children:[o.jsx(es,{children:o.jsx(ts,{children:"See a different report"})}),o.jsxs("div",{className:"mb-4",children:[Ut.map(n),o.jsxs("div",{children:[o.jsxs("p",{children:[o.jsx("a",{className:"text-primary",href:"https://2024.stateofjs.com/en-US/libraries/#tier_list",children:"StateOfJS 24"})," S tier list"]}),Zc.map(n)]}),o.jsx("p",{children:"Other reports"}),o.jsxs(o.Fragment,{children:[o.jsx("p",{children:"Repository reports"}),pn.map(n),o.jsx("p",{children:"Org reports"}),gn.map(n),o.jsx("p",{children:"Team reports"}),fn.map(n),o.jsx("p",{children:"Individual reports"}),Jc.map(n)]})]})]})]})},ti=e=>({preFetchedName:e.preFetchedName}),si=e=>({getPreFetchedReport:t=>e(en(t))}),oi=M(ti,si)(ei),ni=e=>{var x,E;const{error:t,preFetchedName:s="",getPreFetchedReport:n}=e,{togglePvPPage:r,setUserPage:a}=Ke(),l=(x=window==null?void 0:window.location)==null?void 0:x.search,c=new URLSearchParams(l),i=c.get("player1")||"",m=c.get("player2")||"",d=c.get("user")||"",u=[...Ut,...pn,...fn,...gn],h=c.get("report")||((E=Ut[0])==null?void 0:E.fileName)||"bluesky-social-social-app",f=u.some(S=>S.fileName===h)?u.find(S=>S.fileName===(s||h)):{fileName:h};return b.useEffect(()=>{n(f),i&&m?r():d&&a(d)},[n,i,m,d]),o.jsx(o.Fragment,{children:t&&o.jsx(Kt,{error:t,className:"col-span-full mb-4"})})},ri=e=>({preFetchedName:e.preFetchedName,error:e.preFetchedError}),ai=e=>({getPreFetchedReport:t=>e(en(t))}),li=M(ri,ai)(ni),ci=e=>{const{setValues:t,getData:s,fetching:n,reportType:r="repo"}=e,l={repo:"Get community data for any repo",team:"Get community data for any Team(list of users)",user:"Get data for an individual",org:"Get community data for any Org"}[r],m={sortDirection:"DESC",amountOfData:1,token:"",excludeIds:"",enterpriseAPI:"",...{repo:{org:"",repo:""},org:{org:""},team:{usersInfo:{},teamName:""},user:{userId:"",name:""}}[r]},[d,u]=b.useState({}),[p,h]=b.useState(m),g=(y={})=>{const w={...p,...y};h(w)};b.useEffect(()=>{h(m)},[r,h]);const f=(y,w)=>h({...p,[y]:w}),x={inputError:d,setInputError:u,formInfo:p,setValue:f},E=y=>{y.preventDefault();const{isValid:w,validationErrors:T}=To(p);u(T),w&&!n&&t(p),w&&!n&&s()},v={repo:[{type:"org"},{type:"repo"}],org:[{type:"org",className:"col-span-full"}],team:[{type:"teamName",className:"col-span-full"}],user:[{type:"userId"},{type:"name"}]}[r];return o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{children:l}),o.jsxs("form",{onSubmit:E,children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 max-mm:grid-cols-1 items-end",children:[v.map(y=>o.jsx(W,{className:y.className,type:y.type,...x},y.type)),r==="team"&&o.jsx($o,{usersInfo:p.usersInfo,setParentValues:g}),o.jsx(W,{className:"col-span-full",type:"events",...x}),o.jsx("p",{className:"col-span-full",children:"Key events can give context when viewing the data e.g. started using copilot, launched a feature. These events can help give more context while viewing the data. e.g.  Copilot adopted=2024-02-01,Feature A=2024-04-10."}),o.jsx(W,{type:"token",...x}),o.jsx(vo,{className:"mb-3 max-mm:mb-0",setValue:f,amountOfData:p.amountOfData}),o.jsxs("p",{className:"col-span-full",children:["To create a token go to your GitHub ",o.jsx("a",{className:"text-primary",href:"https://github.com/settings/tokens",children:"tokens"})," page, click on 'generate new token', choose the settings 'repo' (all), 'read:org' and 'user' then click 'Generate token'."]})]}),o.jsx(ie,{className:"mb-0 col-span-full",expandText:"show",intro:"Advanced options",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2 max-mm:grid-cols-1 items-end",children:[o.jsx(W,{type:"excludeIds",...x}),o.jsx(W,{type:"enterpriseAPI",...x})]})}),o.jsx(So,{})]}),o.jsx(sn,{})]})},ii=e=>({fetching:e.fetching,error:e.error}),di=e=>({setValues:t=>{const{org:s,repo:n,token:r,amountOfData:a,sortDirection:l,teamName:c,usersInfo:i={},userId:m,name:d="",enterpriseAPI:u,excludeIds:p,events:h}=t;m&&(i[m]={userId:m,name:d,dates:[]}),e(Pl({...t,usersInfo:i})),e(Ko(r)),e(Yo(a)),e(Xo(l)),e(Qo(a)),s&&e(wl(s)),n&&e(Tl(n)),Object.keys(i).length>0&&e(zo(i)),c&&e(Al(c)),e(bl(u)),e(Ho(p)),h&&e(Wo(h))},getData:()=>e(Zo())}),mi=M(ii,di)(ci),ui=()=>{const[e,t]=b.useState("");return o.jsxs("div",{className:"p-0 overflow-auto",children:[o.jsxs("header",{children:[o.jsxs("nav",{className:"w-full flex flex-wrap",children:[o.jsx(oi,{setNewReportType:t}),o.jsx(Xc,{setNewReportType:t}),o.jsx(Kc,{})]}),"  ",o.jsx(Q,{children:o.jsxs(ie,{title:"Code Health",hLevel:1,expandText:"more",children:[o.jsx("p",{children:"Coding is a team activity, healthy collaboration produces better code. This tool gives in depth collaboration and contribution metrics for teams to analyze their code health."}),o.jsx("p",{children:"You can create your own reports for individuals, teams, repos and orgs from public or enterprise GitHub."})]})})]}),o.jsx(li,{}),e!==""&&o.jsx(Q,{className:"block",children:o.jsx(mi,{reportType:e})}),o.jsx(qc,{})]})},bt=b.forwardRef(({className:e,value:t,...s},n)=>o.jsx(Xs,{ref:n,className:N("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:o.jsx(ar,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));bt.displayName=Xs.displayName;const hi=({userIds:e,user:t})=>{const s=t?e.findIndex(l=>l===t):0,n=s>0?e.slice(0,s):[],r=100/(e.length||10),a=s*r;return o.jsxs(o.Fragment,{children:[o.jsxs(ze,{className:"text-6xl font-extralight mb-08",children:["Fetching ",s+1," of ",e.length," ",e.length===1?"user":"users"]}),o.jsx(bt,{value:a}),n.length>0&&o.jsxs("p",{children:["Fetched users: ",n.join(", ")]})]})},pi=({repo:e,repos:t,loadedPercent:s,prCount:n,issueCount:r})=>{const a=e?t.findIndex(c=>c===e):0,l=a>0?t.slice(0,a):[];return o.jsxs(o.Fragment,{children:[o.jsxs(ze,{className:"text-6xl font-extralight mb-08",children:["Fetching ",o.jsx("span",{className:"text-primary",children:e})]}),o.jsx(bt,{value:s}),o.jsxs("h3",{children:[n," Pull Requests"]}),o.jsxs("h3",{children:[r," Issues"]}),l.length>0&&o.jsxs("p",{children:["Fetched repos: ",l.join(", ")]})]})},Ds=({user:e,repo:t,loadedPercent:s,prCount:n,issueCount:r})=>o.jsxs(o.Fragment,{children:[o.jsxs(ze,{className:"text-6xl font-extralight mb-08",children:["Fetching ",o.jsx("span",{className:"text-primary",children:e||t})]}),o.jsx(bt,{value:s}),o.jsxs("h3",{children:[n," Pull Requests"]}),o.jsxs("h3",{children:[r," Issues"]})]}),gi=({savedReportName:e})=>o.jsxs(ze,{className:"text-6xl font-extralight mb-08",children:["Fetching ",o.jsx("span",{className:"text-primary",children:e})]}),fi={team:hi,user:Ds,repo:Ds,org:pi,saved:gi},xi=({fetches:e,fetching:t=!1,fetchStatus:s={},pullRequests:n=[],formUntilDate:r=""})=>{const{userIds:a=[],sortDirection:l=""}=e,{user:c="",repo:i="",repos:m=[],savedReportName:d="",prCount:u=0,latestItemDate:p="",issueCount:h=0,paused:g=!1}=s,f=d&&"saved"||a.length>1&&"team"||a.length===1&&"user"||m.length>1&&"org"||"repo",x=(B,C)=>l==="DESC"?fe(B,C):fe(C,B),E=l==="DESC"?0:-1,S=n.length>0?new Date(n.at(E).mergedAt):new Date,v=p?new Date(p):S,y=new Date(r),w=x(S,y),T=x(S,v),j=100/(w||10),D=T*j,L=fi[f];return t&&o.jsx(Do,{open:!0,children:o.jsxs(Po,{"data-qa-id":"loader",className:"overflow-scroll max-h-full w-4/5",children:[g&&o.jsx("p",{children:" Fetching paused briefly due to Github api throttling."}),o.jsx(L,{userIds:a,user:c,repo:i,repos:m,prCount:u,issueCount:h,savedReportName:d,loadedPercent:D})]})})},yi=e=>({fetches:e.fetches,fetching:e.fetching,fetchStatus:e.fetchStatus,pullRequests:e.pullRequests,formUntilDate:e.formUntilDate}),Ri=M(yi)(xi);class Ei extends b.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,s){console.error("Uncaught error:",t,s)}render(){return this.state.hasError?o.jsx("h1",{className:"text-center mt-4",children:"Something went wrong."}):this.props.children}}const Si=()=>o.jsx(Ei,{children:o.jsxs(xr,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:[o.jsx(Ri,{}),o.jsx(ui,{})]})}),At=e=>(t,s)=>(n=e,r)=>{const a={[R[t]]:()=>r.payload,[R[s]]:()=>e}[r.type];return a?a():n},ge=At(""),Nt=At([]),vi=At({}),ct=At({hasNextPage:!0}),wi=is({fetches:is({token:(e="",t)=>t.type===R.STORE_TOKEN?t.payload:e,org:ge("STORE_ORG","CLEAR_ORG"),repo:ge("STORE_REPO","CLEAR_REPO"),teamName:ge("SET_TEAM_NAME","CLEAR_TEAM_NAME"),untilDate:ge("STORE_UNTIL_DATE","CLEAR_UNTIL_DATE"),amountOfData:(e=1,t)=>t.type===R.STORE_AMOUNT?t.payload:e,sortDirection:(e="DESC",t)=>t.type===R.STORE_SORT?t.payload:e,enterpriseAPI:(e="",t)=>t.type===R.STORE_ENT_URL?t.payload:e,userIds:Nt("STORE_USER_IDS","CLEAR_USER_IDS"),usersInfo:vi("STORE_USERS_INFO","CLEAR_USERS_INFO"),excludeIds:Nt("STORE_EX_IDS","CLEAR_EX_IDS"),events:Nt("STORE_EVENTS","CLEAR_EVENTS"),prPagination:ct("SET_PR_PAGINATION","CLEAR_PR_PAGINATION"),usersReviewsPagination:ct("SET_PR_REVIEWED_PAGINATION","CLEAR_PR_REVIEWED_PAGINATION"),releasesPagination:ct("SET_RELEASES_PAGINATION","CLEAR_RELEASES_PAGINATION"),issuesPagination:ct("SET_ISSUES_PAGINATION","CLEAR_ISSUES_PAGINATION")}),reportDescription:ge("SET_DESC","CLEAR_DESC"),formUntilDate:ge("STORE_FORM_UNTIL_DATE","CLEAR_FORM_UNTIL_DATE"),fetching:(e=!1,t)=>{const{FETCH_START:s,FETCH_END:n}=R,r={[s]:!0,[n]:!1};return[s,n].includes(t.type)?r[t.type]:e},fetchStatus:(e={},t)=>t.type===R.FETCH_STATUS?t.payload:e,error:ge("FETCH_ERROR","CLEAR_FETCH_ERROR"),preFetchedError:ge("PRE_FETCH_ERROR","CLEAR_PRE_FETCH_ERROR"),preFetchedName:ge("PREFETCHED_NAME","CLEAR_PREFETCHED_NAME"),pullRequests:(e=[],t)=>[t.type===R.ADD_PRS&&t.payload,t.type===R.CLEAR_PRS&&[],e].find(Boolean),reviewedPullRequests:(e=[],t)=>[t.type===R.ADD_REVIEWED_PRS&&t.payload,t.type===R.CLEAR_REVIEWED_PRS&&[],e].find(Boolean),itemsDateRange:(e=["",""],t)=>[t.type===R.ADD_ITEMS_DATE_RANGE&&t.payload,t.type===R.CLEAR_ITEMS_DATE_RANGE&&["",""],e].find(Boolean),trimmedItems:(e={},t)=>[t.type===R.ADD_TRIMMED_ITEMS&&t.payload,t.type===R.CLEAR_TRIMMED_ITEMS&&{},e].find(Boolean),filteredPRs:(e=[],t)=>[t.type===R.ADD_FILTERED_PRS&&t.payload,t.type===R.CLEAR_FILTERED_PRS&&[],e].find(Boolean),filteredReviewedPRs:(e=[],t)=>[t.type===R.ADD_REVIEWED_FILTERED_PRS&&t.payload,t.type===R.CLEAR_REVIEWED_FILTERED_PRS&&[],e].find(Boolean),usersData:(e=[],t)=>[t.type===R.ADD_USERS_DATA&&t.payload,t.type===R.CLEAR_USERS_DATA&&[],e].find(Boolean),issues:(e=[],t)=>[t.type===R.ADD_ISSUES&&t.payload,t.type===R.CLEAR_ISSUES&&[],e].find(Boolean),filteredIssues:(e=[],t)=>[t.type===R.ADD_FILTERED_ISSUES&&t.payload,t.type===R.CLEAR_FILTERED_ISSUES&&[],e].find(Boolean),releases:(e=[],t)=>[t.type===R.ADD_RELEASES&&t.payload,t.type===R.CLEAR_RELEASES&&[],e].find(Boolean),filteredReleases:(e=[],t)=>[t.type===R.ADD_FILTERED_RELEASES&&t.payload,t.type===R.CLEAR_FILTERED_RELEASES&&[],e].find(Boolean)}),bi=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Je,Ai=lr(wi,bi(cr(ur)));ir.createRoot(document.getElementById("root")).render(o.jsx(dr.StrictMode,{children:o.jsx(mr,{store:Ai,children:o.jsx(hr,{children:o.jsx(pr,{children:o.jsx(gr,{children:o.jsx(Si,{})})})})})}));
