import{r as I,j as r,w as b,C as Po,s as wo,p as O,i as Ze,a as We,c as ee,b as P,d as ae,T as U,F as me,m as ut,e as Ye,f as je,t as ot,g as Te,h as nt,k as ys,l as At,n as Dt,o as Rs,q as Re,u as Co,S as bo,v as xs,x as Ss,y as Es,z as vs,A as Io,B as _o,D as No,E as jo,G as Kt,H as $e,I as Oo,J as As,K as V,L as ko,M as Lo,N as Mo,O as M,P as Fe,Q as re,R as $o,U as Tt,V as Fo,W as Uo,X as Go,Y as Bo,Z as Wo,_ as Vo,$ as Ds,a0 as Ko,a1 as Ts,a2 as Pt,a3 as B,a4 as qo,a5 as qt,a6 as Ht,a7 as zt,a8 as it,a9 as lt,aa as Yt,ab as Ho,ac as zo,ad as Yo,ae as Qo,af as Xo,ag as Ps,ah as Jo,ai as wt,aj as Zo,ak as en,al as Qt,am as tn,an as sn,ao as on,ap as nn,aq as Xt,ar as rn,as as an,at as ln,au as cn,av as Jt,aw as mn,ax as dn,ay as un,az as Zt,aA as pn,aB as hn,aC as gn,aD as fn,aE as yn,aF as Rn}from"./vendor-DjEwbx8u.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();const ws=I.createContext(void 0),xn=({children:e})=>{const[t,s]=I.useState("dark"),n={themeMode:t,toggleThemeMode:()=>s(t==="dark"?"light":"dark")};return r.jsx(ws.Provider,{value:n,children:e})},Cs=()=>{const e=I.useContext(ws);if(e===void 0)throw new Error("useThemeMode must be used within a ThemeModeProvider");return e},bs=I.createContext({}),Sn=({children:e})=>{const[t,s]=I.useState(!0),n={showNumbers:t,toggleShowNumbers:()=>s(!t)};return r.jsx(bs.Provider,{value:n,children:e})},et=()=>I.useContext(bs),Is=I.createContext({}),En=({children:e})=>{const[t,s]=I.useState(!0),n={showNames:t,toggleShowNames:()=>s(!t)};return r.jsx(Is.Provider,{value:n,children:e})},Pe=()=>I.useContext(Is),_s=I.createContext({}),vn=({children:e})=>{const[t,s]=I.useState(!1),[o,n]=I.useState(""),m={showPvP:t,togglePvPPage:()=>{s(!t),n("")},userPage:o,setUserPage:(c="")=>{s(!1),n(c)},clearUserPage:()=>{s(!1),n("")}};return r.jsx(_s.Provider,{value:m,children:e})},Ve=()=>I.useContext(_s),Ke=e=>({p:e.copy.body,h1:e.copy.h1,h2:e.copy.h2,h3:e.copy.h3,h4:e.copy.h4,link:{color:e.palette.link},list:e.copy.list,listItem:e.copy.listItem}),Ns=b(Ke)(({className:e="",href:t="",classes:s={},children:o})=>r.jsx("a",{href:t,className:`${s.link} ${e}`,children:o})),C=b(Ke)(({className:e="",classes:t={},children:s})=>r.jsx("p",{className:`${t.p} ${e}`,children:s})),kt=b(Ke)(({classes:e={},children:t})=>r.jsx("ul",{className:e.list,children:t}));b(Ke)(({classes:e={},children:t})=>r.jsx("ol",{className:e.list,children:t}));const ce=b(Ke)(({classes:e={},children:t})=>r.jsx("li",{className:e.listItem,children:t})),K=b(Ke)(({level:e=1,styleAs:t,className:s="",classes:o={},...n})=>{const a=`h${t||e}`,i=`h${e}`;return r.jsx(i,{className:`${o[a]} ${s}`,...n})}),es=({classes:e,setCount:t,toggle:s,expandText:o})=>r.jsx("a",{className:e.link,href:"#desc",onClick:n=>{n.preventDefault(),t(!s)},children:s?"hide":o}),An=({title:e,intro:t,children:s,expandText:o="info",className:n="",classes:a})=>{const[i,l]=I.useState(!1);return r.jsxs("div",{className:`${a.root} ${n} ${t?a.rootRows:""}`,children:[e&&typeof e=="string"?r.jsxs(K,{className:a.heading,level:2,children:[e,s&&r.jsx(es,{classes:a,toggle:i,setCount:l,expandText:o})]}):e,r.jsxs(C,{children:[t," ",t&&s&&r.jsx(es,{classes:a,toggle:i,setCount:l,expandText:o})]}),r.jsx(Po,{className:`wrapper ${a.wrapperFlex}`,in:i,children:s})]})},Dn=e=>({root:{width:"100%",flexGrow:1,display:"flex",flexWrap:"wrap"},rootRows:{"& > *":{flexBasis:"100%"}},link:{color:e.palette.link},linkMargin:{color:e.palette.link,marginLeft:"0.5rem"},heading:{"& a":{fontSize:"1rem",marginLeft:"0.5rem"}},wrapperFlex:{flexBasis:"100%"}}),pe=b(Dn)(An),Tn=e=>({root:{padding:`${e.mySpacing.y.large} ${e.mySpacing.y.large} 0 ${e.mySpacing.y.large}`,backgroundRepeat:"no-repeat",backgroundPosition:"top left",backgroundSize:"100% 20px",backgroundImage:e.palette.paperGradient,position:"relative"},"bg-none":{background:"none"},justify:{justifyContent:"space-between"}}),Pn=({classes:e={},className:t="",children:s})=>r.jsx("div",{className:`${e.root} ${e[t]||t}`,children:s}),Q=b(Tn)(Pn),x={SET_TEAM_NAME:"SET_TEAM_NAME",CLEAR_TEAM_NAME:"CLEAR_TEAM_NAME",STORE_ORG:"STORE_ORG",CLEAR_ORG:"CLEAR_ORG",STORE_TOKEN:"STORE_TOKEN",STORE_FORM_UNTIL_DATE:"STORE_FORM_UNTIL_DATE",CLEAR_FORM_UNTIL_DATE:"CLEAR_FORM_UNTIL_DATE",STORE_UNTIL_DATE:"STORE_UNTIL_DATE",CLEAR_UNTIL_DATE:"CLEAR_UNTIL_DATE",SET_PR_PAGINATION:"SET_PR_PAGINATION",CLEAR_PR_PAGINATION:"CLEAR_PR_PAGINATION",SET_PR_REVIEWED_PAGINATION:"SET_PR_REVIEWED_PAGINATION",CLEAR_PR_REVIEWED_PAGINATION:"CLEAR_PR_REVIEWED_PAGINATION",SET_RELEASES_PAGINATION:"SET_RELEASES_PAGINATION",CLEAR_RELEASES_PAGINATION:"CLEAR_RELEASES_PAGINATION",SET_ISSUES_PAGINATION:"SET_ISSUES_PAGINATION",CLEAR_ISSUES_PAGINATION:"CLEAR_ISSUES_PAGINATION",SET_DESC:"SET_DESC",CLEAR_DESC:"CLEAR_DESC",FETCH_STATUS:"FETCH_STATUS",FETCH_START:"FETCH_START",PRE_FETCH_ERROR:"PRE_FETCH_ERROR",CLEAR_PRE_FETCH_ERROR:"CLEAR_PRE_FETCH_ERROR",FETCH_ERROR:"FETCH_ERROR",CLEAR_FETCH_ERROR:"CLEAR_FETCH_ERROR",FETCH_END:"FETCH_END",STORE_REPOS:"STORE_REPOS",STORE_REPO:"STORE_REPO",CLEAR_REPO:"CLEAR_REPO",STORE_AMOUNT:"STORE_AMOUNT",STORE_SORT:"STORE_SORT",STORE_ENT_URL:"STORE_ENT_URL",STORE_EX_IDS:"STORE_EX_IDS",CLEAR_EX_IDS:"CLEAR_EX_IDS",STORE_EVENTS:"STORE_EVENTS",CLEAR_EVENTS:"CLEAR_EVENTS",STORE_USERS_INFO:"STORE_USERS_INFO",CLEAR_USERS_INFO:"CLEAR_USERS_INFO",STORE_USER_IDS:"STORE_USER_IDS",CLEAR_USER_IDS:"CLEAR_USER_IDS",ADD_ITEMS_DATE_RANGE:"ADD_ITEMS_DATE_RANGE",CLEAR_ITEMS_DATE_RANGE:"CLEAR_ITEMS_DATE_RANGE",ADD_TRIMMED_ITEMS:"ADD_TRIMMED_ITEMS",CLEAR_TRIMMED_ITEMS:"CLEAR_TRIMMED_ITEMS",ADD_PRS:"ADD_PRS",ADD_FILTERED_PRS:"ADD_FILTERED_PRS",CLEAR_PRS:"CLEAR_PRS",CLEAR_FILTERED_PRS:"CLEAR_FILTERED_PRS",ADD_REVIEWED_PRS:"ADD_REVIEWED_PRS",ADD_REVIEWED_FILTERED_PRS:"ADD_REVIEWED_FILTERED_PRS",CLEAR_REVIEWED_PRS:"CLEAR_REVIEWED_PRS",CLEAR_REVIEWED_FILTERED_PRS:"CLEAR_REVIEWED_FILTERED_PRS",ADD_ISSUES:"ADD_ISSUES",ADD_FILTERED_ISSUES:"ADD_FILTERED_ISSUES",CLEAR_FILTERED_ISSUES:"CLEAR_FILTERED_ISSUES",CLEAR_ISSUES:"CLEAR_ISSUES",ADD_RELEASES:"ADD_RELEASES",CLEAR_RELEASES:"CLEAR_RELEASES",ADD_FILTERED_RELEASES:"ADD_FILTERED_RELEASES",CLEAR_FILTERED_RELEASES:"CLEAR_FILTERED_RELEASES",PREFETCHED_NAME:"PREFETCHED_NAME",CLEAR_PREFETCHED_NAME:"CLEAR_PREFETCHED_NAME",ADD_USERS_DATA:"ADD_USERS_DATA",CLEAR_USERS_DATA:"CLEAR_USERS_DATA"},js=(e,t,s=[])=>new Promise((o,n)=>{const[a,...i]=e;Promise.all(a.map(l=>t(l))).then(l=>i&&i.length?js(i,t,l).then(m=>o(s.concat(m))).catch(n):o(s.concat(l))).catch(n)}),Qe=(e=[],t,s=2)=>{const o=wo(s,e);return e.length?js(o,t):[]},Lt=(e,t="DESC",s="")=>o=>{const n=O("",e,o),a=n&&new Date(n),i=s?new Date(s):new Date;return t==="DESC"?a&&Ze(a,i):a&&We(a,i)},pt=e=>e?` after:"${e}" `:"",Mt=(e,{oldest:t,newest:s})=>{const o=e==="DESC"?t:s,a=o?` ${e==="DESC"?"after":"before"}:"${o}" `:"",i=a?100:10;return`
    ${e==="DESC"?`last: ${i}`:`first: ${i}`}
    ${a}
  `},$t=e=>({oldest:t,newest:s})=>pt(e==="DESC"?t:s),xe="pageInfo { endCursor hasNextPage hasPreviousPage startCursor }",Ge=e=>`
    comments(first: ${e?100:10} ${pt(e)}) {
      totalCount
      edges {
        node {
          author {
            login
            url
          }
          publishedAt
          body
        }
      }
      ${xe}
    }
`,Os=e=>t=>`
pullRequests(
  first: 50
  ${$t(e)(t)}
  states: [MERGED]
  orderBy: {field: CREATED_AT direction: ${e}}
) {
  totalCount
  edges {
    node {
      id
      url
      author {
        login
        url
      }
      repository {
        name
        owner {
          login
        }
      }
      additions
      deletions
      mergedAt
      createdAt
      commits(first:1) {
        edges {
          node {
            commit {
              committedDate
            }
          }
        }
      }
      ${Ls(void 0)}
      ${Ge(void 0)}
    }
  }
  ${xe}
}`,ks=e=>t=>`
issues(
  ${$t(e)(t)}
  first: 50
  orderBy: { field:CREATED_AT direction: ${e} }
) {
  totalCount
  edges {
    node {
      title
      url
      createdAt
      closedAt
      state
      labels(first:5) {
        edges {
          node {
            name
          }
        }
      }
    }
  }
  ${xe}
}`,wn=e=>t=>`
releases(
  ${$t(e)(t)}
  first: 50
  orderBy:{ field:CREATED_AT direction: ${e} }
) {
  totalCount
  edges {
    node {
      id
      name
      createdAt
      tag {
        name
      }
    }
  }
  ${xe}
}`,Ls=e=>`
    reviews(first: ${e?100:10} ${pt(e)}) {
      edges {
        node {
          id
          state
          author {
            login
            url
          }
          ${Ge(void 0)}
        }
      }
      ${xe}
    }
`,Ms=(e={},t="",s={},o)=>n=>{const{hasNextPage:a=!1,startCursor:i,endCursor:l}=O({},["data","result",n,"pageInfo"],s),m=O([],["data","result",n,"edges"],s),c=n==="pullRequests"?"mergedAt":"createdAt",u=ae(t)?m.filter(Lt(["node",c],o,t)):[],d={pullRequests:"prPagination",issues:"issuesPagination",releases:"releasesPagination"},h=O(o==="DESC"?l:i,[d[n],"oldest"],e),y=O(o==="ASC"?l:i,[d[n],"newest"],e),f=u.length,R=ee([[P(a===!1),me],[P(!ae(t)),P(a)],[P(f===0),me],[P(f>0&&m.length>f),me],[U,P(a)]])();return{newest:o==="ASC"&&l?l:y,oldest:o==="DESC"&&l?l:h,hasNextPage:a,hasNextPageForDate:R}},Cn=(e={},t="",s={},o)=>n=>{const a=n==="usersReviews"?["data","result"]:["data","result",n],{hasNextPage:i=!1,hasPreviousPage:l=!1,startCursor:m,endCursor:c}=O({},[...a,"pageInfo"],s),u=O([],[...a,"edges"],s),d=["pullRequests","usersReviews"].includes(n)?"mergedAt":"createdAt",p=ae(t)?u.filter(Lt(["node",d],o,t)):[],h={commitComments:"commitCommentsPagination",issueComments:"issueCommentsPagination",usersReviews:"usersReviewsPagination"},g=n==="usersReviews"||o==="ASC"?"right":"left",f=O(g==="right"?c:m,[h[n],"oldest"],e),E=O(g==="right"?m:c,[h[n],"newest"],e),S=g==="right"?i:l,A=p.length,v=ee([[P(S===!1),me],[P(!ae(t)),P(S)],[P(A===0),me],[P(A>0&&u.length>A),me],[U,P(S)]])();return{newest:g==="right"&&c?c:E,oldest:g==="left"&&m?m:f,hasNextPage:S,hasNextPageForDate:v}},bn=(e={},t="",s={},o)=>{const{hasNextPage:n=!1,hasPreviousPage:a=!1,startCursor:i,endCursor:l}=O({},["data","result","pageInfo"],s),m=O([],["data","result","edges"],s),c=ae(t)?m.filter(Lt(["node","mergedAt"],o,t)):[],d=O(o==="DESC"?l:i,["usersReviewsPagination","oldest"],e),h=O(o==="DESC"?i:l,["usersReviewsPagination","newest"],e),g=o==="DESC"?n:a,y=c.length,f=ee([[P(g===!1),me],[P(!ae(t)),P(g)],[P(y===0),me],[U,P(g)]])();return{newest:o==="ASC"&&i?i:h,oldest:o==="DESC"&&l?l:d,hasNextPage:g,hasNextPageForDate:f}},Ft=e=>{const t=["issues","pullRequests","releases"],[s]=t.map(o=>{var n,a,i;return((i=(a=(n=e==null?void 0:e.data)==null?void 0:n.result)==null?void 0:a[o])==null?void 0:i.totalCount)||0}).sort((o,n)=>n-o);return Math.ceil(s/50)-1},In=e=>t=>`
    commitComments(
      ${Mt(e,t)}
    ) {
      edges {
        cursor
        node {
          createdAt
          commit {
            repository {
              nameWithOwner
            }
            url
            associatedPullRequests(last: 10) {
              edges {
                node {
                  number
                  url
                }
              }
            }
          }
          body
        }
      }
      ${xe}
    }
`,_n=e=>t=>`
    issueComments(
      ${Mt(e,t)}
    ) {
      edges {
        cursor
        node {
          createdAt
          url
          repository {
            nameWithOwner
          }
          issue {
            number
          }
          pullRequest {
            number
          }
          body
        }
      }
      ${xe}
    }
`,Nn=e=>({user:t,sortDirection:s="DESC",amountOfData:o,usersReviewsPagination:n={}})=>({query:`{
    result: search(
      query: "type:pr state:closed reviewed-by:${t}"
      type: ISSUE
      ${Mt(s,n)}
    ) {
      issueCount
      ${xe}
      edges {
        node {
          ... on PullRequest {
            id
            number
            url
            author {
              login
              url
            }
            repository {
              name
              owner {
                login
              }
            }
            additions
            deletions
            mergedAt
            createdAt
            ${Ge(void 0)}
            reviews(last: 10 states: [COMMENTED,APPROVED,CHANGES_REQUESTED] author: "${t}") {
              ${xe}
              edges {
                node {
                  id
                  state
                  author {
                    login
                    url
                  }
                  ${Ge(void 0)}
                }
              }
            }
          }
        }
      }
    }
  }`,sortDirection:s,user:t,resultInfo:a=>{const i=bn({usersReviewsPagination:n,amountOfData:o},e,a,s),l=ee([[P(o==="all"),P(o)],[P(ae(e)),P(o)],[P(Number.isInteger(o)),P(o-1)],[U,Ft]])(a),m={usersReviewsPagination:Object.assign(i,{hasNextPage:!1})},c=ae(e)?"hasNextPageForDate":"hasNextPage";return{hasNextPage:m.usersReviewsPagination[c]===!0,nextPageInfo:{...m,amountOfData:l}}},fillerType:"pullRequests",hasMoreResults:[n.hasNextPage].some(a=>a!==!1)}),Ue=e=>{const{hasNextPageForDate:t}=e;return t!==!1},$s=e=>({user:t,sortDirection:s="DESC",amountOfData:o,issuesPagination:n={},prPagination:a={},commitCommentsPagination:i={},issueCommentsPagination:l={}})=>({query:`{
    result: user(login: "${t}") {
      login
      ${Ue(l)?_n(s)(l):""}
      ${Ue(i)?In(s)(i):""}
      ${Ue(a)?Os(s)(a):""}
      ${n[e?"hasNextPageForDate":"hasNextPage"]!==!1?ks(s)(n):""}
    }
  }`,sortDirection:s,user:t,resultInfo:m=>{const c=Ms({issuesPagination:n,prPagination:a,amountOfData:o},e,m,s),u=Cn({commitCommentsPagination:i,issueCommentsPagination:l,amountOfData:o},e,m,s),d=ee([[P(o==="all"),P(o)],[P(ae(e)),P(o)],[P(Number.isInteger(o)),P(o-1)],[U,Ft]])(m);Object.assign(c("pullRequests"),{hasNextPage:!1});const p={prPagination:Object.assign(c("pullRequests"),{hasNextPage:!1}),issuesPagination:Object.assign(c("issues"),{hasNextPage:!1}),commitCommentsPagination:Object.assign(u("commitComments"),{hasNextPage:!1}),issueCommentsPagination:Object.assign(u("issueComments"),{hasNextPage:!1})},h=ae(e)?"hasNextPageForDate":"hasNextPage";return{hasNextPage:Object.values(p).some(y=>y[h]===!0),nextPageInfo:{...p,amountOfData:d}}},hasMoreResults:[a.hasNextPage,n.hasNextPage,i.hasNextPage,l.hasNextPage].some(m=>m!==!1)}),Fs=e=>({org:t,repo:s,sortDirection:o="DESC",amountOfData:n,issuesPagination:a={},releasesPagination:i={},prPagination:l={}})=>({query:`{
      result: repository(name: "${s}" owner: "${t}") {
        id
        description
        name
        owner {
          org: login
        }
        ${Ue(l)?Os(o)(l):""}
        ${Ue(a)?ks(o)(a):""}
        ${Ue(i)?wn(o)(i):""}
      }
    }`,sortDirection:o,resultInfo:m=>{const c=Ms({issuesPagination:a,releasesPagination:i,prPagination:l},e,m,o),u=ee([[P(n==="all"),P(n)],[P(ae(e)),P(n)],[P(Number.isInteger(n)),P(n-1)],[U,Ft]])(m),d={prPagination:Object.assign({hasNextPage:!1},c("pullRequests")),issuesPagination:Object.assign({hasNextPage:!1},c("issues")),releasesPagination:Object.assign({hasNextPage:!1},c("releases"))},p=ae(e)?"hasNextPageForDate":"hasNextPage";return{hasNextPage:Object.values(d).some(g=>g[p]===!0),nextPageInfo:{...d,amountOfData:u}}},fillerType:"batchedQuery",hasMoreResults:[l.hasNextPage,a.hasNextPage,i.hasNextPage].some(m=>m!==!1)}),jn=({nodeId:e,cursor:t})=>({query:`{
      node(id:"${e}") {
          ... on PullRequest {
            id
            ${Ge(t)}
          }
        }
    }`,resultInfo:s=>{var o,n,a,i,l,m,c,u,d,p,h,g,y;return{rawData:s,results:((a=(n=(o=s==null?void 0:s.data)==null?void 0:o.node)==null?void 0:n.comments)==null?void 0:a.edges)||[],hasNextPage:((c=(m=(l=(i=s==null?void 0:s.data)==null?void 0:i.node)==null?void 0:l.comments)==null?void 0:m.pageInfo)==null?void 0:c.hasNextPage)||!1,nextArgs:{nodeId:((d=(u=s==null?void 0:s.data)==null?void 0:u.node)==null?void 0:d.id)||"",cursor:((y=(g=(h=(p=s==null?void 0:s.data)==null?void 0:p.node)==null?void 0:h.comments)==null?void 0:g.pageInfo)==null?void 0:y.endCursor)||""}}},fillerType:""}),On=({nodeId:e,cursor:t})=>({query:`{
      node(id:"${e}") {
          ... on PullRequest {
            id
            ${Ls(t)}
          }
        }
    }`,resultInfo:s=>{var o,n,a,i,l,m,c,u,d,p,h,g,y;return{rawData:s,results:((a=(n=(o=s==null?void 0:s.data)==null?void 0:o.node)==null?void 0:n.reviews)==null?void 0:a.edges)||[],hasNextPage:((c=(m=(l=(i=s==null?void 0:s.data)==null?void 0:i.node)==null?void 0:l.reviews)==null?void 0:m.pageInfo)==null?void 0:c.hasNextPage)||!1,nextArgs:{nodeId:((d=(u=s==null?void 0:s.data)==null?void 0:u.node)==null?void 0:d.id)||"",cursor:((y=(g=(h=(p=s==null?void 0:s.data)==null?void 0:p.node)==null?void 0:h.reviews)==null?void 0:g.pageInfo)==null?void 0:y.endCursor)||""}}},fillerType:"pullRequestReviewComments"}),kn=({nodeId:e,cursor:t})=>({query:`{
      node(id:"${e}") {
          ... on PullRequestReview {
            id
            ${Ge(t)}
          }
        }
    }`,resultInfo:s=>{var o,n,a,i,l,m,c,u,d,p,h,g,y;return{rawData:s,results:((a=(n=(o=s==null?void 0:s.data)==null?void 0:o.node)==null?void 0:n.comments)==null?void 0:a.edges)||[],hasNextPage:((c=(m=(l=(i=s==null?void 0:s.data)==null?void 0:i.node)==null?void 0:l.comments)==null?void 0:m.pageInfo)==null?void 0:c.hasNextPage)||!1,nextArgs:{nodeId:((d=(u=s==null?void 0:s.data)==null?void 0:u.node)==null?void 0:d.id)||"",cursor:((y=(g=(h=(p=s==null?void 0:s.data)==null?void 0:p.node)==null?void 0:h.comments)==null?void 0:g.pageInfo)==null?void 0:y.endCursor)||""}}},fillerType:""}),Ln=({org:e,orgPagination:t={}})=>({query:`{
    organization(login: "${e}") {
      repositories(
        first:100
        ${pt(t==null?void 0:t.cursor)}
        orderBy: {field: NAME, direction: ASC}
      ) {
        edges {
          node {
            name
          }
          cursor
        }
        pageInfo {
          endCursor
          hasNextPage
        }
      }
    }
  }`,fillerType:"org",resultInfo:s=>{var a,i,l,m,c,u,d,p,h,g,y,f,R,E,S;const o=((m=(l=(i=(a=s==null?void 0:s.data)==null?void 0:a.organization)==null?void 0:i.repositories)==null?void 0:l.pageInfo)==null?void 0:m.hasNextPage)||!1,n=((p=(d=(u=(c=s==null?void 0:s.data)==null?void 0:c.organization)==null?void 0:u.repositories)==null?void 0:d.pageInfo)==null?void 0:p.endCursor)||"";return{rawData:s,results:((y=(g=(h=s==null?void 0:s.data)==null?void 0:h.organization)==null?void 0:g.repositories)==null?void 0:y.edges)||[],hasNextPage:((S=(E=(R=(f=s==null?void 0:s.data)==null?void 0:f.organization)==null?void 0:R.repositories)==null?void 0:E.pageInfo)==null?void 0:S.hasNextPage)||!1,nextPageInfo:{orgPagination:{cursor:n,hasNextPage:o,hasNextPageForDate:o},amountOfData:"all"}}}}),Mn=({org:e,team:t})=>({query:`{
    organization(login: "${e}") {
      team(slug:"${t}") {
        members(
          first:100
        ) {
          edges {
            node {
              name
              email
              login
              createdAt
            }
          }
          pageInfo {
            endCursor
            hasNextPage
          }
        }
      }
    }
  }`,fillerType:"team",resultInfo:s=>{var o,n,a,i,l;return{results:((l=(i=(a=(n=(o=s[0])==null?void 0:o.data)==null?void 0:n.organization)==null?void 0:a.team)==null?void 0:i.members)==null?void 0:l.edges)||[],hasNextPage:!1}}}),$n=(e,t)=>{const o={org:["data","organization","repositories","edges"],team:["data","organization","team","members","edges"]}[e];return o?O([],o,t):t},Fn=e=>{const t=c=>{const d={pullRequests:[m,i],pullRequestReviewComments:[a],batchedQuery:[m,i]}[c]||[];return p=>d.length?Promise.all(d.map(h=>h(p))).then(h=>h.reduce((g,y)=>y(g),p)):$n(c,p)},s=c=>u=>async(d=[])=>{const{hasNextPage:p}=u,{query:h,resultInfo:g,fillerType:y}=c(u),f=p?await e(h):{},{results:R=[],hasNextPage:E,nextArgs:S}=g(f),A=[...d,...R];return E&&y?s(c)(S)(A):await t(y)(A)},o=c=>u=>d=>{const p=Object.assign(c.node,{[u]:d});return Object.assign(c,{node:p})},n=c=>u=>{var d,p,h,g,y,f,R;return{nodeId:((d=u==null?void 0:u.node)==null?void 0:d.id)||"",cursor:((g=(h=(p=u==null?void 0:u.node)==null?void 0:p[c])==null?void 0:h.pageInfo)==null?void 0:g.endCursor)||"",hasNextPage:((R=(f=(y=u==null?void 0:u.node)==null?void 0:y[c])==null?void 0:f.pageInfo)==null?void 0:R.hasNextPage)||!1}},a=async(c=[])=>{const d=await Qe(c,async p=>{var f,R;const h=((R=(f=p==null?void 0:p.node)==null?void 0:f.comments)==null?void 0:R.edges)||[],g=n("comments")(p),y=await s(kn)(g)(h);return o(p)("comments")({edges:y})},5);return()=>d},i=async c=>{var h,g,y;const u=((y=(g=(h=c==null?void 0:c.data)==null?void 0:h.result)==null?void 0:g.pullRequests)==null?void 0:y.edges)||[],p=await Qe(u,async f=>{var A,v,D;const R=((v=(A=f==null?void 0:f.node)==null?void 0:A.reviews)==null?void 0:v.edges)||[],E=n("reviews")(f),S=await s(On)(E)(R);return{nodeId:(D=f==null?void 0:f.node)==null?void 0:D.id,results:{edges:S}}},5);return f=>{const R=l(f)("reviews")(p);return{data:Object.assign((f==null?void 0:f.data)||{},{result:Object.assign(O({pullRequests:R},["data","result"],f))})}}},l=c=>u=>d=>{var y,f,R,E,S;const p=((f=(y=c==null?void 0:c.data)==null?void 0:y.result)==null?void 0:f.pullRequests)||{},g=(((S=(E=(R=c==null?void 0:c.data)==null?void 0:R.result)==null?void 0:E.pullRequests)==null?void 0:S.edges)||[]).map(A=>{var w;const v=((w=A==null?void 0:A.node)==null?void 0:w.id)||"",D=d.find(T=>T.nodeId===v);return D?o(A)(u)(D.results):A});return Object.assign(p,{edges:g})},m=async c=>{var h,g,y;const u=((y=(g=(h=c==null?void 0:c.data)==null?void 0:h.result)==null?void 0:g.pullRequests)==null?void 0:y.edges)||[],p=await Qe(u,async f=>{var A,v,D;const R=((v=(A=f==null?void 0:f.node)==null?void 0:A.comments)==null?void 0:v.edges)||[],E=n("comments")(f),S=await s(jn)(E)(R);return{nodeId:((D=f==null?void 0:f.node)==null?void 0:D.id)||"",results:{edges:S}}},5);return f=>{var E;const R=l(f)("comments")(p);return{data:Object.assign((f==null?void 0:f.data)||{},{result:Object.assign(((E=f==null?void 0:f.data)==null?void 0:E.result)||{pullRequests:R})})}}};return t},Ct=e=>(t=[])=>t.reduce((s,o)=>(o[e]||0)+s,0),Un=e=>t=>e.reduce((s,o)=>s+(t&&t[o]||0),0),we=(e=[])=>(t,s)=>{const o=Un(e),n=o(t);return o(s)-n},Gn=e=>(t,s)=>e==="DESC"?new Date(s).getTime()-new Date(t).getTime():new Date(t).getTime()-new Date(s).getTime(),Bn=e=>new Promise((t,s)=>{e.json().then(o=>e.status===200?t(o):s(Object.assign(o,{status:e.status}))).catch(o=>{console.log("-=-=--parseJSON error",o),o.status=e.status,s(o)})}),ts=({message:e=""})=>/(You have triggered an abuse detection mechanism|You have exceeded a secondary rate limit)/.test(e),Wn=({message:e=""})=>/Unexpected end of JSON input/.test(e),Vn=e=>t=>fetch(e.enterpriseAPI||"https://api.github.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify({query:t})}).then(Bn),Kn=(e,{amountOfData:t})=>ee([[P(e===!1),me],[P(e&&Number.isInteger(t)&&t>=1),U],[P(e&&t==="all"),U],[U,me]])(),qn=(e=3e4)=>new Promise(t=>setTimeout(()=>t(),e));let ss=0;const Hn=async(e,t)=>(console.log("-=-=--paused",Date.now()),await qn(),console.log("-=-=--resume",Date.now()),++ss,ss<=10?Se(e,t):{errorMessage:{level:"error",message:"Hit rate limit over ten times"},fetchInfo:e.fetchInfo,results:t,reviewResults:[]}),xt=(e,t)=>t.reduce((o,n)=>{var i,l,m;const a=((m=(l=(i=n==null?void 0:n.data)==null?void 0:i.result)==null?void 0:l[e])==null?void 0:m.edges)||[];return o+a.length},0),zn=e=>(t,s=[])=>{var c,u,d,p;const n=O(!1,[{pullRequests:"prPagination",issues:"issuesPagination",releases:"releasesPagination"}[t],"hasNextPageForDate"],e),a=s[s.length-1]||{},i=((d=(u=(c=a==null?void 0:a.data)==null?void 0:c.result)==null?void 0:u[t])==null?void 0:d.edges)||[],l=i[i.length-1],m=t==="pullRequests"?"createdAt":"closedAt";return n&&((p=l==null?void 0:l.node)==null?void 0:p[m])||""},Se=async({fetchInfo:e,queryInfo:t,dispatch:s=()=>{}},o=[])=>{const{query:n,resultInfo:a,fillerType:i,user:l,sortDirection:m}=t(e),c=zn(e),[u]=[c("pullRequests",o),c("issues",o),c("releases",o)].filter(Boolean).sort((p,h)=>Gn(m)(p,h));s({type:x.FETCH_STATUS,payload:{prCount:xt("pullRequests",o),issueCount:xt("issues",o),releasesCount:xt("releases",o),latestItemDate:u,user:l}});const d=Vn(e);try{const p=await d(n);if(ts(p))throw new Error("Abuse rate triggered");const h=await Fn(d)(i)(p),g=[...o,h],{hasNextPage:y,nextPageInfo:f={}}=a(p),R=ut(e,f);return Kn(y,R)?Se({fetchInfo:R,queryInfo:t,dispatch:s},g):{fetchInfo:R,results:g,reviewResults:[]}}catch(p){const h=p,g=ee([[ts,U],[Wn,U],[R=>R.status===500,U],[R=>R.status===502,U],[R=>R.message==="Abuse rate triggered",U],[Ye(ot(/ENOTFOUND|ECONNRESET/),je("","code")),U],[Ye(ot(/fetch/i),je("","message")),U],[U,me]]),f=ee([[g,P({level:"warn",message:"You may have triggered the api's abuse detection, please wait a minute before trying again"})],[Ye(ot(/50\d/i),je("","status")),P({level:"error",message:"GitHub API 500 error, could be CORS or rate limiting"})],[R=>R.status===401,P({level:"error",message:"GitHub token does not have correct settings, please see README"})],[Ye(ot(/40\d/i),je("","status")),R=>({level:"error",message:`Auth error: ${R.message||"UNKOWN"}`})],[R=>R.status===void 0,P({level:"error",message:"Error while processing data after, please check the console"})],[U,R=>({level:"error",message:`ERROR: ${R.message||"UNKOWN"}`})]])(h);if(g(h))return Hn({fetchInfo:e,queryInfo:t,dispatch:s},o);throw new Error(f.message)}},Yn=async({fetchInfo:e,untilDate:t,dispatch:s})=>{try{const n=e.userIds.map(u=>({fetchInfo:{...e,issuesPagination:e.issuesPagination[u]||{hasNextPage:!0},prPagination:e.prPagination[u]||{hasNextPage:!0},user:u},queryInfo:$s(t),dispatch:s})),a=await Qe(n,Se,1),i={issuesPagination:{},prPagination:{}},l=[];return a.forEach(({fetchInfo:u,results:d})=>{l.push(d);const p=(u==null?void 0:u.user)||"";i.issuesPagination[p]=Te("issuesPagination",u),i.prPagination[p]=Te("prPagination",u)}),{fetchInfo:ut(e,i),results:l.flat(),reviewResults:[]}}catch(o){throw console.log("-=-=--getUsersData:error",o),o}},Qn=async({fetchInfo:e,untilDate:t,dispatch:s})=>{var o;try{const[n]=e.userIds,a={fetchInfo:{...e,issuesPagination:e.issuesPagination[n]||{hasNextPage:!0},prPagination:e.prPagination[n]||{hasNextPage:!0},user:n},queryInfo:$s(t),dispatch:s},i=await Se(a),l=i.results,m={fetchInfo:{...e,usersReviewsPagination:((o=e.usersReviewsPagination)==null?void 0:o[n])||{hasNextPage:!0},user:n},queryInfo:Nn(t),dispatch:s},c=await Se(m),u=c.results,d={issuesPagination:Te("issuesPagination",i.fetchInfo),prPagination:Te("prPagination",i.fetchInfo),usersReviewsPagination:Te("usersReviewsPagination",c.fetchInfo)};return{fetchInfo:ut(e,d),results:l.flat(),reviewResults:u.flat()}}catch(n){throw console.log("-=-=--getUserData:error",n),n}},Xn=async({fetchInfo:e,untilDate:t,dispatch:s})=>{try{const o=await Se({fetchInfo:e,queryInfo:Ln,dispatch:s}),a=((o==null?void 0:o.results.flat())||[]).filter(h=>{var g;return(g=h==null?void 0:h.node)==null?void 0:g.name}).map(h=>{var g;return(g=h==null?void 0:h.node)==null?void 0:g.name}),i=e.org,l=a.map(h=>({fetchInfo:{...e,issuesPagination:(e==null?void 0:e.issuesPagination[h])||{hasNextPage:!0},prPagination:(e==null?void 0:e.prPagination[h])||{hasNextPage:!0},org:i,repo:h},queryInfo:Fs(t),dispatch:s})),m=await Qe(l,Se,1),c={issuesPagination:{},releasesPagination:{},prPagination:{}},u=[];return m.forEach(({fetchInfo:h,results:g=[]})=>{u.push(g);const{repo:y,issuesPagination:f,releasesPagination:R,prPagination:E}=h;c.issuesPagination[y]=f,c.releasesPagination[y]=R,c.prPagination[y]=E}),{fetchInfo:ut(e,c),results:u.flat(),reviewResults:[]}}catch(o){throw console.log("-=-=--getOrgData:error",o),o}},Jn=(e,t=[])=>{var a;const s=e==="DESC"?0:-1,o=t.at(s),n=((a=o==null?void 0:o.node)==null?void 0:a.mergedAt)||(o==null?void 0:o.mergedAt);return new Date(n)},Zn=(e,t=[])=>{const{untilDate:s="",amountOfData:o=0,sortDirection:n="DESC"}=e,a={months:o},i=nt(ys(String),Te("amountOfData")),l=nt(d=>!(typeof d=="string"&&d.length>1),Te("untilDate")),m=nt(d=>At(d,a),d=>d?new Date(d):new Date,Te("untilDate")),c=nt(({prDate:d,sortDirection:p})=>p==="DESC"?At(d,a):Dt(d,a),d=>({prDate:Jn(d,t),sortDirection:d}),je("","sortDirection")),[,u]=[[i(e),""],[l(e)&&t.length>0,c(e)],[n==="DESC",m(e)],[n==="ASC",Dt(new Date(s),a)],[!0,""]].find(([d])=>d)||[];return u},er=e=>t=>{const s={};return t.forEach(o=>{const n=Co(e,o);s[n]=(s[n]||0)+1}),s},Us=er(["node","author","login"]),tr=e=>{const t={};return e.forEach(({author:s="",score:o=0})=>{t[s]=(t[s]||0)+o}),t},os=(e=[])=>{const t=new bo,s=e.map(o=>{var i,l,m;const n=((i=o==null?void 0:o.node)==null?void 0:i.body)||"";return{author:((m=(l=o==null?void 0:o.node)==null?void 0:l.author)==null?void 0:m.login)||"",score:t.analyze(n).score}});return{sentimentScore:Ct("score")(s),sentiments:tr(s)}},sr=e=>{var o,n;const t=((n=(o=e==null?void 0:e.node)==null?void 0:o.reviews)==null?void 0:n.edges)||[],s=[];return t.forEach(a=>{var l,m;const i=((m=(l=a==null?void 0:a.node)==null?void 0:l.comments)==null?void 0:m.edges)||[];s.push(...i)}),s},Gs=e=>t=>{var s,o;return e.includes((o=(s=t==null?void 0:t.node)==null?void 0:s.author)==null?void 0:o.login)},or=e=>t=>{var n,a;const s=!Gs(e)(t);return!/\/apps\//.test(((a=(n=t==null?void 0:t.node)==null?void 0:n.author)==null?void 0:a.url)||"")&&s},St=(e,t,s)=>{var g,y;const o=(y=(g=s==null?void 0:s.node)==null?void 0:g.author)==null?void 0:y.login,n=O([],["node","comments","edges"],s),a=sr(s),l={general:n,code:a,all:[...a,...n]}[e]||[],m=l.filter(or([...t,o])),{sentimentScore:c=0,sentiments:u={}}=os(m),d=l.filter(Gs([o])),{sentimentScore:p=0}=os(d),h=e==="all"?"c":`${e}C`;return{[`${h}omments`]:m.length,[`${h}ommenters`]:Us(m),[`${h}ommentSentimentScore`]:c,[`${h}ommentSentiments`]:u,[`${h}ommentsAuthor`]:d.length,[`${h}ommentAuthorSentimentScore`]:p,[`${h}ommentSentimentTotalScore`]:(p||0)+(c||0)}},nr=(e,t)=>{const s=St("general",e,t),o=St("code",e,t),n=St("all",e,t);return{...s,...o,...n}},rr=e=>{var n,a;const s=(((a=(n=e==null?void 0:e.node)==null?void 0:n.reviews)==null?void 0:a.edges)||[]).filter(i=>{var l;return((l=i==null?void 0:i.node)==null?void 0:l.state)==="APPROVED"}),o=Us(s);return{approvals:s.length,approvers:o}},ar=(e=[],t)=>{var R,E,S,A,v,D;const s=O("",["node","repository","owner","login"],t),o=O("",["node","repository","name"],t),n=O("",["node","author","login"],t),a=O("",["node","author","url"],t),i=O("",["node","url"],t),l=O(0,["node","additions"],t),m=O(0,["node","deletions"],t),c=O("",["node","createdAt"],t),u=O("",["node","mergedAt"],t),d=((D=(v=(A=(S=(E=(R=t==null?void 0:t.node)==null?void 0:R.commits)==null?void 0:E.edges)==null?void 0:S[0])==null?void 0:A.node)==null?void 0:v.commit)==null?void 0:D.committedDate)||"",p=We(new Date(d),new Date(c))?d:c,h=nr(e,t),{approvals:g,approvers:y}=rr(t);return{repo:o,org:s,author:/\/apps\//.test(a)?"GIT_APP_PR":n,url:i,additions:l,deletions:m,prSize:l+m,mergedAt:u,cycleTime:Re(new Date(u),new Date(p))||1,age:Re(new Date(u),new Date(c))||1,approvals:g,approvers:y,...h}},Bs=(e,t)=>(s,o)=>{const n=s[e],a=o[e];return t==="DESC"?new Date(a).getTime()-new Date(n).getTime():new Date(n).getTime()-new Date(a).getTime()},ns=(e,t=[])=>{const{excludeIds:s=[]}=e;return t.map(n=>{var a,i,l,m,c;return((l=(i=(a=n==null?void 0:n.data)==null?void 0:a.result)==null?void 0:i.pullRequests)==null?void 0:l.edges)||((c=(m=n==null?void 0:n.data)==null?void 0:m.result)==null?void 0:c.edges)}).flat().map(n=>ar(s,n))},ir=(e="")=>({startDate:t="",endDate:s=""}={})=>{const o=new Date(e),n=t?Ze(o,new Date(t)):!0,a=s?We(o,new Date(s)):!0;return n&&a},lr=(e,t=[])=>{const s=e.usersInfo||{};return t.filter(n=>{const a=n.author,{dates:i=[]}=s[a]||{},l=ir(n.mergedAt);return i.length>0?i.some(l):!0})},rs=({excludeIds:e=[]},{reportStartDate:t="",reportEndDate:s=""},o=[])=>{const n=[];return[o.filter(i=>{const l=je("","author",i),m=["GIT_APP_PR",...e].some(p=>p===l),c=i.mergedAt,d=Ze(new Date(c),new Date(t))&&We(new Date(c),new Date(s))&&!m;return!d&&n.push(i),d}).sort(Bs("mergedAt","ASC")),n]},Ws=e=>({reportStartDate:t="",reportEndDate:s=""},o=[])=>{const n=[];return[o.filter(i=>{const l=i==null?void 0:i[e],m=Ze(new Date(l),new Date(t))&&We(new Date(l),new Date(s));return!m&&n.push(i),m}).sort(Bs(e,"ASC")),n]},cr=Ws("mergedAt"),mr=Ws("date"),dr=e=>{var i,l,m,c,u,d;const t=((i=e==null?void 0:e.node)==null?void 0:i.createdAt)||"",s=((l=e==null?void 0:e.node)==null?void 0:l.closedAt)||"",o=((m=e==null?void 0:e.node)==null?void 0:m.title)||"",n=((c=e==null?void 0:e.node)==null?void 0:c.url)||"",a=((d=(u=e==null?void 0:e.node)==null?void 0:u.labels)==null?void 0:d.edges)||[];return{mergedAt:t,createdAt:t,age:Re(new Date(s),new Date(t))||1,url:n,isBug:/bug/i.test(o)||a.some(p=>{var h;return/bug/i.test((h=p==null?void 0:p.node)==null?void 0:h.name)})}},ur=(e=[])=>{const t=e.map(a=>{var i,l,m;return((m=(l=(i=a==null?void 0:a.data)==null?void 0:i.result)==null?void 0:l.issues)==null?void 0:m.edges)||[]});return Rs(t).filter(Boolean).map(a=>dr(a))},pr=e=>{var o,n,a;const t=((o=e==null?void 0:e.node)==null?void 0:o.createdAt)||"",s=((a=(n=e==null?void 0:e.node)==null?void 0:n.tag)==null?void 0:a.name)||"";return{date:t,description:s}},hr=(e=[])=>{const t=e.map(a=>{var i,l,m;return((m=(l=(i=a==null?void 0:a.data)==null?void 0:i.result)==null?void 0:l.releases)==null?void 0:m.edges)||[]});return Rs(t).filter(Boolean).map(a=>pr(a))},Vs=e=>typeof e=="string"&&e.length&&e||/^-?[\d.]+$/.test(`${e}`)&&/^-?[^0]/.test(`${e}`)&&e||Array.isArray(e)&&e.length&&gr(e)||e&&Object.keys(e).length&&Ks(e)||typeof e=="boolean"&&e,gr=e=>{const t=[];return e.forEach(s=>{const o=Vs(s);o&&t.push(o)}),t.length&&t},Ks=e=>{const t={};return Object.entries(e).forEach(([s,o])=>{const n=Vs(o);n&&(t[s]=n)}),Object.keys(t).length&&t},ct={author:"",approvalsGiven:0,approvalsByUser:{},commentsGiven:0,commentsReceived:0,codeCommentsGiven:0,codeCommentsReceived:0,generalCommentsGiven:0,generalCommentsReceived:0,totalPRs:0,uniquePRsContributedTo:0,commentsByUser:{},prSizes:[],prTotalAdditions:0,prTotalDeletions:0,prAdditions:[],prDeletions:[],prAges:[],sentimentTotalScores:[],orgs:new Set,repos:new Set,sentimentTotalPositiveScore:0,sentimentAveragePositiveScore:0,sentimentPositiveCount:0,sentimentTotalNegativeScore:0,sentimentNegativeCount:0,sentimentAverageNegativeScore:0},He=(e,t,s,o)=>{const n={};return Object.entries(s).forEach(([a,i])=>{const l=e[a]||{},m={...ct,...l,user:a,[t]:(l[t]||0)+(o||i)};n[a]=m}),n},as=(e,t,s,o,n,a)=>{const i={};return Object.entries(s).filter(([l])=>a&&o!==a?l===a:!0).forEach(([l,m])=>{const c=e[l]||{},u=c[t]||{},d={...u,[o]:(u[o]||0)+(n||m||0)},p={...ct,...c,author:l,[t]:d};i[l]=p}),i},ht=(e=[],t={},s="")=>{const o=new Set,n={};e.forEach(m=>{var oe;const{org:c,repo:u,author:d,additions:p=0,deletions:h=0,age:g=0,approvals:y=0,approvers:f={},comments:R=0,commenters:E={},codeComments:S=0,codeCommenters:A={},generalComments:v=0,generalCommenters:D={},commentSentimentTotalScore:w=0,commentSentimentScore:T=0,commentAuthorSentimentScore:_=0}=m;o.add(d);const j=as(n,"commentsByUser",E,d,0,s);Object.assign(n,j);const L=as(n,"approvalsByUser",f,d,1,s);Object.assign(n,L);const q=He(n,"commentsGiven",E);Object.assign(n,q);const ve=He(n,"codeCommentsGiven",A);Object.assign(n,ve);const de=He(n,"generalCommentsGiven",D);Object.assign(n,de);const ie=He(n,"approvalsGiven",f);Object.assign(n,ie);const X=He(n,"uniquePRsApproved",f,1);Object.assign(n,X),[...new Set([...Object.keys(A),...Object.keys(D),...Object.keys(f)])].forEach(Z=>{const fe=n[Z]||{},Me={...ct,...fe,author:Z,uniquePRsContributedTo:(fe.uniquePRsContributedTo||0)+1};n[Z]=Me}),n[d]||(n[d]={...ct}),n[d].orgs.add(c),n[d].repos.add(u);const H=w||T+_;n[d].sentimentTotalScores.push(H);const G=(Z="",fe=0)=>(n[d][Z]||0)+fe,he=G("totalPRs",1),be=G("prTotalAge",g),ge=Math.round(be/he),ue=G("prTotalAdditions",p),Ae=G("prTotalDeletions",h),st=Math.round((ue+Ae)/he),Ie=H>0?H:0,ke=H>0?1:0,_e=G("sentimentTotalPositiveScore",Ie),Le=G("sentimentPositiveCount",ke),qe=Le?Math.round(_e/Le):0,N=H<0?H:0,k=H<0?1:0,F=G("sentimentNegativeCount",k),W=G("sentimentTotalNegativeScore",N),se=F?Math.round(W/F):0,J={author:d,name:((oe=t[d])==null?void 0:oe.name)||d,user:d,totalPRs:he,age:ge,prTotalAge:be,prSize:st,prTotalAdditions:ue,prTotalDeletions:Ae,approvalsReceived:G("approvalsReceived",y),commentsReceived:G("commentsReceived",R),codeCommentsReceived:G("codeCommentsReceived",S),generalCommentsReceived:G("generalCommentsReceived",v),commentSentimentTotalScore:G("commentSentimentTotalScore",H),sentimentPositiveCount:Le,sentimentTotalPositiveScore:_e,sentimentAveragePositiveScore:qe,sentimentNegativeCount:F,sentimentTotalNegativeScore:W,sentimentAverageNegativeScore:se,orgCount:n[d].orgs.size,repoCount:n[d].repos.size};Object.assign(n[d],J)});const a=Object.values(n).filter(({author:m})=>o.has(m)).map((m={})=>xs(["author","user","name","approvalsGiven","approvalsByUser","uniquePRsApproved","commentsGiven","commentsReceived","codeCommentsGiven","codeCommentsReceived","generalCommentsGiven","generalCommentsReceived","totalPRs","uniquePRsContributedTo","commentsByUser","prTotalAdditions","prTotalDeletions","orgCount","repoCount","user","approvalsReceived","prSize","prTotalAge","age","sentimentAveragePositiveScore","sentimentTotalPositiveScore","sentimentAverageNegativeScore","sentimentTotalNegativeScore"],m)),i=["commentsGiven","commentsReceived","approvalsGiven","approvalsReceived"];return a.filter(({author:m})=>Object.keys(t).length>0?t[m]:!0).sort(we(i))},fr=(e,t)=>{const s=(e==null?void 0:e.date)||"",o=(t==null?void 0:t.date)||"";return new Date(s).getTime()-new Date(o).getTime()},Xe=e=>(e==null?void 0:e.description)||"",yr=(e,t)=>{let s;try{s=Ss.lt(Xe(e),Xe(t))?-1:1}catch{s=0}return s},qs=(e=[])=>{const t=e.filter(a=>/^v\d+\.\d+\.\d+$/.test(Xe(a))).sort(yr),s=t.map((a,i)=>{const l=Xe(a);let m="";try{const u=i>0?Xe(t[i-1]):"v0.0.0",d=Ss.diff(u,l)||"EMPTY";m={minor:"MINOR",major:"MAJOR",patch:"PATCH",premajor:"PATCH",preminor:"PATCH",prepatch:"PATCH",prerelease:"PATCH",EMPTY:"PATCH"}[d]||"PATCH"}catch{m="PATCH"}return{...a,releaseType:m||"MAJOR"}}),o=s.length>70?a=>a.releaseType!=="PATCH":()=>!0;return s.filter(o).sort((a,i)=>fr(a,i))},Hs=({usersInfo:e={},events:t=[]})=>{const s=[];Object.values(e).forEach(({name:i="",userId:l="",dates:m=[]})=>{m.forEach(c=>{const{startDate:u,endDate:d}=c;u&&s.push({date:u,description:i||l,releaseType:"MINOR"}),d&&s.push({date:d,description:i||l,releaseType:"PATCH"})})});const o=t.map(({date:i,name:l}={})=>({date:i,description:l,releaseType:"MAJOR"})),n=(i,l)=>{const m=(i==null?void 0:i.date)||"",c=(l==null?void 0:l.date)||"";return new Date(m).getTime()-new Date(c).getTime()};return[...s,...o].sort(n)},zs=(e="")=>({type:x.STORE_TOKEN,payload:e}),Rr=(e="")=>t=>t({type:x.STORE_ORG,payload:e}),xr=(e="")=>t=>t({type:x.STORE_ENT_URL,payload:e}),Sr=(e="")=>t=>t({type:x.SET_TEAM_NAME,payload:e}),Ut=Es(No(","),Io(_o),vs(Boolean)),Ys=(e={})=>t=>{const s=Object.keys(e);return t({type:x.STORE_USERS_INFO,payload:e}),t({type:x.STORE_USER_IDS,payload:s})},Qs=(e="")=>t=>{const s=Ut(e);return t({type:x.STORE_EX_IDS,payload:s})},Xs=(e="")=>t=>{const o=Ut(e).map((n="")=>{const[a,i]=n.split("=");return{name:a,date:i}});return t({type:x.STORE_EVENTS,payload:o})},Er=(e="")=>t=>t({type:x.STORE_REPO,payload:e}),Js=e=>t=>t({type:x.STORE_AMOUNT,payload:e||""}),Zs=e=>(t,s)=>{const{fetches:o,pullRequests:n=[]}=s(),a=Zn({...o,amountOfData:e||""},n);t({type:x.STORE_FORM_UNTIL_DATE,payload:a})},eo=(e="DESC")=>t=>t({type:x.STORE_SORT,payload:e}),vr=(e={},t={})=>(s="")=>e[s]&&t[s]&&e[s]!==t[s],Ar=(e={},t={})=>(s="")=>{const o=je("",s,e),n=Ut(o),a=t[s];return a.length&&As(V(a,n))},Dr=(e={},t={})=>{const s=e.userId,[o]=t.userIds,n=(e==null?void 0:e.usersInfo)||{},a=t.usersInfo||{},i=s&&o&&s!==o,l=As(V(n,a));return i||l},Tr=e=>(t,s)=>{const{fetches:o={}}=s(),n=vr(e,o),a=Ar(e,o);(n("org")||n("repo")||n("teamName")||n("enterpriseAPI")||Dr(e,o)||a("excludeIds"))&&gt(t)},gt=e=>{e({type:x.CLEAR_ORG}),e({type:x.CLEAR_REPO}),e({type:x.CLEAR_TRIMMED_ITEMS}),e({type:x.CLEAR_PRS}),e({type:x.CLEAR_FILTERED_PRS}),e({type:x.CLEAR_REVIEWED_PRS}),e({type:x.CLEAR_REVIEWED_FILTERED_PRS}),e({type:x.CLEAR_ITEMS_DATE_RANGE}),e({type:x.CLEAR_PR_PAGINATION}),e({type:x.CLEAR_PREFETCHED_NAME}),e({type:x.CLEAR_DESC}),e({type:x.CLEAR_UNTIL_DATE}),e({type:x.CLEAR_FORM_UNTIL_DATE}),e({type:x.CLEAR_USER_IDS}),e({type:x.CLEAR_USERS_INFO}),e({type:x.CLEAR_EX_IDS}),e({type:x.CLEAR_EVENTS}),e({type:x.CLEAR_USERS_DATA}),e({type:x.CLEAR_TEAM_NAME}),e({type:x.CLEAR_RELEASES}),e({type:x.CLEAR_RELEASES_PAGINATION}),e({type:x.CLEAR_ISSUES}),e({type:x.CLEAR_FILTERED_ISSUES}),e({type:x.CLEAR_ISSUES_PAGINATION}),e({type:x.CLEAR_FETCH_ERROR}),e({type:x.CLEAR_PRE_FETCH_ERROR})},Pr=gt,wr=e=>{const{fetches:{org:t="",repo:s="",token:o="",userIds:n=[]}={}}=e,a=n.length<1,i=[a&&!t&&"Organization",a&&!s&&"Repository",!o&&"GitHib token",!t&&!s&&a&&"GitHub Ids"].filter(Boolean),l=c=>{const u=i.length-1;return[c===0?"Missing ":"",c===u?" and ":"",c>0?", ":""].find(p=>p.length>0)||""};return i.reduce((c,u,d)=>c+l(d)+u,"")},Cr=e=>{const{fetches:{org:t="",repo:s="",token:o="",userIds:n=[]}={}}=e,a=[o];t&&a.push(t),s&&a.push(s);const i=a.every(u=>typeof u=="string"&&u.length>0),m=(n.length?[n]:[]).every(u=>u.length>0),c=i&&m;return{isValid:c,error:c?null:{level:"error",message:wr(e)}}},br=(e="",t="")=>(s="mergedAt",o=[])=>{const n=[],a=[],i=[],l=(m=[])=>m.forEach(c=>{const u=new Date(c[s]);We(u,new Date(e))?n.push(c):Ze(u,new Date(t))?i.push(c):a.push(c)});return o.forEach(l),[n,a,i]},Ir=(e="",t="")=>async(s,o)=>{const{fetches:{usersInfo:n={}}={},trimmedItems:{trimmedPRs:{trimmedLeftPrs:a=[],trimmedRightPrs:i=[]}={},trimmedReviewedPRs:{trimmedLeftReviewedPrs:l=[],trimmedRightReviewedPrs:m=[]}={},trimmedReleases:{trimmedLeftReleases:c=[],trimmedRightReleases:u=[]}={}}={},pullRequests:d=[],reviewedPullRequests:p=[],releases:h=[]}=o(),g=br(e,t),y=[a,d,i],[f,R,E]=g("mergedAt",y);s({type:x.ADD_PRS,payload:R});const S=[l,p,m],[A,v,D]=g("mergedAt",S);s({type:x.ADD_REVIEWED_PRS,payload:v}),s({type:x.ADD_USERS_DATA,payload:ht(R.concat(v),n)});const w=[c,h,u],[T,_,j]=g("date",w);s({type:x.ADD_RELEASES,payload:_}),s({type:x.ADD_TRIMMED_ITEMS,payload:{trimmedPRs:{trimmedLeftPrs:f,trimmedRightPrs:E},trimmedReviewedPRs:{trimmedLeftReviewedPrs:A,trimmedRightReviewedPrs:D},trimmedReleases:{trimmedLeftReleases:T,trimmedRightReleases:j}}})},to=(e=[])=>{const{mergedAt:t=""}=e.at(0)||{mergedAt:""},{mergedAt:s=""}=e.at(-1)||{mergedAt:""};return[t,s]},so=()=>async(e,t)=>{var n,a,i,l,m,c;const s=t(),{isValid:o}=Cr(s);o&&e({type:x.CLEAR_FETCH_ERROR}),o&&e({type:x.FETCH_START});try{if(!o)throw new Error("Not a valid request");const{fetches:u,filteredPRs:d=[],pullRequests:p=[],filteredReviewedPRs:h=[],reviewedPullRequests:g=[],issues:y=[],filteredIssues:f=[],formUntilDate:R="",releases:E=[],filteredReleases:S=[]}=t(),{usersInfo:A}=u,v=(u==null?void 0:u.userIds)||[],D=(u==null?void 0:u.repo)||"",w=(u==null?void 0:u.org)||"",T=R,_=v.length===1&&"user"||v.length>1&&"team"||!D&&w&&"org"||"repo",j={user:()=>Qn({fetchInfo:u,untilDate:T,dispatch:e}),team:()=>Yn({fetchInfo:u,untilDate:T,dispatch:e}),repo:()=>Se({fetchInfo:u,queryInfo:Fs(T),dispatch:e}),org:()=>Xn({fetchInfo:u,untilDate:T,dispatch:e})},{fetchInfo:L={},results:q=[],reviewResults:ve=[]}=await j[_](),de=ns(u,q),ie=lr(u,de),X=p.concat(d).concat(ie),te=(a=(n=p.at(-1))==null?void 0:n.mergedAt)==null?void 0:a.slice(0,10),H=(l=(i=p.at(0))==null?void 0:i.mergedAt)==null?void 0:l.slice(0,10),G=(c=(m=de.at(-1))==null?void 0:m.mergedAt)==null?void 0:c.slice(0,10),he=new Date().toISOString().slice(0,10),{sortDirection:be="DESC"}=u,ge=be==="DESC"?{reportStartDate:T||G,reportEndDate:te||he}:{reportStartDate:H,reportEndDate:T||he},[ue,Ae]=rs(u,ge,X);e({type:x.ADD_PRS,payload:ue}),e({type:x.ADD_FILTERED_PRS,payload:Ae});const Ie=ns(u,ve).filter(({author:J="",mergedAt:oe=""})=>oe&&J!==v[0]),ke=g.concat(h).concat(Ie),[_e=[],Le=[]]=rs(u,ge,ke);e({type:x.ADD_REVIEWED_PRS,payload:_e}),e({type:x.ADD_REVIEWED_FILTERED_PRS,payload:Le});const qe=to(ue);if(e({type:x.ADD_ITEMS_DATE_RANGE,payload:qe}),e({type:x.ADD_USERS_DATA,payload:ht(ue.concat(_e),A)}),_==="repo"){const J=hr(q),oe=qs([...S,...E,...J]),[Z,fe]=mr(ge,oe);e({type:x.ADD_RELEASES,payload:Z}),e({type:x.ADD_FILTERED_RELEASES,payload:fe})}const N=ur(q),k=y.concat(f).concat(N),[F,W]=cr(ge,k);e({type:x.ADD_ISSUES,payload:F}),e({type:x.ADD_FILTERED_ISSUES,payload:W}),e({type:x.STORE_UNTIL_DATE,payload:R});const se=(J={})=>{const oe=xs(["newest","oldest"]),Z={};return Object.entries(J).filter(([,Me])=>ys(Object,Me)&&jo(oe(Me)).length>0).forEach(([Me,To])=>{Z[Me]=oe(To)}),{...oe(J),...Z}};e({type:x.SET_PR_PAGINATION,payload:se(L.prPagination)}),e({type:x.SET_PR_REVIEWED_PAGINATION,payload:se(L.usersReviewsPagination)}),e({type:x.SET_ISSUES_PAGINATION,payload:se(L.issuesPagination)}),e({type:x.SET_RELEASES_PAGINATION,payload:se(L.releasesPagination)}),e({type:x.FETCH_END})}catch(u){const d=u;e({type:x.FETCH_ERROR,payload:{level:"error",message:d.message||"Unknown error"}}),e({type:x.FETCH_END})}},_r=(e,t)=>{const{fetches:s,preFetchedName:o="",reportDescription:n="",pullRequests:a=[],filteredPRs:i=[],reviewedPullRequests:l=[],filteredReviewedPRs:m=[],usersData:c=[],issues:u=[],filteredIssues:d=[],releases:p=[],filteredReleases:h=[]}=e,{teamName:g="",userIds:y=[],usersInfo:f={},excludeIds:R=[],events:E=[],repo:S="",org:A=""}=s;gt(t),[["token","STORE_TOKEN",""],["org","STORE_ORG",""],["repo","STORE_REPO",""],["enterpriseAPI","STORE_ENT_URL",""],["prPagination","SET_PR_PAGINATION",{}],["usersReviewsPagination","SET_PR_REVIEWED_PAGINATION",{}],["releasesPagination","SET_RELEASES_PAGINATION",{}],["issuesPagination","SET_ISSUES_PAGINATION",{}]].forEach(([T,_="",j])=>{t({type:x[_],payload:(s==null?void 0:s[T])||j})}),t({type:x.PREFETCHED_NAME,payload:o}),t({type:x.STORE_SORT,payload:"ASC"}),t({type:x.STORE_AMOUNT,payload:"all"}),t({type:x.SET_DESC,payload:n}),t({type:x.SET_TEAM_NAME,payload:g}),t({type:x.STORE_USER_IDS,payload:y}),t({type:x.STORE_USERS_INFO,payload:f}),t({type:x.STORE_EX_IDS,payload:R}),t({type:x.STORE_EVENTS,payload:E});const D=to(a);t({type:x.ADD_ITEMS_DATE_RANGE,payload:D}),t({type:x.ADD_PRS,payload:a}),t({type:x.ADD_FILTERED_PRS,payload:i}),t({type:x.ADD_REVIEWED_PRS,payload:l}),t({type:x.ADD_REVIEWED_FILTERED_PRS,payload:m}),t({type:x.ADD_USERS_DATA,payload:c.length?c:ht(a.concat(l),f)});const w=u.sort(({mergedAt:T=""},{mergedAt:_=""})=>new Date(T).getTime()-new Date(_).getTime());if(t({type:x.ADD_ISSUES,payload:w}),t({type:x.ADD_FILTERED_ISSUES,payload:d}),S&&A){const T=qs(p);t({type:x.ADD_RELEASES,payload:T}),t({type:x.ADD_FILTERED_RELEASES,payload:h})}t({type:x.FETCH_END})},Nr=e=>new Promise((t,s)=>{e.json().then(o=>e.status===200?t(o):s(new Error(`Error status code ${e.status}`))).catch(o=>{const n=o;console.log("-=-=--parseJSON error",n),n.status=e.status,s(n)})}),jr=({fileName:e="",externalURL:t="",localData:s}={})=>async o=>{gt(o),o({type:x.CLEAR_PRE_FETCH_ERROR}),o({type:x.FETCH_START}),o({type:x.FETCH_STATUS,payload:{savedReportName:e}});const n=t?`${t}${e}.json`:`https://n07734.github.io/community-health/data/${e}.json`;try{const a=s||await fetch(n).then(Nr);_r(a,o)}catch(a){const i=a;console.log("-=-=--api data error",i,i.status);const l=i.status!==200?`Error status code ${i.status} loading ${e}`:`${i.message} loading ${e}`;o({type:x.PRE_FETCH_ERROR,payload:{level:"error",message:l||"Unknown error"}}),o({type:x.FETCH_END})}},oo=(e,t)=>{const s=t(),{repo:o,org:n,teamName:a,userIds:i=[]}=(s==null?void 0:s.fetches)||{},l=(i==null?void 0:i.length)===1?i[0]:"",m=a||l||`${n}${o?`-${o}`:""}`,u=Es(Kt("HOW_TO","1: Add this file to ./src/myReports 2: Run the app. If you want multiple reports you will need to edit ./src/myReports/myReportsConfig.js."),Oo(["fetches","pullRequests","filteredPRs","reviewedPullRequests","filteredReviewedPRs","userData","issues","filteredIssues","releases","teamName"]),$e(["fetches","token"]),$e(["sortDirection"]),$e(["fetches","amountOfData"]),$e(["fetches","prPagination","hasNextPage"]),$e(["fetches","issuesPagination","hasNextPage"]),$e(["fetches","releasesPagination","hasNextPage"]),Kt("preFetchedName",m),Ks)(s),d=JSON.stringify(u,null,2),p=new Blob([d],{type:"application/json"});return{href:URL.createObjectURL(p),download:`${m}.json`}},Or=(e="")=>(t,s)=>{const{fetches:{sortDirection:o=""}={}}=s();o!==e&&t({type:x.CLEAR_UNTIL_DATE})&&t({type:x.CLEAR_FORM_UNTIL_DATE})},kr=({className:e,classes:t,onClick:s,key:o,value:n,text:a,type:i="submit",color:l="primary",disabled:m=!1})=>r.jsx(ko,{className:[t.root,e||""].join(" "),variant:"contained",size:"small",type:i,color:l,value:n,onClick:s,disabled:m,children:a||n},o),Lr=e=>({root:{marginRight:e.mySpacing.x.small,marginBottom:e.mySpacing.y.small}}),$=b(Lr)(kr),Mr={warn:r.jsx(Lo,{}),error:r.jsx(Mo,{})},$r=({error:{level:e="error",message:t},classes:s,className:o})=>r.jsxs("div",{className:`${s[e]} ${s.root} ${o}`,children:[Mr[e],r.jsx(C,{className:s.copy,children:t})]}),Fr=e=>({root:{padding:"0.8rem",display:"flex",alignItems:"center",borderRadius:"4px","& .MuiSvgIcon-root":{color:e.palette.text.primary}},copy:{margin:0,marginLeft:e.mySpacing.y.medium,padding:0,color:e.palette.text.primary},error:{backgroundColor:e.palette.error.main},warn:{backgroundColor:e.palette.warn.main}}),Gt=b(Fr)($r),Ee=e=>({inputGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",marginBottom:"1rem",columnGap:"8px",rowGap:"8px","@media (max-width: 768px)":{gridTemplateColumns:"repeat(1, 1fr)"},"& button":{minHeight:"3rem"},"& .inputDesc":{gridColumn:"1 / -1"}},typeOptions:{"& button":{fontSize:"1.3rem",textTransform:"none"}},link:{color:e.palette.link},fullRow:{gridColumn:"1 / -1"},formDescription:{marginBottom:"0"},dataPaper:{display:"block"},child:{margin:0,width:"100%"},button:{marginRight:0,width:"100%",minHeight:"3rem"},copy:{display:"inline"},preFetched:{marginBottom:"1rem"}}),bt=[{name:"React",fileName:"facebook-react"},{name:"NextJS",fileName:"vercel-next.js"},{name:"Remix",fileName:"remix-run-remix"},{name:"Vue",fileName:"vuejs-core"},{name:"Svelte",fileName:"sveltejs-svelte"},{name:"Typescript",fileName:"microsoft-typescript"},{name:"Typescript 10th anniversary",fileName:"microsoft-typescript-10"},{name:"vscode",fileName:"microsoft-vscode"},{name:"Node",fileName:"nodejs-node"},{name:"Bluesky",fileName:"bluesky-social-social-app"}],It=[{name:"Vite",fileName:"vitejs"},{name:"testing-library",fileName:"testing-library"}],_t=[{name:"ReactCore",fileName:"ReactCore"},{name:"ViteCore",fileName:"ViteCore"},{name:"TypeScriptCore",fileName:"TypeScriptCore"}],no=[{name:"Vite",fileName:"vitejs"},{name:"Vitest",fileName:"vitest-dev-vitest"},{name:"Playwright",fileName:"microsoft-playwright"},{name:"PNPM",fileName:"pnpm-pnpm"},{name:"MSW",fileName:"mswjs-msw"},{name:"esbuild",fileName:"evanw-esbuild"},{name:"SWC",fileName:"swc-project-swc"},{name:"Testing Library",fileName:"testing-library"},{name:"Astro",fileName:"withastro-astro"}],De=[],Ur=e=>{var A,v;const{classes:t,error:s,preFetchedName:o="",getPreFetchedReport:n}=e,{togglePvPPage:a,setUserPage:i}=Ve(),l=(A=window==null?void 0:window.location)==null?void 0:A.search,m=new URLSearchParams(l),c=m.get("player1")||"",u=m.get("player2")||"",d=m.get("user")||"",p=[...De,...bt,..._t,...It],h=m.get("report"),g=h||((v=De[0])==null?void 0:v.fileName)||"vitejs",y=p.some(D=>D.fileName===g),f=y?p.find(D=>D.fileName===(o||g)):{fileName:g};I.useEffect(()=>{n(f),c&&u?a():d&&i(d)},[n,c,u,d]);const R=(D,w=1)=>r.jsx($,{value:(D==null?void 0:D.name)||"Report",color:o===D.fileName?"primary":"secondary",onClick:T=>{T.preventDefault(),n(D)}},`${w}`),[E,S]=I.useState(!1);return!y&&h?r.jsx("div",{}):r.jsxs("div",{className:t.preFetched,children:[De.map(R),r.jsxs("div",{children:[r.jsxs(C,{children:[r.jsx(Ns,{href:"https://2023.stateofjs.com/en-US/libraries/#tier_list",children:"StateOfJS 23"})," S tier list"]}),no.map(R)]}),r.jsx(C,{children:"Other reports"}),De.length===0&&r.jsxs(r.Fragment,{children:[!E&&f&&Object.keys(f).length>0&&R(f),E&&r.jsxs(r.Fragment,{children:[r.jsx(C,{children:"Repository reports"}),bt.map(R),r.jsx(C,{children:"Org reports"}),It.map(R),r.jsx(C,{children:"Team reports"}),_t.map(R)]}),s&&r.jsx(Gt,{error:s,className:t.fullRow})]}),r.jsx($,{value:E?"Hide other reports":"Show more OSS reports...",color:E?"primary":"secondary",onClick:D=>{D.preventDefault(),S(!E)}})]})},Gr=e=>({preFetchedName:e.preFetchedName,error:e.preFetchedError}),Br=e=>({getPreFetchedReport:t=>e(jr(t))}),Wr=M(Gr,Br)(b(Ee)(Ur)),Vr=e=>{const{setValue:t,amountOfData:s,pullRequests:o=[],preFetchedName:n=""}=e,a=!n&&o.length>0,i=l=>`Get ${l} ${l===1?"month":"months"} ${a?"more ":""}data`;return r.jsxs(Fe,{value:`${s}`,onChange:l=>t("amountOfData",l.target.value),inputProps:{"aria-label":"Amount of data"},children:[r.jsx(re,{value:1,selected:!0,children:i(1)}),r.jsx(re,{value:3,children:i(3)}),r.jsx(re,{value:6,children:i(6)}),r.jsx(re,{value:12,children:i(12)}),r.jsx(re,{value:24,children:i(24)}),r.jsx(re,{value:"all",children:"Get it all!"})]})},Kr=e=>({pullRequests:e.pullRequests,preFetchedName:e.preFetchedName}),ro=M(Kr)(Vr),qr=(e,t)=>[e&&"fetching",t.length&&"Get more data","Get data"].find(Boolean),Hr=e=>{const{fetching:t,error:s,pullRequests:o=[],classes:n}=e;return r.jsxs("div",{className:n.inputGrid,children:[r.jsx($,{className:`${n.child} ${n.fullRow}`,type:"submit",disabled:t,color:"primary",value:qr(t,o)}),s&&r.jsx(Gt,{error:s,className:n.fullRow})]})},zr=e=>({fetching:e.fetching,error:e.error,pullRequests:e.pullRequests}),ao=M(zr)(b(Ee)(Hr)),io={org:"Organization",repo:"Repository",team:"Team name (from GitHub Org team url)",gitTeamUrl:"Org's team url",token:"Token",excludeIds:"Exclude GitHub users e.g. remove bot PRs and comments, ',' separated",enterpriseAPI:"Enterprise API full url",userIds:"Comma separated list GitHub users",userId:"GitHub user ID",startDate:"Joined yyyy/mm/dd",endDate:"Left yyyy/mm/dd",events:"Comma separated list of events (optional)",teamName:"Team name",name:"Name"},Yr=({dates:e=[]})=>{const t=e.every(({startDate:a="",endDate:i=""})=>{const l=!a||Tt(new Date(a)),m=!i||Tt(new Date(i));return l&&m}),s=[];e.forEach(({startDate:a="",endDate:i=""})=>{a&&s.push(a),i&&s.push(i)});const o=Fo((a,i)=>new Date(a).getTime()-new Date(i).getTime(),s),n=V(s,o);return t&&n},Qr=(e={})=>{const t=Object.values(e).every(s=>Yr(s));return Object.keys(e).length>0&&t},is=(e="")=>!e||/^\d{4}[/-]\d{2}[/-]\d{2}$/.test(e)&&Tt(new Date(e)),lo=({key:e,value:t})=>ee([[V("gitTeamUrl"),P(/^(https:\/\/.+\..+$)/.test(t))],[V("enterpriseAPI"),P(/^(https:\/\/.+\..+|^$)/.test(t))],[V("excludeIds"),P(/^([\w-.,\s]+|)$/.test(t))],[V("events"),P(/^([\w-.,&\s=]+|)$/.test(t))],[V("name"),P(/.?/.test(t))],[V("usersInfo"),()=>Qr(t)],[V("startDate"),()=>is(t)],[V("endDate"),()=>is(t)],[U,P(/^[\w-_.]+$/.test(t))]])(e),Xr=e=>t=>{const s=e[t];return!lo({key:t,value:s})},co=e=>{const t=Xr(e),s={};return Object.keys(e).forEach(n=>{s[n]=t(n)}),{isValid:Object.values(s).every(n=>!n),validationErrors:s}},Nt=(e,t)=>{const s=e[t],o=typeof s=="object"?"":s;return Array.isArray(s)?$o(", ",s):o},Jr=e=>{const{type:t,classes:s,className:o="",inputError:n={},setInputError:a=()=>{},formInfo:i={},setValue:l}=e;return r.jsx(Uo,{label:io[t],className:`${o} ${s.child}`,error:n[t]||!1,value:Nt(i,t),variant:"outlined",margin:"normal",helperText:n[t]&&"Invalid input",onBlur:m=>{const c=O("",["target","value"],m),u=lo({key:t,value:c});a({...n,[t]:!u}),u&&l(t,c)},onChange:m=>{const c=O("",["target","value"],m);a({...n,[t]:!1}),l(t,c)},onFocus:()=>a({...n,[t]:!1})})},z=b(Ee)(Jr),Zr=e=>({...Ee(e),dateRow:{gridColumn:"1 / -1",display:"flex",justifyContent:"space-between",alignItems:"stretch",columnGap:"8px",rowGap:"8px"},modalGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",marginBottom:"2rem",columnGap:"8px",rowGap:"8px","@media (max-width: 400px)":{gridTemplateColumns:"repeat(1, 1fr)"},"& button":{minHeight:"3rem",margin:0,minWidth:"auto"},"& .inputDesc":{gridColumn:"1 / -1",margin:0}},removeDate:{minHeight:"3rem",backgroundColor:e.palette.destructive.main,color:e.palette.primary.contrastText,borderRadius:"4px",padding:"0 0.5rem",height:"auto"},remove:{backgroundColor:e.palette.destructive.main,color:e.palette.primary.contrastText}}),ea=({onSubmit:e=()=>{},gitUsers:t=[],usersInfo:s={},classes:o={}})=>{const n=Object.entries(s).map(([E,{name:S="",dates:A=[]}])=>({userId:E,name:S,dates:A})),a=n.length>0?n:[{userId:"",name:"",dates:[]}],[i,l]=I.useState(a),m=E=>(S,A)=>{const v=[...i];v[E][S]=A,l(v)},c=(E,S)=>(A,v)=>{const D=[...i];D[E].dates[S][A]=v,l(D)},u=E=>{E.preventDefault();const S={};i.forEach(({userId:A,name:v,dates:D})=>{S[A]={userId:A,name:v,dates:D}}),e(S)},d=E=>{E.preventDefault(),l([...i,{userId:"",name:"",dates:[]}])},p=(E,S)=>{S.preventDefault();const A=[...i];A.splice(E,1),l(A)},h=(E,S)=>{S.preventDefault();const A=[...i],v={startDate:"",endDate:""};A[E].dates.push(v),l(A)},g=({userIndex:E,dateIndex:S})=>{const A=[...i],D=A[E].dates.filter((w,T)=>T!==S);A[E].dates=D,l(A)},[y,f]=I.useState({}),R=t.length>0&&"Edit Github Team members"||Object.keys(s).length>0&&"Edit team members"||"Or manually add team members";return r.jsxs("form",{children:[r.jsx(K,{level:4,children:R}),i.map((E,S)=>r.jsxs("div",{className:o.modalGrid,children:[r.jsx(z,{type:"userId",formInfo:E,inputError:y,setInputError:f,setValue:m(S)}),r.jsx(z,{type:"name",formInfo:E,setValue:m(S),inputError:y,setInputError:f}),E.dates.map((A,v)=>r.jsxs("div",{className:o.dateRow,children:[r.jsx(z,{type:"startDate",formInfo:A,inputError:y,setInputError:f,setValue:c(S,v)}),r.jsx(z,{type:"endDate",inputError:y,formInfo:A,setInputError:f,setValue:c(S,v)}),r.jsx(Go,{className:o.removeDate,onClick:()=>g({userIndex:S,dateIndex:v})})]},v)),r.jsx($,{value:`Add ${E.dates.length>0?"more dates":"dates"}`,color:"primary",onClick:A=>h(S,A)}),r.jsx($,{className:o.remove,value:"Remove User",onClick:A=>p(S,A)})]},S)),r.jsx($,{className:o.button,value:"Create new user",color:"primary",onClick:E=>d(E)}),r.jsx($,{className:o.button,value:"Save and close",color:"primary",onClick:E=>u(E)})]})},ta=b(Zr)(ea),sa=async({fetchInfo:e,setGitUsers:t,setInputError:s})=>{try{const{results:o=[]}=await Se({fetchInfo:e,queryInfo:Mn,dispatch:()=>{}}),n=[];o.flat().forEach(({node:a})=>{const{name:i,email:l,login:m}=a,c=i?i.replace(",",""):l.split(".")[0];n.push({userId:m,name:c})}),t(n)}catch(o){const n=o;s({level:"error",message:`Api call error: ${(n==null?void 0:n.message)||"unknown"}`})}},mo=e=>({...Ee(e),form:{overflow:"scroll",width:"100%","& > *":{marginBottom:"1rem"}},copy:{marginBottom:"0.2rem"},fullWidth:{width:"100%",margin:0},wrap:{position:"absolute",maxHeight:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",backgroundColor:e.palette.background.default,padding:"1.5rem 1.5rem 0 1.5rem",overflow:"scroll"}}),oa=b(mo)(e=>{var u;const{classes:t={},setGitUsers:s}=e,[o,n]=I.useState({}),a={gitTeamUrl:"",token:""},[i,l]=I.useState(a),c={inputError:o,setInputError:n,formInfo:i,setValue:(d,p)=>l({...i,[d]:p})};return r.jsxs("form",{className:t.form,onSubmit:d=>{d.preventDefault();const{gitTeamUrl:p="",token:h=""}=i,g=p.split("/"),y=g.at(-2)||"",f=g.at(-2)||"";[y,f,h].every(E=>E&&E.length>0)?sa({fetchInfo:{name:y,org:f,token:h},setGitUsers:s,setInputError:n}):n({level:"error",message:"Invalid inputs"})},children:[r.jsx(K,{level:4,children:"Get team members from a GitHub Org team page"}),r.jsx(z,{type:"gitTeamUrl",...c},"gitTeamUrl"),r.jsx(z,{type:"token",...c}),r.jsx($,{className:t.button,value:"Get team members",type:"submit"}),((u=o==null?void 0:o.message)==null?void 0:u.length)>0&&r.jsx(Gt,{error:o})]})}),uo=b(mo)(({setParentValues:e,usersInfo:t={},classes:s={}})=>{const[o,n]=I.useState(!1),a=c=>{c.preventDefault(),n(!0)},i=()=>n(!1),[l,m]=I.useState([]);return r.jsxs("div",{children:[r.jsxs(C,{className:s.copy,children:["Team members: ",Object.values(t).map(({name:c,userId:u})=>c||u).join(", ")||"None"]}),r.jsx($,{className:s.fullWidth,type:"button",value:Object.keys(t).length===0?"Add team members":"Edit team members",onClick:a}),r.jsx(Bo,{open:o,onClose:i,children:r.jsxs(Wo,{className:s.wrap,children:[Object.keys(t).length===0&&r.jsx(oa,{setGitUsers:m}),r.jsx(ta,{gitUsers:l,usersInfo:t,onSubmit:c=>{const u=Object.keys(c).filter(Boolean).length>0;e(u?{usersInfo:c}:{usersInfo:{}}),i()}})]})})]})}),na=({fetching:e,preFetchedName:t,pullRequests:s,classes:o,getDownloadInfo:n})=>{const a=n();return!e&&!t&&s.length>0?r.jsx(C,{children:r.jsx("a",{className:o.link,...a,children:"Download report data"})}):null},ra=e=>({fetching:e.fetching,pullRequests:e.pullRequests,preFetchedName:e.preFetchedName}),aa=e=>({getDownloadInfo:()=>e(oo)}),po=M(ra,aa)(b(Ee)(na)),ia=e=>{const{setValues:t,getData:s,fetching:o,reportType:n="repo",classes:a}=e,l={repo:"Get community data for any repo",team:"Get community data for any Team(list of users)",user:"Get data for an individual",org:"Get community data for any Org"}[n],u={sortDirection:"DESC",amountOfData:1,token:"",excludeIds:"",enterpriseAPI:"",...{repo:{org:"",repo:""},org:{org:""},team:{usersInfo:{},teamName:""},user:{userId:"",name:""}}[n]},[d,p]=I.useState({}),[h,g]=I.useState(u),y=(v={})=>{const D={...h,...v};g(D)};I.useEffect(()=>{g(u)},[n,g]);const f=(v,D)=>g({...h,[v]:D}),R={inputError:d,setInputError:p,formInfo:h,setValue:f},E=v=>{v.preventDefault();const{isValid:D,validationErrors:w}=co(h);p(w),D&&!o&&t(h),D&&!o&&s()},A={repo:[{type:"org"},{type:"repo"}],org:[{type:"org",className:"inputDesc"}],team:[{type:"teamName",className:"inputDesc"}],user:[{type:"userId"},{type:"name"}]}[n];return r.jsxs("div",{className:a.formDescription,children:[r.jsx(K,{level:3,children:l}),r.jsxs("form",{onSubmit:E,children:[r.jsxs("div",{className:a.inputGrid,children:[A.map(v=>r.jsx(z,{className:v.className,type:v.type,...R},v.type)),n==="team"&&r.jsx(uo,{usersInfo:h.usersInfo,setParentValues:y}),r.jsx(z,{className:"inputDesc",type:"events",...R}),r.jsx(C,{className:"inputDesc",children:"Key events can give context when viewing the data e.g. started using copilot, launched a feature. These events can help give more context while viewing the data. e.g.  Copilot adopted=2024-02-01,Feature A=2024-04-10."}),r.jsx(z,{type:"token",...R}),r.jsx(ro,{setValue:f,amountOfData:h.amountOfData}),r.jsxs(C,{className:"inputDesc",children:["To create a token go to your GitHub ",r.jsx("a",{className:a.link,href:"https://github.com/settings/tokens",children:"tokens"})," page, click on 'generate new token', choose the settings 'repo' (all), 'read:org' and 'user' then click 'Generate token'."]})]}),r.jsx(pe,{className:`${a.formDescription} ${a.fullRow}`,expandText:"show",intro:"Advanced options",children:r.jsxs("div",{className:a.inputGrid,children:[r.jsx(z,{type:"excludeIds",...R}),r.jsx(z,{type:"enterpriseAPI",...R})]})}),r.jsx(ao,{})]}),r.jsx(po,{})]})},la=e=>({fetching:e.fetching,error:e.error}),ca=e=>({setValues:t=>{const{org:s,repo:o,token:n,amountOfData:a,sortDirection:i,teamName:l,usersInfo:m={},userId:c,name:u,enterpriseAPI:d,excludeIds:p,events:h}=t;c&&u&&(m[c]={userId:c,name:u,dates:[]}),e(Tr({...t,usersInfo:m})),e(zs(n)),e(Js(a)),e(eo(i)),e(Zs(a)),s&&e(Rr(s)),o&&e(Er(o)),Object.keys(m).length>0&&e(Ys(m)),l&&e(Sr(l)),e(xr(d)),e(Qs(p)),h&&e(Xs(h))},getData:()=>e(so())}),rt=b(Ee)(M(la,ca)(ia)),ma=({classes:e,clearReport:t})=>{var R,E;const s=(R=window==null?void 0:window.location)==null?void 0:R.search,n=new URLSearchParams(s).get("report")||((E=De[0])==null?void 0:E.fileName)||"facebook-react",i=[...no,...bt,...It,..._t,...De].some(S=>S.fileName===n),[l,m]=I.useState("oss"),c=S=>{S!==l&&t(),m(S)},u=De.length>0?"Saved and OSS Reports":"OSS Reports",d=De.length>0?"Saved Reports":u,p=[...i?[[d,"oss"]]:[],["Make individual report","user"],["Make team report","team"],["Make repo report","repo"],["Make org report","org"]],[h,g]=I.useState(!1),y=h||!i&&l==="oss"?p:[p.find(([,S])=>S===l)||[]],f=l==="oss"?"Make a report...":"Show all";return r.jsxs(Q,{className:e.dataPaper,children:[r.jsxs("div",{className:e.typeOptions,children:[y.map(([S,A],v)=>r.jsx($,{value:S,color:l===A?"primary":"secondary",onClick:D=>{D.preventDefault(),c(A)}},`${v}`)),r.jsx($,{value:h?"Hide unselected":f,color:h?"primary":"secondary",onClick:S=>{S.preventDefault(),g(!h)}})]}),ee([[V("oss"),P(r.jsx(Wr,{}))],[V("repo"),P(r.jsx(rt,{reportType:"repo"}))],[V("org"),P(r.jsx(rt,{reportType:"org"}))],[V("team"),P(r.jsx(rt,{reportType:"team"}))],[V("user"),P(r.jsx(rt,{reportType:"user"}))]])(l)]})},da=e=>({clearReport:()=>e(Pr)}),ua=M(()=>({}),da)(b(Ee)(ma)),pa=()=>({root:{width:"100%",position:"relative",display:"flex",flexDirection:"column",flexWrap:"wrap",gap:0,alignItems:"center","@media (min-width: 2400px)":{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"0 20px",justifyContent:"center"}}}),ha=({classes:e={},children:t})=>r.jsx("div",{className:e.root,children:t}),Ce=b(pa)(ha),Be=({className:e="",items:t=[],text:s="",type:o})=>{const n=d=>{const p=t.length-1,h={zero:"",max:" and ",more:", "},g=[d===0&&"zero",d===p&&"max",d>0&&"more"].find(Boolean);return h[g]},a=Vo(()=>({root:d=>({color:d.color,borderBottom:`solid 2px ${d.color}`,display:"inline-block",lineHeight:"2rem",position:"relative","&:before":{lineHeight:"0",content:'""',position:"absolute",bottom:"-1px",left:"-3px"},"&:after":{lineHeight:"0",content:'""',position:"absolute",bottom:"-1px",right:"-3px"}})})),i=({color:d,label:p})=>{const h=a({color:d});return r.jsx("span",{className:h.root,children:p})},l=({color:d,label:p})=>r.jsx("span",{style:{color:d},children:p}),m={average:"Average",trimmedAverage:"Trimmed Average",sum:"Total",count:"Total",teamDistribution:"",median:"",percentWith:"",growth:"",averagePerDev:""},c=[...new Set(t.map(d=>d.groupMath))],u=(t.length>0&&o==="line"&&c.length<2?c[0]||"average":"")||"";return r.jsxs(K,{level:3,className:e,children:[`${s} `,u&&`${m[u]} `,t.map((d,p)=>r.jsxs(I.Fragment,{children:[n(p),o==="line"?r.jsx(i,{...d}):r.jsx(l,{...d})]},p))]})},ga=()=>({centerHeading:{textAlign:"center"},headingWrap:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"},barChartComponentWrap:{width:"100%",maxWidth:"1200px",margin:"0 0 1rem 0"},lineChartComponentWrap:{zIndex:10,width:"100%",maxWidth:"1200px"},chordWrap:{width:"450px",height:"450px","@media (max-width: 668px)":{width:"370px",height:"370px","& svg text":{fontSize:"10px !important"}}},pieWrap:{width:"100%",height:"350px",marginBottom:"20px","@media (max-width: 750px)":{height:"300px"},"@media (max-width: 650px)":{height:"250px"}},chartWrap:{width:"100%",height:"500px","& svg g line":{opacity:"0.6"},"@media (max-width: 768px)":{height:"350px","& svg g line":{opacity:"0.2"},"& svg g line:first-child":{opacity:"1"}},"@media (max-width: 668px)":{height:"300px","& svg g circle":{display:"none"},"& svg path":{opacity:"1"},"& svg text":{fontSize:"10px !important"}}}}),tt=e=>b(ga)(e),ne={renderCell:e=>e.value||"0",sortComparator:(e=0,t=0)=>e-t},fa={comments:{field:"comments",headerName:"All comments",flex:1,...ne},codeComments:{field:"codeComments",headerName:"Code comments",flex:1,...ne},generalComments:{field:"generalComments",headerName:"Review comments",flex:1,...ne},approvals:{field:"approvals",headerName:"Approvals",flex:1,...ne},prSize:{field:"prSize",headerName:"PR Size",flex:1,...ne},additions:{field:"additions",headerName:"PR additions",flex:1,...ne},deletions:{field:"deletions",headerName:"PR deletions",flex:1,...ne},age:{field:"age",headerName:"PR Age (days)",flex:1},mergedAt:{field:"mergedAt",headerName:"Date",flex:1,renderCell:e=>Pt(new Date(e.value),"do MMM yy")},commentSentimentScore:{field:"commentSentimentScore",headerName:"To team",flex:1,...ne},commentAuthorSentimentScore:{field:"commentAuthorSentimentScore",headerName:"From team",flex:1,...ne},commentSentimentTotalScore:{field:"commentSentimentTotalScore",headerName:"Sentiment",flex:1,...ne},commentsGiven:{field:"commentsGiven",headerName:"Comments given",flex:1,...ne},url:{field:"url",headerName:"Link",flex:1,renderCell:e=>{const t=e.value||"",s=t.split("/").at(-1);return r.jsx(Ns,{href:t,children:s})}},author:{field:"author",headerName:"author",flex:1},growth:{field:"prSize",headerName:"PR Size",flex:1,...ne},repo:{field:"repo",headerName:"repo",flex:1},isBug:{field:"isBug",headerName:"Bug",flex:1,renderCell:e=>e.value?"true":"false"}},ya=e=>[...e,"mergedAt","url"].map(o=>fa[o]),Ra=(e,t,s=!1)=>o=>s&&o===t?`${e.selected} ${s?e.hasTable:""}`:e.chunk,xa=({classes:e={},showTable:t=!1})=>t?r.jsx(Ts,{className:e.arrow}):r.jsx(Ds,{className:e.arrow}),Sa=({data:e=[],dataKeys:t=[],classes:s={},tableOpenedByDefault:o=!1})=>{var p;const[n,a]=I.useState(e.length-1),[i,l]=I.useState(o),m=Ra(s,n,i),c=e.flat(),d=c.length>30?e:[c];return r.jsxs("div",{className:s.wrapper,children:[d.length>0&&r.jsx("div",{className:s.bar,children:d.map((h,g)=>r.jsx("div",{className:m(g),onClick:()=>{n===g&&l(!i),n!==g&&!i&&l(!0),a(g)},children:n===g?r.jsx(xa,{showTable:i,classes:s}):r.jsx(Ds,{className:s.arrow})},g))}),((p=d[n])==null?void 0:p.length)>0&&i&&r.jsx(Ko,{sortingOrder:["desc","asc"],rows:d[n],columns:ya(t),initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],autoPageSize:!1,disableColumnFilter:!0,disableColumnMenu:!0,isRowSelectable:()=>!1,autoHeight:!0})]})},ls={flexGrow:1,marginRight:"4px",borderRadius:"8px"},Ea=e=>({bar:{width:"100%",height:"30px",display:"flex",paddingBottom:"4px",marginBottom:"0px","& > div:last-child":{marginRight:"0px"}},chunk:{...ls,position:"relative",backgroundColor:e.palette.secondary.main,cursor:"pointer"},hasTable:{"&:before":{content:'""',display:"block",width:"100%",height:"11px",position:"absolute",bottom:"-5px",backgroundColor:e.palette.primary.main}},selected:{...ls,cursor:"pointer",backgroundColor:e.palette.primary.main,position:"relative","&:after":{content:'""',display:"block",width:"100%",height:"500px",position:"absolute",bottom:"0px",zIndex:"-1",background:e.palette.tableGraphGradient1,"@media (max-width: 768px)":{height:"400px",background:e.palette.tableGraphGradient2},"@media (max-width: 668px)":{height:"320px",background:e.palette.tableGraphGradient3}}},arrow:{fontSize:"25px",color:e.palette.background.default,position:"absolute",top:"3px",left:"50%",transform:"translateX(-50%)"},wrapper:{padding:"0 50px",marginBottom:e.mySpacing.y.medium,maxWidth:"1100px","& .MuiDataGrid-root":{borderColor:e.palette.primary.main,borderWidth:"2px"},"& .MuiDataGrid-root .MuiDataGrid-columnHeaderWrapper > div.MuiDataGrid-cell:last-child:empty":{width:"0 !important",minWidth:"0 !important",maxWidth:"0 !important"},"& .MuiDataGrid-root .MuiDataGrid-columnHeader":{maxWidth:"100% !important",width:"100% !important"},"& .MuiDataGrid-root .MuiDataGrid-row > div.MuiDataGrid-cell:last-child:empty":{width:"0 !important",minWidth:"0 !important",maxWidth:"0 !important"},"& .MuiDataGrid-root .MuiDataGrid-cell--textLeft":{maxWidth:"100% !important",width:"100% !important"},"& .MuiDataGrid-renderingZone":{maxWidth:"100% !important",width:"100% !important"},"& .MuiDataGrid-root .MuiDataGrid-row":{maxWidth:"100% !important",width:"100% !important"}}}),va=b(Ea)(Sa),le=["average","trimmedAverage","sum","median"],Bt=[{label:"Comments",dataKey:"comments",groupMaths:[...le,"percentWith","teamDistribution"]},{label:"Code comments",dataKey:"codeComments",groupMaths:[...le,"percentWith"]},{label:"Review comments",dataKey:"generalComments",groupMaths:[...le,"percentWith"]},{label:"Approvals",dataKey:"approvals",groupMaths:[...le,"percentWith","teamDistribution"]},{label:"Additions",dataKey:"additions",groupMaths:le},{label:"Deletions",dataKey:"deletions",groupMaths:le},{label:"PR size (additions + deletions)",dataKey:"prSize",groupMaths:le},{label:"Codebase change (additions - deletions)",dataKey:"growth",groupMaths:["growth"]},{label:"PR count",dataKey:"author",groupMaths:["count","averagePerDev"]},{label:"PR Age(days)",dataKey:"age",groupMaths:le},{label:"Sentiment",dataKey:"commentSentimentTotalScore",groupMaths:le},{label:"Sentiment to team",dataKey:"commentSentimentScore",groupMaths:le},{label:"Sentiment from team",dataKey:"commentAuthorSentimentScore",groupMaths:le},{label:"Bug count",dataKey:"isBug",groupMaths:["count"]},{label:"Feature count",dataKey:"isFeature",groupMaths:["count"]}],Aa={average:"Average",trimmedAverage:"*Trimmed Average",sum:"Total",count:"Total",median:"Median",teamDistribution:"Team's % spread of",percentWith:"% of PRs with",growth:"",averagePerDev:"Average per Dev"},cs=(e,t)=>({color:s,label:o="",dataKey:n,groupMath:a="average"},i)=>r.jsxs("div",{children:[r.jsx(C,{className:`${t.savedLine} ${t[s]}`,children:o}),r.jsx(Ts,{className:`${t.remove} ${t[s]}`,onClick:l=>{l.preventDefault(),e(n,a)}})]},`${i}`),ho=e=>[...e.left||[],...e.right||[]],jt=e=>{const t=ho(e),s=[];return Bt.forEach(({label:o="",dataKey:n,groupMaths:a=[]})=>{const i=t.filter(m=>(m==null?void 0:m.dataKey)===n),l=a.filter(m=>i.every(c=>(c==null?void 0:c.groupMath)!==m));l.length>0&&s.push({label:o,dataKey:n,groupMaths:l})}),s},Da=e=>{const s=ho(e).map(n=>n==null?void 0:n.dataKey);return Bt.find(({dataKey:n})=>!s.includes(n))},Ta=(e,t)=>{const s=jt(t),o=e.dataKey,n=s.findIndex(a=>a.dataKey===o);return s[n+1]||s[0]||Bt[0]},Pa={average:()=>"Average",trimmedAverage:()=>"Trimmed Average",sum:()=>"Total",median:()=>"Median",growth:()=>"Growth",percentWith:({label:e=""}={})=>`% of PRs with ${e}`,teamDistribution:({label:e=""}={})=>`Team's % spread of ${e}`,count:()=>"Total",averagePerDev:({label:e=""}={})=>`Average ${e} per DEV`},wa=({graphInfo:e,setGraph:t=()=>{},graphs:s=[],classes:o={}})=>{var y;const a=B().palette.colorList,i=Da(e),[l,m]=I.useState({label:(i==null?void 0:i.label)||"Comments",dataKey:(i==null?void 0:i.dataKey)||"comments",color:s.length>1?a[0]:a[1],lineSide:"left",groupMath:(y=i==null?void 0:i.groupMaths)==null?void 0:y[0]}),c=(f={})=>{m({...l,...f})},u=f=>{f.preventDefault();const{lineSide:R,label:E,groupMath:S}=l,A=e[R]||[];A.push({...l,label:`${Aa[S]} ${E}`,groupMath:S,.../teamDistribution|percentWith/.test(S)&&{yMax:100}});const v={...e,[R]:A},D=s.map(_=>v.graphId===_.graphId?v:_);t(D);const w=Ta(l,v),T=a.findIndex(_=>_===l.color);m({label:w.label,dataKey:w.dataKey,color:a[(T+1)%a.length],lineSide:"left",groupMath:w==null?void 0:w.groupMaths[0]})},d=f=>(R,E)=>{const A=(e[f]||[]).filter(T=>!(T.dataKey===R&&T.groupMath===E)),v={...e,[f]:A},D=s.map(T=>v.graphId===T.graphId?v:T);t(D);const[w]=jt(v);m({label:w.label,dataKey:w.dataKey,color:a[0],lineSide:"left",groupMath:w.groupMaths[0]})},p=jt(e),h=p.find(f=>f.dataKey===l.dataKey),g=((h==null?void 0:h.groupMaths)||[]).filter(f=>!/growth/.test(f));return r.jsxs("div",{className:o.graphForm,children:[p.length>0&&r.jsxs("form",{className:o.graphLine,onSubmit:u,children:[r.jsx(Fe,{onChange:f=>{const R=f.target.value,E=p.find(S=>S.dataKey===R);c({dataKey:R,groupMath:E.groupMaths[0],label:E.label})},variant:"filled",value:l.dataKey,inputProps:{"aria-label":"choose a line"},children:p.map(({label:f,dataKey:R})=>r.jsx(re,{value:R,children:f},`${R}${f}`))}),g.length>0&&r.jsx(Fe,{onChange:f=>c({groupMath:f.target.value}),variant:"filled",value:l.groupMath,inputProps:{"aria-label":"Choose a line calculation"},children:g.map(f=>r.jsx(re,{value:f,children:Pa[f](l)},`${l.dataKey}${f}`))}),r.jsxs(qo,{value:l.lineSide,onChange:f=>c({lineSide:f.target.value}),row:!0,name:"side",children:[r.jsxs(qt,{children:["Axis: Left",r.jsx(Ht,{name:"side",value:"left"})]}),r.jsxs(qt,{children:["Right",r.jsx(Ht,{name:"side",value:"right"})]})]}),r.jsx(Fe,{onChange:f=>c({color:f.target.value}),variant:"filled",value:l.color,inputProps:{"aria-label":"Choose a color"},children:a.map(f=>r.jsx(re,{value:f,children:r.jsx("div",{style:{backgroundColor:f,width:"70px",height:"10px",marginTop:"5px"}})},f))}),r.jsx($,{value:"Add to graph",color:"primary",type:"submit"})]}),r.jsxs("div",{className:o.customLines,children:[r.jsx("div",{children:(e.left||[]).map(cs(d("left"),o))}),r.jsx("div",{children:(e.right||[]).map(cs(d("right"),o))})]})]})},Ca=e=>{const t={};return e.palette.colorList.forEach(s=>{t[s]={color:s,borderColor:s}}),{graphLine:{display:"flex",flexWrap:"wrap",borderRadius:"15px",paddingTop:" 0.5em",justifyContent:"center",backgroundImage:e.palette.customGraphGradient,"& p":{margin:"0"},"& > *":{marginRight:"20px",marginBottom:"15px"},"& .MuiFormLabel-root":{color:e.palette.mainCopy.color}},graphForm:{width:"100%",maxWidth:"1200px","& .MuiInputBase-input":{paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0}},remove:{fontSize:"22px",marginLeft:"5px",marginBottom:"-5px"},savedLine:{fontSize:"1.3em",borderBottom:"solid 2px",display:"inline-block",lineHeight:"2rem",position:"relative","&:before":{lineHeight:"0",content:'""',position:"absolute",bottom:"-1px",left:"-3px"},"&:after":{lineHeight:"0",content:'""',position:"absolute",bottom:"-1px",right:"-3px"}},customLines:{width:"100%",display:"flex",flexWrap:"nowrap",justifyContent:"space-between","& > div":{columnGap:"20px",display:"flex",flexWrap:"wrap",maxWidth:"50%",justifyContent:"flex-start",flexDirection:"column"},"& > div:nth-child(2)":{justifyContent:"flex-end",textAlign:"right"}},...t}},go=b(Ca)(wa),ba=(e,t)=>{const s=e&&zt(new Date(e))+1,o=t&&zt(new Date(t))+1;return!!(s&&o&&s!==o)},Ia=(e,t)=>{const s=e&&it(new Date(e)),o=t&&it(new Date(t));return!!(s&&o&&s!==o)},ms=e=>(t,s)=>{const o=t&&it(new Date(t)),n=s&&it(new Date(s));return!!(o&&n&&o%e>0&&n%e===0)},_a=(e,t)=>{const s=e&&lt(new Date(e))+1,o=t&&lt(new Date(t))+1;return!!(s&&o&&s!==o)},Na=e=>(t,s)=>{const o=t&&lt(new Date(t))+1,n=s&&lt(new Date(s))+1;return!!(o&&n&&o%e>0&&n%e===0)},ja=(e,t)=>{const s=e&&Yt(new Date(e)),o=t&&Yt(new Date(t));return!!(s&&o&&s!==o)},Oa={"1day":ba,"1week":Ia,"2week":ms(2),"3week":ms(3),"1month":_a,"1quarter":Na(3),"1year":ja},ka=(e,t,s=[])=>{const o=[];return s.forEach(n=>{const i=(o.at(-1)||[]).at(-1)||{};!i[e]||Oa[t](i[e],n[e])?o.push([n]):o.at(-1).push(n)}),o},La=(e=[])=>{const{mergedAt:t}=e.at(0),{mergedAt:s}=e.at(-1),o=Re(new Date(s),new Date(t)),n=[{batchType:"1year",maxPoints:Math.ceil(o/365)},{batchType:"1quarter",maxPoints:Math.ceil(o/89)},{batchType:"1month",maxPoints:Math.ceil(o/30)},{batchType:"2week",maxPoints:Math.ceil(o/14)},{batchType:"1week",maxPoints:Math.ceil(o/7)},{batchType:"1day",maxPoints:o}],{batchType:a}=n.reduce((i,l)=>!i.maxPoints||Math.abs(l.maxPoints-15)<Math.abs(i.maxPoints-15)?l:i,{});return ka("mergedAt",a,e)},Ot=(e=[])=>e.length<1?[]:La(e),Je=["#E82573","#8b4ff0","#1F77B4","#4ECC7A","#DBD523","#EB9830","#D14B41"],fo=e=>{const t=[];return e.forEach(({data:s})=>{const o=s.map(n=>n.y);t.push(...o)}),t.sort((s,o)=>s-o)},ds=e=>{const t=fo(e),s=Math.round(t.length*.95),o=t[s]||0,n=t.at(-1)||0,a=o&&Math.round(o/n*100)||0;return o&&a<30?o:n},us=e=>{const t=fo(e),s=t.length>0?Ho(Math.min,t):0;return s>0?0:s},Ma=e=>{const t=new Date(e),s=t.getMonth()+1,o=t.getDate();return`${t.getFullYear()}-${s<10?`0${s}`:s}-${o<10?`0${o}`:o}`},$a=({filteredBatch:e=[]})=>{const t={};return e.forEach(s=>t[s.author]=1),Math.round(e.length/Object.keys(t).length)},Fa=({filteredBatch:e=[],dataKey:t="comments"})=>{const s=t,o=e.sort(we([s])),n=o.length,a=n>4?o.slice(Math.ceil(n*.05),Math.floor(n*.95)):o,i=a.reduce((l,m)=>l+(s&&m[s]||0),0)/a.length;return Math.round(i)},Ua=({filteredBatch:e=[],dataKey:t="comments"})=>{const s=new Set([]),o={};e.forEach(g=>{const{teamApprovers:y={},teamCommenters:f={}}=g,R=/approvals/i.test(t)?y:f;Object.entries(R).forEach(([S,A])=>{o[S]=(o[S]||0)+A});const E=[...Object.keys(y)||[],...Object.keys(f)||[]];E.length>0&&E.map(S=>s.add(S))});const n={};s.forEach(g=>n[g]=0);const a={...n,...o},i=Object.values(a),l=i.length,m=i.reduce((g,y)=>g+y,0),c=m/l,u=c*(l-1)+(m-c),d=i.reduce((g,y)=>g+Math.abs(y-c),0),p=u-d,h=Math.round(100/u*p);return isNaN(h)?0:h},Ga=({filteredBatch:e=[],dataKey:t="comments"})=>{const s=e.length,n=e.filter(i=>!i[t]).length;return n>0?Math.round((s-n)/s*100):0},Ba=({filteredBatch:e,dataKey:t="comments"})=>{const s=e.length;return e.sort(we([t]))[Math.floor(s/2)][t]||0},Wa=({filteredBatch:e})=>e.reduce((s=0,{additions:o=0,deletions:n=0})=>s+(o-n),0),Va=({filterForKey:e=!1,dataKey:t,groupMath:s="average"})=>(o=[])=>{const n=[];return o.forEach(a=>{const i=a.filter(m=>t&&e?/\d+/.test(`${m[t]}`):!0),l=i.length;if(!e||l>0){const m={average:()=>l>0?Math.round(Ct(t)(i)/l):0,trimmedAverage:Fa,sum:()=>Ct(t)(i),count:()=>l,averagePerDev:$a,median:Ba,percentWith:Ga,teamDistribution:Ua,growth:Wa};n.push({y:m[s]({filteredBatch:i,dataKey:t}),x:Ma(a[0].mergedAt)})}}),n},ps=({lines:e=[],data:t})=>{const s=t&&t.length>0?Ot(t):[],o=[];return e.forEach(n=>{const{label:a,color:i,data:l}=n,m=l&&l.length>0?Ot(l):s,c=Va(n)(m);c.length&&o.push({id:a,color:i,data:c})}),o},Ka=(e,t,s)=>{let o,n;s.forEach(({data:m=[]})=>{const c=m[0].x,u=m[m.length-1].x;(!o||new Date(c)<o)&&(o=new Date(c)),(!n||new Date(u)>n)&&(n=new Date(u))});const a={MAJOR:"primary",MINOR:"secondary",PATCH:"tertiary"},i=[0,18,36,54,72,90];return e.filter(({date:m})=>{const c=new Date(m);return c>o&&c<n}).map((m,c)=>({axis:"x",value:new Date(m.date).getTime(),legend:m.description,...t.charts.markers[a[m.releaseType]]||{},legendOffsetY:i[c%i.length]}))},qa=e=>{const t=`${e}`,s=Math.ceil(t.length*.4),[o]=t.split("").reduceRight(([a=[],i=!1],l,m)=>{const c=parseInt(l),u=i?c+1:c,d=m!==0&&(u>9||m>s&&u>4),p=d||m>s?0:u;return[[...a,p],d]},[[],!1]);return o.reverse().join("")},Oe=(e=[])=>{var m,c,u,d;const t=Ot(e),s=t.at(0)||[],o=t.at(-1)||[],n=s.at(0)&&new Date(((m=s.at(0))==null?void 0:m.mergedAt)||((c=s.at(0))==null?void 0:c.createdAt)),a=o.at(0)&&new Date(((u=o.at(0))==null?void 0:u.mergedAt)||((d=o.at(0))==null?void 0:d.createdAt)),i=n&&a?Re(a,n):0,l=[];return t.forEach((p=[],h)=>{const g=l.length,y=p.map((A,v)=>({...A||{},id:`${h}-${v}`})),f=new Date((p.at(0)||{}).mergedAt||(p.at(0)||{}).createdAt),R=Re(f,n),E=Math.floor(R/i*100),S=10*g;g<1||E>=S&&g<10?l.push(y):l.at(-1).push(...y)}),l},Ha=(e=[])=>{const t=[];return e.forEach(({data:s=[]})=>{t.push(new Date(s.at(0).x)),t.push(new Date(s.at(-1).x))}),t},za=(e=[],t=[])=>{const s=Ha([...e,...t]),o=zo(s),n=Yo(s);return Qo(n,o)},yo=({pullRequests:e=[],showNames:t=!0,usersInfo:s={}})=>{const o={};return e.forEach(i=>{const{author:l}=i,m=o[l]||[];m.push(i),o[l]=m}),[{lines:Object.entries(o).map(([i="",l=[]],m)=>{var u;const c=l.map(d=>({value:1,mergedAt:d.mergedAt}));return{label:t?((u=s[i])==null?void 0:u.name)||i:`${Array(m).fill(" ").join("")}Spartacus`,color:Je[m%Je.length],dataKey:"value",groupMath:"count",data:c}}),xAxis:"left"}]},Ro=(e="repo",t={})=>{const s=Object.entries(t).sort(([,m],[,c])=>m-c),o=s.slice(-20),n=s.length>19?o.map(([m])=>m):Object.keys(t),a=o.map(([m,c],u)=>({id:m,label:m,color:Je[u%Je.length],value:c})),i=s.length>n.length?`PR rainbow split by top 20 ${e}s out of ${s.length}`:`PR ${e} rainbow (${n.length})`;return{pieData:a,reportItems:n,pieTitle:`PR by ${e} rainbow`,sectionTitle:i}},Ya=e=>{var o;const t=n=>{const a=n.data.yFormatted,i=n.data.originalY;return/[\d.]/.test(i)?i:a},s=((o=e==null?void 0:e.slice)==null?void 0:o.points)||[];return r.jsx(Ps,{rows:s.map((n,a)=>[r.jsx("span",{style:{display:"block",width:"12px",height:"12px",background:n.serieColor}},a),n.serieId,r.jsx("strong",{children:t(n)},a)])})},Qa=(e=[])=>({series:t,lineGenerator:s,xScale:o,yScale:n})=>t.map((a={})=>{const{id:i,data:l,color:m}=a,{lineStyles:c={strokeWidth:2}}=e.find(u=>u.label===i)||{};return r.jsx("path",{d:s(l.map(u=>({x:o(u.data.x),y:n(u.data.y)}))),fill:"none",stroke:m,style:c},i)}),hs=(e=[])=>e.filter(t=>t.yMax).map(t=>t.yMax),gs=(e,t)=>t-e,Y=tt(({title:e,combineTitles:t=!1,blockHeading:s=!1,data:o=[],markers:n=[],showLegends:a=!1,classes:i,tableData:l=[],tableKeys:m=[],graphInfo:c,setGraph:u=()=>{},graphs:d=[],tableOpenedByDefault:p=!1}={})=>{const h=B(),{showNumbers:g}=et(),y=o.find(({xAxis:N})=>N==="left")||{data:[],lines:[],xAxis:"left"},f=hs(y.lines),R=ps(y),[E]=[...f,ds(R)].sort(gs),S=us(R),A=o.find(({xAxis:N})=>N==="right")||{data:[],lines:[],xAxis:"right"},v=hs(A.lines),D=ps(A),[w]=[...v,ds(D)].sort(gs),T=us(D),_=E||w,j=S>T?T:S,L=[];D.forEach(N=>{const k=N.data.map(F=>({y:F.y<0?F.y:Math.round(F.y*(_/w)),x:F.x,originalY:F.y}));k.length&&L.push({...N,data:k})});const q=y.lines,ve=!t&&e||s?[]:q,de=A.lines,ie=[...y.lines,...A.lines],X=ie.map(N=>({label:N.label,default:N.color,current:N.color,clicked:!1})),[te=[],H]=I.useState(X);(X.length!==te.length||te.length===1&&te[0].color!==X[0].color)&&H(X);const G="rgba(120, 119, 120, 0.27)",he=(N={})=>{const k=X.findIndex(F=>F.label===N.label);H(te.map((F,W)=>({...F,current:W===k||F.clicked?F.default:G})))},be=()=>{const N=te.some(k=>k.clicked);H(te.map(k=>({...k,current:N&&k.clicked||!N?k.default:G})))},ge=(N={})=>{const k=X.findIndex(W=>W.label===N.label),F=te.map((W,se)=>{const J=se===k&&!W.clicked;return{...W,current:J||se!==k&&W.clicked?W.default:G,clicked:se===k?J:W.clicked}});H(F)},ue={anchor:"top-right",direction:"column",justify:!1,translateX:-10,translateY:10,itemsSpacing:0,itemDirection:"right-to-left",itemWidth:80,itemHeight:20,itemOpacity:1,symbolSize:12,symbolShape:"square",symbolBorderColor:"rgba(0, 0, 0, .9)",itemTextColor:h.palette.text.primary},Ae=[];if(A.lines.length<1&&q.length>10){const N=[],k=[],F=Math.ceil(q.length/2);q.forEach(({label:W,color:se},J)=>{const{current:oe}=te.find(fe=>fe.label===W)||{},Z={label:W,color:oe||se};J<F?N.push(Z):k.push(Z)}),Ae.push({...ue,data:N,anchor:"top-left",direction:"column",translateX:10,itemDirection:"left-to-right"},{...ue,data:k})}const st=Ae.length>0?Ae.map(N=>({...N,onMouseEnter:he,onMouseLeave:be,onClick:ge})):[{...ue,onMouseEnter:he,onMouseLeave:be,onClick:ge}],Ie=R.concat(L),ke=Ka(n,h,Ie),_e=N=>N.some(k=>((k==null?void 0:k.data)||[]).length),qe=za(R,D)>90?"%Y":"%y/%m";return _e(Ie)&&r.jsxs("div",{className:i.lineChartComponentWrap,children:[c&&d.length>0&&r.jsx(go,{graphInfo:c,setGraph:u,graphs:d}),r.jsxs("div",{className:i.headingWrap,children:[r.jsx(Be,{type:"line",text:e,items:ve}),!s&&de.length>0&&r.jsx(Be,{type:"line",items:de})]}),r.jsx("div",{className:i.chartWrap,children:r.jsx(Xo,{margin:{top:14,right:50,bottom:50,left:50},data:Ie,colors:te.map(N=>N.current),lineWidth:2,curve:"monotoneX",animate:!1,isInteractive:g,xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",min:j,max:_},axisBottom:{format:qe,tickSize:0,tickPadding:10,tickRotation:-45},legends:a?st:[],axisLeft:{...!g&&{renderTick:void 0},tickSize:0,tickValues:8},pointLabelYOffset:0,...ke.length&&{markers:ke},...L.length&&{axisRight:{...!g&&{renderTick:void 0},tickSize:0,tickValues:8,format:N=>{const k=Math.round(N*(w/_));return N<0?N:qa(k)}}},enableGridX:!1,enableSlices:"x",sliceTooltip:Ya,theme:h.charts,layers:["grid","markers","areas",Qa(ie),"slices","points","axes","legends"]})}),l.length>0&&r.jsx(va,{data:l,dataKeys:m,tableOpenedByDefault:p})]})}),Xa=(e=[],t,s=[])=>o=>{const n=h=>{const g=h.dataKey;return["isBug","isFeature"].includes(g)?s.filter(({isBug:f=!1})=>f&&g==="isBug"||!f&&g==="isFeature"):e},{left:a=[],right:i=[]}=o,[l=[],m=[],c=[]]=t!==void 0?t(a,i,e):[],u={lines:l.length>0?l:a.map(h=>({...h,data:n(h)})),xAxis:"left"},d={lines:m.length>0?m:i.map(h=>({...h,data:n(h)})),xAxis:"right"},p=[...a.length>0?[u]:[],...i.length>0?[d]:[]];return[c,p]},Ja=e=>{const t=[...(e==null?void 0:e.left)||[],...(e==null?void 0:e.right)||[]].map(o=>o.dataKey);return t.length>0?[...t,"author"]:["comments","approvals","age","prSize","author"]};let Za=1;const ei=()=>++Za,ti=(e=[])=>{const t=[];return e.forEach(({left:s=[],right:o=[]})=>{s.forEach(n=>(n==null?void 0:n.groupMath)&&t.push(n.groupMath)),o.forEach(n=>(n==null?void 0:n.groupMath)&&t.push(n.groupMath))}),t},si=(e=[])=>ti(e).includes("trimmedAverage"),oi=({chunkyData:e=[],pullRequests:t=[],prTransformer:s,issues:o=[],releases:n=[],classes:a={},tableOpenedByDefault:i=!1})=>{const l=B(),m=l.palette.primary.main,c=l.palette.secondary.main,u=[{graphId:1,left:[{label:"*Trimmed Average PR Age (days)",color:m,dataKey:"age",groupMath:"trimmedAverage"}],right:[{label:"*Trimmed Average PR Size",color:c,dataKey:"prSize",groupMath:"trimmedAverage"}]}],[d,p]=I.useState(u),h=si(d),g=Xa(t,s,o);return t.length>0&&r.jsxs(Q,{children:[r.jsxs(pe,{title:"Build your own graphs",expandText:"guidance",children:[r.jsx(C,{children:"You can build multiple graphs with data you want to see to help you find insights and track trends."}),r.jsx(C,{children:"Questions worth asking (with team context):"}),r.jsxs(kt,{children:[r.jsx(ce,{children:"What metrics do you want to look and and compare against?"}),r.jsx(ce,{children:"Any insights or things you would like to try to impact these metrics?"}),r.jsx(ce,{children:"This graph initially had PR age and size as they are often impactful metrics, what do you think about the trends of these metrics?"})]})]}),r.jsxs(Ce,{children:[d.map((y,f)=>{var S,A;const[R=[],E=[]]=g(y);return((S=y==null?void 0:y.left)==null?void 0:S.length)<1&&((A=y==null?void 0:y.right)==null?void 0:A.length)<1?r.jsx(go,{graphInfo:y,setGraph:p,graphs:d},f):r.jsx(Y,{graphInfo:y,setGraph:p,graphs:d,blockHeading:!0,markers:n,legends:R,showLegends:R.length>0,data:E,tableKeys:Ja(y),tableData:e,tableOpenedByDefault:f===0&&i},f)}),h&&r.jsx(C,{children:"*Trimmed average is the average after the top and bottom 5% is trimmed."})]}),r.jsxs("div",{className:a.buttons,children:[d.length>1&&r.jsx($,{value:"Remove above graph",color:"secondary",onClick:y=>{y.preventDefault(),p(d.slice(0,-1))}}),r.jsx($,{value:"Add another custom graph",color:"primary",onClick:y=>{y.preventDefault(),p([...d,{graphId:ei(),left:[],right:[]}])}})]})]})},ni=e=>({issues:e.issues}),ri=()=>({buttons:{display:"flex",flexWrap:"nowrap",flexBasis:"100%",justifyContent:"center"}}),ft=M(ni)(b(ri)(oi)),xo=(e,t)=>t.some(s=>e.some(o=>o[s])),mt=tt(({data:e=[],bars:t=[],sortBy:s="",indexBy:o="user",max:n=20,classes:a,layout:i="vertical",title:l=""})=>{const m=B(),{showNumbers:c}=et(),u=vs(y=>t.some(f=>y[f.dataKey]),e),d=y=>(f,R)=>+((f[y]||0)<(R[y]||0))||+((f[y]||0)===(R[y]||0))-1,p=s?u.sort(d(s)):u,h=n?p.slice(0,n):p,g=t.map(y=>y.dataKey);return xo(e,g)&&r.jsxs("div",{className:a.barChartComponentWrap,children:[r.jsx(Be,{text:l,items:t}),r.jsx("div",{className:a.chartWrap,children:r.jsx(Jo,{data:h,keys:g,indexBy:o,margin:{top:5,right:50,bottom:60,left:50},padding:.3,groupMode:"grouped",layout:i,valueFormat:y=>i==="horizontal"?`${Math.abs(y)}`:`${y}`,colors:t.map(y=>y.color),axisBottom:{tickSize:0,tickRotation:-45},axisLeft:{...!c&&{renderTick:void 0},tickSize:0},isInteractive:c,enableLabel:!1,animate:!1,theme:m.charts})})]})}),ai=(e,t,s=!1)=>{const o={},n={};e.forEach(d=>{const p=d.author,h=d[t]||{},g=wt(Object.values(h));o[p]=g,n[p]=d.name||p});const a=Object.entries(o).sort(([,d],[,p])=>p-d),i=wt(Object.values(o)),l=d=>{const p=100/i;return d*p},m=[];a.forEach(([d,p])=>{const h=l(p);p>0&&h>5&&m.push(d)});const c=m.length===e.length-1?a.map(([d])=>d):m,u=s?e.filter(d=>c.includes(d.author)).map(d=>d.author):c;return[u,u.map(d=>n[d]||d)]},ii=(e=[],t)=>{const s=Object.entries(t).filter(([n])=>!e.some(a=>a===n));return wt(s.map(n=>n[1]))},li=(e=[],t,s=[],o=!1)=>{const n=l=>[...s.map(m=>{var c;return((c=l==null?void 0:l[t])==null?void 0:c[m])||0}),...o?[ii(s,l[t])]:[]],a=s.map(l=>{const m=e.find(c=>c.author===l);return n(m)});let i=[];return e.forEach(l=>{if(!s.some(m=>m===l.author)){const c=n(l).map((u,d)=>u+(i[d]||0));i=[...c.slice(0,c.length-1),0]}}),[...a,...i.length?[i]:[]]},ci=({data:e,dataKey:t,preSorted:s,showNames:o=!0})=>{const[n,a]=ai(e,t,s),i=a.length<e.length,l=li(e,t,n,i),m=[...a,...i?["Others"]:[]];return{names:o?m:m.map((c,u)=>`Spartacus${Array(u).fill(" ").join("")}`),matrix:l}},dt=tt(({title:e,data:t=[],preSorted:s=!1,dataKey:o,classes:n})=>{const a=B(),i=a.palette.colorList,{showNumbers:l}=et(),{showNames:m}=Pe(),{names:c,matrix:u}=ci({data:t,dataKey:o,preSorted:s,showNames:m});return(p=>p.some(h=>h.some(Boolean)))(u)&&r.jsxs("div",{children:[r.jsx(Be,{text:e,className:n.centerHeading}),r.jsx("div",{className:n.chordWrap,children:r.jsx(Zo,{label:"id",data:u,keys:c,margin:{top:0,right:10,bottom:10,left:10},arcBorderColor:{from:"color",modifiers:[["darker",.4]]},ribbonOpacity:.5,ribbonBorderWidth:.5,ribbonBorderColor:{from:"color",modifiers:[["darker",.4]]},innerRadiusRatio:.85,labelRotation:0,padAngle:.06,innerRadiusOffset:.03,labelOffset:-23,labelTextColor:{from:"color",modifiers:[["darker",2]]},colors:i,isInteractive:l,activeArcOpacity:1,inactiveArcOpacity:1,activeRibbonOpacity:.75,inactiveRibbonOpacity:.25,animate:!1,motionConfig:"stiff",theme:a.charts})})]})}),So=tt(({title:e="",data:t=[],classes:s})=>{const o=B(),{showNumbers:n}=et();return t.length&&r.jsxs("div",{className:s.lineChartComponentWrap,children:[r.jsx("div",{className:s.headingWrap,children:r.jsx(Be,{type:"line",text:e})}),r.jsx("div",{className:s.pieWrap,children:r.jsx(en,{data:t,colors:{datum:"data.color"},margin:{top:15,right:80,bottom:0,left:80},animate:!1,innerRadius:.65,padAngle:1,cornerRadius:4,activeOuterRadiusOffset:5,borderWidth:1,startAngle:-90,endAngle:90,enableArcLabels:!1,arcLinkLabelsSkipAngle:4,arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLinkLabelsDiagonalLength:10,arcLinkLabelsStraightLength:15,arcLinkLabelsTextColor:o.palette.text.primary,theme:o.charts,isInteractive:n})})]})}),mi=({pullRequests:e=[],releases:t=[],chunkyData:s=[],usersData:o=[],allRepos:n={},userIds:a=[],usersInfo:i={},classes:l})=>{var v,D;const m=B(),c=m.palette.secondary.main,u=m.palette.primary.main,{showNames:d}=Pe(),p=a.length||15,h=["commentsGiven","approvalsGiven"],g=o.sort(we(h)),y=g.map((w,T)=>{var _;return{...w,author:d?w.author:`${Array(T).fill(" ").join("")}Spartacus`,name:d?((_=i[w.author])==null?void 0:_.name)||w.author:`${Array(T).fill(" ").join("")}Spartacus`}}),f=g.map(w=>{var T;return{...w,name:((T=i[w.author])==null?void 0:T.name)||w.author}}),R=Ro("repo",n),E=yo({pullRequests:e,showNames:d,usersInfo:i}),S=f.filter(w=>w.approvalsGiven>0).length,A=f.filter(w=>w.commentsGiven>0).length;return o.length>0&&r.jsxs(Q,{children:[r.jsxs(pe,{title:"Contributions",expandText:"guidance",children:[r.jsx(C,{children:"Questions worth asking (with team context):"}),r.jsxs(kt,{children:[r.jsx(ce,{children:"Is there a bus factor risk?"}),r.jsx(ce,{children:"Are there any data points that stand out?"}),r.jsx(ce,{children:"How do the given and received metrics look?"}),r.jsx(ce,{children:"How well spread are the collaboration metrics?"}),r.jsx(ce,{children:"Any insights or things you would like to try to impact these metrics?"})]})]}),r.jsxs(Ce,{children:[r.jsxs("div",{className:l.barsWrap,children:[r.jsxs("div",{className:l.barWrap,children:[r.jsx(mt,{data:y,indexBy:"name",title:"Comments",combineTitles:!0,sortBy:"commentsGiven",max:p,bars:[{dataKey:"commentsGiven",color:c,label:"given"},{dataKey:"commentsReceived",color:u,label:"*received"}]}),r.jsx(C,{children:"*Received comments can also come from out of team so can be higher."})]}),r.jsx(mt,{data:y,indexBy:"name",title:"PRs",combineTitles:!0,sortBy:"uniquePRsApproved",max:p,bars:[{dataKey:"uniquePRsApproved",color:c,label:"approved"},{dataKey:"totalPRs",color:u,label:"opened"}]})]}),(A>0||S>0)&&r.jsxs("div",{className:l.groupedCharts,children:[A>0&&r.jsx(dt,{data:f,preSorted:!0,dataKey:"commentsByUser",title:"Comment contributions"}),S>0&&r.jsx(dt,{data:f,preSorted:!0,dataKey:"approvalsByUser",title:"Approval contributions"})]}),r.jsx(C,{children:"These chord charts show how contributions are given and received, the dominant colour indicates more contribution"}),E.length>0&&((D=(v=E==null?void 0:E[0])==null?void 0:v.lines)==null?void 0:D.length)<21&&r.jsx(Y,{title:"PRs by author",markers:t,showLegends:!0,data:E,tableData:s,tableKeys:["author","repo"]}),R.pieData.length>0&&r.jsx(So,{data:R.pieData,title:R.sectionTitle})]})]})},di=()=>({groupedCharts:{width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"0 20px","& p":{flexBasis:"100%",textAlign:"center"}},barsWrap:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%","& > div":{width:"50%","@media (max-width: 750px)":{width:"100%"}}},bars:{width:"100%",maxWidth:"1200px",margin:"0 0 1rem 0","& > div":{width:"100%"}}}),ui=e=>({usersData:e.usersData,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),Wt=M(ui)(b(di)(mi)),pi=e=>{const{setValues:t,getData:s,fetches:o,fetching:n,classes:a}=e,{repo:i,org:l,excludeIds:m=[],userIds:c=[],usersInfo:u={},events:d=[]}=o,p=c.length>1&&"team"||c.length===1&&"user"||!i&&l&&"org"||"repo",h=d.map(({name:j,date:L})=>`${j}=${L}`).join(", "),g=m.join(", "),[y,f]=I.useState({sortDirection:o.sortDirection,amountOfData:o.amountOfData||"all",token:o.token,...h&&{events:h},...g&&{excludeIds:g},...o.org&&{org:o.org},...o.repo&&{repo:o.repo}}),[R,E]=I.useState({}),S=(j,L)=>f({...y,[j]:L}),A=(j={})=>{const L={...y,...j};f(L)},v={inputError:R,setInputError:E,formInfo:y,setValue:S},D=j=>{j.preventDefault();const{isValid:L,validationErrors:q}=co(y);E(q),L&&!n&&t(y),L&&!n&&s()},_=[...{repo:["org","repo"],org:["org"],team:["teamName"],user:["userId","name"]}[p],"enterpriseAPI"];return r.jsx(pe,{className:`${a.formDescription} ${a.fullRow}`,title:"",expandText:"here",intro:"Top up this report's data",children:r.jsxs("div",{className:a.formDescription,children:[r.jsxs("form",{onSubmit:D,children:[r.jsxs("div",{className:a.inputGrid,children:[r.jsxs("div",{className:"inputDesc",children:[_.filter(j=>Nt(o,j)).map(j=>r.jsxs(C,{children:[io[j],": ",r.jsx("b",{children:Nt(o,j)})]},j)),p==="team"&&r.jsx(uo,{usersInfo:u,setParentValues:A})]}),r.jsx(z,{type:"events",className:"inputDesc",...v}),r.jsx(C,{className:"inputDesc",children:"Key events can impact the data e.g. starting or launching a new feature or major version. These events can help give more context while viewing the data. e.g. ProjectA=2013-12-01."}),r.jsx(z,{type:"excludeIds",...v}),r.jsx(z,{type:"token",...v}),r.jsxs(C,{className:"inputDesc",children:["To create a token go to your GitHub ",r.jsx("a",{className:a.link,href:"https://github.com/settings/tokens",children:"tokens"})," page, click on 'generate new token', choose the settings 'repo' (all), 'read:org' and 'user' then click 'Generate token'."]}),r.jsxs(Fe,{value:y.sortDirection,onChange:j=>S("sortDirection",j.target.value),inputProps:{"aria-label":"Starting point"},children:[r.jsx(re,{value:"DESC",children:"Prepend data"}),r.jsx(re,{value:"ASC",children:"Append data"})]}),r.jsx(ro,{setValue:S,amountOfData:y.amountOfData})]}),r.jsx(ao,{})]}),r.jsx(po,{})]})})},hi=e=>({fetches:e.fetches,fetching:e.fetching,error:e.error,pullRequests:e.pullRequests}),gi=e=>({setValues:t=>{const{token:s,amountOfData:o,sortDirection:n,excludeIds:a,events:i,userId:l,usersInfo:m={},name:c}=t;l&&c&&(m[l]={userId:l,name:c}),e(Or(n)),e(zs(s)),e(Qs(a)),e(Js(o)),e(eo(n)),e(Zs(o)),e(Xs(i)),Object.keys(m).length>0&&e(Ys(m))},getData:()=>e(so()),getDownloadInfo:()=>e(oo)}),fi=b(Ee)(pi),yi=M(hi,gi)(fi),Ri=({pullRequests:e=[],itemsDateRange:t=["",""],issues:s=[],usersInfo:o,trim:n,classes:a})=>{const i=B(),[l,m]=t,c=l?Re(new Date(m),new Date(l)):0,u=c/100,[[d,p],h]=I.useState([0,100]),g=Math.floor(u*d),y=Math.ceil(u*p),f=l?Qt(Dt(new Date(l),{days:g}),{representation:"date"}):"",R=m?Qt(At(new Date(m),{days:c-y}),{representation:"date"}):"",E=(w,T,_)=>{Array.isArray(T)&&T.length===2&&h(T)},S=()=>{n(f,R)},A=Object.keys(o).length,v=A>1?`by ${A} contributors`:"",D=s.length>0?`and ${s.length} issues`:"";return e.length>0&&f&&r.jsxs(r.Fragment,{children:[r.jsxs(C,{className:a.title,children:[r.jsxs("b",{children:["Showing ",e.length," PRs ",v," ",D]}),". Drag the points to change the date range of the report."]}),r.jsxs("div",{className:a.dates,children:[r.jsx(C,{children:Pt(new Date(f),"do MMM yy")}),r.jsx(C,{children:Pt(new Date(R),"do MMM yy")})]}),r.jsx(tn,{value:[d,p],onChange:E,onChangeCommitted:S,"aria-labelledby":"date-slider",sx:{"&.MuiSlider-root .MuiSlider-thumb:nth-child(even)":{width:"30px",height:"30px","&:after":{content:'">"'}},"& .MuiSlider-thumb":{width:"30px",height:"30px","&:after":{content:'"<"',color:i.palette.text.primary,fontWeight:"800",display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:"0.06rem"}}}})]})},xi=e=>({pullRequests:e.pullRequests,issues:e.issues,itemsDateRange:e.itemsDateRange,usersInfo:e.fetches.usersInfo}),Si=e=>({trim:(t,s)=>e(Ir(t,s))}),Ei=e=>({title:{width:"100%"},dates:{width:"100%",display:"flex",justifyContent:"space-between","& > p":{margin:0,color:e.palette.primary.main,fontSize:"1.4rem"}}}),vi=M(xi,Si)(b(Ei)(Ri)),Ai=e=>{const{repo:t="",org:s="",teamName:o="",usersInfo:n={},userIds:a=[],colorA:i="",colorB:l=""}=e,{userId:m="",name:c=""}=n[a[0]]||{},u=s||o||c||m,d=!o&&c&&m||t&&s!==t&&t||"",p=d?i:l;return r.jsxs(r.Fragment,{children:[r.jsx("span",{style:{color:p},children:u}),d&&r.jsxs(r.Fragment,{children:["/",r.jsx("span",{style:{color:l},children:d})]})]})},Di=({fetches:e,preFetchedName:t="",pullRequests:s=[],issues:o=[],userIds:n=[],reportDescription:a="",classes:i})=>{const l=B(),m=l.palette.secondary.main,c=l.palette.primary.main,{showNames:u,toggleShowNames:d}=Pe();return(s.length>0||o.length>0)&&r.jsxs(Q,{className:i.root,children:[r.jsx(K,{className:i.heading,level:2,children:r.jsx(Ai,{...e,colorA:m,colorB:c})}),a&&r.jsx(C,{children:a}),n.length>1&&r.jsxs(C,{children:["Team's GitHub IDs: ",n.join(", ")]}),r.jsxs(C,{className:i.switch,children:[r.jsx(sn,{onChange:d,checked:!u,name:"checkedA",inputProps:{"aria-label":"secondary checkbox"}}),"Hide GitHub ids/names, this can help look for trends."]}),r.jsx(vi,{}),t.length>0&&r.jsx(yi,{})]})},Ti=e=>({fetches:e.fetches,preFetchedName:e.preFetchedName,pullRequests:e.pullRequests,issues:e.issues,userIds:e.fetches.userIds,reportDescription:e.reportDescription}),Pi=e=>({root:{display:"block"},heading:e.copy.h1,switch:{marginBottom:"0"}}),yt=M(Ti)(b(Pi)(Di)),wi=({chunkyData:e=[],pullRequests:t=[],releases:s=[],userIds:o=[],usersInfo:n={}})=>{const a=B(),i=a.palette.secondary.main,l=a.palette.primary.main,m=a.palette.secondaryLine,{showNames:c}=Pe(),u=o.length>0,d=u?yo({pullRequests:t,showNames:c,usersInfo:n}):[];return t.length>0&&r.jsxs(Q,{children:[r.jsx(pe,{title:"Pull Request trends",children:s.length>1&&r.jsx("div",{children:r.jsx(C,{children:"Vertical lines are releases: Green is a Major release, solid purple is Minor and dotted purple is Patch or Alpha"})})}),r.jsxs(Ce,{children:[u&&r.jsx(r.Fragment,{children:r.jsx(Y,{title:"PRs by author",markers:s,showLegends:!0,data:d,tableData:e,tableKeys:["author","repo"]})}),r.jsx(Y,{markers:s,data:[{lines:[{label:"PRs over time",color:i,dataKey:"url",groupMath:"count"}],xAxis:"left",data:t}],tableData:e,tableKeys:["author"]}),r.jsx(Y,{markers:s,data:[{lines:[{label:"Comments",color:i,dataKey:"comments"},{label:"Approvals",color:l,dataKey:"approvals"}],xAxis:"left",data:t},{lines:[{label:"PR Size",color:m,dataKey:"prSize"}],xAxis:"right",data:t}],tableData:e,tableKeys:["comments","approvals","prSize","author"]}),r.jsx(Y,{markers:s,data:[{lines:[{label:"Age (days)",color:l,dataKey:"age"}],xAxis:"left",data:t},{lines:[{label:"PR Size",color:m,dataKey:"prSize"}],xAxis:"right",data:t}],tableData:e,tableKeys:["age","prSize","author"]})]})]})},Ci=e=>({releases:e.releases,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),Eo=M(Ci)(wi),bi=({pullRequests:e=[],events:t=[]})=>{const s={},o=e.map((i={},l)=>(s[i.repo]=(s[i.repo]||0)+1,{...i,id:`${l}-${i.repo}-${i.number}`,[`repo-${i.repo}`]:1,commentSentimentTotalScore:(i.commentSentimentScore||0)+(i.commentAuthorSentimentScore||0)})),n=Oe(o),a=Hs({events:t});return r.jsxs(r.Fragment,{children:[r.jsx(yt,{}),r.jsx(Wt,{pullRequests:o,chunkyData:n,releases:a,allRepos:s}),r.jsx(ft,{pullRequests:o,chunkyData:n,releases:a,tableOpenedByDefault:!0}),r.jsx(Eo,{pullRequests:o,chunkyData:n})]})},Ii=e=>({pullRequests:e.pullRequests,events:e.fetches.events}),_i=M(Ii)(bi),Ni=(e=[])=>e.map(t=>({mergedAt:t.mergedAt,...t.isBug?{bug:1}:{issue:1}})),ji=({issues:e=[],releases:t=[],classes:s})=>{const o=B(),n=o.palette.secondary.main,a=o.palette.primary.main,i=Ni(e),l=Oe(e);return i&&i.length>0&&r.jsxs(Q,{children:[r.jsx(pe,{title:"Feature and bug trends"}),r.jsx(Ce,{children:r.jsx(Y,{markers:t,data:[{lines:[{label:"Issues",color:n,filterForKey:!0,dataKey:"issue",groupMath:"count"},{label:"Bugs*",color:a,filterForKey:!0,dataKey:"bug",groupMath:"count"}],xAxis:"left",data:i}],tableKeys:["isBug"],tableData:l})}),r.jsx(C,{className:s.fullP,children:"*Bugs in this graph are issues that have a title or a label that contains the word 'bug'"})]})},Oi=()=>({fullP:{width:"100%",textAlign:"center"}}),ki=e=>({issues:e.issues,releases:e.releases}),Vt=M(ki)(b(Oi)(ji)),Li=({chunkyData:e=[],pullRequests:t=[],releases:s=[],userIds:o=[],classes:n={}})=>{const i=B().palette.colorList,{showNames:l}=Pe(),m=o.map((c,u)=>{const d=l?c:`Spartacus${Array(u).fill(" ").join("")}`;return[{label:`To ${d}`,color:i[u%i.length],filterForKey:!0,dataKey:`${c}-commentsSentimentScore`},{label:`From ${d}`,color:i[u%i.length],filterForKey:!0,dataKey:`${c}-commentAuthorSentimentScore`}]}).flat();return t.length>0&&r.jsx(r.Fragment,{children:r.jsxs(Q,{children:[r.jsx(pe,{title:"Sentiment analysis*",children:r.jsxs("div",{children:[r.jsx(C,{children:"*Adding this is an experiment to see if it can provide useful insights."}),r.jsxs(C,{children:["Uses npm package ",r.jsx("a",{className:n.link,href:"https://github.com/thisandagain/sentiment",children:"sentiment"})," which uses AFINN-165 word list and Emoji ranking to perform sentiment analysis."]})]})}),r.jsxs(Ce,{children:[r.jsx(Y,{markers:s,showLegends:!0,title:"Sentiment in PRs between team and reviewers",data:[{lines:[{label:"To team",color:i[0],dataKey:"commentSentimentScore"},{label:"From team",color:i[2],dataKey:"commentAuthorSentimentScore"}],xAxis:"left",data:t}],tableKeys:["commentSentimentScore","commentAuthorSentimentScore","author"],tableData:e}),o.length>0&&r.jsx(r.Fragment,{children:r.jsx(Y,{showLegends:!0,title:"Sentiment in PRs between authors and reviewers",data:[{lines:m,xAxis:"left",data:t}],tableKeys:["commentSentimentScore","commentAuthorSentimentScore","author"],tableData:e})})]})]})})},Mi=e=>({releases:e.releases,userIds:e.fetches.userIds}),$i=e=>({link:{color:e.palette.link}}),Fi=M(Mi)(b($i)(Li)),Ui=e=>({index:t,data:s})=>{const o=e.find(a=>a.area===t),n=s.map(({id:a,color:i})=>[r.jsx(nn,{color:i},a),a,o[`${a}Original`]]);return r.jsx(Ps,{title:r.jsx("strong",{children:t}),rows:n})},Gi=tt(({title:e="",showTitle:t=!0,data:s=[],keys:o=[],colors:n=[],width:a=410,height:i=300,classes:l})=>{const m=B(),c=m.palette.secondary.main,u=m.palette.primary.main,d=n.length>0?n:[c,u],{showNumbers:p}=et();return xo(s,o)&&r.jsxs("div",{children:[t&&r.jsx(Be,{className:l.centerHeading,items:[{label:e,color:u}]}),r.jsx(on,{width:a,height:i,margin:{top:0,bottom:0,right:100,left:100},dotSize:8,dotBorderColor:m.charts.dotColor,dotBorderWidth:2,colors:d,gridShape:"linear",enableDotLabel:!1,gridLabelOffset:10,gridLevels:3,animate:!1,indexBy:"area",keys:o,data:s,maxValue:100,theme:m.charts,sliceTooltip:Ui(s),isInteractive:p})]})}),Bi=(e,t)=>{const s={age:0,approvalsGiven:0,approvalsReceived:0,codeCommentsGiven:0,codeCommentsReceived:0,commentsGiven:0,commentsReceived:0,generalCommentsGiven:0,generalCommentsReceived:0,prSize:0,totalPRs:0,uniquePRsApproved:0,uniquePRsContributedTo:0},o=["commentsGiven","commentsReceived","uniquePRsApproved","totalPRs"],a=e.filter(p=>o.some(y=>p[y]>1)).sort(we(o)),i=Math.ceil(a.length/100*10),l=i>10?a.slice(0,i):a,m={};l.filter(p=>!t).forEach(p=>{Object.entries(p).filter(([,h])=>!Array.isArray(h)&&/^\d+$/.test(h)&&h>0).forEach(([h,g])=>{const y=m[h]||0;m[h]=+g+y})});const c=l.length,u={...s,user:"Peers",userCount:c};Object.entries(m).forEach(([p,h])=>{u[p]=Math.round(h/c)}),e.find(p=>p.author===t);const d=s;return e.forEach(p=>{Object.entries(p).filter(([,h])=>!Array.isArray(h)&&/^\d+$/.test(h)&&h>0).forEach(([h,g])=>{const y=d[h]||0,f=+g;d[h]=y>f?y:f})}),{averagedData:u,maxValues:d,users:e,user:{}}},Wi=({maxValues:e={},users:t=[]},s)=>{const o=["commentsGiven","commentsReceived","uniquePRsApproved","totalPRs"],n=s?t:t.sort(we(o)).slice(0,6),a=[{area:"Comments received",dataKey:"commentsReceived"},{area:"Comments given",dataKey:"commentsGiven"},{area:"Approved PRs",dataKey:"uniquePRsApproved"},{area:"PR count",dataKey:"totalPRs"},{area:"PR size",dataKey:"prSize"}];return n.map(l=>{const m=a.map(({area:c,dataKey:u})=>{const d=l[u]||0,p=e[u]||0;return{area:c,value:d&&p?d/p*100:0,valueOriginal:d}});return{title:l.author,data:m,keys:["value"]}})},Vi=({usersData:e=[],userIds:t=[],usersInfo:s={},classes:o={}})=>{const n=B(),{togglePvPPage:a,setUserPage:i}=Ve(),l=n.palette.secondary.main,m=n.palette.primary.main,{showNames:c}=Pe(),u=Bi(e),d=Wi(u,t.length>0),p=t.length>0,h=p?"Team members":"Top contributors";return d.length>0&&r.jsxs(Q,{className:o.row,children:[r.jsx(pe,{title:h}),d.map((g,y)=>{var E;const f=g.title,R=((E=s[f])==null?void 0:E.name)||f;return r.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[r.jsx(Gi,{showTitle:!1,height:240,colors:[(y+1)%2===0?l:m],...g}),r.jsx($,{value:c?R:"Spartacus",color:(y+1)%2===0?"secondary":"primary",onClick:S=>{S.preventDefault(),i(f),window&&window.scrollTo(0,0)}})]},y)}),p&&r.jsx($,{className:o.fullW,value:"PvP arena",color:"primary",onClick:g=>{g.preventDefault(),a(),window&&window.scrollTo(0,0)}})]})},Ki=e=>({usersData:e.usersData,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),qi=()=>({fullW:{width:"100%"},row:{display:"flex",flexWrap:"wrap",flexDirection:"row",justifyContent:"center"}}),vo=M(Ki)(b(qi)(Vi)),Hi=({usersData:e=[],classes:t})=>{const{showNames:s}=Pe(),{togglePvPPage:o,setUserPage:n}=Ve();return e.length>0&&r.jsx(r.Fragment,{children:r.jsxs(Q,{className:"justify",children:[r.jsx($,{className:t.fullW,value:"PvP arena",color:"primary",onClick:a=>{a.preventDefault(),o(),window&&window.scrollTo(0,0)}}),r.jsx(K,{level:2,className:t.fullW,children:"User pages"}),r.jsx("div",{className:t.allButons,children:e.map(({author:a,user:i},l)=>r.jsx($,{value:s?a:"Spartacus",color:"secondary",onClick:m=>{m.preventDefault(),n(i),window&&window.scrollTo(0,0)}},`${l}`))})]})})},zi=()=>({allButons:{display:"flex",flexWrap:"wrap",justifyContent:"space-between","& button":{flexGrow:1}},fullW:{width:"100%"}}),Yi=e=>({usersData:e.usersData}),Qi=M(Yi)(b(zi)(Hi)),Xi=({pullRequests:e=[],releases:t=[]})=>{const s=e.map((n,a)=>({...n,id:`${a}-${n.repo}-${n.number}`,commentSentimentTotalScore:(n.commentSentimentScore||0)+(n.commentAuthorSentimentScore||0),[`${n.author}-commentsSentimentScore`]:n.commentSentimentScore,[`${n.author}-commentAuthorSentimentScore`]:n.commentAuthorSentimentScore})),o=Oe(s);return r.jsxs(r.Fragment,{children:[r.jsx(yt,{}),r.jsx(Wt,{pullRequests:s,chunkyData:o}),r.jsx(ft,{pullRequests:s,chunkyData:o,releases:t,tableOpenedByDefault:!0}),r.jsx(Fi,{pullRequests:s,chunkyData:o}),r.jsx(Eo,{pullRequests:s,chunkyData:o}),r.jsx(Vt,{}),r.jsx(vo,{}),r.jsx(Qi,{})]})},Ji=e=>({pullRequests:e.pullRequests,releases:e.releases}),Zi=M(Ji)(Xi),fs=({player:e="",color:t,otherPlayer:s,setPlayerId:o,players:n=[]})=>r.jsx(Fe,{value:e,style:{color:t,fontSize:"2rem"},onChange:a=>o(a.target.value),inputProps:{"aria-label":"Select a user"},children:n.filter(({author:a})=>a!==s).map(({author:a,name:i})=>r.jsx(re,{value:a,children:i},a))}),el=({player1:e,player2:t,setPlayer1Id:s=()=>({}),setPlayer2Id:o=()=>({}),players:n=[],classes:a})=>{const i=B(),l=i.palette.secondary.main,m=i.palette.primary.main,u=[{title:"Total Merged",id:"totalPRs"},{title:"Total approved",id:"uniquePRsApproved"},{title:"Comments given",id:"commentsGiven"},{title:"Comments received",id:"commentsReceived"},{title:"Average positive sentiment",id:"sentimentAveragePositiveScore"},{title:"Average negative sentiment",id:"sentimentAverageNegativeScore"},{title:"Average size",id:"prSize"},{title:"Total additions",id:"prTotalAdditions"},{title:"Total deletions",id:"prTotalDeletions"},{title:"Average days open",id:"age"},{title:"Orgs contributed to",id:"orgCount"},{title:"Repos contributed to",id:"repoCount"}].filter(({id:d})=>Number.isInteger(e[d])&&Number.isInteger(t[d])&&(!["orgCount","repoCount"].includes(d)||["orgCount","repoCount"].includes(d)&&e[d]!==1&&t[d]!==1)).map(d=>{const p=d.id,h=e[p],g=t[p],y=l,f=m,R=Math.ceil(100*h/(h+g)),E=100-R;return{...d,lValue:h,lColor:y,lPercent:R,rValue:g,rColor:f,rPercent:E}});return r.jsxs("div",{className:a.root,children:[r.jsx("div",{className:a.title,children:n.length>0?r.jsxs(r.Fragment,{children:[r.jsx(fs,{player:e.author,color:l,otherPlayer:t.author,setPlayerId:s,players:n}),r.jsx(fs,{player:t.author,color:m,otherPlayer:e.author,setPlayerId:o,players:n})]}):r.jsxs(r.Fragment,{children:[r.jsx(K,{level:3,style:{color:l,margin:0},children:e.name}),r.jsx(K,{level:3,style:{color:m,margin:0},children:t.name})]})}),u.map((d,p)=>r.jsxs("div",{className:a.pvpWrapper,style:{width:"100%"},children:[r.jsx(C,{children:d.title}),r.jsxs("div",{className:a.pvpBarWrapper,children:[r.jsx("div",{className:a.pvpL,style:{width:`${d.lPercent}%`,backgroundColor:`${d.lColor}`},children:r.jsx(C,{children:d.lValue})}),r.jsx("div",{className:a.pvpR,style:{width:`${d.rPercent}%`,backgroundColor:`${d.rColor}`},children:r.jsx(C,{children:d.rValue})})]},d.id)]},`${d.id}${p}`))]})},tl=()=>({root:{width:"100%",flexBasis:"100%",display:"flex",flexDirection:"column",alignItems:"center"},title:{width:"100%",maxWidth:"1200px",flexWrap:"nowrap",display:"flex",justifyContent:"space-between",marginBottom:"1em"},pvpWrapper:{position:"relative",width:"100%",maxWidth:"1200px",marginBottom:"1em","& > p":{zIndex:1,position:"absolute",width:"100%",top:"8px",textAlign:"center",margin:"0"}},pvpBarWrapper:{width:"100%",display:"flex",flexWrap:"nowrap",alignContent:"stretch",justifyContent:"space-between"},pvpL:{position:"relative",textAlign:"left",height:"2.2rem","& p":{zIndex:1,margin:0,position:"absolute",top:"8px",left:"8px"}},pvpR:{position:"relative",textAlign:"right",height:"2.2rem","& p":{zIndex:1,margin:0,position:"absolute",top:"8px",right:"8px"}}}),Ao=b(tl)(el),sl=(e,t)=>{const s={age:0,approvalsGiven:0,approvalsReceived:0,codeCommentsGiven:0,codeCommentsReceived:0,commentsGiven:0,commentsReceived:0,generalCommentsGiven:0,generalCommentsReceived:0,prSize:0,prTotalAdditions:0,prTotalDeletions:0,totalPRs:0,uniquePRsApproved:0,uniquePRsContributedTo:0,sentimentAveragePositiveScore:0,sentimentAverageNegativeScore:0,orgCount:0,repoCount:0},o=["commentsGiven","commentsReceived","approvalsGiven","approvalsReceived"],a=e.filter(h=>{const g=h.author!==t,y=o.some(f=>h[f]>1);return g&&y}).sort(we(o)),i=Math.ceil(a.length/100*10),l=i>10?a.slice(0,i):a,m={};l.filter(h=>h.author!==t).forEach(h=>{Object.entries(h).filter(([,g])=>!Array.isArray(g)&&/^\d+$/.test(g)&&g>0).forEach(([g,y])=>{const f=m[g]||0;m[g]=+y+f})});const c=l.length,u={...s};Object.entries(m).forEach(([h,g])=>{u[h]=Math.round(g/c)});const d={...u,user:"Peers",name:"Peers"},p=e.find(h=>h.author===t)||{approvalsGivenByTeam:{}};return[{...p,user:p.author,name:p.name||p.author},d,c]},ol=(e=[],t=[],s,o)=>{const n=[],a=[],i=new Set,l=o.palette.secondary.main,m=o.palette.primary.main,c=o.palette.colorList;e.forEach(h=>{const{author:g,repo:y}=h;i.add(y),h[`repo-${y}`]=1,g===s?a.push(h):n.push(h)});const u=[];Array.from(i).forEach((h,g)=>{u.push({label:h,color:c[g%c.length],groupMath:"count",filterForKey:!0,dataKey:`repo-${h}`,data:a})});const p=Oe(a);return[{markers:t,showLegends:!0,title:"Sentiments in PR",data:[{lines:[{label:`${s} received`,color:c[2],dataKey:"commentSentimentScore",data:a},{label:`${s} given`,color:c[1],dataKey:"commentAuthorSentimentScore",data:a},{label:"Peer received",color:c[4],dataKey:"commentSentimentScore",data:n},{label:"Peer given",color:c[5],dataKey:"commentAuthorSentimentScore",data:n}],xAxis:"left"}],tableKeys:["commentSentimentScore","commentAuthorSentimentScore"],tableData:p},{markers:t,data:[{lines:[{label:"User PR size",color:l,dataKey:"prSize",data:a},{label:"Peer PR size",color:m,dataKey:"prSize",data:n}],xAxis:"left"}],tableKeys:["prSize"],tableData:p},{markers:t,data:[{lines:[{label:"User PR age",color:l,dataKey:"age",data:a},{label:"Peer PR age",color:m,dataKey:"age",data:n}],xAxis:"left"}],tableKeys:["age"],tableData:p},{dataKeys:["repo","author"],data:p}]},nl=({pullRequests:e=[],releases:t=[],usersData:s=[],classes:o})=>{const n=B(),{userPage:a,clearUserPage:i}=Ve(),l=ol(e,t,a,n),[m,c,u]=sl(s,a),d=m.name||a;return r.jsxs(Q,{children:[r.jsx($,{className:o.fill,value:"Back to main view",color:"secondary",onClick:p=>{p.preventDefault(),i(),window&&window.scrollTo(0,0)}}),r.jsxs(C,{className:o.copy,children:["A collection metrics showing ",d,"'s data and average data from the top ",u," peers"]}),r.jsx(Ao,{player1:m,player2:c}),l.length&&l.map((p,h)=>r.jsx(Y,{...p},`${h}-${a}`)),r.jsx($,{className:o.fill,value:"Back to main view",color:"secondary",onClick:p=>{p.preventDefault(),i(),window&&window.scrollTo(0,0)}})]})},rl=e=>({pullRequests:e.pullRequests,releases:e.releases,usersData:e.usersData}),al=e=>({fill:{width:"100%"},copy:{width:"100%",textAlign:"center"},topButton:{marginLeft:e.mySpacing.y.large}}),il=M(rl)(b(al)(nl)),ll=O("",["location","search"],window),Do=new URLSearchParams(ll),cl=(e=[])=>{var t;return Do.get("player1")||((t=e[0])==null?void 0:t.author)},ml=(e=[])=>{var t;return Do.get("player2")||((t=e[1])==null?void 0:t.author)},dl=({pullRequests:e=[],releases:t=[],usersData:s=[],classes:o})=>{const n=B(),{togglePvPPage:a}=Ve(),i=n.palette.secondary.main,l=n.palette.primary.main,m=n.palette.colorList,[c,u]=I.useState(cl(s)),[d,p]=I.useState(ml(s)),h=s.find(S=>S.author===c),g=s.find(S=>S.author===d),y=[],f=[],R=[];e.forEach(S=>{const A=S.author;A===c?(y.push(S),R.push(S)):A===d&&(f.push(S),R.push(S))});const E=Oe(R);return s.length>0&&r.jsx(r.Fragment,{children:r.jsxs(Q,{children:[r.jsx($,{className:o.fill,value:"Back to main view",color:"secondary",onClick:S=>{S.preventDefault(),a()}}),r.jsx(C,{className:o.copy,children:"This page is just for fun, a bigger or smaller number could be good, bad or not mean much, it depends on context."}),r.jsx(Ao,{player1:h,player2:g,setPlayer1Id:u,setPlayer2Id:p,players:s}),r.jsx(C,{className:o.copy,children:"And the winner is.... Both! Thanks for your great work!"}),r.jsxs(Ce,{children:[r.jsx(Y,{markers:t,showLegends:!0,title:"Sentiments in PR",data:[{lines:[{label:`${h.name} received`,color:m[0],dataKey:"commentSentimentScore",data:y},{label:`${h.name} given`,color:m[2],dataKey:"commentAuthorSentimentScore",data:y},{label:`${g.name} received`,color:m[0],dataKey:"commentSentimentScore",data:f},{label:`${g.name} given`,color:m[2],dataKey:"commentAuthorSentimentScore",data:f}],xAxis:"left"}],tableData:E,tableKeys:["author","commentSentimentScore","commentAuthorSentimentScore"]}),r.jsx(Y,{markers:t,data:[{lines:[{label:`${h.name} PR size`,color:i,dataKey:"prSize",data:y},{label:`${g.name} PR size`,color:l,dataKey:"prSize",data:f}],xAxis:"left"}],tableKeys:["author","prSize"],tableData:E}),r.jsx(Y,{markers:t,data:[{lines:[{label:`${h.name} PR age`,color:i,dataKey:"age",data:y},{label:`${g.name} PR age`,color:l,dataKey:"age",data:f}],xAxis:"left"}],tableKeys:["author","age"],tableData:E})]}),r.jsx($,{className:o.fill,value:"Back to main view",color:"secondary",onClick:S=>{S.preventDefault(),a(),window&&window.scrollTo(0,0)}})]})})},ul=e=>({pullRequests:e.pullRequests,releases:e.releases,usersData:e.usersData}),pl=()=>({fill:{width:"100%",marginRight:0},copy:{width:"100%",textAlign:"center"},topButton:{width:"100%"}}),hl=M(ul)(b(pl)(dl)),gl=({pullRequests:e=[],releases:t=[]})=>{const s=B(),o=s.palette.secondary.main,n=s.palette.primary.main;return e.length>0&&r.jsxs(Q,{children:[r.jsxs(pe,{title:"Team's contribution spread",expandText:"guidance",children:[r.jsx(C,{children:"Questions worth asking (with team context):"}),r.jsxs(kt,{children:[r.jsx(ce,{children:"Is there a healthy percentage spread?"}),r.jsx(ce,{children:"Are the Approval and comments spreads similar?"}),r.jsx(ce,{children:"Any insights or things you would like to try to impact these metrics?"})]})]}),r.jsx(C,{children:"Y axis is the percentage spread of approvals and comments within the active team*, 100% is an EVEN spread across the team, 0% is contribution from only ONE engineer."}),r.jsx(Ce,{children:r.jsx(Y,{title:"Percentage spread within team for ",combineTitles:!0,markers:t,data:[{lines:[{label:"Comments given",color:o,dataKey:"teamOnlyComments",groupMath:"teamDistribution",yMax:100},{label:"Approvals given",color:n,dataKey:"teamOnlyApprovals",groupMath:"teamDistribution",yMax:100}],xAxis:"left",data:e}]})}),r.jsx(C,{children:"*Active team per data point are those who have approved, commented or raised a PR within that time frame."})]})},fl=({pullRequests:e=[],userIds:t=[],events:s=[],usersInfo:o={}})=>{const n=c=>{const u={};return t.forEach(d=>{const p=c==null?void 0:c[d];p&&(u[d]=p)}),u},a={},i=e.map((c,u)=>(a[c.repo]=(a[c.repo]||0)+1,{...c,id:`${u}-${c.repo}-${c.number}`,teamApprovers:n(c.approvers),teamCommenters:n(c.commenters),[`repo-${c.repo}`]:1,commentSentimentTotalScore:(c.commentSentimentScore||0)+(c.commentAuthorSentimentScore||0),[`${c.author}-commentsSentimentScore`]:c.commentSentimentScore,[`${c.author}-commentAuthorSentimentScore`]:c.commentAuthorSentimentScore})),l=Oe(i),m=Hs({events:s,usersInfo:o});return r.jsxs(r.Fragment,{children:[r.jsx(yt,{}),r.jsx(gl,{pullRequests:i,releases:m}),r.jsx(ft,{pullRequests:i,chunkyData:l,releases:m,tableOpenedByDefault:!0}),r.jsx(Wt,{pullRequests:i,chunkyData:l,releases:m,allRepos:a}),r.jsx(Vt,{}),r.jsx(vo,{})]})},yl=e=>({pullRequests:e.pullRequests,userIds:e.fetches.userIds,events:e.fetches.events,usersInfo:e.fetches.usersInfo}),Rl=M(yl)(fl),xl=({pullRequests:e=[],reviewedPullRequests:t=[],userIds:s=[],usersInfo:o={},classes:n={}})=>{const[a]=s,i=B(),{showNames:l}=Pe(),m=i.palette.secondary.main,c=i.palette.primary.main,u={},d={},p={},h=e.map(v=>{const D=v.commenters||{};Object.keys(D).forEach(T=>{const _=D[T]||0;p[T]||(p[T]={}),p[T].commentsReceived=(p[T].commentsReceived||0)+_});const w=v.approvers||{};return Object.keys(w).forEach(T=>{const _=w[T]||0;p[T]||(p[T]={}),p[T].approvalsReceived=(p[T].approvalsReceived||0)+_}),u[v.repo]=(u[v.repo]||0)+1,d[v.org]=(d[v.org]||0)+1,{...v,[`repo-${v.repo}`]:1,commentSentimentTotalScore:(v.commentSentimentScore||0)+(v.commentAuthorSentimentScore||0),[`${v.author}-commentsSentimentScore`]:v.commentSentimentScore,[`${v.author}-commentAuthorSentimentScore`]:v.commentAuthorSentimentScore}}),g={...o};t.map(v=>{var _,j;const D=v.author;g[D]={userId:D};const w=((_=v==null?void 0:v.commenters)==null?void 0:_[a])||0,T=((j=v==null?void 0:v.approvers)==null?void 0:j[a])||0;p[D]||(p[D]={}),p[D].commentsGiven=(p[D].commentsGiven||0)+w,p[D].approvalsGiven=(p[D].approvalsGiven||0)+T});const y=Object.entries(p).map(([v,D],w)=>{var T;return{...D,author:l?v:`${Array(w).fill(" ").join("")}Spartacus`,name:l?((T=o[v])==null?void 0:T.name)||v:`${Array(w).fill(" ").join("")}Spartacus`}}),f=ht(e.concat(t),g,a),R=["commentsGiven","approvalsGiven"],E=f.sort(we(R)),S=Oe(h),A=Ro("repo",u);return r.jsxs(r.Fragment,{children:[r.jsx(yt,{}),r.jsx(Q,{children:r.jsxs(Ce,{children:[r.jsxs("div",{className:n.barsWrap,children:[r.jsx(mt,{data:y,indexBy:"name",title:"Comments",combineTitles:!0,sortBy:"commentsGiven",bars:[{dataKey:"commentsGiven",color:m,label:"given"},{dataKey:"commentsReceived",color:c,label:"received"}]}),r.jsx(mt,{data:y,indexBy:"name",title:"Approvals",combineTitles:!0,sortBy:"approvalsGiven",bars:[{dataKey:"approvalsGiven",color:m,label:"given"},{dataKey:"approvalsReceived",color:c,label:"received"}]})]}),r.jsxs("div",{className:n.groupedCharts,children:[r.jsx(dt,{data:E,preSorted:!0,dataKey:"commentsByUser",title:"Comment contributions"}),r.jsx(dt,{data:E,preSorted:!0,dataKey:"approvalsByUser",title:"Approval contributions"})]}),A.pieData.length>0&&r.jsx(So,{data:A.pieData,title:A.sectionTitle})]})}),r.jsx(ft,{pullRequests:h,chunkyData:S,tableOpenedByDefault:!0}),r.jsx(Vt,{})]})},Sl=()=>({groupedCharts:{width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"0 20px","& p":{flexBasis:"100%",textAlign:"center"}},barsWrap:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%","& > div":{width:"50%","@media (max-width: 750px)":{width:"100%"}}}}),El=e=>({pullRequests:e.pullRequests,reviewedPullRequests:e.reviewedPullRequests,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),vl=M(El)(b(Sl)(xl)),Al=e=>{const{showPvP:t,userPage:s}=Ve(),o=!!(s&&s.length>0);return r.jsx("div",{children:ee([[P(t),P(r.jsx(hl,{}))],[P(o),P(r.jsx(il,{}))],[Xt(Boolean,"teamName"),P(r.jsx(Rl,{}))],[Xt(n=>n.length===1,"userIds"),P(r.jsx(vl,{}))],[({repo:n,org:a})=>n===""&&a&&a.length>0,P(r.jsx(_i,{}))],[U,P(r.jsx(Zi,{}))]])(e)})},Dl=e=>({userIds:e.fetches.userIds,teamName:e.fetches.teamName,repo:e.fetches.repo,org:e.fetches.org}),Tl=M(Dl)(Al),Pl=({classes:e,children:t})=>r.jsx("div",{className:e.wrapper,children:t}),wl=e=>({"@global":{body:{margin:0,backgroundColor:e.palette.background.default}},wrapper:{padding:0,backgroundColor:e.palette.background.default,overflow:"auto"}}),Cl=b(wl)(Pl),bl=({classes:e})=>{const{themeMode:t,toggleThemeMode:s}=Cs();return r.jsxs("div",{className:e.wrapper,children:[r.jsx("a",{className:e.link,href:"https://twitter.com/chris_07734",children:r.jsx(rn,{className:e.icon})}),r.jsx("a",{className:e.link,href:"https://github.com/n07734/community-health",children:r.jsx(an,{className:e.icon})}),r.jsxs("a",{href:"#theme",onClick:o=>{o.preventDefault(),s()},className:t,children:[r.jsx(ln,{className:`${e.icon} sun`}),r.jsx(cn,{className:`${e.icon} moon`})]})]})},Il=e=>({wrapper:{position:"absolute",zIndex:1,top:e.mySpacing.x.small,right:e.mySpacing.x.small,"& > a":{marginLeft:e.mySpacing.x.small},"& a:hover $icon":{color:e.palette.iconHover},"& .dark .moon":{display:"none"},"& .dark:hover .moon":{display:"inline"},"& .dark:hover .sun":{display:"none"},"& .light .sun":{display:"none"},"& .light:hover .sun":{display:"inline"},"& .light:hover .moon":{display:"none"}},icon:{color:e.palette.text.primary}}),_l=b(Il)(bl),Nl=()=>r.jsxs(Cl,{children:[r.jsxs(Q,{className:"bg-none",children:[r.jsx(_l,{}),r.jsx(pe,{title:r.jsx(K,{level:1,children:"Code Health"})}),r.jsx(C,{children:"Coding is a team activity, healthy collaboration produces better code. This tool gives in depth collaboration and contribution metrics for teams to analyze their code health."}),r.jsx(C,{children:"You can create your own reports for individuals, teams, repos and orgs from public or enterprise GitHub."})]}),r.jsxs(r.Fragment,{children:[r.jsx(ua,{}),r.jsx(Tl,{})]})]}),jl=e=>({root:{position:"relative"},modal:{position:"fixed",width:"80%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,backgroundColor:e.palette.background.paper,padding:`${e.mySpacing.x.large} ${e.mySpacing.y.large}`,"& .MuiLinearProgress-dashed":{background:"none",backgroundColor:e.palette.primary.dark,animation:"none"},"& .MuiLinearProgress-root":{height:"14px",marginBottom:e.mySpacing.y.large}},overlay:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:999,backgroundColor:e.palette.primary.dark,animation:"pulse 1s infinite alternate",opacity:.6},"@keyframes pulse":{"100%":{opacity:.9}}}),Ol=ee([[V(1),e=>`${e} day remaining`],[e=>e>1,e=>`${e} days remaining`],[e=>e<0,P("Wrapping up")],[U,P("")]]),kl=({fetches:e,fetching:t=!1,fetchStatus:s={},pullRequests:o=[],formUntilDate:n="",classes:a={}})=>{const{userIds:i=[],sortDirection:l=""}=e,{user:m="",prCount:c=0,latestItemDate:u="",issueCount:d=0,savedReportName:p="",reviewCount:h=0,repoCount:g=0}=s,y=i.length>1,f=(ie,X)=>l==="DESC"?Re(ie,X):Re(X,ie),R=l==="DESC"?0:-1,E=o.length>0?new Date(o.at(R).mergedAt):new Date,S=u?new Date(u):E,A=new Date(n),v=f(E,A),D=f(E,S),w=v-D,T=Ol(w),_=100/(v||10),j=D*_,L=m?i.findIndex(ie=>ie===m):0,q=L>0?i.slice(0,L):[],ve=100/(i.length||10),de=L*ve;return t&&r.jsxs("div",{children:[r.jsx("div",{className:a.overlay}),r.jsxs("div",{className:a.modal,children:[y&&r.jsxs(r.Fragment,{children:[r.jsxs(K,{level:2,children:["Loading ",L+1," of ",i.length," ",i.length===1?"user":"users"]}),r.jsx(Jt,{className:a.dashed,variant:"determinate",value:de,valueBuffer:ve+de})]}),T&&r.jsx(K,{level:2,children:T}),p&&r.jsxs(K,{level:2,children:["Fetching ",p]}),r.jsx(Jt,{className:a.dashed,variant:"determinate",value:j,valueBuffer:_+j}),g>0&&r.jsxs(K,{level:2,children:[g," Repos"]}),!p&&!y&&r.jsxs(r.Fragment,{children:[r.jsxs(K,{level:2,children:[c," Pull Requests"]}),r.jsxs(K,{level:2,children:[d," Issues"]})]}),h>0&&r.jsxs(K,{level:2,children:[h," Reviews"]}),y&&q.length>0&&r.jsxs(C,{children:["Loaded users: ",q.join(", ")]})]})]})},Ll=e=>({fetches:e.fetches,fetching:e.fetching,fetchStatus:e.fetchStatus,pullRequests:e.pullRequests,formUntilDate:e.formUntilDate}),Ml=b(jl)(kl),$l=M(Ll)(Ml),Ne='"Nunito", "Roboto", "Helvetica", "Arial", sans-serif',ze=12,Et={legendOrientation:"horizontal",legendPosition:"top-right",height:10,legendOffsetX:0,legendOffsetY:-4},Fl=(e="light")=>{const t={light:"#CCC",dark:"#666"}[e],s={light:"#077314",dark:"#077314"}[e],o={light:"#8b4ff0",dark:"#6b3dba"}[e],n={light:"#87cac6",dark:"#6b3dba"}[e],a={light:"#232023",dark:"#eee"}[e],i={light:"#fff",dark:"#232023"}[e],l={color:a,marginTop:0,marginBottom:"0.8rem",fontSize:"1rem",fontWeight:"400",fontFamily:Ne};return mn({type:e,components:{MuiSelect:{styleOverrides:{root:{backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"},"&:focus":{backgroundColor:"transparent"},"&.Mui-focused":{backgroundColor:"transparent"},"& .MuiInputBase-input":{"&:focus":{backgroundColor:"transparent"}}}}},MuiPaper:{styleOverrides:{root:{"&.MuiMenu-paper":{backgroundColor:i,backgroundImage:"none"}}}}},palette:{mode:e,colorList:Je,error:{main:"#E02E2E"},destructive:{main:"#BD2D22"},warn:{main:"#DC7E09"},secondary:{contrastText:"#CCC",dark:"#1E6392",light:"#7986Cb",main:"#1F77B4"},primary:{contrastText:"#CCC",dark:"#B10E4F",light:"#D65287",main:"#E82573"},secondaryLine:{light:"#777",dark:"#E2E2E2"}[e],mainCopy:{color:a,fontSize:"1rem",fontWeight:"400",fontFamily:Ne},iconHover:{light:"#D65287",dark:"#E82573"}[e],text:{primary:a},link:{light:"#1F77B4",dark:"#E82573"}[e],background:{default:i,paper:i},paperGradient:`linear-gradient(${t}, rgba(0,0,0,0))`,customGraphGradient:`linear-gradient(0deg, rgba(0,0,0,0) 80%, ${t} 100%)`,tableGraphGradient1:"linear-gradient(0deg, rgba(232,37,115,.12) 16%,rgba(232,37,115,.40) 16%, rgba(232,37,115,0) 90%)",tableGraphGradient2:"linear-gradient(0deg, rgba(232,37,115,.12) 20%,rgba(232,37,115,.40) 16%, rgba(232,37,115,0) 90%)",tableGraphGradient3:"linear-gradient(0deg, rgba(232,37,115,.12) 25%,rgba(232,37,115,.40) 16%, rgba(232,37,115,0) 90%)",shadow:t,switch:a},mySpacing:{x:{tiny:"0.2rem",small:"0.5rem",medium:"0.8rem",large:"1.2rem"},y:{tiny:"0.5rem",small:"0.8rem",medium:"1rem",large:"1.4rem"}},copy:{body:{...l,lineHeight:"1.3rem"},list:{...l,color:a},listItem:{color:a,marginBottom:"0.2rem"},h4:{...l,marginBottom:"0.5rem",fontSize:"1.3rem",fontWeight:"500"},h3:{...l,fontSize:"2rem",fontWeight:"500","@media (max-width: 768px)":{fontSize:"1.5rem"},"@media (max-width: 668px)":{fontSize:"1.3rem"}},h2:{...l,fontSize:"3rem",fontWeight:"200","@media (max-width: 768px)":{fontSize:"2.5rem"},"@media (max-width: 668px)":{fontSize:"2rem"}},h1:{...l,fontSize:"4rem",fontWeight:"300","@media (max-width: 768px)":{fontSize:"3rem"},"@media (max-width: 668px)":{fontSize:"2.5rem"}}},charts:{fontFamily:Ne,fontSize:ze,textColor:a,crosshair:{line:{stroke:a}},axis:{legend:{text:{fill:a}},ticks:{text:{fill:a}}},legends:{hidden:{symbol:{fill:"#eee",opacity:1},text:{fill:"#eee",fontWeight:"400",opacity:1}},text:{fontWeight:"800"}},legendsTextFill:a,dotColor:a,tooltip:{container:{fontFamily:Ne,fontSize:ze,background:i,color:a,boxShadow:`0 1px 2px ${a}`}},grid:{line:{stroke:"#999"}},markers:{primary:{lineStyle:{stroke:s,strokeWidth:1},textStyle:{fontFamily:Ne,fontSize:ze,fill:s},...Et},secondary:{lineStyle:{stroke:o,strokeWidth:1},textStyle:{fontFamily:Ne,fontSize:ze,fill:o},...Et},tertiary:{lineStyle:{stroke:n,strokeWidth:1,strokeDasharray:"2 6"},textStyle:{fontFamily:Ne,fontSize:ze,fill:n},...Et}}}})},Ul=()=>{const{themeMode:e}=Cs(),t=Fl(e);return r.jsx(dn,{theme:t,children:r.jsxs(un,{injectFirst:!0,children:[r.jsx($l,{}),r.jsx(Nl,{})]})})},Rt=e=>(t,s)=>(o=e,n)=>{const a={[x[t]]:()=>n.payload,[x[s]]:()=>e}[n.type];return a?a():o},ye=Rt(""),vt=Rt([]),Gl=Rt({}),at=Rt({hasNextPage:!0}),Bl=Zt({fetches:Zt({token:(e="",t)=>t.type===x.STORE_TOKEN?t.payload:e,org:ye("STORE_ORG","CLEAR_ORG"),repo:ye("STORE_REPO","CLEAR_REPO"),teamName:ye("SET_TEAM_NAME","CLEAR_TEAM_NAME"),untilDate:ye("STORE_UNTIL_DATE","CLEAR_UNTIL_DATE"),amountOfData:(e=1,t)=>t.type===x.STORE_AMOUNT?t.payload:e,sortDirection:(e="DESC",t)=>t.type===x.STORE_SORT?t.payload:e,enterpriseAPI:(e="",t)=>t.type===x.STORE_ENT_URL?t.payload:e,userIds:vt("STORE_USER_IDS","CLEAR_USER_IDS"),usersInfo:Gl("STORE_USERS_INFO","CLEAR_USERS_INFO"),excludeIds:vt("STORE_EX_IDS","CLEAR_EX_IDS"),events:vt("STORE_EVENTS","CLEAR_EVENTS"),prPagination:at("SET_PR_PAGINATION","CLEAR_PR_PAGINATION"),usersReviewsPagination:at("SET_PR_REVIEWED_PAGINATION","CLEAR_PR_REVIEWED_PAGINATION"),releasesPagination:at("SET_RELEASES_PAGINATION","CLEAR_RELEASES_PAGINATION"),issuesPagination:at("SET_ISSUES_PAGINATION","CLEAR_ISSUES_PAGINATION")}),reportDescription:ye("SET_DESC","CLEAR_DESC"),formUntilDate:ye("STORE_FORM_UNTIL_DATE","CLEAR_FORM_UNTIL_DATE"),fetching:(e=!1,t)=>{const{FETCH_START:s,FETCH_END:o}=x,n={[s]:!0,[o]:!1};return[s,o].includes(t.type)?n[t.type]:e},fetchStatus:(e={},t)=>t.type===x.FETCH_STATUS?t.payload:e,error:ye("FETCH_ERROR","CLEAR_FETCH_ERROR"),preFetchedError:ye("PRE_FETCH_ERROR","CLEAR_PRE_FETCH_ERROR"),preFetchedName:ye("PREFETCHED_NAME","CLEAR_PREFETCHED_NAME"),pullRequests:(e=[],t)=>[t.type===x.ADD_PRS&&t.payload,t.type===x.CLEAR_PRS&&[],e].find(Boolean),reviewedPullRequests:(e=[],t)=>[t.type===x.ADD_REVIEWED_PRS&&t.payload,t.type===x.CLEAR_REVIEWED_PRS&&[],e].find(Boolean),itemsDateRange:(e=["",""],t)=>[t.type===x.ADD_ITEMS_DATE_RANGE&&t.payload,t.type===x.CLEAR_ITEMS_DATE_RANGE&&["",""],e].find(Boolean),trimmedItems:(e={},t)=>[t.type===x.ADD_TRIMMED_ITEMS&&t.payload,t.type===x.CLEAR_TRIMMED_ITEMS&&{},e].find(Boolean),filteredPRs:(e=[],t)=>[t.type===x.ADD_FILTERED_PRS&&t.payload,t.type===x.CLEAR_FILTERED_PRS&&[],e].find(Boolean),filteredReviewedPRs:(e=[],t)=>[t.type===x.ADD_REVIEWED_FILTERED_PRS&&t.payload,t.type===x.CLEAR_REVIEWED_FILTERED_PRS&&[],e].find(Boolean),usersData:(e=[],t)=>[t.type===x.ADD_USERS_DATA&&t.payload,t.type===x.CLEAR_USERS_DATA&&[],e].find(Boolean),issues:(e=[],t)=>[t.type===x.ADD_ISSUES&&t.payload,t.type===x.CLEAR_ISSUES&&[],e].find(Boolean),filteredIssues:(e=[],t)=>[t.type===x.ADD_FILTERED_ISSUES&&t.payload,t.type===x.CLEAR_FILTERED_ISSUES&&[],e].find(Boolean),releases:(e=[],t)=>[t.type===x.ADD_RELEASES&&t.payload,t.type===x.CLEAR_RELEASES&&[],e].find(Boolean),filteredReleases:(e=[],t)=>[t.type===x.ADD_FILTERED_RELEASES&&t.payload,t.type===x.CLEAR_FILTERED_RELEASES&&[],e].find(Boolean)}),Wl=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ye,Vl=pn(Bl,Wl(hn(Rn)));gn.createRoot(document.getElementById("root")).render(r.jsx(fn.StrictMode,{children:r.jsx(yn,{store:Vl,children:r.jsx(xn,{children:r.jsx(Sn,{children:r.jsx(En,{children:r.jsx(vn,{children:r.jsx(Ul,{})})})})})})}));
