import{r as w,j as o,R as yn,C as Rn,t as En,c as Sn,a as Ut,S as vn,T as js,I as wn,b as Ds,d as Ns,P as bn,e as Ps,V as An,L as Cs,f as Is,g as Tn,h as jn,i as _s,k as Dn,G as Nn,l as Pn,m as ks,n as Os,o as Cn,p as Ls,u as In,q as ts,s as Nt,v as _n,w as kn,x as On,y as pe,z as ss,A as it,B as dt,D as os,E as Ln,F as Mn,H as $n,J as Fn,K as Un,M as Ms,N as M,O as $s,Q as Gn,U as Pt,W as Vn,_ as Bn,X as Fs,Y as qn,Z as Kn,$ as ae,a0 as ne,a1 as T,a2 as G,a3 as Ct,a4 as zn,a5 as I,a6 as pt,a7 as Ve,a8 as Gt,a9 as gt,aa as ft,ab as Us,ac as Gs,ad as Vs,ae as Hn,af as tt,ag as Be,ah as se,ai as re,aj as xt,ak as Xe,al as je,am as rt,an as ye,ao as at,ap as Bs,aq as It,ar as _t,as as qs,at as Wn,au as Yn,av as Ks,aw as zs,ax as Hs,ay as Qn,az as Xn,aA as Jn,aB as Zn,aC as ns,aD as Oe,aE as er,aF as Ws,aG as Ys,aH as tr,aI as sr,aJ as rs,aK as as,aL as or,aM as nr,aN as ls,aO as rr,aP as Qs,aQ as ar,aR as cs,aS as lr,aT as cr,aU as ir,aV as dr,aW as mr,aX as ur}from"./vendor-4es1GvI7.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();const Xs=w.createContext({}),hr=({children:e})=>{const[t,s]=w.useState(!0),r={showNumbers:t,toggleShowNumbers:()=>s(!t)};return o.jsx(Xs.Provider,{value:r,children:e})},st=()=>w.useContext(Xs),Js=w.createContext({}),pr=({children:e})=>{const[t,s]=w.useState(!0),r={showNames:t,toggleShowNames:()=>s(!t)};return o.jsx(Js.Provider,{value:r,children:e})},Re=()=>w.useContext(Js),Zs=w.createContext({}),gr=({children:e})=>{const[t,s]=w.useState(!1),[n,r]=w.useState(""),d={showPvP:t,togglePvPPage:()=>{s(!t),r("")},userPage:n,setUserPage:(i="")=>{s(!1),r(i)},clearUserPage:()=>{s(!1),r("")}};return o.jsx(Zs.Provider,{value:d,children:e})},qe=()=>w.useContext(Zs),fr={theme:"dark",toggleTheme:()=>null},eo=w.createContext(fr),xr=({children:e,defaultTheme:t="dark",storageKey:s="vite-ui-theme",...n})=>{const[r,a]=w.useState(()=>localStorage.getItem(s)||t);w.useEffect(()=>{const c=window.document.documentElement;c.classList.remove("light","dark"),c.classList.add(r)},[r]);const l={theme:r,toggleTheme:()=>{const c=r==="dark"?"light":"dark";localStorage.setItem(s,c),a(c)}};return o.jsx(eo.Provider,{...n,value:l,children:e})},q=()=>{const e=w.useContext(eo);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},yr=yn,Rr=Rn,is=({setIsOpen:e,isOpen:t,expandText:s,qaId:n,className:r})=>o.jsx("a",{className:`text-base text-primary ${r}`,href:"#desc",...n&&{"data-qa-id":n},onClick:a=>{a.preventDefault(),e(!t)},children:t?"hide":s}),Er=({hLevel:e,children:t})=>{const s=`h${e}`;return o.jsx(s,{children:t})},ie=({title:e,intro:t,children:s,hLevel:n=3,expandText:r="info",className:a="",expandQaId:l})=>{const[c,d]=w.useState(!1);return o.jsxs("div",{className:`w-full flex flex-grow flex-wrap ${a} ${t?"[&>*]:basis-full":""}`,children:[e&&typeof e=="string"?o.jsxs(Er,{hLevel:n,children:[e,s&&o.jsx(is,{isOpen:c,setIsOpen:d,expandText:r,qaId:l,className:"ml-2"})]}):e,o.jsxs("p",{children:[t," ",t&&s&&o.jsx(is,{isOpen:c,setIsOpen:d,expandText:r,qaId:l})]}),o.jsx(yr,{open:c,onOpenChange:d,className:"wrapper basis-full",children:o.jsx(Rr,{children:s})})]})},Y=({className:e="",children:t})=>o.jsx("div",{className:`paper ${e}`,children:t});function D(...e){return En(Sn(e))}const Sr=Ut("uppercase inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),O=w.forwardRef(({className:e,variant:t,size:s,asChild:n=!1,...r},a)=>{const l=n?vn:"button";return o.jsx(l,{className:D(Sr({variant:t,size:s,className:e})),ref:a,...r})});O.displayName="Button";const Ee=({children:e})=>o.jsx("div",{className:"w-full relative flex flex-col flex-wrap gap-0 items-center 3xl:flex-row 3xl:gap-0 3xl:gap-x-5 3xl:justify-center",children:e}),He='"Nunito", "Roboto", "Helvetica", "Arial", sans-serif',We=12,At={legendOrientation:"horizontal",legendPosition:"top-right",height:10,legendOffsetX:0,legendOffsetY:-4},ot=(e="dark")=>{const t={light:"#232023",dark:"#eee"}[e],s={light:"#fff",dark:"#232023"}[e],n={light:"#077314",dark:"#077314"}[e],r={light:"#8b4ff0",dark:"#6b3dba"}[e],a={light:"#87cac6",dark:"#6b3dba"}[e];return{fontFamily:He,fontSize:We,textColor:t,crosshair:{line:{stroke:t}},axis:{legend:{text:{fill:t}},ticks:{text:{fill:t}}},legends:{hidden:{symbol:{fill:"#eee",opacity:1},text:{fill:"#eee",fontWeight:"400",opacity:1}},text:{fontWeight:"800"}},legendsTextFill:t,dotColor:t,tooltip:{container:{fontFamily:He,fontSize:We,background:s,color:t,boxShadow:`0 1px 2px ${t}`}},grid:{line:{stroke:"#999"}},markers:{primary:{lineStyle:{stroke:n,strokeWidth:1},textStyle:{fontFamily:He,fontSize:We,fill:n},...At},secondary:{lineStyle:{stroke:r,strokeWidth:1},textStyle:{fontFamily:He,fontSize:We,fill:r},...At},tertiary:{lineStyle:{stroke:a,strokeWidth:1,strokeDasharray:"2 6"},textStyle:{fontFamily:He,fontSize:We,fill:a},...At}}}},Ue=({className:e="",items:t=[],text:s="",type:n})=>{const r=m=>{const u=t.length-1,p={zero:"",max:" and ",more:", "},h=[m===0&&"zero",m===u&&"max",m>0&&"more"].find(Boolean);return p[h]},a=({color:m,label:u})=>o.jsx("span",{style:{color:m,borderBottomColor:m},className:"saved-line",children:u}),l=({color:m,label:u})=>o.jsx("span",{style:{color:m},children:u}),c={average:"Average",trimmedAverage:"Trimmed Average",sum:"Total",count:"Total",teamDistribution:"",median:"",percentWith:"",growth:"",averagePerDev:""},d=[...new Set(t.filter(m=>"groupMath"in m).map(m=>"groupMath"in m&&m.groupMath))],i=(t.length>0&&n==="line"&&d.length<2?d[0]||"average":"")||"";return o.jsxs("h4",{className:e,children:[`${s} `,i&&`${c[i]} `,t.map((m,u)=>o.jsxs(w.Fragment,{children:[r(u),n==="line"?o.jsx(a,{...m}):o.jsx(l,{...m})]},u))]})},Le=Dn,Me=Nn,$e=Pn,De=w.forwardRef(({className:e,children:t,...s},n)=>o.jsxs(js,{ref:n,className:D("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,o.jsx(wn,{asChild:!0,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 opacity-50","aria-hidden":"true",children:o.jsx("path",{d:"m6 9 6 6 6-6"})})})]}));De.displayName=js.displayName;const to=w.forwardRef(({className:e,...t},s)=>o.jsx(Ds,{ref:s,className:D("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4","aria-hidden":"true",children:o.jsx("path",{d:"m18 15-6-6-6 6"})})}));to.displayName=Ds.displayName;const so=w.forwardRef(({className:e,...t},s)=>o.jsx(Ns,{ref:s,className:D("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 opacity-50","aria-hidden":"true",children:o.jsx("path",{d:"m6 9 6 6 6-6"})})}));so.displayName=Ns.displayName;const Ne=w.forwardRef(({className:e,children:t,position:s="popper",...n},r)=>o.jsx(bn,{children:o.jsxs(Ps,{ref:r,className:D("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...n,children:[o.jsx(to,{}),o.jsx(An,{className:D("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(so,{})]})}));Ne.displayName=Ps.displayName;const vr=w.forwardRef(({className:e,...t},s)=>o.jsx(Cs,{ref:s,className:D("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));vr.displayName=Cs.displayName;const J=w.forwardRef(({className:e,children:t,...s},n)=>o.jsxs(Is,{ref:n,className:D("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Tn,{children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4","aria-hidden":"true",children:o.jsx("path",{d:"M20 6 9 17l-5-5"})})})}),o.jsx(jn,{children:t})]}));J.displayName=Is.displayName;const wr=w.forwardRef(({className:e,...t},s)=>o.jsx(_s,{ref:s,className:D("-mx-1 my-1 h-px bg-muted",e),...t}));wr.displayName=_s.displayName;const oo=w.forwardRef(({className:e,...t},s)=>o.jsx(ks,{className:D("grid gap-2",e),...t,ref:s}));oo.displayName=ks.displayName;const kt=w.forwardRef(({className:e,...t},s)=>o.jsx(Os,{ref:s,className:D("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:o.jsx(Cn,{className:"flex items-center justify-center",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-2.5 w-2.5 fill-current text-current",children:o.jsx("circle",{cx:"12",cy:"12",r:"10"})})})}));kt.displayName=Os.displayName;const br=Ut("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),et=w.forwardRef(({className:e,...t},s)=>o.jsx(Ls,{ref:s,className:D(br(),e),...t}));et.displayName=Ls.displayName;const _=["#E82573","#8b4ff0","#1F77B4","#4ECC7A","#DBD523","#EB9830","#D14B41"],L={dark:{primary:"#E82573",secondary:"#1F77B4",tertiary:"#E2E2E2"},light:{primary:"#E82573",secondary:"#1F77B4",tertiary:"#777"}},oe=["average","trimmedAverage","sum","median"],Vt=[{label:"Comments",dataKey:"comments",groupMaths:[...oe,"percentWith","teamDistribution"]},{label:"Code comments",dataKey:"codeComments",groupMaths:[...oe,"percentWith"]},{label:"Review comments",dataKey:"generalComments",groupMaths:[...oe,"percentWith"]},{label:"Approvals",dataKey:"approvals",groupMaths:[...oe,"percentWith","teamDistribution"]},{label:"Additions",dataKey:"additions",groupMaths:oe},{label:"Deletions",dataKey:"deletions",groupMaths:oe},{label:"PR size (additions + deletions)",dataKey:"prSize",groupMaths:oe},{label:"Codebase change (additions - deletions)",dataKey:"growth",groupMaths:["growth"]},{label:"PR count",dataKey:"author",groupMaths:["count","averagePerDev"]},{label:"PR Age(days)",dataKey:"age",groupMaths:oe},{label:"Sentiment",dataKey:"commentSentimentTotalScore",groupMaths:oe},{label:"Sentiment to team",dataKey:"commentSentimentScore",groupMaths:oe},{label:"Sentiment from team",dataKey:"commentAuthorSentimentScore",groupMaths:oe},{label:"Bug count",dataKey:"isBug",groupMaths:["count"]},{label:"Feature count",dataKey:"isFeature",groupMaths:["count"]}],Ar={average:"Average",trimmedAverage:"*Trimmed Average",sum:"Total",count:"Total",median:"Median",teamDistribution:"Team's % spread of",percentWith:"% of PRs with",growth:"",averagePerDev:"Average per Dev"},ds=e=>({color:t,label:s="",dataKey:n,groupMath:r="average"},a)=>o.jsxs("div",{style:{color:t},children:[o.jsx("p",{className:"saved-line text-xl",children:s}),o.jsx("svg",{className:"w-[22px] h-[22px] fill-current inline-block",focusable:"false","aria-hidden":"true",viewBox:"0 0 32 32","data-qa-id":"RemoveCircleIcon",onClick:l=>{l.preventDefault(),e(n,r)},children:o.jsx("path",{d:"M15.5 3.5c-7.18 0-13 5.82-13 13s5.82 13 13 13c7.18 0 13-5.82 13-13s-5.82-13-13-13zM22 16.875c0 0.553-0.448 1-1 1h-11c-0.553 0-1-0.447-1-1v-1c0-0.552 0.447-1 1-1h11c0.552 0 1 0.448 1 1v1z"})})]},`${a}`),no=e=>[...e.left||[],...e.right||[]],Ot=e=>{const t=no(e),s=[];return Vt.forEach(({label:n="",dataKey:r,groupMaths:a=[]})=>{const l=t.filter(d=>(d==null?void 0:d.dataKey)===r),c=a.filter(d=>l.every(i=>(i==null?void 0:i.groupMath)!==d));c.length>0&&s.push({label:n,dataKey:r,groupMaths:c})}),s},Tr=e=>{const s=no(e).map(r=>r==null?void 0:r.dataKey);return Vt.find(({dataKey:r})=>!s.includes(r))},jr=(e,t)=>{const s=Ot(t),n=e.dataKey,r=s.findIndex(a=>a.dataKey===n);return s[r+1]||s[0]||Vt[0]},ms={average:()=>"Average",trimmedAverage:()=>"Trimmed Average",sum:()=>"Total",median:()=>"Median",growth:()=>"Growth",percentWith:({label:e=""}={})=>`% of PRs with ${e}`,teamDistribution:({label:e=""}={})=>`Team's % spread of ${e}`,count:()=>"Total",averagePerDev:({label:e=""}={})=>`Average ${e} per DEV`},ro=({graphInfo:e,setGraph:t=()=>{},graphs:s=[]})=>{var p;const n=Tr(e),[r,a]=w.useState({label:(n==null?void 0:n.label)||"Comments",dataKey:(n==null?void 0:n.dataKey)||"comments",color:s.length>1?_[0]:_[1],lineSide:"left",groupMath:(p=n==null?void 0:n.groupMaths)==null?void 0:p[0]}),l=(h={})=>{a({...r,...h})},c=h=>{h.preventDefault();const{lineSide:g,label:f,groupMath:y}=r,x=e[g]||[];x.push({...r,label:`${Ar[y]} ${f}`,groupMath:y,.../teamDistribution|percentWith/.test(y)&&{yMax:100}});const S={...e,[g]:x},v=s.map(A=>S.graphId===A.graphId?S:A);t(v);const E=jr(r,S),b=_.findIndex(A=>A===r.color);a({label:E.label,dataKey:E.dataKey,color:_[(b+1)%_.length],lineSide:g,groupMath:E==null?void 0:E.groupMaths[0]})},d=h=>(g,f)=>{const x=(e[h]||[]).filter(b=>!(b.dataKey===g&&b.groupMath===f)),S={...e,[h]:x},v=s.map(b=>S.graphId===b.graphId?S:b);t(v);const[E]=Ot(S);a({label:E.label,dataKey:E.dataKey,color:_[0],lineSide:"left",groupMath:E.groupMaths[0]})},i=Ot(e),m=i.find(h=>h.dataKey===r.dataKey),u=((m==null?void 0:m.groupMaths)||[]).filter(h=>!/growth/.test(h));return o.jsxs("div",{className:"w-full max-w-mw",children:[i.length>0&&o.jsxs("form",{className:"flex flex-wrap rounded-2xl justify-center paper pt-2 gap-4 mb-3",onSubmit:c,children:[o.jsxs(Le,{onValueChange:h=>{const g=i.find(f=>f.dataKey===h);l({dataKey:h,groupMath:g.groupMaths[0],label:g.label})},value:m==null?void 0:m.dataKey,children:[o.jsx(De,{className:"w-auto",children:o.jsx($e,{children:m==null?void 0:m.label})}),o.jsx(Ne,{children:o.jsx(Me,{children:i.map(({label:h,dataKey:g})=>o.jsx(J,{value:g,children:h},`${m==null?void 0:m.dataKey}${g}${h}`))})})]}),u.length>0&&o.jsxs(Le,{onValueChange:h=>h&&l({groupMath:h}),value:r.groupMath,children:[o.jsx(De,{className:"w-auto",children:o.jsx($e,{children:ms[r.groupMath](r)})}),o.jsx(Ne,{children:o.jsx(Me,{children:u.map(h=>o.jsx(J,{value:h,children:ms[h](r)},`${r.dataKey}${h}`))})})]}),o.jsx(oo,{defaultValue:r.lineSide,onValueChange:h=>h&&l({lineSide:h}),children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(kt,{value:"left",id:"r1"}),o.jsx(et,{htmlFor:"r1",children:"Axis: Left"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(kt,{value:"right",id:"r2"}),o.jsx(et,{htmlFor:"r2",children:"Right"})]})]})}),o.jsxs(Le,{onValueChange:h=>h&&l({color:h}),value:r.color,children:[o.jsx(De,{className:"w-auto",children:o.jsx($e,{placeholder:o.jsx("div",{style:{backgroundColor:r.color,width:"70px",height:"10px"}})})}),o.jsx(Ne,{children:o.jsx(Me,{children:_.map(h=>o.jsx(J,{value:h,children:o.jsx("div",{style:{backgroundColor:h,width:"70px",height:"10px"}})},h))})})]}),o.jsx(O,{color:"primary",type:"submit",children:"Add to graph"})]}),o.jsxs("div",{className:"custom-lines",children:[o.jsx("div",{children:(e.left||[]).map(ds(d("left")))}),o.jsx("div",{children:(e.right||[]).map(ds(d("right")))})]})]})},ao=w.forwardRef(({className:e,...t},s)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:s,className:D("w-full caption-bottom text-sm",e),...t})}));ao.displayName="Table";const lo=w.forwardRef(({className:e,...t},s)=>o.jsx("thead",{ref:s,className:D("[&_tr]:border-b",e),...t}));lo.displayName="TableHeader";const co=w.forwardRef(({className:e,...t},s)=>o.jsx("tbody",{ref:s,className:D("[&_tr:last-child]:border-0",e),...t}));co.displayName="TableBody";const Dr=w.forwardRef(({className:e,...t},s)=>o.jsx("tfoot",{ref:s,className:D("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Dr.displayName="TableFooter";const ct=w.forwardRef(({className:e,...t},s)=>o.jsx("tr",{ref:s,className:D("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ct.displayName="TableRow";const io=w.forwardRef(({className:e,...t},s)=>o.jsx("th",{ref:s,className:D("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));io.displayName="TableHead";const Lt=w.forwardRef(({className:e,...t},s)=>o.jsx("td",{ref:s,className:D("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Lt.displayName="TableCell";const Nr=w.forwardRef(({className:e,...t},s)=>o.jsx("caption",{ref:s,className:D("mt-4 text-sm text-muted-foreground",e),...t}));Nr.displayName="TableCaption";const Pr=({sort:e})=>({asc:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 h-4 w-4",children:[o.jsx("path",{d:"m5 12 7-7 7 7"}),o.jsx("path",{d:"M12 19V5"})]}),desc:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 h-4 w-4",children:[o.jsx("path",{d:"M12 5v14"}),o.jsx("path",{d:"m19 12-7 7-7-7"})]}),none:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 h-4 w-4",children:[o.jsx("path",{d:"m21 16-4 4-4-4"}),o.jsx("path",{d:"M17 20V4"}),o.jsx("path",{d:"m3 8 4-4 4 4"}),o.jsx("path",{d:"M7 4v16"})]})})[e],Ye=e=>({column:t})=>{const s=t.getIsSorted()||"none";return o.jsxs(O,{variant:"link",className:"p-0",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:[e,o.jsx(Pr,{sort:s})]})},Cr=[{accessorKey:"age",header:Ye("PR Age (days)")},{accessorKey:"prSize",header:Ye("PR Size")},{accessorKey:"author",header:Ye("Author")},{accessorKey:"mergedAt",header:Ye("Date"),cell:({row:e})=>{const t=e.getValue("mergedAt");return Nt(new Date(t),"do MMM yy")}},{accessorKey:"url",header:Ye("Link"),cell:({row:e})=>{const t=e.getValue("url"),s=t.split("/").at(-1);return o.jsx("a",{className:"text-primary",href:t,children:s})}}],Ir=({dataKeys:e,data:t,addClass:s=""})=>{var m;const[n,r]=w.useState([]),[a,l]=w.useState({pageIndex:0,pageSize:4}),c=[...e,"mergedAt","url"],d=Cr.filter(u=>c.includes(u.accessorKey)),i=In({data:t,columns:d,getCoreRowModel:_n(),getPaginationRowModel:kn(),onSortingChange:r,getSortedRowModel:On(),onPaginationChange:l,state:{sorting:n,pagination:a}});return o.jsxs("div",{className:`rounded-md border-2 border-primary mx-50 ${s}`,children:[o.jsxs(ao,{children:[o.jsx(lo,{children:i.getHeaderGroups().map(u=>o.jsx(ct,{children:u.headers.map(p=>o.jsx(io,{children:p.isPlaceholder?null:ts(p.column.columnDef.header,p.getContext())},p.id))},u.id))}),o.jsx(co,{children:(m=i.getRowModel().rows)!=null&&m.length?i.getRowModel().rows.map(u=>o.jsx(ct,{"data-state":u.getIsSelected()&&"selected",children:u.getVisibleCells().map(p=>o.jsx(Lt,{children:ts(p.column.columnDef.cell,p.getContext())},p.id))},u.id)):o.jsx(ct,{children:o.jsx(Lt,{colSpan:d.length,className:"h-24 text-center",children:"No results."})})})]}),o.jsxs("div",{className:"flex items-center justify-end space-x-2 p-4",children:[o.jsxs("p",{children:[a.pageIndex+1," of ",i.getPageCount()]}),o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>i.previousPage(),disabled:!i.getCanPreviousPage(),children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>i.nextPage(),disabled:!i.getCanNextPage(),children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:o.jsx("path",{d:"m9 18 6-6-6-6"})})})]})]})},mo=()=>o.jsx("svg",{className:"w-[22px] h-[22px] fill-background inline-block",focusable:"false","aria-hidden":"true",viewBox:"0 0 32 32","data-qa-id":"RemoveCircleIcon",children:o.jsx("path",{d:"M15.5 3.5c-7.18 0-13 5.82-13 13s5.82 13 13 13c7.18 0 13-5.82 13-13s-5.82-13-13-13zM22 16.875c0 0.553-0.448 1-1 1h-11c-0.553 0-1-0.447-1-1v-1c0-0.552 0.447-1 1-1h11c0.552 0 1 0.448 1 1v1z"})}),_r=()=>o.jsx("svg",{className:"w-[22px] h-[22px] fill-current inline-block",focusable:"false","aria-hidden":"true",viewBox:"0 0 32 32","data-qa-id":"RemoveCircleIcon",children:o.jsx("path",{d:"M15.5 29.5c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM21.938 15.938c0-0.552-0.448-1-1-1h-4v-4c0-0.552-0.447-1-1-1h-1c-0.553 0-1 0.448-1 1v4h-4c-0.553 0-1 0.448-1 1v1c0 0.553 0.447 1 1 1h4v4c0 0.553 0.447 1 1 1h1c0.553 0 1-0.447 1-1v-4h4c0.552 0 1-0.447 1-1v-1z"})}),kr=({showTable:e=!1})=>e?o.jsx(_r,{}):o.jsx(mo,{}),Or=({dataKeys:e,data:t,tableOpenedByDefault:s=!1})=>{var h;const[n,r]=w.useState(t.length-1),[a,l]=w.useState(s),c=t.flat(),i=c.length>30?t:[c],m=n===0?"rounded-tl-none":"",u=n===t.length-1?"rounded-tr-none":"",p=m||u||"";return o.jsxs("div",{className:"mb-4",children:[i.length>0&&o.jsx("div",{className:"px-50 flex flex-row justify-stretch gap-x-1",children:i.map((g,f)=>o.jsx(O,{className:`rounded-lg relative w-full px-0 py-1 h-full ${n===f&&a?"slice rounded-t-lg rounded-b-none border-b-4 border-primary hover:bg-primary":"mb-1 bg-secondary hover:bg-secondary"}`,onClick:()=>{n===f&&l(!a),n!==f&&!a&&l(!0),r(f)},children:n===f?o.jsx(kr,{showTable:a}):o.jsx(mo,{})},f))}),((h=i[n])==null?void 0:h.length)>0&&a&&o.jsx(Ir,{data:i[n],dataKeys:e,addClass:p})]})},Lr=(e,t)=>{const s=e&&ss(new Date(e))+1,n=t&&ss(new Date(t))+1;return!!(s&&n&&s!==n)},Mr=(e,t)=>{const s=e&&it(new Date(e)),n=t&&it(new Date(t));return!!(s&&n&&s!==n)},us=e=>(t,s)=>{const n=t&&it(new Date(t)),r=s&&it(new Date(s));return!!(n&&r&&n%e>0&&r%e===0)},$r=(e,t)=>{const s=e&&dt(new Date(e))+1,n=t&&dt(new Date(t))+1;return!!(s&&n&&s!==n)},Fr=e=>(t,s)=>{const n=t&&dt(new Date(t))+1,r=s&&dt(new Date(s))+1;return!!(n&&r&&n%e>0&&r%e===0)},Ur=(e,t)=>{const s=e&&os(new Date(e)),n=t&&os(new Date(t));return!!(s&&n&&s!==n)},Gr={"1day":Lr,"1week":Mr,"2week":us(2),"3week":us(3),"1month":$r,"1quarter":Fr(3),"1year":Ur},Vr=(e,t,s=[])=>{const n=[];return s.forEach(r=>{const l=(n.at(-1)||[]).at(-1)||{};!l[e]||Gr[t](l[e],r[e])?n.push([r]):n.at(-1).push(r)}),n},Br=(e=[])=>{const{mergedAt:t}=e.at(0),{mergedAt:s}=e.at(-1),n=pe(new Date(s),new Date(t)),r=[{batchType:"1year",maxPoints:Math.ceil(n/365)},{batchType:"1quarter",maxPoints:Math.ceil(n/89)},{batchType:"1month",maxPoints:Math.ceil(n/30)},{batchType:"2week",maxPoints:Math.ceil(n/14)},{batchType:"1week",maxPoints:Math.ceil(n/7)},{batchType:"1day",maxPoints:n}],{batchType:a}=r.reduce((l,c)=>!l.maxPoints||Math.abs(c.maxPoints-15)<Math.abs(l.maxPoints-15)?c:l,{});return Vr("mergedAt",a,e)},uo=(e=[])=>e.length<1?[]:Br(e),Mt=e=>(t=[])=>t.reduce((s,n)=>(n[e]||0)+s,0),qr=e=>t=>e.reduce((s,n)=>s+(t&&t[n]||0),0),Se=(e=[])=>(t,s)=>{const n=qr(e),r=n(t);return n(s)-r},Kr=e=>(t,s)=>e==="DESC"?new Date(s).getTime()-new Date(t).getTime():new Date(t).getTime()-new Date(s).getTime(),ho=e=>{const t=[];return e.forEach(({data:s})=>{const n=s.map(r=>r.y);t.push(...n)}),t.sort((s,n)=>s-n)},hs=e=>{const t=ho(e),s=Math.round(t.length*.95),n=t[s]||0,r=t.at(-1)||0,a=n&&Math.round(n/r*100)||0;return n&&a<30?n:r},ps=e=>{const t=ho(e),s=t.length>0?Ln(Math.min,t):0;return s>0?0:s},zr=e=>{const t=new Date(e),s=t.getMonth()+1,n=t.getDate();return`${t.getFullYear()}-${s<10?`0${s}`:s}-${n<10?`0${n}`:n}`},Hr=({filteredBatch:e=[]})=>{const t={};return e.forEach(s=>"prSize"in s&&(t[s.author]=1)),Math.round(e.length/Object.keys(t).length)},Wr=({filteredBatch:e=[],dataKey:t})=>{const s=t,n=e.sort(Se([s])),r=n.length,a=r>4?n.slice(Math.ceil(r*.05),Math.floor(r*.95)):n,l=a.reduce((c,d)=>c+(s&&d[s]||0),0)/a.length;return Math.round(l)},Yr=({filteredBatch:e=[],dataKey:t="comments"})=>{const s=new Set([]),n={};e.forEach(g=>{if(!("prSize"in g))return;const{teamApprovers:f={},teamCommenters:y={}}=g,x=/approvals/i.test(t)?f:y;Object.entries(x).forEach(([v,E])=>{n[v]=(n[v]||0)+E});const S=[...Object.keys(f)||[],...Object.keys(y)||[]];S.length>0&&S.map(v=>s.add(v))});const r={};s.forEach(g=>r[g]=0);const a={...r,...n},l=Object.values(a),c=l.length,d=l.reduce((g,f)=>g+f,0),i=d/c,m=i*(c-1)+(d-i),u=l.reduce((g,f)=>g+Math.abs(f-i),0),p=m-u,h=Math.round(100/m*p);return isNaN(h)?0:h},Qr=({filteredBatch:e=[],dataKey:t="comments"})=>{const s=e.length,r=e.filter(l=>!l[t]).length;return r>0?Math.round((s-r)/s*100):0},Xr=({filteredBatch:e,dataKey:t})=>{const s=e.length,n=e.sort(Se([t])),r=Math.floor(s/2);return n[r][t]||0},Jr=({filteredBatch:e})=>e.reduce((s=0,n)=>{if(!("prSize"in n))return s;const{additions:r=0,deletions:a=0}=n;return s+(r-a)},0),Zr=({filterForKey:e=!1,dataKey:t,groupMath:s="average"},n=[])=>{const r=[];return n.forEach(a=>{const l=a.filter(d=>t&&e?/\d+/.test(`${d[t]}`):!0),c=l.length;if(!e||c>0){const d={average:()=>c>0?Math.round(Mt(t)(l)/c):0,trimmedAverage:Wr,sum:()=>Mt(t)(l),count:()=>c,averagePerDev:Hr,median:Xr,percentWith:Qr,teamDistribution:Yr,growth:Jr};r.push({y:d[s]({filteredBatch:l,dataKey:t}),x:zr(a[0].mergedAt)})}}),r},gs=({lines:e=[]})=>{const t=[];return e.forEach(s=>{const{label:n,color:r,data:a}=s,l=uo(a),c=Zr(s,l);c.length&&t.push({id:n,color:r,data:c})}),t},ea=(e,t,s)=>{let n,r;s.forEach(({data:d=[]})=>{const i=d[0].x,m=d[d.length-1].x;(!n||new Date(i)<n)&&(n=new Date(i)),(!r||new Date(m)>r)&&(r=new Date(m))});const a={MAJOR:"primary",MINOR:"secondary",PATCH:"tertiary"},l=[0,18,36,54,72,90];return e.filter(({date:d})=>{const i=new Date(d);return i>n&&i<r}).map((d,i)=>({axis:"x",value:new Date(d.date).getTime(),legend:d.description,...t.markers[a[d.releaseType]]||{},legendOffsetY:l[i%l.length]}))},ta=e=>{const t=`${e}`,s=Math.ceil(t.length*.4),[n]=t.split("").reduceRight(([a=[],l=!1],c,d)=>{const i=parseInt(c),m=l?i+1:i,u=d!==0&&(m>9||d>s&&m>4),p=u||d>s?0:m;return[[...a,p],u]},[[],!1]);return n.reverse().join("")},Pe=(e=[])=>{var d,i,m,u;const t=uo(e),s=t.at(0)||[],n=t.at(-1)||[],r=s.at(0)&&new Date(((d=s.at(0))==null?void 0:d.mergedAt)||((i=s.at(0))==null?void 0:i.createdAt)),a=n.at(0)&&new Date(((m=n.at(0))==null?void 0:m.mergedAt)||((u=n.at(0))==null?void 0:u.createdAt)),l=r&&a?pe(a,r):0,c=[];return t.forEach((p=[])=>{const h=c.length,g=new Date((p.at(0)||{}).mergedAt||(p.at(0)||{}).createdAt),f=pe(g,r),y=Math.floor(f/l*100),x=10*h;h<1||y>=x&&h<10?c.push(p):c.at(-1).push(...p)}),c},sa=(e=[])=>{const t=[];return e.forEach(({data:s=[]})=>{t.push(new Date(s.at(0).x)),t.push(new Date(s.at(-1).x))}),t},oa=(e=[],t=[])=>{const s=sa([...e,...t]),n=Mn(s),r=$n(s);return Fn(r,n)},po=({pullRequests:e=[],showNames:t=!0,usersInfo:s={}})=>{const n={};return e.forEach(l=>{const{author:c}=l,d=n[c]||[];d.push(l),n[c]=d}),[{lines:Object.entries(n).map(([l="",c=[]],d)=>{var m;const i=c.map(u=>({value:1,mergedAt:u.mergedAt}));return{label:t?((m=s[l])==null?void 0:m.name)||l:`${Array(d).fill(" ").join("")}Spartacus`,color:_[d%_.length],dataKey:"value",groupMath:"count",data:i}}),xAxis:"left"}]},go=(e="repo",t={})=>{const s=Object.entries(t).sort(([,d],[,i])=>d-i),n=s.slice(-20),r=s.length>19?n.map(([d])=>d):Object.keys(t),a=n.map(([d,i],m)=>({id:d,label:d,color:_[m%_.length],value:i})),l=s.length>r.length?`PR rainbow split by top 20 ${e}s out of ${s.length}`:`PR ${e} rainbow (${r.length})`;return{pieData:a,reportItems:r,pieTitle:`PR by ${e} rainbow`,sectionTitle:l}},na=e=>{var n;const t=r=>{const a=r.data.yFormatted,l=r.data.originalY;return/[\d.]/.test(l)?l:a},s=((n=e==null?void 0:e.slice)==null?void 0:n.points)||[];return o.jsx(Ms,{rows:s.map((r,a)=>[o.jsx("span",{style:{display:"block",width:"12px",height:"12px",background:r.serieColor}},a),r.serieId,o.jsx("strong",{children:t(r)},a)])})},ra=(e=[])=>({series:t,lineGenerator:s,xScale:n,yScale:r})=>t.map((a={})=>{const{id:l,data:c,color:d}=a,{lineStyles:i={strokeWidth:2}}=e.find(m=>m.label===l)||{};return o.jsx("path",{d:s(c.map(m=>({x:n(m.data.x),y:r(m.data.y)}))),fill:"none",stroke:d,style:i},l)}),fs=(e=[])=>e.filter(t=>t.yMax).map(t=>t.yMax),xs=(e,t)=>t-e,W=({title:e,combineTitles:t=!1,blockHeading:s=!1,data:n=[],markers:r=[],showLegends:a=!1,tableData:l=[],tableKeys:c=[],graphInfo:d,setGraph:i=()=>{},graphs:m=[],tableOpenedByDefault:u=!1}={})=>{const{theme:p}=q(),h=ot(p),{showNumbers:g}=st(),f=n.find(({xAxis:P})=>P==="left")||{data:[],lines:[],xAxis:"left"},y=fs(f.lines),x=gs(f),[S]=[...y,hs(x)].sort(xs),v=ps(x),E=n.find(({xAxis:P})=>P==="right")||{data:[],lines:[],xAxis:"right"},b=fs(E.lines),A=gs(E),[j]=[...b,hs(A)].sort(xs),N=ps(A),F=S||j,z=v>N?N:v,C=[];A.forEach(P=>{const k=P.data.map($=>({y:$.y<0?$.y:Math.round($.y*(F/j)),x:$.x,originalY:$.y}));k.length&&C.push({...P,data:k})});const U=f.lines,ve=!t&&e||s?[]:U,we=E.lines,Ce=[...f.lines,...E.lines],le=Ce.map(P=>({label:P.label,default:P.color,current:P.color,clicked:!1})),[Z=[],K]=w.useState(le);(le.length!==Z.length||Z.length===1&&Z[0].color!==le[0].color)&&K(le);const V="rgba(120, 119, 120, 0.27)",de=(P={})=>{const k=le.findIndex($=>$.label===P.label);K(Z.map(($,B)=>({...$,current:B===k||$.clicked?$.default:V})))},be=()=>{const P=Z.some(k=>k.clicked);K(Z.map(k=>({...k,current:P&&k.clicked||!P?k.default:V})))},me=(P={})=>{const k=le.findIndex(B=>B.label===P.label),$=Z.map((B,ee)=>{const Q=ee===k&&!B.clicked;return{...B,current:Q||ee!==k&&B.clicked?B.default:V,clicked:ee===k?Q:B.clicked}});K($)},ce={anchor:"top-right",direction:"column",justify:!1,translateX:-10,translateY:10,itemsSpacing:0,itemDirection:"right-to-left",itemWidth:80,itemHeight:20,itemOpacity:1,symbolSize:12,symbolShape:"square",symbolBorderColor:"rgba(0, 0, 0, .9)",itemTextColor:h.textColor},xe=[];if(E.lines.length<1&&U.length>10){const P=[],k=[],$=Math.ceil(U.length/2);U.forEach(({label:B,color:ee},Q)=>{const{current:te}=Z.find(ue=>ue.label===B)||{},X={label:B,color:te||ee};Q<$?P.push(X):k.push(X)}),xe.push({...ce,data:P,anchor:"top-left",direction:"column",translateX:10,itemDirection:"left-to-right"},{...ce,data:k})}const nt=xe.length>0?xe.map(P=>({...P,onMouseEnter:de,onMouseLeave:be,onClick:me})):[{...ce,onMouseEnter:de,onMouseLeave:be,onClick:me}],Ae=x.concat(C),Ie=ea(r,h,Ae),Te=P=>P.some(k=>((k==null?void 0:k.data)||[]).length),ze=oa(x,A)>90?"%Y":"%y/%m";return Te(Ae)&&o.jsxs("div",{className:"z-10 w-full max-w-mw",children:[d&&m.length>0&&o.jsx(ro,{graphInfo:d,setGraph:i,graphs:m}),o.jsxs("div",{className:"flex flex-wrap justify-between",children:[o.jsx(Ue,{type:"line",text:e,items:ve}),!s&&we.length>0&&o.jsx(Ue,{type:"line",items:we})]}),o.jsx("div",{className:"chart-wrap",children:o.jsx(Un,{margin:{top:14,right:50,bottom:50,left:50},data:Ae,colors:Z.map(P=>P.current),lineWidth:2,curve:"monotoneX",animate:!1,isInteractive:g,xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",min:z,max:F},axisBottom:{format:ze,tickSize:0,tickPadding:10,tickRotation:-45},legends:a?nt:[],axisLeft:{...!g&&{renderTick:void 0},tickSize:0,tickValues:8},pointLabelYOffset:0,...Ie.length&&{markers:Ie},...C.length&&{axisRight:{...!g&&{renderTick:void 0},tickSize:0,tickValues:8,format:P=>{const k=Math.round(P*(j/F));return P<0?P:ta(k)}}},enableGridX:!1,enableSlices:"x",sliceTooltip:na,theme:h,layers:["grid","markers","areas",ra(Ce),"slices","points","axes","legends"]})}),l.length>0&&o.jsx(Or,{data:l,dataKeys:c,tableOpenedByDefault:u})]})},aa=(e=[],t=[])=>s=>{const n=i=>{const m=i.dataKey;return["isBug","isFeature"].includes(m)?t.filter(({isBug:h=!1})=>h&&m==="isBug"||!h&&m==="isFeature"):e},{left:r=[],right:a=[]}=s,l={lines:r.map(i=>({...i,data:n(i)})),xAxis:"left"},c={lines:a.map(i=>({...i,data:n(i)})),xAxis:"right"};return[...r.length>0?[l]:[],...a.length>0?[c]:[]]},la=e=>{const t=[...(e==null?void 0:e.left)||[],...(e==null?void 0:e.right)||[]].map(n=>n.dataKey);return t.length>0?[...t,"author"]:["comments","approvals","age","prSize","author"]};let ca=1;const ia=()=>++ca,da=(e=[])=>{const t=[];return e.forEach(({left:s=[],right:n=[]})=>{s.forEach(r=>(r==null?void 0:r.groupMath)&&t.push(r.groupMath)),n.forEach(r=>(r==null?void 0:r.groupMath)&&t.push(r.groupMath))}),t},ma=(e=[])=>da(e).includes("trimmedAverage"),ua=({chunkyData:e=[],pullRequests:t=[],issues:s=[],releases:n=[],tableOpenedByDefault:r=!1})=>{const{theme:a}=q(),l=L[a].secondary,c=L[a].primary,d=[{graphId:1,left:[{label:"*Trimmed Average PR Age (days)",color:l,dataKey:"age",groupMath:"trimmedAverage"}],right:[{label:"*Trimmed Average PR Size",color:c,dataKey:"prSize",groupMath:"trimmedAverage"}]}],[i,m]=w.useState(d),u=ma(i),p=aa(t,s);return t.length>0&&o.jsxs(Y,{children:[o.jsxs(ie,{title:"Your graphs",expandText:"guidance",children:[o.jsx("p",{children:"You can build multiple graphs with data you want to see to help you find insights and track trends."}),o.jsx("p",{children:"Questions worth asking (with team context):"}),o.jsxs("ul",{children:[o.jsx("li",{children:"What metrics do you want to look and and compare against?"}),o.jsx("li",{children:"Any insights or things you would like to try to impact these metrics?"}),o.jsx("li",{children:"This graph initially had PR age and size as they are often impactful metrics, what do you think about the trends of these metrics?"})]})]}),o.jsxs(Ee,{children:[i.map((h,g)=>{var y,x;const f=p(h);return((y=h==null?void 0:h.left)==null?void 0:y.length)<1&&((x=h==null?void 0:h.right)==null?void 0:x.length)<1?o.jsx(ro,{graphInfo:h,setGraph:m,graphs:i},g):o.jsx(W,{graphInfo:h,setGraph:m,graphs:i,blockHeading:!0,markers:n,showLegends:!1,data:f,tableKeys:la(h),tableData:e,tableOpenedByDefault:g===0&&r},g)}),u&&o.jsx("p",{children:"*Trimmed average is the average after the top and bottom 5% is trimmed."})]}),o.jsxs("div",{className:"flex flex-nowrap basis-full justify-center gap-x-3 mb-08",children:[i.length>1&&o.jsx(O,{variant:"secondary",onClick:h=>{h.preventDefault(),m(i.slice(0,-1))},children:"Remove above graph"}),o.jsx(O,{onClick:h=>{h.preventDefault(),m([...i,{graphId:ia(),left:[],right:[]}])},children:"Add another custom graph"})]})]})},ha=e=>({issues:e.issues}),yt=M(ha)(ua),fo=(e,t)=>t.some(s=>e.some(n=>n[s])),mt=({data:e=[],bars:t=[],sortBy:s="",indexBy:n="user",max:r=20,title:a=""})=>{const{theme:l}=q(),c=ot(l),{showNumbers:d}=st(),i=$s(g=>t.some(f=>g[f.dataKey]),e),m=g=>(f,y)=>+((f[g]||0)<(y[g]||0))||+((f[g]||0)===(y[g]||0))-1,u=s?i.sort(m(s)):i,p=r?u.slice(0,r):u,h=t.map(g=>g.dataKey);return fo(e,h)&&o.jsxs("div",{className:"w-full max-w-mw mb-4",children:[o.jsx(Ue,{text:a,items:t}),o.jsx("div",{className:"chart-wrap",children:o.jsx(Gn,{data:p,keys:h,indexBy:n,margin:{top:5,right:50,bottom:60,left:50},padding:.3,groupMode:"grouped",layout:"vertical",valueFormat:g=>`${g}`,colors:t.map(g=>g.color),axisBottom:{tickSize:0,tickRotation:-45},axisLeft:{...!d&&{renderTick:void 0},tickSize:0},isInteractive:d,enableLabel:!1,animate:!1,theme:c})})]})},pa=(e,t,s=!1)=>{const n={},r={};e.forEach(u=>{const p=u.author,h=u[t]||{},g=Pt(Object.values(h));n[p]=g,r[p]=u.name||p});const a=Object.entries(n).sort(([,u],[,p])=>p-u),l=Pt(Object.values(n)),c=u=>{const p=100/l;return u*p},d=[];a.forEach(([u,p])=>{const h=c(p);p>0&&h>5&&d.push(u)});const i=d.length===e.length-1?a.map(([u])=>u):d,m=s?e.filter(u=>i.includes(u.author)).map(u=>u.author):i;return[m,m.map(u=>r[u]||u)]},ga=(e=[],t)=>{const s=Object.entries(t).filter(([r])=>!e.some(a=>a===r));return Pt(s.map(r=>r[1]))},fa=(e=[],t,s=[],n=!1)=>{const r=c=>[...s.map(d=>{var i;return((i=c==null?void 0:c[t])==null?void 0:i[d])||0}),...n?[ga(s,c[t])]:[]],a=s.map(c=>{const d=e.find(i=>i.author===c);return r(d)});let l=[];return e.forEach(c=>{if(!s.some(d=>d===c.author)){const i=r(c).map((m,u)=>m+(l[u]||0));l=[...i.slice(0,i.length-1),0]}}),[...a,...l.length?[l]:[]]},xa=({data:e,dataKey:t,preSorted:s,showNames:n=!0})=>{const[r,a]=pa(e,t,s),l=a.length<e.length,c=fa(e,t,r,l),d=[...a,...l?["Others"]:[]];return{names:n?d:d.map((i,m)=>`Spartacus${Array(m).fill(" ").join("")}`),matrix:c}},ut=({title:e,data:t=[],preSorted:s=!1,dataKey:n})=>{const{theme:r}=q(),a=ot(r),{showNumbers:l}=st(),{showNames:c}=Re(),{names:d,matrix:i}=xa({data:t,dataKey:n,preSorted:s,showNames:c});return(u=>u.some(p=>p.some(Boolean)))(i)&&o.jsxs("div",{children:[o.jsx(Ue,{text:e,className:"text-center"}),o.jsx("div",{className:"chord-wrap",children:o.jsx(Vn,{label:"id",data:i,keys:d,margin:{top:0,right:10,bottom:10,left:10},arcBorderColor:{from:"color",modifiers:[["darker",.4]]},ribbonOpacity:.5,ribbonBorderWidth:.5,ribbonBorderColor:{from:"color",modifiers:[["darker",.4]]},innerRadiusRatio:.85,labelRotation:0,padAngle:.06,innerRadiusOffset:.03,labelOffset:-23,labelTextColor:{from:"color",modifiers:[["darker",2]]},colors:_,isInteractive:l,activeArcOpacity:1,inactiveArcOpacity:1,activeRibbonOpacity:.75,inactiveRibbonOpacity:.25,animate:!1,motionConfig:"stiff",theme:a})})]})},xo=({title:e="",data:t=[]})=>{const{theme:s}=q(),n=ot(s),{showNumbers:r}=st();return t.length&&o.jsxs("div",{className:"z-10 w-full max-w-mw",children:[o.jsx("div",{className:"flex flex-wrap justify-between",children:o.jsx(Ue,{type:"line",text:e})}),o.jsx("div",{className:"pie-wrap",children:o.jsx(Bn,{data:t,colors:{datum:"data.color"},margin:{top:15,right:80,bottom:0,left:80},animate:!1,innerRadius:.65,padAngle:1,cornerRadius:4,activeOuterRadiusOffset:5,borderWidth:1,startAngle:-90,endAngle:90,enableArcLabels:!1,arcLinkLabelsSkipAngle:4,arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLinkLabelsDiagonalLength:10,arcLinkLabelsStraightLength:15,arcLinkLabelsTextColor:n.textColor,theme:n,isInteractive:r})})]})},ya=({pullRequests:e=[],releases:t=[],chunkyData:s=[],usersData:n=[],allRepos:r={},userIds:a=[],usersInfo:l={}})=>{var E,b;const{theme:c}=q(),d=L[c].secondary,i=L[c].primary,{showNames:m}=Re(),u=a.length||15,p=["commentsGiven","approvalsGiven"],h=n.sort(Se(p)),g=h.map((A,j)=>{var N;return{commentsGiven:A.commentsGiven,commentsReceived:A.commentsReceived,uniquePRsApproved:A.uniquePRsApproved,totalPRs:A.totalPRs,author:m?A.author:`${Array(j).fill(" ").join("")}Spartacus`,name:m?((N=l[A.author])==null?void 0:N.name)||A.author:`${Array(j).fill(" ").join("")}Spartacus`}}),f=h.map(A=>{var j;return{...A,name:((j=l[A.author])==null?void 0:j.name)||A.author}}),y=go("repo",r),x=po({pullRequests:e,showNames:m,usersInfo:l}),S=f.filter(A=>A.approvalsGiven>0).length,v=f.filter(A=>A.commentsGiven>0).length;return n.length>0&&o.jsxs(Y,{children:[o.jsxs(ie,{title:"Contributions",expandText:"guidance",children:[o.jsx("p",{children:"Questions worth asking (with team context):"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Is there a bus factor risk?"}),o.jsx("li",{children:"Are there any data points that stand out?"}),o.jsx("li",{children:"How do the given and received metrics look?"}),o.jsx("li",{children:"How well spread are the collaboration metrics?"}),o.jsx("li",{children:"Any insights or things you would like to try to impact these metrics?"})]})]}),o.jsxs(Ee,{children:[o.jsxs("div",{className:"flex flex-wrap justify-center w-full",children:[o.jsxs("div",{className:"w-1/2 max-mm:w-full",children:[o.jsx(mt,{data:g,indexBy:"name",title:"Comments",sortBy:"commentsGiven",max:u,bars:[{dataKey:"commentsGiven",color:d,label:"given"},{dataKey:"commentsReceived",color:i,label:"*received"}]}),o.jsx("p",{children:"*Received comments can also come from out of team so can be higher."})]}),o.jsx("div",{className:"w-1/2 max-mm:w-full",children:o.jsx(mt,{data:g,indexBy:"name",title:"PRs",sortBy:"uniquePRsApproved",max:u,bars:[{dataKey:"uniquePRsApproved",color:d,label:"approved"},{dataKey:"totalPRs",color:i,label:"opened"}]})})]}),(v>0||S>0)&&o.jsxs("div",{className:"w-full flex flex-wrap justify-center gap-4",children:[v>0&&o.jsx(ut,{data:f,preSorted:!0,dataKey:"commentsByUser",title:"Comment contributions"}),S>0&&o.jsx(ut,{data:f,preSorted:!0,dataKey:"approvalsByUser",title:"Approval contributions"})]}),o.jsx("p",{children:"These chord charts show how contributions are given and received, the dominant colour indicates more contribution"}),x.length>0&&((b=(E=x==null?void 0:x[0])==null?void 0:E.lines)==null?void 0:b.length)<21&&o.jsx(W,{title:"PRs by author",markers:t,showLegends:!0,data:x,tableData:s,tableKeys:["author","repo"]}),y.pieData.length>0&&o.jsx(xo,{data:y.pieData,title:y.sectionTitle})]})]})},Ra=e=>({usersData:e.usersData,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),Bt=M(Ra)(ya),yo=w.forwardRef(({className:e,...t},s)=>o.jsx(Fs,{className:D("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:o.jsx(qn,{className:D("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));yo.displayName=Fs.displayName;const Ea={warn:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 fill-current",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),error:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 fill-current",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})})},qt=({error:{level:e="error",message:t},className:s})=>{const n=e==="error"?"bg-error":"bg-warn";return o.jsxs("div",{className:`${n} p-3 flex items-center rounded-sm ${s}`,children:[Ea[e],o.jsx("p",{className:"m-0 ml-2 p-0",children:t})]})},Sa=(e,t)=>[e&&"fetching",t.length&&"Get more data","Get data"].find(Boolean),va=e=>{const{fetching:t,error:s,pullRequests:n=[],qaId:r}=e;return o.jsxs("div",{className:"grid grid-cols-1 gap-2 max-mm:grid-cols-2",children:[o.jsx(O,{className:"m-0 w-full col-span-full",type:"submit",disabled:t,color:"primary","data-qa-id":r,children:Sa(t,n)}),s&&o.jsx(qt,{error:s,className:"col-span-full"})]})},wa=e=>({fetching:e.fetching,error:e.error,pullRequests:e.pullRequests}),Ro=M(wa)(va),ba=e=>{const{setValue:t,amountOfData:s,pullRequests:n=[],preFetchedName:r="",className:a=""}=e,l=!r&&n.length>0,c=d=>`Get ${d} ${d===1?"month":"months"} ${l?"more ":""}data`;return o.jsxs(Le,{onValueChange:d=>t("amountOfData",d==="all"?d:Number(d)),value:`${s}`,children:[o.jsx(De,{className:`w-auto ${a}`,children:o.jsx($e,{children:s==="all"?"Get it all!":c(Number(s))})}),o.jsx(Ne,{children:o.jsxs(Me,{children:[o.jsx(J,{value:"1",children:c(1)}),o.jsx(J,{value:"3",children:c(3)}),o.jsx(J,{value:"6",children:c(6)}),o.jsx(J,{value:"12",children:c(12)}),o.jsx(J,{value:"24",children:c(24)}),o.jsx(J,{value:"all",children:"Get it all!"})]})})]})},Aa=e=>({pullRequests:e.pullRequests,preFetchedName:e.preFetchedName}),Eo=M(Aa)(ba),So=w.forwardRef(({className:e,type:t,...s},n)=>o.jsx("input",{type:t,"data-qa-id":`input-${t}`,className:D("flex mt-8 h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground  focus:border-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring  disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));So.displayName="Input";const vo={org:"Organization",repo:"Repository",team:"Team name (from GitHub Org team url)",gitTeamUrl:"Org's team url",token:"Token",excludeIds:"Exclude GitHub users e.g. remove bot PRs and comments, ',' separated",enterpriseAPI:"Enterprise API full url",userIds:"Comma separated list GitHub users",userId:"GitHub user ID",startDate:"Joined yyyy/mm/dd",endDate:"Left yyyy/mm/dd",events:"Comma separated list of events (optional)",teamName:"Team name",name:"Name"},Ta=({dates:e=[]})=>{const t=e.every(({startDate:a="",endDate:l=""})=>{const c=!a||Ct(new Date(a)),d=!l||Ct(new Date(l));return c&&d}),s=[];e.forEach(({startDate:a="",endDate:l=""})=>{a&&s.push(a),l&&s.push(l)});const n=zn((a,l)=>new Date(a).getTime()-new Date(l).getTime(),s),r=ne(s,n);return t&&r},ja=(e={})=>{const t=Object.values(e).every(s=>Ta(s));return Object.keys(e).length>0&&t},ys=(e="")=>!e||/^\d{4}[/-]\d{2}[/-]\d{2}$/.test(e)&&Ct(new Date(e)),wo=({key:e,value:t})=>ae([[ne("gitTeamUrl"),T(/^(https:\/\/.+\..+$)/.test(t))],[ne("enterpriseAPI"),T(/^(https:\/\/.+\..+|^$)/.test(t))],[ne("excludeIds"),T(/^([\w-.,\s]+|)$/.test(t))],[ne("events"),T(/^([\w-.,&\s=]+|)$/.test(t))],[ne("name"),T(/.?/.test(t))],[ne("usersInfo"),()=>ja(t)],[ne("startDate"),()=>ys(t)],[ne("endDate"),()=>ys(t)],[G,T(/^[\w-_.]+$/.test(t))]])(e),Da=e=>t=>{const s=e[t];return!wo({key:t,value:s})},bo=e=>{const t=Da(e),s={};return Object.keys(e).forEach(r=>{s[r]=t(r)}),{isValid:Object.values(s).every(r=>!r),validationErrors:s}},$t=(e,t)=>{const s=e[t],n=typeof s=="object"?"":s;return Array.isArray(s)?Kn(", ",s):n},H=e=>{const{type:t,className:s="",inputError:n={},setInputError:r=()=>{},formInfo:a={},setValue:l}=e,c=n[t]?"border-red-500":"";return o.jsxs(et,{children:[o.jsx("p",{className:"mb-1 block",children:vo[t]}),o.jsx(So,{className:`${s} m-0 w-full ${c}`,value:$t(a,t),type:t,onBlur:d=>{const i=I("",["target","value"],d),m=wo({key:t,value:i});r({...n,[t]:!m}),m&&l(t,i)},onChange:d=>{const i=I("",["target","value"],d);r({...n,[t]:!1}),l(t,i)},onFocus:()=>r({...n,[t]:!1})}),o.jsx("p",{className:"text-red-500 text-xs",children:n[t]&&"Invalid input"})]})},Ao=Gs,Na=Vs,To=Us,Kt=w.forwardRef(({className:e,...t},s)=>o.jsx(pt,{ref:s,className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Kt.displayName=pt.displayName;const jo=w.forwardRef(({className:e,children:t,...s},n)=>o.jsxs(To,{children:[o.jsx(Kt,{}),o.jsxs(Ve,{ref:n,className:D("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,o.jsxs(Gt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[o.jsx("path",{d:"M18 6 6 18"}),o.jsx("path",{d:"m6 6 12 12"})]}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));jo.displayName=Ve.displayName;const Do=w.forwardRef(({className:e,children:t,...s},n)=>o.jsxs(To,{children:[o.jsx(Kt,{}),o.jsx(Ve,{ref:n,className:D("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:t})]}));Do.displayName=Ve.displayName;const Ke=w.forwardRef(({className:e,...t},s)=>o.jsx(gt,{ref:s,className:D("text-lg font-semibold leading-none tracking-tight",e),...t}));Ke.displayName=gt.displayName;const Pa=w.forwardRef(({className:e,...t},s)=>o.jsx(ft,{ref:s,className:D("text-sm text-muted-foreground",e),...t}));Pa.displayName=ft.displayName;const Ca=({onSubmit:e=()=>{},gitUsers:t=[],usersInfo:s={}})=>{const n=Object.entries(s).map(([x,{name:S="",dates:v=[]}])=>({userId:x,name:S,dates:v})),r=n.length>0?n:[{userId:"",name:"",dates:[]}],[a,l]=w.useState(r),c=x=>(S,v)=>{const E=[...a];E[x][S]=v,l(E)},d=(x,S)=>(v,E)=>{const b=[...a];b[x].dates[S][v]=E,l(b)},i=x=>{x.preventDefault();const S={};a.forEach(({userId:v,name:E,dates:b})=>{S[v]={userId:v,name:E,dates:b}}),e(S)},m=x=>{x.preventDefault(),l([...a,{userId:"",name:"",dates:[]}])},u=(x,S)=>{S.preventDefault();const v=[...a];v.splice(x,1),l(v)},p=(x,S)=>{S.preventDefault();const v=[...a],E={startDate:"",endDate:""};v[x].dates.push(E),l(v)},h=({userIndex:x,dateIndex:S})=>{const v=[...a],b=v[x].dates.filter((A,j)=>j!==S);v[x].dates=b,l(v)},[g,f]=w.useState({}),y=t.length>0&&"Edit Github Team members"||Object.keys(s).length>0&&"Edit team members"||"Or manually add team members";return o.jsxs("form",{children:[o.jsx("h4",{children:y}),a.map((x,S)=>o.jsxs("div",{className:"grid grid-cols-1 gap-2 max-mm:grid-cols-2 mb-8",children:[o.jsx(H,{type:"userId",formInfo:x,inputError:g,setInputError:f,setValue:c(S)}),o.jsx(H,{type:"name",formInfo:x,setValue:c(S),inputError:g,setInputError:f}),x.dates.map((v,E)=>o.jsxs("div",{className:"flex items-stretch gap-2 justify-between col-span-full",children:[o.jsx(H,{type:"startDate",formInfo:v,inputError:g,setInputError:f,setValue:d(S,E)}),o.jsx(H,{type:"endDate",inputError:g,formInfo:v,setInputError:f,setValue:d(S,E)}),o.jsx("svg",{onClick:()=>h({userIndex:S,dateIndex:E}),className:"w-6 fill-current min-h-12 rounded-sm bg-destructive test-[#CCC] px-0 py-2 h-auto",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-testid":"DeleteIcon",children:o.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})})]},E)),o.jsx(O,{className:"min-h-12 m-0",color:"primary",onClick:v=>p(S,v),children:`Add ${x.dates.length>0?"more dates":"dates"}`}),o.jsx(O,{className:"bg-destructive text=[#CCC] min-h-12 m-0",onClick:v=>u(S,v),children:"Remove User"})]},S)),o.jsx(O,{className:"mr-0 w-full min-h-12",color:"primary",onClick:x=>m(x),children:"Create new user"}),o.jsx(O,{className:"mr-0 w-full min-h-12",color:"primary",onClick:x=>i(x),children:"Save and close"})]})},R={SET_TEAM_NAME:"SET_TEAM_NAME",CLEAR_TEAM_NAME:"CLEAR_TEAM_NAME",STORE_ORG:"STORE_ORG",CLEAR_ORG:"CLEAR_ORG",STORE_TOKEN:"STORE_TOKEN",STORE_FORM_UNTIL_DATE:"STORE_FORM_UNTIL_DATE",CLEAR_FORM_UNTIL_DATE:"CLEAR_FORM_UNTIL_DATE",STORE_UNTIL_DATE:"STORE_UNTIL_DATE",CLEAR_UNTIL_DATE:"CLEAR_UNTIL_DATE",SET_PR_PAGINATION:"SET_PR_PAGINATION",CLEAR_PR_PAGINATION:"CLEAR_PR_PAGINATION",SET_PR_REVIEWED_PAGINATION:"SET_PR_REVIEWED_PAGINATION",CLEAR_PR_REVIEWED_PAGINATION:"CLEAR_PR_REVIEWED_PAGINATION",SET_RELEASES_PAGINATION:"SET_RELEASES_PAGINATION",CLEAR_RELEASES_PAGINATION:"CLEAR_RELEASES_PAGINATION",SET_ISSUES_PAGINATION:"SET_ISSUES_PAGINATION",CLEAR_ISSUES_PAGINATION:"CLEAR_ISSUES_PAGINATION",SET_DESC:"SET_DESC",CLEAR_DESC:"CLEAR_DESC",FETCH_STATUS:"FETCH_STATUS",FETCH_START:"FETCH_START",PRE_FETCH_ERROR:"PRE_FETCH_ERROR",CLEAR_PRE_FETCH_ERROR:"CLEAR_PRE_FETCH_ERROR",FETCH_ERROR:"FETCH_ERROR",CLEAR_FETCH_ERROR:"CLEAR_FETCH_ERROR",FETCH_END:"FETCH_END",STORE_REPOS:"STORE_REPOS",STORE_REPO:"STORE_REPO",CLEAR_REPO:"CLEAR_REPO",STORE_AMOUNT:"STORE_AMOUNT",STORE_SORT:"STORE_SORT",STORE_ENT_URL:"STORE_ENT_URL",STORE_EX_IDS:"STORE_EX_IDS",CLEAR_EX_IDS:"CLEAR_EX_IDS",STORE_EVENTS:"STORE_EVENTS",CLEAR_EVENTS:"CLEAR_EVENTS",STORE_USERS_INFO:"STORE_USERS_INFO",CLEAR_USERS_INFO:"CLEAR_USERS_INFO",STORE_USER_IDS:"STORE_USER_IDS",CLEAR_USER_IDS:"CLEAR_USER_IDS",ADD_ITEMS_DATE_RANGE:"ADD_ITEMS_DATE_RANGE",CLEAR_ITEMS_DATE_RANGE:"CLEAR_ITEMS_DATE_RANGE",ADD_TRIMMED_ITEMS:"ADD_TRIMMED_ITEMS",CLEAR_TRIMMED_ITEMS:"CLEAR_TRIMMED_ITEMS",ADD_PRS:"ADD_PRS",ADD_FILTERED_PRS:"ADD_FILTERED_PRS",CLEAR_PRS:"CLEAR_PRS",CLEAR_FILTERED_PRS:"CLEAR_FILTERED_PRS",ADD_REVIEWED_PRS:"ADD_REVIEWED_PRS",ADD_REVIEWED_FILTERED_PRS:"ADD_REVIEWED_FILTERED_PRS",CLEAR_REVIEWED_PRS:"CLEAR_REVIEWED_PRS",CLEAR_REVIEWED_FILTERED_PRS:"CLEAR_REVIEWED_FILTERED_PRS",ADD_ISSUES:"ADD_ISSUES",ADD_FILTERED_ISSUES:"ADD_FILTERED_ISSUES",CLEAR_FILTERED_ISSUES:"CLEAR_FILTERED_ISSUES",CLEAR_ISSUES:"CLEAR_ISSUES",ADD_RELEASES:"ADD_RELEASES",CLEAR_RELEASES:"CLEAR_RELEASES",ADD_FILTERED_RELEASES:"ADD_FILTERED_RELEASES",CLEAR_FILTERED_RELEASES:"CLEAR_FILTERED_RELEASES",PREFETCHED_NAME:"PREFETCHED_NAME",CLEAR_PREFETCHED_NAME:"CLEAR_PREFETCHED_NAME",ADD_USERS_DATA:"ADD_USERS_DATA",CLEAR_USERS_DATA:"CLEAR_USERS_DATA"},No=(e,t,s=[])=>new Promise((n,r)=>{const[a,...l]=e;Promise.all(a.map(c=>t(c))).then(c=>l&&l.length?No(l,t,c).then(d=>n(s.concat(d))).catch(r):n(s.concat(c))).catch(r)}),Je=(e=[],t,s=2)=>{const n=Hn(s,e);return e.length?No(n,t):[]},zt=(e,t="DESC",s="")=>n=>{const r=I("",e,n),a=r&&new Date(r),l=s?new Date(s):new Date;return t==="DESC"?a&&tt(a,l):a&&Be(a,l)},Rt=e=>e?` after:"${e}" `:"",Ht=(e,{oldest:t,newest:s})=>{const n=e==="DESC"?t:s,a=n?` ${e==="DESC"?"after":"before"}:"${n}" `:"",l=a?50:10;return`
    ${e==="DESC"?`last: ${l}`:`first: ${l}`}
    ${a}
  `},Wt=e=>({oldest:t,newest:s})=>Rt(e==="DESC"?t:s),ge="pageInfo { endCursor hasNextPage hasPreviousPage startCursor }",Ge=e=>`
    comments(first: ${e?100:10} ${Rt(e)}) {
      totalCount
      edges {
        node {
          author {
            login
            url
          }
          publishedAt
          body
        }
      }
      ${ge}
    }
`,Po=e=>t=>`
pullRequests(
  first: 50
  ${Wt(e)(t)}
  states: [MERGED]
  orderBy: {field: CREATED_AT direction: ${e}}
) {
  totalCount
  edges {
    node {
      id
      url
      author {
        login
        url
      }
      repository {
        name
        owner {
          login
        }
      }
      additions
      deletions
      mergedAt
      createdAt
      commits(first:1) {
        edges {
          node {
            commit {
              committedDate
            }
          }
        }
      }
      ${Io(void 0)}
      ${Ge(void 0)}
    }
  }
  ${ge}
}`,Co=e=>t=>`
issues(
  ${Wt(e)(t)}
  first: 50
  orderBy: { field:CREATED_AT direction: ${e} }
) {
  totalCount
  edges {
    node {
      title
      url
      createdAt
      closedAt
      state
      labels(first:5) {
        edges {
          node {
            name
          }
        }
      }
    }
  }
  ${ge}
}`,Ia=e=>t=>`
releases(
  ${Wt(e)(t)}
  first: 50
  orderBy:{ field:CREATED_AT direction: ${e} }
) {
  totalCount
  edges {
    node {
      id
      name
      createdAt
      tag {
        name
      }
    }
  }
  ${ge}
}`,Io=e=>`
    reviews(first: ${e?100:10} ${Rt(e)}) {
      edges {
        node {
          id
          state
          author {
            login
            url
          }
          ${Ge(void 0)}
        }
      }
      ${ge}
    }
`,_o=(e={},t="",s={},n)=>r=>{const{hasNextPage:a=!1,startCursor:l,endCursor:c}=I({},["data","result",r,"pageInfo"],s),d=I([],["data","result",r,"edges"],s),i=r==="pullRequests"?"mergedAt":"createdAt",m=se(t)?d.filter(zt(["node",i],n,t)):[],u={pullRequests:"prPagination",issues:"issuesPagination",releases:"releasesPagination"},h=I(n==="DESC"?c:l,[u[r],"oldest"],e),f=I(n==="ASC"?c:l,[u[r],"newest"],e),y=m.length,x=ae([[T(a===!1),re],[T(!se(t)),T(a)],[T(y===0),re],[T(y>0&&d.length>y),re],[G,T(a)]])();return{newest:n==="ASC"&&c?c:f,oldest:n==="DESC"&&c?c:h,hasNextPage:a,hasNextPageForDate:x}},_a=(e={},t="",s={},n)=>r=>{const a=r==="usersReviews"?["data","result"]:["data","result",r],{hasNextPage:l=!1,hasPreviousPage:c=!1,startCursor:d,endCursor:i}=I({},[...a,"pageInfo"],s),m=I([],[...a,"edges"],s),u=["pullRequests","usersReviews"].includes(r)?"mergedAt":"createdAt",p=se(t)?m.filter(zt(["node",u],n,t)):[],h={commitComments:"commitCommentsPagination",issueComments:"issueCommentsPagination",usersReviews:"usersReviewsPagination"},g=r==="usersReviews"||n==="ASC"?"right":"left",y=I(g==="right"?i:d,[h[r],"oldest"],e),S=I(g==="right"?d:i,[h[r],"newest"],e),v=g==="right"?l:c,E=p.length,b=ae([[T(v===!1),re],[T(!se(t)),T(v)],[T(E===0),re],[T(E>0&&m.length>E),re],[G,T(v)]])();return{newest:g==="right"&&i?i:S,oldest:g==="left"&&d?d:y,hasNextPage:v,hasNextPageForDate:b}},ka=(e={},t="",s={},n)=>{const{hasNextPage:r=!1,hasPreviousPage:a=!1,startCursor:l,endCursor:c}=I({},["data","result","pageInfo"],s),d=I([],["data","result","edges"],s),i=se(t)?d.filter(zt(["node","mergedAt"],n,t)):[],u=I(n==="DESC"?c:l,["usersReviewsPagination","oldest"],e),h=I(n==="DESC"?l:c,["usersReviewsPagination","newest"],e),g=n==="DESC"?r:a,f=i.length,y=ae([[T(g===!1),re],[T(!se(t)),T(g)],[T(f===0),re],[G,T(g)]])();return{newest:n==="ASC"&&l?l:h,oldest:n==="DESC"&&c?c:u,hasNextPage:g,hasNextPageForDate:y}},Yt=e=>{const t=["issues","pullRequests","releases"],[s]=t.map(n=>{var r,a,l;return((l=(a=(r=e==null?void 0:e.data)==null?void 0:r.result)==null?void 0:a[n])==null?void 0:l.totalCount)||0}).sort((n,r)=>r-n);return Math.ceil(s/50)-1},Oa=e=>t=>`
    commitComments(
      ${Ht(e,t)}
    ) {
      edges {
        cursor
        node {
          createdAt
          commit {
            repository {
              nameWithOwner
            }
            url
            associatedPullRequests(last: 10) {
              edges {
                node {
                  number
                  url
                }
              }
            }
          }
          body
        }
      }
      ${ge}
    }
`,La=e=>t=>`
    issueComments(
      ${Ht(e,t)}
    ) {
      edges {
        cursor
        node {
          createdAt
          url
          repository {
            nameWithOwner
          }
          issue {
            number
          }
          pullRequest {
            number
          }
          body
        }
      }
      ${ge}
    }
`,Ma=e=>({user:t,sortDirection:s="DESC",amountOfData:n,usersReviewsPagination:r={}})=>({query:`{
    result: search(
      query: "type:pr state:closed reviewed-by:${t}"
      type: ISSUE
      ${Ht(s,r)}
    ) {
      issueCount
      ${ge}
      edges {
        node {
          ... on PullRequest {
            id
            number
            url
            author {
              login
              url
            }
            repository {
              name
              owner {
                login
              }
            }
            additions
            deletions
            mergedAt
            createdAt
            ${Ge(void 0)}
            reviews(last: 10 states: [COMMENTED,APPROVED,CHANGES_REQUESTED] author: "${t}") {
              ${ge}
              edges {
                node {
                  id
                  state
                  author {
                    login
                    url
                  }
                  ${Ge(void 0)}
                }
              }
            }
          }
        }
      }
    }
  }`,sortDirection:s,user:t,resultInfo:a=>{const l=ka({usersReviewsPagination:r,amountOfData:n},e,a,s),c=ae([[T(n==="all"),T(n)],[T(se(e)),T(n)],[T(Number.isInteger(n)),T(n-1)],[G,Yt]])(a),d={usersReviewsPagination:Object.assign(l,{hasNextPage:!1})},i=se(e)?"hasNextPageForDate":"hasNextPage";return{hasNextPage:d.usersReviewsPagination[i]===!0,nextPageInfo:{...d,amountOfData:c}}},fillerType:"pullRequests",hasMoreResults:[r.hasNextPage].some(a=>a!==!1)}),Fe=e=>{const{hasNextPageForDate:t}=e;return t!==!1},ko=e=>({user:t,sortDirection:s="DESC",amountOfData:n,issuesPagination:r={},prPagination:a={},commitCommentsPagination:l={},issueCommentsPagination:c={}})=>({query:`{
    result: user(login: "${t}") {
      login
      ${Fe(c)?La(s)(c):""}
      ${Fe(l)?Oa(s)(l):""}
      ${Fe(a)?Po(s)(a):""}
      ${r[e?"hasNextPageForDate":"hasNextPage"]!==!1?Co(s)(r):""}
    }
  }`,sortDirection:s,user:t,resultInfo:d=>{const i=_o({issuesPagination:r,prPagination:a,amountOfData:n},e,d,s),m=_a({commitCommentsPagination:l,issueCommentsPagination:c,amountOfData:n},e,d,s),u=ae([[T(n==="all"),T(n)],[T(se(e)),T(n)],[T(Number.isInteger(n)),T(n-1)],[G,Yt]])(d);Object.assign(i("pullRequests"),{hasNextPage:!1});const p={prPagination:Object.assign(i("pullRequests"),{hasNextPage:!1}),issuesPagination:Object.assign(i("issues"),{hasNextPage:!1}),commitCommentsPagination:Object.assign(m("commitComments"),{hasNextPage:!1}),issueCommentsPagination:Object.assign(m("issueComments"),{hasNextPage:!1})},h=se(e)?"hasNextPageForDate":"hasNextPage";return{hasNextPage:Object.values(p).some(f=>f[h]===!0),nextPageInfo:{...p,amountOfData:u}}},hasMoreResults:[a.hasNextPage,r.hasNextPage,l.hasNextPage,c.hasNextPage].some(d=>d!==!1)}),Oo=e=>({org:t,repo:s,sortDirection:n="DESC",amountOfData:r,issuesPagination:a={},releasesPagination:l={},prPagination:c={}})=>({query:`{
      result: repository(name: "${s}" owner: "${t}") {
        id
        description
        name
        owner {
          org: login
        }
        ${Fe(c)?Po(n)(c):""}
        ${Fe(a)?Co(n)(a):""}
        ${Fe(l)?Ia(n)(l):""}
      }
    }`,sortDirection:n,resultInfo:d=>{const i=_o({issuesPagination:a,releasesPagination:l,prPagination:c},e,d,n),m=ae([[T(r==="all"),T(r)],[T(se(e)),T(r)],[T(Number.isInteger(r)),T(r-1)],[G,Yt]])(d),u={prPagination:Object.assign({hasNextPage:!1},i("pullRequests")),issuesPagination:Object.assign({hasNextPage:!1},i("issues")),releasesPagination:Object.assign({hasNextPage:!1},i("releases"))},p=se(e)?"hasNextPageForDate":"hasNextPage";return{hasNextPage:Object.values(u).some(g=>g[p]===!0),nextPageInfo:{...u,amountOfData:m}}},fillerType:"batchedQuery",hasMoreResults:[c.hasNextPage,a.hasNextPage,l.hasNextPage].some(d=>d!==!1)}),$a=({nodeId:e,cursor:t})=>({query:`{
      node(id:"${e}") {
          ... on PullRequest {
            id
            ${Ge(t)}
          }
        }
    }`,resultInfo:s=>{var n,r,a,l,c,d,i,m,u,p,h,g,f;return{rawData:s,results:((a=(r=(n=s==null?void 0:s.data)==null?void 0:n.node)==null?void 0:r.comments)==null?void 0:a.edges)||[],hasNextPage:((i=(d=(c=(l=s==null?void 0:s.data)==null?void 0:l.node)==null?void 0:c.comments)==null?void 0:d.pageInfo)==null?void 0:i.hasNextPage)||!1,nextArgs:{nodeId:((u=(m=s==null?void 0:s.data)==null?void 0:m.node)==null?void 0:u.id)||"",cursor:((f=(g=(h=(p=s==null?void 0:s.data)==null?void 0:p.node)==null?void 0:h.comments)==null?void 0:g.pageInfo)==null?void 0:f.endCursor)||""}}},fillerType:""}),Fa=({nodeId:e,cursor:t})=>({query:`{
      node(id:"${e}") {
          ... on PullRequest {
            id
            ${Io(t)}
          }
        }
    }`,resultInfo:s=>{var n,r,a,l,c,d,i,m,u,p,h,g,f;return{rawData:s,results:((a=(r=(n=s==null?void 0:s.data)==null?void 0:n.node)==null?void 0:r.reviews)==null?void 0:a.edges)||[],hasNextPage:((i=(d=(c=(l=s==null?void 0:s.data)==null?void 0:l.node)==null?void 0:c.reviews)==null?void 0:d.pageInfo)==null?void 0:i.hasNextPage)||!1,nextArgs:{nodeId:((u=(m=s==null?void 0:s.data)==null?void 0:m.node)==null?void 0:u.id)||"",cursor:((f=(g=(h=(p=s==null?void 0:s.data)==null?void 0:p.node)==null?void 0:h.reviews)==null?void 0:g.pageInfo)==null?void 0:f.endCursor)||""}}},fillerType:"pullRequestReviewComments"}),Ua=({nodeId:e,cursor:t})=>({query:`{
      node(id:"${e}") {
          ... on PullRequestReview {
            id
            ${Ge(t)}
          }
        }
    }`,resultInfo:s=>{var n,r,a,l,c,d,i,m,u,p,h,g,f;return{rawData:s,results:((a=(r=(n=s==null?void 0:s.data)==null?void 0:n.node)==null?void 0:r.comments)==null?void 0:a.edges)||[],hasNextPage:((i=(d=(c=(l=s==null?void 0:s.data)==null?void 0:l.node)==null?void 0:c.comments)==null?void 0:d.pageInfo)==null?void 0:i.hasNextPage)||!1,nextArgs:{nodeId:((u=(m=s==null?void 0:s.data)==null?void 0:m.node)==null?void 0:u.id)||"",cursor:((f=(g=(h=(p=s==null?void 0:s.data)==null?void 0:p.node)==null?void 0:h.comments)==null?void 0:g.pageInfo)==null?void 0:f.endCursor)||""}}},fillerType:""}),Ga=({org:e,orgPagination:t={}})=>({query:`{
    organization(login: "${e}") {
      repositories(
        first:100
        ${Rt(t==null?void 0:t.cursor)}
        orderBy: {field: NAME, direction: ASC}
      ) {
        edges {
          node {
            name
          }
          cursor
        }
        pageInfo {
          endCursor
          hasNextPage
        }
      }
    }
  }`,fillerType:"org",resultInfo:s=>{var a,l,c,d,i,m,u,p,h,g,f,y,x,S,v;const n=((d=(c=(l=(a=s==null?void 0:s.data)==null?void 0:a.organization)==null?void 0:l.repositories)==null?void 0:c.pageInfo)==null?void 0:d.hasNextPage)||!1,r=((p=(u=(m=(i=s==null?void 0:s.data)==null?void 0:i.organization)==null?void 0:m.repositories)==null?void 0:u.pageInfo)==null?void 0:p.endCursor)||"";return{rawData:s,results:((f=(g=(h=s==null?void 0:s.data)==null?void 0:h.organization)==null?void 0:g.repositories)==null?void 0:f.edges)||[],hasNextPage:((v=(S=(x=(y=s==null?void 0:s.data)==null?void 0:y.organization)==null?void 0:x.repositories)==null?void 0:S.pageInfo)==null?void 0:v.hasNextPage)||!1,nextPageInfo:{orgPagination:{cursor:r,hasNextPage:n,hasNextPageForDate:n},amountOfData:"all"}}}}),Va=({org:e,team:t})=>({query:`{
    organization(login: "${e}") {
      team(slug:"${t}") {
        members(
          first:100
        ) {
          edges {
            node {
              name
              email
              login
              createdAt
            }
          }
          pageInfo {
            endCursor
            hasNextPage
          }
        }
      }
    }
  }`,fillerType:"team",resultInfo:s=>{var n,r,a,l,c;return{results:((c=(l=(a=(r=(n=s[0])==null?void 0:n.data)==null?void 0:r.organization)==null?void 0:a.team)==null?void 0:l.members)==null?void 0:c.edges)||[],hasNextPage:!1}}}),Ba=(e,t)=>{const n={org:["data","organization","repositories","edges"],team:["data","organization","team","members","edges"]}[e];return n?I([],n,t):t},qa=e=>{const t=i=>{const u={pullRequests:[d,l],pullRequestReviewComments:[a],batchedQuery:[d,l]}[i]||[];return p=>u.length?Promise.all(u.map(h=>h(p))).then(h=>h.reduce((g,f)=>f(g),p)):Ba(i,p)},s=i=>m=>async(u=[])=>{const{hasNextPage:p}=m,{query:h,resultInfo:g,fillerType:f}=i(m),y=p?await e(h):{},{results:x=[],hasNextPage:S,nextArgs:v}=g(y),E=[...u,...x];return S&&f?s(i)(v)(E):await t(f)(E)},n=i=>m=>u=>{const p=Object.assign(i.node,{[m]:u});return Object.assign(i,{node:p})},r=i=>m=>{var u,p,h,g,f,y,x;return{nodeId:((u=m==null?void 0:m.node)==null?void 0:u.id)||"",cursor:((g=(h=(p=m==null?void 0:m.node)==null?void 0:p[i])==null?void 0:h.pageInfo)==null?void 0:g.endCursor)||"",hasNextPage:((x=(y=(f=m==null?void 0:m.node)==null?void 0:f[i])==null?void 0:y.pageInfo)==null?void 0:x.hasNextPage)||!1}},a=async(i=[])=>{const u=await Je(i,async p=>{var y,x;const h=((x=(y=p==null?void 0:p.node)==null?void 0:y.comments)==null?void 0:x.edges)||[],g=r("comments")(p),f=await s(Ua)(g)(h);return n(p)("comments")({edges:f})},5);return()=>u},l=async i=>{var h,g,f;const m=((f=(g=(h=i==null?void 0:i.data)==null?void 0:h.result)==null?void 0:g.pullRequests)==null?void 0:f.edges)||[],p=await Je(m,async y=>{var E,b,A;const x=((b=(E=y==null?void 0:y.node)==null?void 0:E.reviews)==null?void 0:b.edges)||[],S=r("reviews")(y),v=await s(Fa)(S)(x);return{nodeId:(A=y==null?void 0:y.node)==null?void 0:A.id,results:{edges:v}}},5);return y=>{const x=c(y)("reviews")(p);return{data:Object.assign((y==null?void 0:y.data)||{},{result:Object.assign(I({pullRequests:x},["data","result"],y))})}}},c=i=>m=>u=>{var f,y,x,S,v;const p=((y=(f=i==null?void 0:i.data)==null?void 0:f.result)==null?void 0:y.pullRequests)||{},g=(((v=(S=(x=i==null?void 0:i.data)==null?void 0:x.result)==null?void 0:S.pullRequests)==null?void 0:v.edges)||[]).map(E=>{var j;const b=((j=E==null?void 0:E.node)==null?void 0:j.id)||"",A=u.find(N=>N.nodeId===b);return A?n(E)(m)(A.results):E});return Object.assign(p,{edges:g})},d=async i=>{var h,g,f;const m=((f=(g=(h=i==null?void 0:i.data)==null?void 0:h.result)==null?void 0:g.pullRequests)==null?void 0:f.edges)||[],p=await Je(m,async y=>{var E,b,A;const x=((b=(E=y==null?void 0:y.node)==null?void 0:E.comments)==null?void 0:b.edges)||[],S=r("comments")(y),v=await s($a)(S)(x);return{nodeId:((A=y==null?void 0:y.node)==null?void 0:A.id)||"",results:{edges:v}}},5);return y=>{var S;const x=c(y)("comments")(p);return{data:Object.assign((y==null?void 0:y.data)||{},{result:Object.assign(((S=y==null?void 0:y.data)==null?void 0:S.result)||{pullRequests:x})})}}};return t},Ka=e=>new Promise((t,s)=>{e.json().then(n=>e.status===200?t(n):s(Object.assign(n,{status:e.status}))).catch(n=>{console.log("-=-=--parseJSON error",n),n.status=e.status,s(n)})}),Rs=({message:e=""})=>/(You have triggered an abuse detection mechanism|You have exceeded a secondary rate limit)/.test(e),za=({message:e=""})=>/Unexpected end of JSON input/.test(e),Ha=e=>t=>fetch(e.enterpriseAPI||"https://api.github.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify({query:t})}).then(Ka),Wa=(e,{amountOfData:t})=>ae([[T(e===!1),re],[T(e&&typeof t=="number"&&t>=1),G],[T(e&&t==="all"),G],[G,re]])(),Ya=(e=3e4)=>new Promise(t=>setTimeout(()=>t(),e));let Es=0;const Qa=async(e,t)=>(console.log("-=-=--paused",Date.now()),await Ya(),console.log("-=-=--resume",Date.now()),++Es,Es<=10?fe(e,t):{errorMessage:{level:"error",message:"Hit rate limit over ten times"},fetchInfo:e.fetchInfo,results:t,reviewResults:[]}),Tt=(e,t)=>t.reduce((n,r)=>{var l,c,d;const a=((d=(c=(l=r==null?void 0:r.data)==null?void 0:l.result)==null?void 0:c[e])==null?void 0:d.edges)||[];return n+a.length},0),Xa=e=>(t,s=[])=>{var i,m,u,p;const r=I(!1,[{pullRequests:"prPagination",issues:"issuesPagination",releases:"releasesPagination"}[t],"hasNextPageForDate"],e),a=s[s.length-1]||{},l=((u=(m=(i=a==null?void 0:a.data)==null?void 0:i.result)==null?void 0:m[t])==null?void 0:u.edges)||[],c=l[l.length-1],d=t==="pullRequests"?"createdAt":"closedAt";return r&&((p=c==null?void 0:c.node)==null?void 0:p[d])||""},fe=async({fetchInfo:e,queryInfo:t,dispatch:s=()=>{}},n=[])=>{const{query:r,resultInfo:a,fillerType:l,user:c,sortDirection:d}=t(e),i=Xa(e),[m]=[i("pullRequests",n),i("issues",n),i("releases",n)].filter(Boolean).sort(Kr(d)),u={prCount:Tt("pullRequests",n),issueCount:Tt("issues",n),releasesCount:Tt("releases",n),latestItemDate:m,user:c,repo:e.repo,repos:e.repos||[],paused:!1};s({type:R.FETCH_STATUS,payload:u});const p=Ha(e);try{const h=await p(r);if(Rs(h))throw new Error("Abuse rate triggered");const g=await qa(p)(l)(h),f=[...n,g],{hasNextPage:y,nextPageInfo:x={}}=a(h),S=xt(e,x);return Wa(y,S)?fe({fetchInfo:S,queryInfo:t,dispatch:s},f):{fetchInfo:S,results:f,reviewResults:[]}}catch(h){const g=h,f=ae([[Rs,G],[za,G],[S=>S.status===500,G],[S=>S.status===502,G],[S=>S.message==="Abuse rate triggered",G],[Xe(rt(/ENOTFOUND|ECONNRESET/),je("","code")),G],[Xe(rt(/fetch/i),je("","message")),G],[G,re]]),x=ae([[f,T({level:"warn",message:"You may have triggered the api's abuse detection, please wait a minute before trying again"})],[Xe(rt(/50\d/i),je("","status")),T({level:"error",message:"GitHub API 500 error, could be CORS or rate limiting"})],[S=>S.status===401,T({level:"error",message:"GitHub token does not have correct settings, please see README"})],[Xe(rt(/40\d/i),je("","status")),S=>({level:"error",message:`Auth error: ${S.message||"UNKOWN"}`})],[S=>S.status===void 0,T({level:"error",message:"Error while processing data after, please check the console"})],[G,S=>({level:"error",message:`ERROR: ${S.message||"UNKOWN"}`})]])(g);if(f(g))return s({type:R.FETCH_STATUS,payload:{...u,paused:!0}}),Qa({fetchInfo:e,queryInfo:t,dispatch:s},n);throw new Error(x.message)}},Ja=async({fetchInfo:e,setGitUsers:t,setInputError:s})=>{try{const{results:n=[]}=await fe({fetchInfo:e,queryInfo:Va,dispatch:()=>{}}),r=[];n.flat().forEach(({node:a})=>{const{name:l,email:c,login:d}=a,i=l?l.replace(",",""):c.split(".")[0];r.push({userId:d,name:i})}),t(r)}catch(n){const r=n;s({level:"error",message:`Api call error: ${(r==null?void 0:r.message)||"unknown"}`})}},Za=e=>{var i;const{setGitUsers:t}=e,[s,n]=w.useState({}),r={gitTeamUrl:"",token:""},[a,l]=w.useState(r),d={inputError:s,setInputError:n,formInfo:a,setValue:(m,u)=>l({...a,[m]:u})};return o.jsxs("form",{onSubmit:m=>{m.preventDefault();const{gitTeamUrl:u="",token:p=""}=a,h=u.split("/"),g=h.at(-2)||"",f=h.at(-2)||"";[g,f,p].every(x=>x&&x.length>0)?Ja({fetchInfo:{name:g,org:f,token:p},setGitUsers:t,setInputError:n}):n({level:"error",message:"Invalid inputs"})},children:[o.jsx("h4",{children:"Getting team members from a GitHub Org team page"}),o.jsx(H,{type:"gitTeamUrl",...d},"gitTeamUrl"),o.jsx(H,{type:"token",...d}),o.jsx(O,{className:"w-full mr-0 min-h-12",type:"submit",children:"Get team members"}),((i=s==null?void 0:s.message)==null?void 0:i.length)>0&&o.jsx(qt,{error:s})]})},Lo=({setParentValues:e,usersInfo:t={}})=>{const[s,n]=w.useState(!1),[r,a]=w.useState([]),l=r.length>0&&"Edit Github Team members"||Object.keys(t).length>0&&"Edit team members"||"Fill in team by:";return o.jsxs("div",{children:[o.jsxs("p",{className:"mb-1",children:["Team members: ",Object.values(t).map(({name:c,userId:d})=>c||d).join(", ")||"None"]}),o.jsxs(Ao,{open:s,onOpenChange:n,children:[o.jsx(Na,{asChild:!0,children:o.jsx(O,{className:"w-full",type:"button",children:Object.keys(t).length===0?"Add team members":"Edit team members"})}),o.jsxs(jo,{className:"overflow-scroll max-h-full w-4/5",children:[o.jsx(Ke,{children:l}),Object.keys(t).length===0&&o.jsx(Za,{setGitUsers:a}),o.jsx(Ca,{gitUsers:r,usersInfo:t,onSubmit:c=>{const d=Object.keys(c).filter(Boolean).length>0;e(d?{usersInfo:c}:{usersInfo:{}}),n(!1)}})]})]})]})},el=async({fetchInfo:e,untilDate:t,dispatch:s})=>{try{const r=e.userIds.map(m=>({fetchInfo:{...e,issuesPagination:e.issuesPagination[m]||{hasNextPage:!0},prPagination:e.prPagination[m]||{hasNextPage:!0},user:m},queryInfo:ko(t),dispatch:s})),a=await Je(r,fe,1),l={issuesPagination:{},prPagination:{}},c=[];return a.forEach(({fetchInfo:m,results:u})=>{c.push(u);const p=(m==null?void 0:m.user)||"";l.issuesPagination[p]=ye("issuesPagination",m),l.prPagination[p]=ye("prPagination",m)}),{fetchInfo:xt(e,l),results:c.flat(),reviewResults:[]}}catch(n){throw console.log("-=-=--getUsersData:error",n),n}},tl=async({fetchInfo:e,untilDate:t,dispatch:s})=>{var n;try{const[r]=e.userIds,a={fetchInfo:{...e,issuesPagination:e.issuesPagination[r]||{hasNextPage:!0},prPagination:e.prPagination[r]||{hasNextPage:!0},user:r},queryInfo:ko(t),dispatch:s},l=await fe(a),c=l.results,d={fetchInfo:{...e,usersReviewsPagination:((n=e.usersReviewsPagination)==null?void 0:n[r])||{hasNextPage:!0},user:r},queryInfo:Ma(t),dispatch:s},i=await fe(d),m=i.results,u={issuesPagination:{[r]:ye("issuesPagination",l.fetchInfo)},prPagination:{[r]:ye("prPagination",l.fetchInfo)},usersReviewsPagination:{[r]:ye("usersReviewsPagination",i.fetchInfo)}};return{fetchInfo:xt(e,u),results:c.flat(),reviewResults:m.flat()}}catch(r){throw console.log("-=-=--getUserData:error",r),r}},sl=async({fetchInfo:e,untilDate:t,dispatch:s})=>{try{const n=await fe({fetchInfo:e,queryInfo:Ga,dispatch:s}),a=((n==null?void 0:n.results.flat())||[]).filter(h=>{var g;return(g=h==null?void 0:h.node)==null?void 0:g.name}).map(h=>{var g;return(g=h==null?void 0:h.node)==null?void 0:g.name}),l=e.org,c=a.map(h=>({fetchInfo:{...e,issuesPagination:(e==null?void 0:e.issuesPagination[h])||{hasNextPage:!0},prPagination:(e==null?void 0:e.prPagination[h])||{hasNextPage:!0},org:l,repo:h,repos:a},queryInfo:Oo(t),dispatch:s})),d=await Je(c,fe,1),i={issuesPagination:{},releasesPagination:{},prPagination:{}},m=[];return d.forEach(({fetchInfo:h,results:g=[]})=>{m.push(g);const{repo:f,issuesPagination:y,releasesPagination:x,prPagination:S}=h;i.issuesPagination[f]=y,i.releasesPagination[f]=x,i.prPagination[f]=S}),{fetchInfo:xt(e,i),results:m.flat(),reviewResults:[]}}catch(n){throw console.log("-=-=--getOrgData:error",n),n}},ol=(e,t=[])=>{var a;const s=e==="DESC"?0:-1,n=t.at(s),r=((a=n==null?void 0:n.node)==null?void 0:a.mergedAt)||(n==null?void 0:n.mergedAt);return new Date(r)},nl=(e,t=[])=>{const{untilDate:s="",amountOfData:n=0,sortDirection:r="DESC"}=e,a={months:n},l=at(Bs(String),ye("amountOfData")),c=at(u=>!(typeof u=="string"&&u.length>1),ye("untilDate")),d=at(u=>It(u,a),u=>u?new Date(u):new Date,ye("untilDate")),i=at(({prDate:u,sortDirection:p})=>p==="DESC"?It(u,a):_t(u,a),u=>({prDate:ol(u,t),sortDirection:u}),je("","sortDirection")),[,m]=[[l(e),""],[c(e)&&t.length>0,i(e)],[r==="DESC",d(e)],[r==="ASC",_t(new Date(s),a)],[!0,""]].find(([u])=>u)||[];return m},rl=e=>t=>{const s={};return t.forEach(n=>{const r=Wn(e,n);s[r]=(s[r]||0)+1}),s},Mo=rl(["node","author","login"]),al=e=>{const t={};return e.forEach(({author:s="",score:n=0})=>{t[s]=(t[s]||0)+n}),t},Ss=(e=[])=>{const t=new Yn,s=e.map(n=>{var l,c,d;const r=((l=n==null?void 0:n.node)==null?void 0:l.body)||"";return{author:((d=(c=n==null?void 0:n.node)==null?void 0:c.author)==null?void 0:d.login)||"",score:t.analyze(r).score}});return{sentimentScore:Mt("score")(s),sentiments:al(s)}},ll=e=>{var n,r;const t=((r=(n=e==null?void 0:e.node)==null?void 0:n.reviews)==null?void 0:r.edges)||[],s=[];return t.forEach(a=>{var c,d;const l=((d=(c=a==null?void 0:a.node)==null?void 0:c.comments)==null?void 0:d.edges)||[];s.push(...l)}),s},$o=e=>t=>{var s,n;return e.includes((n=(s=t==null?void 0:t.node)==null?void 0:s.author)==null?void 0:n.login)},cl=e=>t=>{var r,a;const s=!$o(e)(t);return!/\/apps\//.test(((a=(r=t==null?void 0:t.node)==null?void 0:r.author)==null?void 0:a.url)||"")&&s},jt=(e,t,s)=>{var g,f;const n=(f=(g=s==null?void 0:s.node)==null?void 0:g.author)==null?void 0:f.login,r=I([],["node","comments","edges"],s),a=ll(s),c={general:r,code:a,all:[...a,...r]}[e]||[],d=c.filter(cl([...t,n])),{sentimentScore:i=0,sentiments:m={}}=Ss(d),u=c.filter($o([n])),{sentimentScore:p=0}=Ss(u),h=e==="all"?"c":`${e}C`;return{[`${h}omments`]:d.length,[`${h}ommenters`]:Mo(d),[`${h}ommentSentimentScore`]:i,[`${h}ommentSentiments`]:m,[`${h}ommentsAuthor`]:u.length,[`${h}ommentAuthorSentimentScore`]:p,[`${h}ommentSentimentTotalScore`]:(p||0)+(i||0)}},il=(e,t)=>{const s=jt("general",e,t),n=jt("code",e,t),r=jt("all",e,t);return{...s,...n,...r}},dl=e=>{var r,a;const s=(((a=(r=e==null?void 0:e.node)==null?void 0:r.reviews)==null?void 0:a.edges)||[]).filter(l=>{var c;return((c=l==null?void 0:l.node)==null?void 0:c.state)==="APPROVED"}),n=Mo(s);return{approvals:s.length,approvers:n}},ml=(e=[],t)=>{var x,S,v,E,b,A;const s=I("",["node","repository","owner","login"],t),n=I("",["node","repository","name"],t),r=I("",["node","author","login"],t),a=I("",["node","author","url"],t),l=I("",["node","url"],t),c=I(0,["node","additions"],t),d=I(0,["node","deletions"],t),i=I("",["node","createdAt"],t),m=I("",["node","mergedAt"],t),u=((A=(b=(E=(v=(S=(x=t==null?void 0:t.node)==null?void 0:x.commits)==null?void 0:S.edges)==null?void 0:v[0])==null?void 0:E.node)==null?void 0:b.commit)==null?void 0:A.committedDate)||"",p=Be(new Date(u),new Date(i))?u:i,h=il(e,t),{approvals:g,approvers:f}=dl(t);return{repo:n,org:s,author:/\/apps\//.test(a)?"GIT_APP_PR":r,url:l,additions:c,deletions:d,prSize:c+d,mergedAt:m,cycleTime:pe(new Date(m),new Date(p))||1,age:pe(new Date(m),new Date(i))||1,approvals:g,approvers:f,...h}},Fo=(e,t)=>(s,n)=>{const r=s[e],a=n[e];return t==="DESC"?new Date(a).getTime()-new Date(r).getTime():new Date(r).getTime()-new Date(a).getTime()},vs=(e,t=[])=>{const{excludeIds:s=[]}=e;return t.map(r=>{var a,l,c,d,i;return((c=(l=(a=r==null?void 0:r.data)==null?void 0:a.result)==null?void 0:l.pullRequests)==null?void 0:c.edges)||((i=(d=r==null?void 0:r.data)==null?void 0:d.result)==null?void 0:i.edges)}).flat().map(r=>ml(s,r))},ul=(e="")=>({startDate:t="",endDate:s=""}={})=>{const n=new Date(e),r=t?tt(n,new Date(t)):!0,a=s?Be(n,new Date(s)):!0;return r&&a},hl=(e,t=[])=>{const s=e.usersInfo||{};return t.filter(r=>{const a=r.author,{dates:l=[]}=s[a]||{},c=ul(r.mergedAt);return l.length>0?l.some(c):!0})},ws=({excludeIds:e=[]},{reportStartDate:t="",reportEndDate:s=""},n=[])=>{const r=[];return[n.filter(l=>{const c=je("","author",l),d=["GIT_APP_PR",...e].some(p=>p===c),i=l.mergedAt,u=tt(new Date(i),new Date(t))&&Be(new Date(i),new Date(s))&&!d;return!u&&r.push(l),u}).sort(Fo("mergedAt","ASC")),r]},Uo=e=>({reportStartDate:t="",reportEndDate:s=""},n=[])=>{const r=[];return[n.filter(l=>{const c=l==null?void 0:l[e],d=tt(new Date(c),new Date(t))&&Be(new Date(c),new Date(s));return!d&&r.push(l),d}).sort(Fo(e,"ASC")),r]},pl=Uo("mergedAt"),gl=Uo("date"),fl=e=>{var l,c,d,i,m,u;const t=((l=e==null?void 0:e.node)==null?void 0:l.createdAt)||"",s=((c=e==null?void 0:e.node)==null?void 0:c.closedAt)||"",n=((d=e==null?void 0:e.node)==null?void 0:d.title)||"",r=((i=e==null?void 0:e.node)==null?void 0:i.url)||"",a=((u=(m=e==null?void 0:e.node)==null?void 0:m.labels)==null?void 0:u.edges)||[];return{mergedAt:t,createdAt:t,age:pe(new Date(s),new Date(t))||1,url:r,isBug:/bug/i.test(n)||a.some(p=>{var h;return/bug/i.test((h=p==null?void 0:p.node)==null?void 0:h.name)})}},xl=(e=[])=>{const t=e.map(a=>{var l,c,d;return((d=(c=(l=a==null?void 0:a.data)==null?void 0:l.result)==null?void 0:c.issues)==null?void 0:d.edges)||[]});return qs(t).filter(Boolean).map(a=>fl(a))},yl=e=>{var n,r,a;const t=((n=e==null?void 0:e.node)==null?void 0:n.createdAt)||"",s=((a=(r=e==null?void 0:e.node)==null?void 0:r.tag)==null?void 0:a.name)||"";return{date:t,description:s}},Rl=(e=[])=>{const t=e.map(a=>{var l,c,d;return((d=(c=(l=a==null?void 0:a.data)==null?void 0:l.result)==null?void 0:c.releases)==null?void 0:d.edges)||[]});return qs(t).filter(Boolean).map(a=>yl(a))},Go=e=>typeof e=="string"&&e.length&&e||/^-?[\d.]+$/.test(`${e}`)&&/^-?[^0]/.test(`${e}`)&&e||Array.isArray(e)&&e.length&&El(e)||e&&Object.keys(e).length&&Vo(e)||typeof e=="boolean"&&e,El=e=>{const t=[];return e.forEach(s=>{const n=Go(s);n&&t.push(n)}),t.length&&t},Vo=e=>{const t={};return Object.entries(e).forEach(([s,n])=>{const r=Go(n);r&&(t[s]=r)}),Object.keys(t).length&&t},ht={author:"",approvalsGiven:0,approvalsByUser:{},commentsGiven:0,commentsReceived:0,codeCommentsGiven:0,codeCommentsReceived:0,generalCommentsGiven:0,generalCommentsReceived:0,totalPRs:0,uniquePRsContributedTo:0,commentsByUser:{},prSizes:[],prTotalAdditions:0,prTotalDeletions:0,prAdditions:[],prDeletions:[],prAges:[],sentimentTotalScores:[],orgs:new Set,repos:new Set,sentimentTotalPositiveScore:0,sentimentAveragePositiveScore:0,sentimentPositiveCount:0,sentimentTotalNegativeScore:0,sentimentNegativeCount:0,sentimentAverageNegativeScore:0},Qe=(e,t,s,n)=>{const r={};return Object.entries(s).forEach(([a,l])=>{const c=e[a]||{},d={...ht,...c,user:a,[t]:(c[t]||0)+(n||l)};r[a]=d}),r},bs=(e,t,s,n,r,a)=>{const l={};return Object.entries(s).filter(([c])=>a&&n!==a?c===a:!0).forEach(([c,d])=>{const i=e[c]||{},m=i[t]||{},u={...m,[n]:(m[n]||0)+(r||d||0)},p={...ht,...i,author:c,[t]:u};l[c]=p}),l},Et=(e=[],t={},s="")=>{const n=new Set,r={};e.forEach(d=>{var te;const{org:i,repo:m,author:u,additions:p=0,deletions:h=0,age:g=0,approvals:f=0,approvers:y={},comments:x=0,commenters:S={},codeComments:v=0,codeCommenters:E={},generalComments:b=0,generalCommenters:A={},commentSentimentTotalScore:j=0,commentSentimentScore:N=0,commentAuthorSentimentScore:F=0}=d;n.add(u);const z=bs(r,"commentsByUser",S,u,0,s);Object.assign(r,z);const C=bs(r,"approvalsByUser",y,u,1,s);Object.assign(r,C);const U=Qe(r,"commentsGiven",S);Object.assign(r,U);const ve=Qe(r,"codeCommentsGiven",E);Object.assign(r,ve);const we=Qe(r,"generalCommentsGiven",A);Object.assign(r,we);const Ce=Qe(r,"approvalsGiven",y);Object.assign(r,Ce);const le=Qe(r,"uniquePRsApproved",y,1);Object.assign(r,le),[...new Set([...Object.keys(E),...Object.keys(A),...Object.keys(y)])].forEach(X=>{const ue=r[X]||{},ke={...ht,...ue,author:X,uniquePRsContributedTo:(ue.uniquePRsContributedTo||0)+1};r[X]=ke}),r[u]||(r[u]={...ht}),r[u].orgs.add(i),r[u].repos.add(m);const K=j||N+F;r[u].sentimentTotalScores.push(K);const V=(X="",ue=0)=>(r[u][X]||0)+ue,de=V("totalPRs",1),be=V("prTotalAge",g),me=Math.round(be/de),ce=V("prTotalAdditions",p),xe=V("prTotalDeletions",h),nt=Math.round((ce+xe)/de),Ae=K>0?K:0,Ie=K>0?1:0,Te=V("sentimentTotalPositiveScore",Ae),_e=V("sentimentPositiveCount",Ie),ze=_e?Math.round(Te/_e):0,P=K<0?K:0,k=K<0?1:0,$=V("sentimentNegativeCount",k),B=V("sentimentTotalNegativeScore",P),ee=$?Math.round(B/$):0,Q={author:u,name:((te=t[u])==null?void 0:te.name)||u,user:u,totalPRs:de,age:me,prTotalAge:be,prSize:nt,prTotalAdditions:ce,prTotalDeletions:xe,approvalsReceived:V("approvalsReceived",f),commentsReceived:V("commentsReceived",x),codeCommentsReceived:V("codeCommentsReceived",v),generalCommentsReceived:V("generalCommentsReceived",b),commentSentimentTotalScore:V("commentSentimentTotalScore",K),sentimentPositiveCount:_e,sentimentTotalPositiveScore:Te,sentimentAveragePositiveScore:ze,sentimentNegativeCount:$,sentimentTotalNegativeScore:B,sentimentAverageNegativeScore:ee,orgCount:r[u].orgs.size,repoCount:r[u].repos.size};Object.assign(r[u],Q)});const a=Object.values(r).filter(({author:d})=>n.has(d)).map((d={})=>Ks(["author","user","name","approvalsGiven","approvalsByUser","uniquePRsApproved","commentsGiven","commentsReceived","codeCommentsGiven","codeCommentsReceived","generalCommentsGiven","generalCommentsReceived","totalPRs","uniquePRsContributedTo","commentsByUser","prTotalAdditions","prTotalDeletions","orgCount","repoCount","user","approvalsReceived","prSize","prTotalAge","age","sentimentAveragePositiveScore","sentimentTotalPositiveScore","sentimentAverageNegativeScore","sentimentTotalNegativeScore"],d)),l=["commentsGiven","commentsReceived","approvalsGiven","approvalsReceived"];return a.filter(({author:d})=>Object.keys(t).length>0?t[d]:!0).sort(Se(l))},Sl=(e,t)=>{const s=(e==null?void 0:e.date)||"",n=(t==null?void 0:t.date)||"";return new Date(s).getTime()-new Date(n).getTime()},Ze=e=>(e==null?void 0:e.description)||"",vl=(e,t)=>{let s;try{s=zs.lt(Ze(e),Ze(t))?-1:1}catch{s=0}return s},Bo=(e=[])=>{const t=e.filter(a=>/^v\d+\.\d+\.\d+$/.test(Ze(a))).sort(vl),s=t.map((a,l)=>{const c=Ze(a);let d="";try{const m=l>0?Ze(t[l-1]):"v0.0.0",u=zs.diff(m,c)||"EMPTY";d={minor:"MINOR",major:"MAJOR",patch:"PATCH",premajor:"PATCH",preminor:"PATCH",prepatch:"PATCH",prerelease:"PATCH",EMPTY:"PATCH"}[u]||"PATCH"}catch{d="PATCH"}return{...a,releaseType:d||"MAJOR"}}),n=s.length>70?a=>a.releaseType!=="PATCH":()=>!0;return s.filter(n).sort((a,l)=>Sl(a,l))},qo=({usersInfo:e={},events:t=[]})=>{const s=[];Object.values(e).forEach(({name:l="",userId:c="",dates:d=[]})=>{d.forEach(i=>{const{startDate:m,endDate:u}=i;m&&s.push({date:m,description:l||c,releaseType:"MINOR"}),u&&s.push({date:u,description:l||c,releaseType:"PATCH"})})});const n=t.map(({date:l,name:c}={})=>({date:l,description:c,releaseType:"MAJOR"})),r=(l,c)=>{const d=(l==null?void 0:l.date)||"",i=(c==null?void 0:c.date)||"";return new Date(d).getTime()-new Date(i).getTime()};return[...s,...n].sort(r)},Ko=(e="")=>({type:R.STORE_TOKEN,payload:e}),wl=(e="")=>t=>t({type:R.STORE_ORG,payload:e}),bl=(e="")=>t=>t({type:R.STORE_ENT_URL,payload:e}),Al=(e="")=>t=>t({type:R.SET_TEAM_NAME,payload:e}),Qt=Hs(Jn(","),Qn(Xn),$s(Boolean)),zo=(e={})=>t=>{const s=Object.keys(e);return t({type:R.STORE_USERS_INFO,payload:e}),t({type:R.STORE_USER_IDS,payload:s})},Ho=(e="")=>t=>{const s=Qt(e);return t({type:R.STORE_EX_IDS,payload:s})},Wo=(e="")=>t=>{const n=Qt(e).map((r="")=>{const[a,l]=r.split("=");return{name:a,date:l}});return t({type:R.STORE_EVENTS,payload:n})},Tl=(e="")=>t=>t({type:R.STORE_REPO,payload:e}),Yo=e=>t=>t({type:R.STORE_AMOUNT,payload:e||""}),Qo=e=>(t,s)=>{const{fetches:n,pullRequests:r=[]}=s(),a=nl({...n,amountOfData:e||""},r);t({type:R.STORE_FORM_UNTIL_DATE,payload:a})},Xo=(e="DESC")=>t=>t({type:R.STORE_SORT,payload:e}),jl=(e={},t={})=>(s="")=>e[s]&&t[s]&&e[s]!==t[s],Dl=(e={},t={})=>(s="")=>{const n=je("",s,e),r=Qt(n),a=t[s];return a.length&&Ws(ne(a,r))},Nl=(e={},t={})=>{const s=e.userId,[n]=t.userIds,r=(e==null?void 0:e.usersInfo)||{},a=t.usersInfo||{},l=s&&n&&s!==n,c=Ws(ne(r,a));return l||c},Pl=e=>(t,s)=>{const{fetches:n={}}=s(),r=jl(e,n),a=Dl(e,n);(r("org")||r("repo")||r("teamName")||r("enterpriseAPI")||Nl(e,n)||a("excludeIds"))&&St(t)},St=e=>{e({type:R.CLEAR_ORG}),e({type:R.CLEAR_REPO}),e({type:R.CLEAR_TRIMMED_ITEMS}),e({type:R.CLEAR_PRS}),e({type:R.CLEAR_FILTERED_PRS}),e({type:R.CLEAR_REVIEWED_PRS}),e({type:R.CLEAR_REVIEWED_FILTERED_PRS}),e({type:R.CLEAR_ITEMS_DATE_RANGE}),e({type:R.CLEAR_PR_PAGINATION}),e({type:R.CLEAR_PREFETCHED_NAME}),e({type:R.CLEAR_DESC}),e({type:R.CLEAR_UNTIL_DATE}),e({type:R.CLEAR_FORM_UNTIL_DATE}),e({type:R.CLEAR_USER_IDS}),e({type:R.CLEAR_USERS_INFO}),e({type:R.CLEAR_EX_IDS}),e({type:R.CLEAR_EVENTS}),e({type:R.CLEAR_USERS_DATA}),e({type:R.CLEAR_TEAM_NAME}),e({type:R.CLEAR_RELEASES}),e({type:R.CLEAR_RELEASES_PAGINATION}),e({type:R.CLEAR_ISSUES}),e({type:R.CLEAR_FILTERED_ISSUES}),e({type:R.CLEAR_ISSUES_PAGINATION}),e({type:R.CLEAR_FETCH_ERROR}),e({type:R.CLEAR_PRE_FETCH_ERROR})},Cl=St,Il=e=>{const{fetches:{org:t="",repo:s="",token:n="",userIds:r=[]}={}}=e,a=r.length<1,l=[a&&!t&&"Organization",a&&!s&&"Repository",!n&&"GitHib token",!t&&!s&&a&&"GitHub Ids"].filter(Boolean),c=i=>{const m=l.length-1;return[i===0?"Missing ":"",i===m?" and ":"",i>0?", ":""].find(p=>p.length>0)||""};return l.reduce((i,m,u)=>i+c(u)+m,"")},_l=e=>{const{fetches:{org:t="",repo:s="",token:n="",userIds:r=[]}={}}=e,a=[n];t&&a.push(t),s&&a.push(s);const l=a.every(m=>typeof m=="string"&&m.length>0),d=(r.length?[r]:[]).every(m=>m.length>0),i=l&&d;return{isValid:i,error:i?null:{level:"error",message:Il(e)}}},kl=(e="",t="")=>(s="mergedAt",n=[])=>{const r=[],a=[],l=[],c=(d=[])=>d.forEach(i=>{const m=new Date(i[s]);Be(m,new Date(e))?r.push(i):tt(m,new Date(t))?l.push(i):a.push(i)});return n.forEach(c),[r,a,l]},Ol=(e="",t="")=>async(s,n)=>{const{fetches:{usersInfo:r={}}={},trimmedItems:{trimmedPRs:{trimmedLeftPrs:a=[],trimmedRightPrs:l=[]}={},trimmedReviewedPRs:{trimmedLeftReviewedPrs:c=[],trimmedRightReviewedPrs:d=[]}={},trimmedReleases:{trimmedLeftReleases:i=[],trimmedRightReleases:m=[]}={}}={},pullRequests:u=[],reviewedPullRequests:p=[],releases:h=[]}=n(),g=kl(e,t),f=[a,u,l],[y,x,S]=g("mergedAt",f);s({type:R.ADD_PRS,payload:x});const v=[c,p,d],[E,b,A]=g("mergedAt",v);s({type:R.ADD_REVIEWED_PRS,payload:b}),s({type:R.ADD_USERS_DATA,payload:Et(x.concat(b),r)});const j=[i,h,m],[N,F,z]=g("date",j);s({type:R.ADD_RELEASES,payload:F}),s({type:R.ADD_TRIMMED_ITEMS,payload:{trimmedPRs:{trimmedLeftPrs:y,trimmedRightPrs:S},trimmedReviewedPRs:{trimmedLeftReviewedPrs:E,trimmedRightReviewedPrs:A},trimmedReleases:{trimmedLeftReleases:N,trimmedRightReleases:z}}})},Jo=(e=[])=>{const{mergedAt:t=""}=e.at(0)||{mergedAt:""},{mergedAt:s=""}=e.at(-1)||{mergedAt:""};return[t,s]},Zo=()=>async(e,t)=>{var r,a,l,c,d,i;const s=t(),{isValid:n}=_l(s);n&&e({type:R.CLEAR_FETCH_ERROR}),n&&e({type:R.FETCH_START});try{if(!n)throw new Error("Not a valid request");const{fetches:m,filteredPRs:u=[],pullRequests:p=[],filteredReviewedPRs:h=[],reviewedPullRequests:g=[],issues:f=[],filteredIssues:y=[],formUntilDate:x="",releases:S=[],filteredReleases:v=[]}=t(),{usersInfo:E}=m,b=(m==null?void 0:m.userIds)||[],A=(m==null?void 0:m.repo)||"",j=(m==null?void 0:m.org)||"",N=x,F=b.length===1&&"user"||b.length>1&&"team"||!A&&j&&"org"||"repo",z={user:()=>tl({fetchInfo:m,untilDate:N,dispatch:e}),team:()=>el({fetchInfo:m,untilDate:N,dispatch:e}),repo:()=>fe({fetchInfo:m,queryInfo:Oo(N),dispatch:e}),org:()=>sl({fetchInfo:m,untilDate:N,dispatch:e})},{fetchInfo:C={},results:U=[],reviewResults:ve=[]}=await z[F](),we=vs(m,U),Ce=hl(m,we),le=p.concat(u).concat(Ce),Z=(a=(r=p.at(-1))==null?void 0:r.mergedAt)==null?void 0:a.slice(0,10),K=(c=(l=p.at(0))==null?void 0:l.mergedAt)==null?void 0:c.slice(0,10),V=(i=(d=we.at(-1))==null?void 0:d.mergedAt)==null?void 0:i.slice(0,10),de=new Date().toISOString().slice(0,10),{sortDirection:be="DESC"}=m,me=be==="DESC"?{reportStartDate:N||V,reportEndDate:Z||de}:{reportStartDate:K,reportEndDate:N||de},[ce,xe]=ws(m,me,le);e({type:R.ADD_PRS,payload:ce}),e({type:R.ADD_FILTERED_PRS,payload:xe});const Ae=vs(m,ve).filter(({author:Q="",mergedAt:te=""})=>te&&Q!==b[0]),Ie=g.concat(h).concat(Ae),[Te=[],_e=[]]=ws(m,me,Ie);e({type:R.ADD_REVIEWED_PRS,payload:Te}),e({type:R.ADD_REVIEWED_FILTERED_PRS,payload:_e});const ze=Jo(ce);if(e({type:R.ADD_ITEMS_DATE_RANGE,payload:ze}),e({type:R.ADD_USERS_DATA,payload:Et(ce.concat(Te),E)}),F==="repo"){const Q=Rl(U),te=Bo([...v,...S,...Q]),[X,ue]=gl(me,te);e({type:R.ADD_RELEASES,payload:X}),e({type:R.ADD_FILTERED_RELEASES,payload:ue})}const P=xl(U),k=f.concat(y).concat(P),[$,B]=pl(me,k);e({type:R.ADD_ISSUES,payload:$}),e({type:R.ADD_FILTERED_ISSUES,payload:B}),e({type:R.STORE_UNTIL_DATE,payload:x});const ee=(Q={})=>{const te=Ks(["newest","oldest"]),X={};return Object.entries(Q).filter(([,ke])=>Bs(Object,ke)&&Zn(te(ke)).length>0).forEach(([ke,xn])=>{X[ke]=te(xn)}),{...te(Q),...X}};e({type:R.SET_PR_PAGINATION,payload:ee(C.prPagination)}),e({type:R.SET_PR_REVIEWED_PAGINATION,payload:ee(C.usersReviewsPagination)}),e({type:R.SET_ISSUES_PAGINATION,payload:ee(C.issuesPagination)}),e({type:R.SET_RELEASES_PAGINATION,payload:ee(C.releasesPagination)}),e({type:R.FETCH_END})}catch(m){const u=m;e({type:R.FETCH_ERROR,payload:{level:"error",message:u.message||"Unknown error"}}),e({type:R.FETCH_END})}},Ll=(e,t)=>{const{fetches:s,preFetchedName:n="",reportDescription:r="",pullRequests:a=[],filteredPRs:l=[],reviewedPullRequests:c=[],filteredReviewedPRs:d=[],usersData:i=[],issues:m=[],filteredIssues:u=[],releases:p=[],filteredReleases:h=[]}=e,{teamName:g="",userIds:f=[],usersInfo:y={},excludeIds:x=[],events:S=[],repo:v="",org:E=""}=s;St(t),[["token","STORE_TOKEN",""],["org","STORE_ORG",""],["repo","STORE_REPO",""],["enterpriseAPI","STORE_ENT_URL",""],["prPagination","SET_PR_PAGINATION",{}],["usersReviewsPagination","SET_PR_REVIEWED_PAGINATION",{}],["releasesPagination","SET_RELEASES_PAGINATION",{}],["issuesPagination","SET_ISSUES_PAGINATION",{}]].forEach(([N,F="",z])=>{t({type:R[F],payload:(s==null?void 0:s[N])||z})}),t({type:R.PREFETCHED_NAME,payload:n}),t({type:R.STORE_SORT,payload:"ASC"}),t({type:R.STORE_AMOUNT,payload:"all"}),t({type:R.SET_DESC,payload:r}),t({type:R.SET_TEAM_NAME,payload:g}),t({type:R.STORE_USER_IDS,payload:f}),t({type:R.STORE_USERS_INFO,payload:y}),t({type:R.STORE_EX_IDS,payload:x}),t({type:R.STORE_EVENTS,payload:S});const A=Jo(a);t({type:R.ADD_ITEMS_DATE_RANGE,payload:A}),t({type:R.ADD_PRS,payload:a}),t({type:R.ADD_FILTERED_PRS,payload:l}),t({type:R.ADD_REVIEWED_PRS,payload:c}),t({type:R.ADD_REVIEWED_FILTERED_PRS,payload:d}),t({type:R.ADD_USERS_DATA,payload:i.length?i:Et(a.concat(c),y)});const j=m.sort(({mergedAt:N=""},{mergedAt:F=""})=>new Date(N).getTime()-new Date(F).getTime());if(t({type:R.ADD_ISSUES,payload:j}),t({type:R.ADD_FILTERED_ISSUES,payload:u}),v&&E){const N=Bo(p);t({type:R.ADD_RELEASES,payload:N}),t({type:R.ADD_FILTERED_RELEASES,payload:h})}t({type:R.FETCH_END})},Ml=e=>new Promise((t,s)=>{e.json().then(n=>e.status===200?t(n):s(new Error(`Error status code ${e.status}`))).catch(n=>{const r=n;console.log("-=-=--parseJSON error",r),r.status=e.status,s(r)})}),en=({fileName:e="",externalURL:t="",localData:s}={})=>async n=>{St(n),n({type:R.CLEAR_PRE_FETCH_ERROR}),n({type:R.FETCH_START}),n({type:R.FETCH_STATUS,payload:{savedReportName:e}});const r=t?`${t}${e}.json`:`https://n07734.github.io/community-health/data/${e}.json`;try{const a=s||await fetch(r).then(Ml);Ll(a,n)}catch(a){const l=a;console.log("-=-=--api data error",l,l.status);const c=l.status!==200?`Error status code ${l.status} loading ${e}`:`${l.message} loading ${e}`;n({type:R.PRE_FETCH_ERROR,payload:{level:"error",message:c||"Unknown error"}}),n({type:R.FETCH_END})}},tn=(e,t)=>{const s=t(),{repo:n,org:r,teamName:a,userIds:l=[]}=(s==null?void 0:s.fetches)||{},c=(l==null?void 0:l.length)===1?l[0]:"",d=a||c||`${r}${n?`-${n}`:""}`,m=Hs(ns("HOW_TO","1: Add this file to ./src/myReports 2: Run the app. If you want multiple reports you will need to edit ./src/myReports/myReportsConfig.js."),er(["fetches","pullRequests","filteredPRs","reviewedPullRequests","filteredReviewedPRs","userData","issues","filteredIssues","releases","teamName"]),Oe(["fetches","token"]),Oe(["sortDirection"]),Oe(["fetches","amountOfData"]),Oe(["fetches","prPagination","hasNextPage"]),Oe(["fetches","issuesPagination","hasNextPage"]),Oe(["fetches","releasesPagination","hasNextPage"]),ns("preFetchedName",d),Vo)(s),u=JSON.stringify(m,null,2),p=new Blob([u],{type:"application/json"});return{href:URL.createObjectURL(p),download:`${d}.json`}},$l=(e="")=>(t,s)=>{const{fetches:{sortDirection:n=""}={}}=s();n!==e&&t({type:R.CLEAR_UNTIL_DATE})&&t({type:R.CLEAR_FORM_UNTIL_DATE})},Fl=({fetching:e,pullRequests:t,getDownloadInfo:s})=>{const n=s();return!e&&t.length>0?o.jsx("p",{children:o.jsx("a",{className:"text-primary",...n,children:"Download report data"})}):null},Ul=e=>({fetching:e.fetching,pullRequests:e.pullRequests}),Gl=e=>({getDownloadInfo:()=>e(tn)}),sn=M(Ul,Gl)(Fl),Vl=e=>{const{setValues:t,getData:s,fetches:n,fetching:r}=e,{repo:a,org:l,excludeIds:c=[],userIds:d=[],usersInfo:i={},events:m=[]}=n,u=d.length>1&&"team"||d.length===1&&"user"||!a&&l&&"org"||"repo",p=m.map(({name:C,date:U})=>`${C}=${U}`).join(", "),h=c.join(", "),[g,f]=w.useState({sortDirection:n.sortDirection,amountOfData:n.amountOfData||"all",token:n.token,...p&&{events:p},...h&&{excludeIds:h},...n.org&&{org:n.org},...n.repo&&{repo:n.repo}}),[y,x]=w.useState({}),[S,v]=w.useState(!1),E=(C,U)=>f({...g,[C]:U}),b=(C={})=>{const U={...g,...C};f(U)},A={inputError:y,setInputError:x,formInfo:g,setValue:E},j=C=>{C.preventDefault();const{isValid:U,validationErrors:ve}=bo(g);x(ve),U&&!r&&t(g),U&&!r&&s(),U&&v(!0)},z=[...{repo:["org","repo"],org:["org"],team:["teamName"],user:["userId","name"]}[u],"enterpriseAPI"];return o.jsx(ie,{className:"mb-0 col-span-full",title:"",expandText:"here",intro:"Top up this report's data",expandQaId:"expand-prefetch-form",children:o.jsxs("div",{className:"mb-3",children:[o.jsxs("form",{onSubmit:j,children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 max-mm:grid-cols-1 items-end mb-4",children:[o.jsxs("div",{className:"col-span-full",children:[z.filter(C=>$t(n,C)).map(C=>o.jsxs("p",{children:[vo[C],": ",o.jsx("b",{children:$t(n,C)})]},C)),u==="team"&&o.jsx(Lo,{usersInfo:i,setParentValues:b})]}),o.jsx(H,{type:"events",className:"col-span-full",...A}),o.jsx("p",{className:"col-span-full",children:"Key events can impact the data e.g. starting or launching a new feature or major version. These events can help give more context while viewing the data. e.g. ProjectA=2013-12-01."}),o.jsx(H,{type:"excludeIds",...A}),o.jsx(H,{type:"token",...A}),o.jsxs("p",{className:"col-span-full",children:["To create a token go to your GitHub ",o.jsx("a",{className:"text-primary",href:"https://github.com/settings/tokens",children:"tokens"})," page, click on 'generate new token', choose the settings 'repo' (all), 'read:org' and 'user' then click 'Generate token'."]}),o.jsxs(Le,{onValueChange:C=>E("sortDirection",C),value:g.sortDirection,children:[o.jsx(De,{className:"w-auto",children:o.jsx($e,{children:g.sortDirection==="DESC"?"Prepend data":"Append data"})}),o.jsx(Ne,{children:o.jsxs(Me,{children:[o.jsx(J,{value:"DESC",children:"Prepend data"}),o.jsx(J,{value:"ASC",children:"Append data"})]})})]}),o.jsx(Eo,{setValue:E,amountOfData:g.amountOfData})]}),o.jsx(Ro,{qaId:"prefetch-top-up"})]}),S&&o.jsx(sn,{})]})})},Bl=e=>({fetches:e.fetches,fetching:e.fetching,error:e.error,pullRequests:e.pullRequests}),ql=e=>({setValues:t=>{const{token:s,amountOfData:n,sortDirection:r,excludeIds:a,events:l,userId:c,usersInfo:d={},name:i}=t;c&&i&&(d[c]={userId:c,name:i}),e($l(r)),e(Ko(s)),e(Ho(a)),e(Yo(n)),e(Xo(r)),e(Qo(n)),e(Wo(l)),Object.keys(d).length>0&&e(zo(d))},getData:()=>e(Zo()),getDownloadInfo:()=>e(tn)}),Kl=M(Bl,ql)(Vl),on=w.forwardRef(({className:e,...t},s)=>o.jsxs(Ys,{ref:s,className:D("relative flex w-full touch-none select-none items-center",e),...t,children:[o.jsx(tr,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:o.jsx(sr,{className:"absolute h-full bg-primary"})}),o.jsx(rs,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),o.jsx(rs,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));on.displayName=Ys.displayName;const zl=({pullRequests:e=[],itemsDateRange:t=["",""],issues:s=[],usersInfo:n,trim:r})=>{const[a,l]=t,c=a?pe(new Date(l),new Date(a)):0,d=c/100,[[i,m],u]=w.useState([0,100]),p=Math.floor(d*i),h=Math.ceil(d*m),g=a?as(_t(new Date(a),{days:p}),{representation:"date"}):"",f=l?as(It(new Date(l),{days:c-h}),{representation:"date"}):"",y=b=>{Array.isArray(b)&&b.length===2&&u(b)},x=()=>{r(g,f)},S=Object.keys(n).length,v=S>1?`by ${S} contributors`:"",E=s.length>0?`and ${s.length} issues`:"";return e.length>0&&g&&o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"w-full",children:[o.jsxs("b",{children:["Showing ",e.length," PRs ",v," ",E]}),". Drag the points to change the date range of the report."]}),o.jsxs("div",{className:"w-full flex justify-between",children:[o.jsx("p",{className:"text-2xl mb-1",children:Nt(new Date(g),"do MMM yy")}),o.jsx("p",{className:"text-2xl mb-1",children:Nt(new Date(f),"do MMM yy")})]}),o.jsx(on,{value:[i,m],onValueChange:y,onValueCommit:x,className:"pb-08"})]})},Hl=e=>({pullRequests:e.pullRequests,issues:e.issues,itemsDateRange:e.itemsDateRange,usersInfo:e.fetches.usersInfo}),Wl=e=>({trim:(t,s)=>e(Ol(t,s))}),Yl=M(Hl,Wl)(zl),Ql=e=>{const{repo:t="",org:s="",teamName:n="",usersInfo:r={},userIds:a=[],colorA:l="",colorB:c=""}=e,{userId:d="",name:i=""}=r[a[0]]||{},m=s||n||i||d,u=!n&&i&&d||t&&s!==t&&t||"",p=u?l:c;return o.jsxs(o.Fragment,{children:[o.jsx("span",{style:{color:p},children:m}),u&&o.jsxs(o.Fragment,{children:["/",o.jsx("span",{style:{color:c},children:u})]})]})},Xl=({fetches:e,preFetchedName:t="",pullRequests:s=[],issues:n=[],userIds:r=[],reportDescription:a=""})=>{const{theme:l}=q(),c=L[l].secondary,d=L[l].primary,{showNames:i,toggleShowNames:m}=Re();return(s.length>0||n.length>0)&&o.jsxs(Y,{children:[o.jsx("h2",{"data-qa-id":"report-title",className:"truncate",children:o.jsx(Ql,{...e,colorA:c,colorB:d})}),a&&o.jsx("p",{children:a}),r.length>1&&o.jsxs("p",{children:["Team's GitHub IDs: ",r.join(", ")]}),o.jsxs("div",{className:"flex items-center space-x-2 pb-08",children:[o.jsx(yo,{id:"spartacus-mode",onCheckedChange:m,checked:!i,name:"checkedA",className:"dark:data-[state=unchecked]:bg-white"}),o.jsx(et,{htmlFor:"spartacus-mode",children:i?"Who is Spartacus?":"Spartacus mode can help look for trends."})]}),o.jsx(Yl,{}),t.length>0&&o.jsx(Kl,{})]})},Jl=e=>({fetches:e.fetches,preFetchedName:e.preFetchedName,pullRequests:e.pullRequests,issues:e.issues,userIds:e.fetches.userIds,reportDescription:e.reportDescription}),vt=M(Jl)(Xl),Zl=({chunkyData:e=[],pullRequests:t=[],releases:s=[],userIds:n=[],usersInfo:r={}})=>{const{theme:a}=q(),l=L[a].secondary,c=L[a].primary,d=L[a].tertiary,{showNames:i}=Re(),m=n.length>0,u=m?po({pullRequests:t,showNames:i,usersInfo:r}):[];return t.length>0&&o.jsxs(Y,{children:[o.jsx(ie,{title:"Pull Request trends",children:s.length>1&&o.jsx("div",{children:o.jsx("p",{children:"Vertical lines are releases: Green is a Major release, solid purple is Minor and dotted purple is Patch or Alpha"})})}),o.jsxs(Ee,{children:[m&&o.jsx(o.Fragment,{children:o.jsx(W,{title:"PRs by author",markers:s,showLegends:!0,data:u,tableData:e,tableKeys:["author","repo"]})}),o.jsx(W,{markers:s,data:[{lines:[{label:"PRs over time",color:l,dataKey:"url",groupMath:"count",data:t}],xAxis:"left"}],tableData:e,tableKeys:["author"]}),o.jsx(W,{markers:s,data:[{lines:[{label:"Comments",color:l,dataKey:"comments",data:t},{label:"Approvals",color:c,dataKey:"approvals",data:t}],xAxis:"left"},{lines:[{label:"PR Size",color:d,dataKey:"prSize",data:t}],xAxis:"right"}],tableData:e,tableKeys:["comments","approvals","prSize","author"]}),o.jsx(W,{markers:s,data:[{lines:[{label:"Age (days)",color:c,dataKey:"age",data:t}],xAxis:"left"},{lines:[{label:"PR Size",color:d,dataKey:"prSize",data:t}],xAxis:"right"}],tableData:e,tableKeys:["age","prSize","author"]})]})]})},ec=e=>({releases:e.releases,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),nn=M(ec)(Zl),tc=({pullRequests:e=[],events:t=[]})=>{const s={},n=e.map((l,c)=>(s[l.repo]=(s[l.repo]||0)+1,{...l,id:`${c}-${l.repo}-${l.number}`,[`repo-${l.repo}`]:1,commentSentimentTotalScore:(l.commentSentimentScore||0)+(l.commentAuthorSentimentScore||0)})),r=Pe(n),a=qo({events:t});return o.jsxs(o.Fragment,{children:[o.jsx(vt,{}),o.jsx(Bt,{pullRequests:n,chunkyData:r,releases:a,allRepos:s}),o.jsx(yt,{pullRequests:n,chunkyData:r,releases:a,tableOpenedByDefault:!0}),o.jsx(nn,{pullRequests:n,chunkyData:r})]})},sc=e=>({pullRequests:e.pullRequests,events:e.fetches.events}),oc=M(sc)(tc),nc=(e=[])=>e.map(t=>({mergedAt:t.mergedAt,...t.isBug?{bug:1}:{issue:1}})),rc=({issues:e=[],releases:t=[]})=>{const{theme:s}=q(),n=L[s].secondary,r=L[s].primary,a=nc(e),l=Pe(e);return a&&a.length>0&&o.jsxs(Y,{children:[o.jsx(ie,{title:"Feature and bug trends"}),o.jsx(Ee,{children:o.jsx(W,{markers:t,data:[{lines:[{label:"Issues",color:n,filterForKey:!0,dataKey:"issue",groupMath:"count",data:a},{label:"Bugs*",color:r,filterForKey:!0,dataKey:"bug",groupMath:"count",data:a}],xAxis:"left"}],tableKeys:["isBug"],tableData:l})}),o.jsx("p",{className:"w-full text-center",children:"*Bugs in this graph are issues that have a title or a label that contains the word 'bug'"})]})},ac=e=>({issues:e.issues,releases:e.releases}),Xt=M(ac)(rc),lc=({chunkyData:e=[],pullRequests:t=[],releases:s=[],userIds:n=[]})=>{const{showNames:r}=Re(),a=n.map((l,c)=>{const d=r?l:`Spartacus${Array(c).fill(" ").join("")}`;return[{label:`To ${d}`,color:_[c%_.length],filterForKey:!0,dataKey:`${l}-commentsSentimentScore`,data:t},{label:`From ${d}`,color:_[c%_.length],filterForKey:!0,dataKey:`${l}-commentAuthorSentimentScore`,data:t}]}).flat();return t.length>0&&o.jsx(o.Fragment,{children:o.jsxs(Y,{children:[o.jsx(ie,{title:"Sentiment analysis*",children:o.jsxs("div",{children:[o.jsx("p",{children:"*Adding this is an experiment to see if it can provide useful insights."}),o.jsxs("p",{children:["Uses npm package ",o.jsx("a",{className:"text-primary",href:"https://github.com/thisandagain/sentiment",children:"sentiment"})," which uses AFINN-165 word list and Emoji ranking to perform sentiment analysis."]})]})}),o.jsxs(Ee,{children:[o.jsx(W,{markers:s,showLegends:!0,title:"Sentiment in PRs between team and reviewers",data:[{lines:[{label:"To team",color:_[0],dataKey:"commentSentimentScore",data:t},{label:"From team",color:_[2],dataKey:"commentAuthorSentimentScore",data:t}],xAxis:"left"}],tableKeys:["commentSentimentScore","commentAuthorSentimentScore","author"],tableData:e}),n.length>0&&o.jsx(o.Fragment,{children:o.jsx(W,{showLegends:!0,title:"Sentiment in PRs between authors and reviewers",data:[{lines:a,xAxis:"left"}],tableKeys:["commentSentimentScore","commentAuthorSentimentScore","author"],tableData:e})})]})]})})},cc=e=>({releases:e.releases,userIds:e.fetches.userIds}),ic=M(cc)(lc),dc=e=>({index:t,data:s})=>{const n=e.find(a=>a.area===t),r=s.map(({id:a,color:l})=>[o.jsx(nr,{color:l},a),a,n[`${a}Original`]]);return o.jsx(Ms,{title:o.jsx("strong",{children:t}),rows:r})},mc=({title:e="",showTitle:t=!0,data:s=[],keys:n=[],colors:r=[],width:a=410,height:l=300})=>{const{theme:c}=q(),d=ot(c),i=L[c].secondary,m=L[c].primary,u=r.length>0?r:[i,m],{showNumbers:p}=st();return fo(s,n)&&o.jsxs("div",{children:[t&&o.jsx(Ue,{className:"text-center",items:[{label:e,color:m}]}),o.jsx(or,{width:a,height:l,margin:{top:0,bottom:0,right:100,left:100},dotSize:8,dotBorderColor:d.dotColor,dotBorderWidth:2,colors:u,gridShape:"linear",enableDotLabel:!1,gridLabelOffset:10,gridLevels:3,animate:!1,indexBy:"area",keys:n,data:s,maxValue:100,theme:d,sliceTooltip:dc(s),isInteractive:p})]})},uc=(e,t)=>{const s={age:0,approvalsGiven:0,approvalsReceived:0,codeCommentsGiven:0,codeCommentsReceived:0,commentsGiven:0,commentsReceived:0,generalCommentsGiven:0,generalCommentsReceived:0,prSize:0,totalPRs:0,uniquePRsApproved:0,uniquePRsContributedTo:0},n=["commentsGiven","commentsReceived","uniquePRsApproved","totalPRs"],a=e.filter(p=>n.some(f=>p[f]>1)).sort(Se(n)),l=Math.ceil(a.length/100*10),c=l>10?a.slice(0,l):a,d={};c.filter(p=>!t).forEach(p=>{Object.entries(p).filter(([,h])=>!Array.isArray(h)&&/^\d+$/.test(h)&&h>0).forEach(([h,g])=>{const f=d[h]||0;d[h]=+g+f})});const i=c.length,m={...s,user:"Peers",userCount:i};Object.entries(d).forEach(([p,h])=>{m[p]=Math.round(h/i)}),e.find(p=>p.author===t);const u=s;return e.forEach(p=>{Object.entries(p).filter(([,h])=>!Array.isArray(h)&&/^\d+$/.test(h)&&h>0).forEach(([h,g])=>{const f=u[h]||0,y=+g;u[h]=f>y?f:y})}),{averagedData:m,maxValues:u,users:e,user:{}}},hc=({maxValues:e={},users:t=[]},s)=>{const n=["commentsGiven","commentsReceived","uniquePRsApproved","totalPRs"],r=s?t:t.sort(Se(n)).slice(0,6),a=[{area:"Comments received",dataKey:"commentsReceived"},{area:"Comments given",dataKey:"commentsGiven"},{area:"Approved PRs",dataKey:"uniquePRsApproved"},{area:"PR count",dataKey:"totalPRs"},{area:"PR size",dataKey:"prSize"}];return r.map(c=>{const d=a.map(({area:i,dataKey:m})=>{const u=c[m]||0,p=e[m]||0;return{area:i,value:u&&p?u/p*100:0,valueOriginal:u}});return{title:c.author,data:d,keys:["value"]}})},pc=({usersData:e=[],userIds:t=[],usersInfo:s={}})=>{const{theme:n}=q(),{togglePvPPage:r,setUserPage:a}=qe(),l=L[n].secondary,c=L[n].primary,{showNames:d}=Re(),i=uc(e),m=hc(i,t.length>0),u=t.length>0,p=u?"Team members":"Top contributors";return m.length>0&&o.jsxs(Y,{className:"flex flex-wrap flex-row justify-center",children:[o.jsx(ie,{title:p}),m.map((h,g)=>{var x;const f=h.title,y=((x=s[f])==null?void 0:x.name)||f;return o.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[o.jsx(mc,{showTitle:!1,height:240,colors:[(g+1)%2===0?l:c],...h}),o.jsx(O,{variant:(g+1)%2===0?"secondary":void 0,onClick:S=>{S.preventDefault(),a(f),window&&window.scrollTo(0,0)},children:d?y:"Spartacus"})]},g)}),u&&o.jsx(O,{className:"w-full mb-4",color:"primary",onClick:h=>{h.preventDefault(),r(),window&&window.scrollTo(0,0)},children:"PvP arena"})]})},gc=e=>({usersData:e.usersData,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),rn=M(gc)(pc),fc=({usersData:e=[]})=>{const{showNames:t}=Re(),{togglePvPPage:s,setUserPage:n}=qe();return e.length>0&&o.jsx(o.Fragment,{children:o.jsxs(Y,{className:"justify-between",children:[o.jsx(O,{className:"w-full mb-4",color:"primary",onClick:r=>{r.preventDefault(),s(),window&&window.scrollTo(0,0)},children:"PvP arena"}),o.jsx("h3",{className:"w-full",children:"User pages"}),o.jsx("div",{className:"flex flex-wrap justify-between gap-2",children:e.map(({author:r,user:a},l)=>o.jsx(O,{className:"flex-grow",variant:"secondary",onClick:c=>{c.preventDefault(),n(a),window&&window.scrollTo(0,0)},children:t?r:"Spartacus"},`${l}`))})]})})},xc=e=>({usersData:e.usersData}),yc=M(xc)(fc),Rc=({pullRequests:e=[],releases:t=[]})=>{const s=e.map((r,a)=>({...r,id:`${a}-${r.repo}-${r.number}`,commentSentimentTotalScore:(r.commentSentimentScore||0)+(r.commentAuthorSentimentScore||0),[`${r.author}-commentsSentimentScore`]:r.commentSentimentScore,[`${r.author}-commentAuthorSentimentScore`]:r.commentAuthorSentimentScore})),n=Pe(s);return o.jsxs(o.Fragment,{children:[o.jsx(vt,{}),o.jsx(Bt,{pullRequests:s,chunkyData:n}),o.jsx(yt,{pullRequests:s,chunkyData:n,releases:t,tableOpenedByDefault:!0}),o.jsx(ic,{pullRequests:s,chunkyData:n}),o.jsx(nn,{pullRequests:s,chunkyData:n}),o.jsx(Xt,{}),o.jsx(rn,{}),o.jsx(yc,{})]})},Ec=e=>({pullRequests:e.pullRequests,releases:e.releases}),Sc=M(Ec)(Rc),As=({player:e="",className:t="",otherPlayer:s,setPlayerId:n,players:r=[]})=>o.jsxs(Le,{value:e,onValueChange:a=>n(a),children:[o.jsx(De,{className:`text-3xl w-auto ${t}`,children:o.jsx($e,{children:e})}),o.jsx(Ne,{children:o.jsx(Me,{children:r.filter(({author:a})=>a!==s).map(({author:a,name:l})=>o.jsx(J,{value:a,children:l},a))})})]}),an=({player1:e,player2:t,setPlayer1Id:s=()=>({}),setPlayer2Id:n=()=>({}),players:r=[]})=>{const{theme:a}=q(),l=L[a].secondary,c=L[a].primary,i=[{title:"Total Merged",id:"totalPRs"},{title:"Total approved",id:"uniquePRsApproved"},{title:"Comments given",id:"commentsGiven"},{title:"Comments received",id:"commentsReceived"},{title:"Average positive sentiment",id:"sentimentAveragePositiveScore"},{title:"Average negative sentiment",id:"sentimentAverageNegativeScore"},{title:"Average size",id:"prSize"},{title:"Total additions",id:"prTotalAdditions"},{title:"Total deletions",id:"prTotalDeletions"},{title:"Average days open",id:"age"},{title:"Orgs contributed to",id:"orgCount"},{title:"Repos contributed to",id:"repoCount"}].filter(({id:m})=>Number.isInteger(e[m])&&Number.isInteger(t[m])&&(!["orgCount","repoCount"].includes(m)||["orgCount","repoCount"].includes(m)&&e[m]!==1&&t[m]!==1)).map(m=>{const u=m.id,p=e[u],h=t[u],g=l,f=c,y=Math.ceil(100*p/(p+h)),x=100-y;return{...m,lValue:p,lColor:g,lPercent:y,rValue:h,rColor:f,rPercent:x}});return o.jsxs("div",{className:"w-full flex flex-col items-center basis-full",children:[o.jsx("div",{className:"w-full flex flex-nowrap justify-between mb-4 max-w-mw",children:r.length>0?o.jsxs(o.Fragment,{children:[o.jsx(As,{player:e.author,className:"text-secondary",otherPlayer:t.author,setPlayerId:s,players:r}),o.jsx(As,{player:t.author,className:"text-primary",otherPlayer:e.author,setPlayerId:n,players:r})]}):o.jsxs(o.Fragment,{children:[o.jsx("h3",{style:{color:l,margin:0},children:e.name}),o.jsx("h3",{style:{color:c,margin:0},children:t.name})]})}),i.map((m,u)=>o.jsxs("div",{className:"w-full relative max-w-mw mb-2",children:[o.jsx("p",{className:"z-[1] absolute w-full top-2 text-center m-0",children:m.title}),o.jsxs("div",{className:"w-full flex flex-nowrap content-stretch justify-between",children:[o.jsx("div",{className:"relative h-9",style:{width:`${m.lPercent}%`,backgroundColor:`${m.lColor}`},children:o.jsx("p",{className:"z-[1] min-w-3 w-full absolute top-2 left-2 text-left m-0",children:m.lValue})}),o.jsx("div",{className:"relative h-9",style:{width:`${m.rPercent}%`,backgroundColor:`${m.rColor}`},children:o.jsx("p",{className:"z-[1] min-w-3 w-full absolute top-2 right-2 text-right m-0",children:m.rValue})})]},m.id)]},`${m.id}${u}`))]})},vc=(e,t)=>{const s={age:0,approvalsGiven:0,approvalsReceived:0,codeCommentsGiven:0,codeCommentsReceived:0,commentsGiven:0,commentsReceived:0,generalCommentsGiven:0,generalCommentsReceived:0,prSize:0,prTotalAdditions:0,prTotalDeletions:0,totalPRs:0,uniquePRsApproved:0,uniquePRsContributedTo:0,sentimentAveragePositiveScore:0,sentimentAverageNegativeScore:0,orgCount:0,repoCount:0},n=["commentsGiven","commentsReceived","approvalsGiven","approvalsReceived"],a=e.filter(h=>{const g=h.author!==t,f=n.some(y=>h[y]>1);return g&&f}).sort(Se(n)),l=Math.ceil(a.length/100*10),c=l>10?a.slice(0,l):a,d={};c.filter(h=>h.author!==t).forEach(h=>{Object.entries(h).filter(([,g])=>!Array.isArray(g)&&/^\d+$/.test(g)&&g>0).forEach(([g,f])=>{const y=d[g]||0;d[g]=+f+y})});const i=c.length,m={...s};Object.entries(d).forEach(([h,g])=>{m[h]=Math.round(g/i)});const u={...m,user:"Peers",name:"Peers"},p=e.find(h=>h.author===t)||{approvalsGivenByTeam:{}};return[{...p,user:p.author,name:p.name||p.author},u,i]},wc=(e=[],t=[],s,n,r)=>{const a=[],l=[],c=new Set;e.forEach(u=>{const{author:p,repo:h}=u;c.add(h),u[`repo-${h}`]=1,p===s?l.push(u):a.push(u)});const d=[];Array.from(c).forEach((u,p)=>{d.push({label:u,color:_[p%_.length],groupMath:"count",filterForKey:!0,dataKey:`repo-${u}`,data:l})});const m=Pe(l);return[{markers:t,showLegends:!0,title:"Sentiments in PR",data:[{lines:[{label:`${s} received`,color:_[2],dataKey:"commentSentimentScore",data:l},{label:`${s} given`,color:_[1],dataKey:"commentAuthorSentimentScore",data:l},{label:"Peer received",color:_[4],dataKey:"commentSentimentScore",data:a},{label:"Peer given",color:_[5],dataKey:"commentAuthorSentimentScore",data:a}],xAxis:"left"}],tableKeys:["commentSentimentScore","commentAuthorSentimentScore"],tableData:m},{markers:t,data:[{lines:[{label:"User PR size",color:n,dataKey:"prSize",data:l},{label:"Peer PR size",color:r,dataKey:"prSize",data:a}],xAxis:"left"}],tableKeys:["prSize"],tableData:m},{markers:t,data:[{lines:[{label:"User PR age",color:n,dataKey:"age",data:l},{label:"Peer PR age",color:r,dataKey:"age",data:a}],xAxis:"left"}],tableKeys:["age"],tableData:m}]},bc=({pullRequests:e=[],releases:t=[],usersData:s=[]})=>{const{userPage:n,clearUserPage:r}=qe(),{theme:a}=q(),l=L[a].secondary,c=L[a].primary,d=wc(e,t,n,l,c),[i,m,u]=vc(s,n),p=i.name||n;return o.jsxs(Y,{children:[o.jsx(O,{className:"w-full mb-4",color:"secondary",onClick:h=>{h.preventDefault(),r(),window&&window.scrollTo(0,0)},children:"Back to main view"}),o.jsxs("p",{className:"w-full text-center",children:["A collection metrics showing ",p,"'s data and average data from the top ",u," peers"]}),o.jsx(an,{player1:i,player2:m}),d.length&&d.map((h,g)=>o.jsx(W,{...h},`${g}-${n}`)),o.jsx(O,{className:"w-full mb-4",color:"secondary",onClick:h=>{h.preventDefault(),r(),window&&window.scrollTo(0,0)},children:"Back to main view"})]})},Ac=e=>({pullRequests:e.pullRequests,releases:e.releases,usersData:e.usersData}),Tc=M(Ac)(bc),jc=I("",["location","search"],window),ln=new URLSearchParams(jc),Dc=(e=[])=>{var t;return ln.get("player1")||((t=e[0])==null?void 0:t.author)},Nc=(e=[])=>{var t;return ln.get("player2")||((t=e[1])==null?void 0:t.author)},Pc=({pullRequests:e=[],releases:t=[],usersData:s=[]})=>{const{togglePvPPage:n}=qe(),{theme:r}=q(),a=L[r].secondary,l=L[r].primary,[c,d]=w.useState(Dc(s)),[i,m]=w.useState(Nc(s)),u=s.find(x=>x.author===c),p=s.find(x=>x.author===i),h=[],g=[],f=[];e.forEach(x=>{const S=x.author;S===c?(h.push(x),f.push(x)):S===i&&(g.push(x),f.push(x))});const y=Pe(f);return s.length>0&&o.jsx(o.Fragment,{children:o.jsxs(Y,{children:[o.jsx(O,{className:"w-full mr-0 mb-4",color:"secondary",onClick:x=>{x.preventDefault(),n()},children:"Back to main view"}),o.jsx("p",{className:"w-full text-center",children:"This page is just for fun, a bigger or smaller number could be good, bad or not mean much, it depends on context."}),o.jsx(an,{player1:u,player2:p,setPlayer1Id:d,setPlayer2Id:m,players:s}),o.jsx("p",{className:"w-full text-center",children:"And the winner is.... Both! Thanks for your great work!"}),o.jsxs(Ee,{children:[o.jsx(W,{markers:t,showLegends:!0,title:"Sentiments in PR",data:[{lines:[{label:`${u.name} received`,color:_[0],dataKey:"commentSentimentScore",data:h},{label:`${u.name} given`,color:_[2],dataKey:"commentAuthorSentimentScore",data:h},{label:`${p.name} received`,color:_[0],dataKey:"commentSentimentScore",data:g},{label:`${p.name} given`,color:_[2],dataKey:"commentAuthorSentimentScore",data:g}],xAxis:"left"}],tableData:y,tableKeys:["author","commentSentimentScore","commentAuthorSentimentScore"]}),o.jsx(W,{markers:t,data:[{lines:[{label:`${u.name} PR size`,color:a,dataKey:"prSize",data:h},{label:`${p.name} PR size`,color:l,dataKey:"prSize",data:g}],xAxis:"left"}],tableKeys:["author","prSize"],tableData:y}),o.jsx(W,{markers:t,data:[{lines:[{label:`${u.name} PR age`,color:a,dataKey:"age",data:h},{label:`${p.name} PR age`,color:l,dataKey:"age",data:g}],xAxis:"left"}],tableKeys:["author","age"],tableData:y})]}),o.jsx(O,{className:"w-full mr-0 mb-4",color:"secondary",onClick:x=>{x.preventDefault(),n(),window&&window.scrollTo(0,0)},children:"Back to main view"})]})})},Cc=e=>({pullRequests:e.pullRequests,releases:e.releases,usersData:e.usersData}),Ic=M(Cc)(Pc),_c=({pullRequests:e=[],releases:t=[]})=>{const{theme:s}=q(),n=L[s].secondary,r=L[s].primary;return e.length>0&&o.jsxs(Y,{children:[o.jsxs(ie,{title:"Team's contribution spread",expandText:"guidance",children:[o.jsx("p",{children:"Questions worth asking (with team context):"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Is there a healthy percentage spread?"}),o.jsx("li",{children:"Are the Approval and comments spreads similar?"}),o.jsx("li",{children:"Any insights or things you would like to try to impact these metrics?"})]})]}),o.jsx("p",{children:"Y axis is the percentage spread of approvals and comments within the active team*, 100% is an EVEN spread across the team, 0% is contribution from only ONE engineer."}),o.jsx(Ee,{children:o.jsx(W,{title:"Percentage spread within team for ",markers:t,data:[{lines:[{label:"Comments given",color:n,dataKey:"comments",groupMath:"teamDistribution",yMax:100,data:e},{label:"Approvals given",color:r,dataKey:"approvals",groupMath:"teamDistribution",yMax:100,data:e}],xAxis:"left"}]})}),o.jsx("p",{children:"*Active team per data point are those who have approved, commented or raised a PR within that time frame."})]})},kc=({pullRequests:e=[],userIds:t=[],events:s=[],usersInfo:n={}})=>{const r=i=>{const m={};return t.forEach(u=>{const p=i==null?void 0:i[u];p&&(m[u]=p)}),m},a={},l=e.map((i,m)=>(a[i.repo]=(a[i.repo]||0)+1,{...i,id:`${m}-${i.repo}-${i.number}`,teamApprovers:r(i.approvers),teamCommenters:r(i.commenters),[`repo-${i.repo}`]:1,commentSentimentTotalScore:(i.commentSentimentScore||0)+(i.commentAuthorSentimentScore||0),[`${i.author}-commentsSentimentScore`]:i.commentSentimentScore,[`${i.author}-commentAuthorSentimentScore`]:i.commentAuthorSentimentScore})),c=Pe(l),d=qo({events:s,usersInfo:n});return o.jsxs(o.Fragment,{children:[o.jsx(vt,{}),o.jsx(_c,{pullRequests:l,releases:d}),o.jsx(yt,{pullRequests:l,chunkyData:c,releases:d,tableOpenedByDefault:!0}),o.jsx(Bt,{pullRequests:l,chunkyData:c,releases:d,allRepos:a}),o.jsx(Xt,{}),o.jsx(rn,{})]})},Oc=e=>({pullRequests:e.pullRequests,userIds:e.fetches.userIds,events:e.fetches.events,usersInfo:e.fetches.usersInfo}),Lc=M(Oc)(kc),Mc=({pullRequests:e=[],reviewedPullRequests:t=[],userIds:s=[],usersInfo:n={}})=>{const[r]=s,{showNames:a}=Re(),{theme:l}=q(),c=L[l].secondary,d=L[l].primary,i={},m={},u={},p=e.map(E=>{const b=E.commenters||{};Object.keys(b).forEach(j=>{const N=b[j]||0;u[j]||(u[j]={}),u[j].commentsReceived=(u[j].commentsReceived||0)+N});const A=E.approvers||{};return Object.keys(A).forEach(j=>{const N=A[j]||0;u[j]||(u[j]={}),u[j].approvalsReceived=(u[j].approvalsReceived||0)+N}),i[E.repo]=(i[E.repo]||0)+1,m[E.org]=(m[E.org]||0)+1,{...E,[`repo-${E.repo}`]:1,commentSentimentTotalScore:(E.commentSentimentScore||0)+(E.commentAuthorSentimentScore||0),[`${E.author}-commentsSentimentScore`]:E.commentSentimentScore,[`${E.author}-commentAuthorSentimentScore`]:E.commentAuthorSentimentScore}}),h={...n};t.map(E=>{var N,F;const b=E.author;h[b]={userId:b};const A=((N=E==null?void 0:E.commenters)==null?void 0:N[r])||0,j=((F=E==null?void 0:E.approvers)==null?void 0:F[r])||0;u[b]||(u[b]={}),u[b].commentsGiven=(u[b].commentsGiven||0)+A,u[b].approvalsGiven=(u[b].approvalsGiven||0)+j});const g=Object.entries(u).map(([E,b],A)=>{var j;return{...b,author:a?E:`${Array(A).fill(" ").join("")}Spartacus`,name:a?((j=n[E])==null?void 0:j.name)||E:`${Array(A).fill(" ").join("")}Spartacus`}}),f=Et(e.concat(t),h,r),y=["commentsGiven","approvalsGiven"],x=f.sort(Se(y)),S=Pe(p),v=go("repo",i);return o.jsxs(o.Fragment,{children:[o.jsx(vt,{}),o.jsx(Y,{children:o.jsxs(Ee,{children:[o.jsxs("div",{className:"flex flex-wrap justify-center w-full",children:[o.jsx(mt,{data:g,indexBy:"name",title:"Comments",sortBy:"commentsGiven",bars:[{dataKey:"commentsGiven",color:c,label:"given"},{dataKey:"commentsReceived",color:d,label:"received"}]}),o.jsx(mt,{data:g,indexBy:"name",title:"Approvals",sortBy:"approvalsGiven",bars:[{dataKey:"approvalsGiven",color:c,label:"given"},{dataKey:"approvalsReceived",color:d,label:"received"}]})]}),o.jsxs("div",{className:"w-full flex flex-wrap justify-center gap-4",children:[o.jsx(ut,{data:x,preSorted:!0,dataKey:"commentsByUser",title:"Comment contributions"}),o.jsx(ut,{data:x,preSorted:!0,dataKey:"approvalsByUser",title:"Approval contributions"})]}),v.pieData.length>0&&o.jsx(xo,{data:v.pieData,title:v.sectionTitle})]})}),o.jsx(yt,{pullRequests:p,chunkyData:S,tableOpenedByDefault:!0}),o.jsx(Xt,{})]})},$c=e=>({pullRequests:e.pullRequests,reviewedPullRequests:e.reviewedPullRequests,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),Fc=M($c)(Mc),Uc=e=>{const{showPvP:t,userPage:s}=qe(),n=!!(s&&s.length>0);return o.jsx("div",{children:ae([[T(t),T(o.jsx(Ic,{}))],[T(n),T(o.jsx(Tc,{}))],[ls(Boolean,"teamName"),T(o.jsx(Lc,{}))],[ls(r=>r.length===1,"userIds"),T(o.jsx(Fc,{}))],[({repo:r,org:a})=>r===""&&a&&a.length>0,T(o.jsx(oc,{}))],[G,T(o.jsx(Sc,{}))]])(e)})},Gc=e=>({userIds:e.fetches.userIds,teamName:e.fetches.teamName,repo:e.fetches.repo,org:e.fetches.org}),Vc=M(Gc)(Uc),Bc=()=>{const{toggleTheme:e}=q();return o.jsxs("div",{className:"grow self-center flex flex-nowrap justify-end gap-x-2 mr-2",children:[o.jsx("a",{className:"hover:text-primary",href:"https://bsky.app/profile/chris-n07734.bsky.social",children:o.jsx("svg",{className:"h-6 w-6 fill-current",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-qa-id":"BlueSkyIcon",children:o.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"})})}),o.jsx("a",{className:"hover:text-primary",href:"https://github.com/n07734/community-health",children:o.jsx("svg",{className:"h-6 w-6 fill-current",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-testid":"GitHubIcon",children:o.jsx("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"})})}),o.jsxs("a",{href:"#theme",onClick:t=>{t.preventDefault(),e()},className:"theme-icon hover:text-primary",children:[o.jsx("svg",{className:"h-6 w-6 sun fill-current dark:display-none",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-qa-id":"SunnyIcon",children:o.jsx("path",{d:"m6.76 4.84-1.8-1.79-1.41 1.41 1.79 1.79zM4 10.5H1v2h3zm9-9.95h-2V3.5h2zm7.45 3.91-1.41-1.41-1.79 1.79 1.41 1.41zm-3.21 13.7 1.79 1.8 1.41-1.41-1.8-1.79zM20 10.5v2h3v-2zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6m-1 16.95h2V19.5h-2zm-7.45-3.91 1.41 1.41 1.79-1.8-1.41-1.41z"})}),o.jsx("svg",{className:"h-6 w-6 moon fill-current",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-qa-id":"MoonIcon",children:o.jsx("path",{d:"M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2"})})]})]})},cn=Gs,dn=Vs,mn=Gt,qc=Us,un=w.forwardRef(({className:e,...t},s)=>o.jsx(pt,{className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));un.displayName=pt.displayName;const Kc=Ut("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Jt=w.forwardRef(({side:e="right",className:t,children:s,...n},r)=>o.jsxs(qc,{children:[o.jsx(un,{}),o.jsxs(Ve,{ref:r,className:D(Kc({side:e}),t),...n,children:[s,o.jsxs(Gt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx(rr,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Jt.displayName=Ve.displayName;const Zt=({className:e,...t})=>o.jsx("div",{className:D("flex flex-col space-y-2 text-center sm:text-left",e),...t});Zt.displayName="SheetHeader";const es=w.forwardRef(({className:e,...t},s)=>o.jsx(gt,{ref:s,className:D("text-lg font-semibold text-foreground",e),...t}));es.displayName=gt.displayName;const hn=w.forwardRef(({className:e,...t},s)=>o.jsx(ft,{ref:s,className:D("text-sm text-muted-foreground",e),...t}));hn.displayName=ft.displayName;const zc=[["Individual report","user"],["Team report","team"],["Repo report","repo"],["Org report","org"]],Hc=({setNewReportType:e,clearReport:t})=>o.jsxs(cn,{children:[o.jsx(dn,{asChild:!0,children:o.jsx(O,{variant:"link",className:"normal-case text-report-title hover:text-primary text-base",children:"Make a report"})}),o.jsxs(Jt,{className:"bg-background",children:[o.jsxs(Zt,{children:[o.jsx(es,{children:"Make a report"}),o.jsx(hn,{children:o.jsx("p",{children:"Choose the type of report you want to make"})})]}),o.jsx("div",{children:zc.map(([s,n],r)=>o.jsx(mn,{asChild:!0,children:o.jsx(O,{className:"text-xl normal-case mr-2 mb-3 w-full",variant:"secondary",onClick:()=>{const a=new URL(window.location.href);a.searchParams.delete("report"),history.pushState(null,"",a),t(),e(n)},children:s})},`${r}`))})]})]}),Wc=e=>({clearReport:()=>e(Cl)}),Yc=M(()=>({}),Wc)(Hc),Ft=[],pn=[{name:"React",fileName:"facebook-react"},{name:"NextJS",fileName:"vercel-next.js"},{name:"Remix",fileName:"remix-run-remix"},{name:"Vue",fileName:"vuejs-core"},{name:"Svelte",fileName:"sveltejs-svelte"},{name:"Typescript",fileName:"microsoft-typescript"},{name:"Typescript 10th anniversary",fileName:"microsoft-typescript-10"},{name:"MSW",fileName:"mswjs-msw"},{name:"SWC",fileName:"swc-project-swc"},{name:"vscode",fileName:"microsoft-vscode"},{name:"Node",fileName:"nodejs-node"},{name:"Bluesky",fileName:"bluesky-social-social-app"}],gn=[{name:"Vite",fileName:"vitejs"},{name:"testing-library",fileName:"testing-library"},{name:"TanStack",fileName:"TanStack"}],fn=[{name:"ReactCore",fileName:"ReactCore"},{name:"ViteCore",fileName:"ViteCore"},{name:"TypeScriptCore",fileName:"TypeScriptCore"}],Qc=[{name:"Theo",fileName:"t3dotgg"},{name:"Daniel Roe",fileName:"danielroe"},{name:"Kent",fileName:"kentcdodds"},{name:"Hailey",fileName:"haileyok"},{name:"shadcn",fileName:"shadcn"},{name:"Dominik",fileName:"tkdodo"},{name:"Tyler",fileName:"coolsoftwaretyler"}],Xc=[{name:"Vite",fileName:"vitejs"},{name:"Vitest",fileName:"vitest-dev-vitest"},{name:"Playwright",fileName:"microsoft-playwright"},{name:"Astro",fileName:"withastro-astro"},{name:"PNPM",fileName:"pnpm-pnpm"},{name:"esbuild",fileName:"evanw-esbuild"},{name:"Testing Library",fileName:"testing-library"},{name:"SvelteKit",fileName:"sveltejs-kit"}],Jc=({setNewReportType:e,getPreFetchedReport:t,preFetchedName:s})=>{const n=(r,a=1)=>o.jsx(mn,{asChild:!0,children:o.jsx(O,{className:"mr-2 mb-3","data-qa-id":`prefetch-${r.name}`,variant:s===r.fileName?void 0:"secondary",onClick:()=>{const l=new URL(window.location.href);l.searchParams.set("report",r.fileName),history.pushState(null,"",l),e(""),t(r)},children:(r==null?void 0:r.name)||"Report"})},`${a}`);return o.jsxs(cn,{children:[o.jsx(dn,{asChild:!0,children:o.jsx(O,{variant:"link",className:"normal-case text-foreground hover:text-primary text-base",children:"Other reports"})}),o.jsxs(Jt,{className:"bg-background overflow-scroll",children:[o.jsx(Zt,{children:o.jsx(es,{children:"See a different report"})}),o.jsxs("div",{className:"mb-4",children:[Ft.map(n),o.jsxs("div",{children:[o.jsxs("p",{children:[o.jsx("a",{className:"text-primary",href:"https://2024.stateofjs.com/en-US/libraries/#tier_list",children:"StateOfJS 24"})," S tier list"]}),Xc.map(n)]}),o.jsx("p",{children:"Other reports"}),o.jsxs(o.Fragment,{children:[o.jsx("p",{children:"Repository reports"}),pn.map(n),o.jsx("p",{children:"Org reports"}),gn.map(n),o.jsx("p",{children:"Team reports"}),fn.map(n),o.jsx("p",{children:"Individual reports"}),Qc.map(n)]})]})]})]})},Zc=e=>({preFetchedName:e.preFetchedName}),ei=e=>({getPreFetchedReport:t=>e(en(t))}),ti=M(Zc,ei)(Jc),si=e=>{var y,x;const{error:t,preFetchedName:s="",getPreFetchedReport:n}=e,{togglePvPPage:r,setUserPage:a}=qe(),l=(y=window==null?void 0:window.location)==null?void 0:y.search,c=new URLSearchParams(l),d=c.get("player1")||"",i=c.get("player2")||"",m=c.get("user")||"",u=[...Ft,...pn,...fn,...gn],h=c.get("report")||((x=Ft[0])==null?void 0:x.fileName)||"vitejs",f=u.some(S=>S.fileName===h)?u.find(S=>S.fileName===(s||h)):{fileName:h};return w.useEffect(()=>{n(f),d&&i?r():m&&a(m)},[n,d,i,m]),o.jsx(o.Fragment,{children:t&&o.jsx(qt,{error:t,className:"col-span-full mb-4"})})},oi=e=>({preFetchedName:e.preFetchedName,error:e.preFetchedError}),ni=e=>({getPreFetchedReport:t=>e(en(t))}),ri=M(oi,ni)(si),ai=e=>{const{setValues:t,getData:s,fetching:n,reportType:r="repo"}=e,l={repo:"Get community data for any repo",team:"Get community data for any Team(list of users)",user:"Get data for an individual",org:"Get community data for any Org"}[r],i={sortDirection:"DESC",amountOfData:1,token:"",excludeIds:"",enterpriseAPI:"",...{repo:{org:"",repo:""},org:{org:""},team:{usersInfo:{},teamName:""},user:{userId:"",name:""}}[r]},[m,u]=w.useState({}),[p,h]=w.useState(i),g=(E={})=>{const b={...p,...E};h(b)};w.useEffect(()=>{h(i)},[r,h]);const f=(E,b)=>h({...p,[E]:b}),y={inputError:m,setInputError:u,formInfo:p,setValue:f},x=E=>{E.preventDefault();const{isValid:b,validationErrors:A}=bo(p);u(A),b&&!n&&t(p),b&&!n&&s()},v={repo:[{type:"org"},{type:"repo"}],org:[{type:"org",className:"col-span-full"}],team:[{type:"teamName",className:"col-span-full"}],user:[{type:"userId"},{type:"name"}]}[r];return o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{children:l}),o.jsxs("form",{onSubmit:x,children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 max-mm:grid-cols-1 items-end",children:[v.map(E=>o.jsx(H,{className:E.className,type:E.type,...y},E.type)),r==="team"&&o.jsx(Lo,{usersInfo:p.usersInfo,setParentValues:g}),o.jsx(H,{className:"col-span-full",type:"events",...y}),o.jsx("p",{className:"col-span-full",children:"Key events can give context when viewing the data e.g. started using copilot, launched a feature. These events can help give more context while viewing the data. e.g.  Copilot adopted=2024-02-01,Feature A=2024-04-10."}),o.jsx(H,{type:"token",...y}),o.jsx(Eo,{className:"mb-3 max-mm:mb-0",setValue:f,amountOfData:p.amountOfData}),o.jsxs("p",{className:"col-span-full",children:["To create a token go to your GitHub ",o.jsx("a",{className:"text-primary",href:"https://github.com/settings/tokens",children:"tokens"})," page, click on 'generate new token', choose the settings 'repo' (all), 'read:org' and 'user' then click 'Generate token'."]})]}),o.jsx(ie,{className:"mb-0 col-span-full",expandText:"show",intro:"Advanced options",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2 max-mm:grid-cols-1 items-end",children:[o.jsx(H,{type:"excludeIds",...y}),o.jsx(H,{type:"enterpriseAPI",...y})]})}),o.jsx(Ro,{})]}),o.jsx(sn,{})]})},li=e=>({fetching:e.fetching,error:e.error}),ci=e=>({setValues:t=>{const{org:s,repo:n,token:r,amountOfData:a,sortDirection:l,teamName:c,usersInfo:d={},userId:i,name:m="",enterpriseAPI:u,excludeIds:p,events:h}=t;i&&(d[i]={userId:i,name:m,dates:[]}),e(Pl({...t,usersInfo:d})),e(Ko(r)),e(Yo(a)),e(Xo(l)),e(Qo(a)),s&&e(wl(s)),n&&e(Tl(n)),Object.keys(d).length>0&&e(zo(d)),c&&e(Al(c)),e(bl(u)),e(Ho(p)),h&&e(Wo(h))},getData:()=>e(Zo())}),ii=M(li,ci)(ai),di=()=>{const[e,t]=w.useState("");return o.jsxs("div",{className:"p-0 overflow-auto",children:[o.jsxs("header",{children:[o.jsxs("nav",{className:"w-full flex flex-wrap",children:[o.jsx(ti,{setNewReportType:t}),o.jsx(Yc,{setNewReportType:t}),o.jsx(Bc,{})]}),"  ",o.jsx(Y,{children:o.jsxs(ie,{title:"Code Health",hLevel:1,expandText:"more",children:[o.jsx("p",{children:"Coding is a team activity, healthy collaboration produces better code. This tool gives in depth collaboration and contribution metrics for teams to analyze their code health."}),o.jsx("p",{children:"You can create your own reports for individuals, teams, repos and orgs from public or enterprise GitHub."})]})})]}),o.jsx(ri,{}),e!==""&&o.jsx(Y,{className:"block",children:o.jsx(ii,{reportType:e})}),o.jsx(Vc,{})]})},wt=w.forwardRef(({className:e,value:t,...s},n)=>o.jsx(Qs,{ref:n,className:D("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:o.jsx(ar,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));wt.displayName=Qs.displayName;const mi=({userIds:e,user:t})=>{const s=t?e.findIndex(l=>l===t):0,n=s>0?e.slice(0,s):[],r=100/(e.length||10),a=s*r;return o.jsxs(o.Fragment,{children:[o.jsxs(Ke,{className:"text-6xl font-extralight mb-08",children:["Fetching ",s+1," of ",e.length," ",e.length===1?"user":"users"]}),o.jsx(wt,{value:a}),n.length>0&&o.jsxs("p",{children:["Fetched users: ",n.join(", ")]})]})},ui=({repo:e,repos:t,loadedPercent:s,prCount:n,issueCount:r})=>{const a=e?t.findIndex(c=>c===e):0,l=a>0?t.slice(0,a):[];return o.jsxs(o.Fragment,{children:[o.jsxs(Ke,{className:"text-6xl font-extralight mb-08",children:["Fetching ",o.jsx("span",{className:"text-primary",children:e})]}),o.jsx(wt,{value:s}),o.jsxs("h3",{children:[n," Pull Requests"]}),o.jsxs("h3",{children:[r," Issues"]}),l.length>0&&o.jsxs("p",{children:["Fetched repos: ",l.join(", ")]})]})},Ts=({user:e,repo:t,loadedPercent:s,prCount:n,issueCount:r})=>o.jsxs(o.Fragment,{children:[o.jsxs(Ke,{className:"text-6xl font-extralight mb-08",children:["Fetching ",o.jsx("span",{className:"text-primary",children:e||t})]}),o.jsx(wt,{value:s}),o.jsxs("h3",{children:[n," Pull Requests"]}),o.jsxs("h3",{children:[r," Issues"]})]}),hi=({savedReportName:e})=>o.jsxs(Ke,{className:"text-6xl font-extralight mb-08",children:["Fetching ",o.jsx("span",{className:"text-primary",children:e})]}),pi={team:mi,user:Ts,repo:Ts,org:ui,saved:hi},gi=({fetches:e,fetching:t=!1,fetchStatus:s={},pullRequests:n=[],formUntilDate:r=""})=>{const{userIds:a=[],sortDirection:l=""}=e,{user:c="",repo:d="",repos:i=[],savedReportName:m="",prCount:u=0,latestItemDate:p="",issueCount:h=0,paused:g=!1}=s,f=m&&"saved"||a.length>1&&"team"||a.length===1&&"user"||i.length>1&&"org"||"repo",y=(z,C)=>l==="DESC"?pe(z,C):pe(C,z),x=l==="DESC"?0:-1,S=n.length>0?new Date(n.at(x).mergedAt):new Date,v=p?new Date(p):S,E=new Date(r),b=y(S,E),A=y(S,v),j=100/(b||10),N=A*j,F=pi[f];return t&&o.jsx(Ao,{open:!0,children:o.jsxs(Do,{"data-qa-id":"loader",className:"overflow-scroll max-h-full w-4/5",children:[g&&o.jsx("p",{children:" Fetching paused briefly due to Github api throttling."}),o.jsx(F,{userIds:a,user:c,repo:d,repos:i,prCount:u,issueCount:h,savedReportName:m,loadedPercent:N})]})})},fi=e=>({fetches:e.fetches,fetching:e.fetching,fetchStatus:e.fetchStatus,pullRequests:e.pullRequests,formUntilDate:e.formUntilDate}),xi=M(fi)(gi);class yi extends w.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,s){console.error("Uncaught error:",t,s)}render(){return this.state.hasError?o.jsx("h1",{className:"text-center mt-4",children:"Something went wrong."}):this.props.children}}const Ri=()=>o.jsx(yi,{children:o.jsxs(xr,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:[o.jsx(xi,{}),o.jsx(di,{})]})}),bt=e=>(t,s)=>(n=e,r)=>{const a={[R[t]]:()=>r.payload,[R[s]]:()=>e}[r.type];return a?a():n},he=bt(""),Dt=bt([]),Ei=bt({}),lt=bt({hasNextPage:!0}),Si=cs({fetches:cs({token:(e="",t)=>t.type===R.STORE_TOKEN?t.payload:e,org:he("STORE_ORG","CLEAR_ORG"),repo:he("STORE_REPO","CLEAR_REPO"),teamName:he("SET_TEAM_NAME","CLEAR_TEAM_NAME"),untilDate:he("STORE_UNTIL_DATE","CLEAR_UNTIL_DATE"),amountOfData:(e=1,t)=>t.type===R.STORE_AMOUNT?t.payload:e,sortDirection:(e="DESC",t)=>t.type===R.STORE_SORT?t.payload:e,enterpriseAPI:(e="",t)=>t.type===R.STORE_ENT_URL?t.payload:e,userIds:Dt("STORE_USER_IDS","CLEAR_USER_IDS"),usersInfo:Ei("STORE_USERS_INFO","CLEAR_USERS_INFO"),excludeIds:Dt("STORE_EX_IDS","CLEAR_EX_IDS"),events:Dt("STORE_EVENTS","CLEAR_EVENTS"),prPagination:lt("SET_PR_PAGINATION","CLEAR_PR_PAGINATION"),usersReviewsPagination:lt("SET_PR_REVIEWED_PAGINATION","CLEAR_PR_REVIEWED_PAGINATION"),releasesPagination:lt("SET_RELEASES_PAGINATION","CLEAR_RELEASES_PAGINATION"),issuesPagination:lt("SET_ISSUES_PAGINATION","CLEAR_ISSUES_PAGINATION")}),reportDescription:he("SET_DESC","CLEAR_DESC"),formUntilDate:he("STORE_FORM_UNTIL_DATE","CLEAR_FORM_UNTIL_DATE"),fetching:(e=!1,t)=>{const{FETCH_START:s,FETCH_END:n}=R,r={[s]:!0,[n]:!1};return[s,n].includes(t.type)?r[t.type]:e},fetchStatus:(e={},t)=>t.type===R.FETCH_STATUS?t.payload:e,error:he("FETCH_ERROR","CLEAR_FETCH_ERROR"),preFetchedError:he("PRE_FETCH_ERROR","CLEAR_PRE_FETCH_ERROR"),preFetchedName:he("PREFETCHED_NAME","CLEAR_PREFETCHED_NAME"),pullRequests:(e=[],t)=>[t.type===R.ADD_PRS&&t.payload,t.type===R.CLEAR_PRS&&[],e].find(Boolean),reviewedPullRequests:(e=[],t)=>[t.type===R.ADD_REVIEWED_PRS&&t.payload,t.type===R.CLEAR_REVIEWED_PRS&&[],e].find(Boolean),itemsDateRange:(e=["",""],t)=>[t.type===R.ADD_ITEMS_DATE_RANGE&&t.payload,t.type===R.CLEAR_ITEMS_DATE_RANGE&&["",""],e].find(Boolean),trimmedItems:(e={},t)=>[t.type===R.ADD_TRIMMED_ITEMS&&t.payload,t.type===R.CLEAR_TRIMMED_ITEMS&&{},e].find(Boolean),filteredPRs:(e=[],t)=>[t.type===R.ADD_FILTERED_PRS&&t.payload,t.type===R.CLEAR_FILTERED_PRS&&[],e].find(Boolean),filteredReviewedPRs:(e=[],t)=>[t.type===R.ADD_REVIEWED_FILTERED_PRS&&t.payload,t.type===R.CLEAR_REVIEWED_FILTERED_PRS&&[],e].find(Boolean),usersData:(e=[],t)=>[t.type===R.ADD_USERS_DATA&&t.payload,t.type===R.CLEAR_USERS_DATA&&[],e].find(Boolean),issues:(e=[],t)=>[t.type===R.ADD_ISSUES&&t.payload,t.type===R.CLEAR_ISSUES&&[],e].find(Boolean),filteredIssues:(e=[],t)=>[t.type===R.ADD_FILTERED_ISSUES&&t.payload,t.type===R.CLEAR_FILTERED_ISSUES&&[],e].find(Boolean),releases:(e=[],t)=>[t.type===R.ADD_RELEASES&&t.payload,t.type===R.CLEAR_RELEASES&&[],e].find(Boolean),filteredReleases:(e=[],t)=>[t.type===R.ADD_FILTERED_RELEASES&&t.payload,t.type===R.CLEAR_FILTERED_RELEASES&&[],e].find(Boolean)}),vi=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Xe,wi=lr(Si,vi(cr(ur)));ir.createRoot(document.getElementById("root")).render(o.jsx(dr.StrictMode,{children:o.jsx(mr,{store:wi,children:o.jsx(hr,{children:o.jsx(pr,{children:o.jsx(gr,{children:o.jsx(Ri,{})})})})})}));
