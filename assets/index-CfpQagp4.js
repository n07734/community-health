import{r as w,j as o,R as xn,C as yn,t as Rn,c as En,a as Ft,S as Sn,T as As,I as vn,b as Ts,d as Ds,P as wn,e as js,V as bn,L as Ns,f as Ps,g as An,h as Tn,i as Cs,k as Dn,G as jn,l as Nn,m as Is,n as _s,o as Pn,p as ks,u as Cn,q as es,s as Dt,v as In,w as _n,x as kn,y as xe,z as ts,A as ct,B as it,D as ss,E as On,F as Ln,H as Mn,J as $n,K as Fn,M as Os,N as M,O as Ls,Q as Un,U as jt,W as Gn,_ as Vn,X as Ms,Y as Bn,Z as qn,$ as ne,a0 as oe,a1 as T,a2 as U,a3 as Nt,a4 as Kn,a5 as I,a6 as ht,a7 as Ve,a8 as Ut,a9 as pt,aa as gt,ab as $s,ac as Fs,ad as Us,ae as zn,af as et,ag as Be,ah as re,ai as le,aj as ft,ak as Qe,al as je,am as nt,an as Se,ao as rt,ap as Gs,aq as Pt,ar as Ct,as as Vs,at as Hn,au as Wn,av as Bs,aw as qs,ax as Ks,ay as Yn,az as Qn,aA as Xn,aB as Jn,aC as os,aD as Oe,aE as Zn,aF as zs,aG as Hs,aH as er,aI as tr,aJ as ns,aK as rs,aL as sr,aM as or,aN as as,aO as nr,aP as Ws,aQ as rr,aR as ls,aS as ar,aT as lr,aU as cr,aV as ir,aW as dr,aX as mr}from"./vendor-4es1GvI7.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();const Ys=w.createContext({}),ur=({children:e})=>{const[t,s]=w.useState(!0),r={showNumbers:t,toggleShowNumbers:()=>s(!t)};return o.jsx(Ys.Provider,{value:r,children:e})},tt=()=>w.useContext(Ys),Qs=w.createContext({}),hr=({children:e})=>{const[t,s]=w.useState(!0),r={showNames:t,toggleShowNames:()=>s(!t)};return o.jsx(Qs.Provider,{value:r,children:e})},ve=()=>w.useContext(Qs),Xs=w.createContext({}),pr=({children:e})=>{const[t,s]=w.useState(!1),[n,r]=w.useState(""),d={showPvP:t,togglePvPPage:()=>{s(!t),r("")},userPage:n,setUserPage:(i="")=>{s(!1),r(i)},clearUserPage:()=>{s(!1),r("")}};return o.jsx(Xs.Provider,{value:d,children:e})},qe=()=>w.useContext(Xs),gr={theme:"dark",toggleTheme:()=>null},Js=w.createContext(gr),fr=({children:e,defaultTheme:t="dark",storageKey:s="vite-ui-theme",...n})=>{const[r,a]=w.useState(()=>localStorage.getItem(s)||t);w.useEffect(()=>{const c=window.document.documentElement;c.classList.remove("light","dark"),c.classList.add(r)},[r]);const l={theme:r,toggleTheme:()=>{const c=r==="dark"?"light":"dark";localStorage.setItem(s,c),a(c)}};return o.jsx(Js.Provider,{...n,value:l,children:e})},q=()=>{const e=w.useContext(Js);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},xr=xn,yr=yn,cs=({setIsOpen:e,isOpen:t,expandText:s,qaId:n,className:r})=>o.jsx("a",{className:`text-base text-primary ${r}`,href:"#desc",...n&&{"data-qa-id":n},onClick:a=>{a.preventDefault(),e(!t)},children:t?"hide":s}),Rr=({hLevel:e,children:t})=>{const s=`h${e}`;return o.jsx(s,{children:t})},de=({title:e,intro:t,children:s,hLevel:n=3,expandText:r="info",className:a="",expandQaId:l})=>{const[c,d]=w.useState(!1);return o.jsxs("div",{className:`w-full flex flex-grow flex-wrap ${a} ${t?"[&>*]:basis-full":""}`,children:[e&&typeof e=="string"?o.jsxs(Rr,{hLevel:n,children:[e,s&&o.jsx(cs,{isOpen:c,setIsOpen:d,expandText:r,qaId:l,className:"ml-2"})]}):e,o.jsxs("p",{children:[t," ",t&&s&&o.jsx(cs,{isOpen:c,setIsOpen:d,expandText:r,qaId:l})]}),o.jsx(xr,{open:c,onOpenChange:d,className:"wrapper basis-full",children:o.jsx(yr,{children:s})})]})},Y=({className:e="",children:t})=>o.jsx("div",{className:`paper ${e}`,children:t});function j(...e){return Rn(En(e))}const Er=Ft("uppercase inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),O=w.forwardRef(({className:e,variant:t,size:s,asChild:n=!1,...r},a)=>{const l=n?Sn:"button";return o.jsx(l,{className:j(Er({variant:t,size:s,className:e})),ref:a,...r})});O.displayName="Button";const we=({children:e})=>o.jsx("div",{className:"w-full relative flex flex-col flex-wrap gap-0 items-center 3xl:flex-row 3xl:gap-0 3xl:gap-x-5 3xl:justify-center",children:e}),ze='"Nunito", "Roboto", "Helvetica", "Arial", sans-serif',He=12,wt={legendOrientation:"horizontal",legendPosition:"top-right",height:10,legendOffsetX:0,legendOffsetY:-4},st=(e="dark")=>{const t={light:"#232023",dark:"#eee"}[e],s={light:"#fff",dark:"#232023"}[e],n={light:"#077314",dark:"#077314"}[e],r={light:"#8b4ff0",dark:"#6b3dba"}[e],a={light:"#87cac6",dark:"#6b3dba"}[e];return{fontFamily:ze,fontSize:He,textColor:t,crosshair:{line:{stroke:t}},axis:{legend:{text:{fill:t}},ticks:{text:{fill:t}}},legends:{hidden:{symbol:{fill:"#eee",opacity:1},text:{fill:"#eee",fontWeight:"400",opacity:1}},text:{fontWeight:"800"}},legendsTextFill:t,dotColor:t,tooltip:{container:{fontFamily:ze,fontSize:He,background:s,color:t,boxShadow:`0 1px 2px ${t}`}},grid:{line:{stroke:"#999"}},markers:{primary:{lineStyle:{stroke:n,strokeWidth:1},textStyle:{fontFamily:ze,fontSize:He,fill:n},...wt},secondary:{lineStyle:{stroke:r,strokeWidth:1},textStyle:{fontFamily:ze,fontSize:He,fill:r},...wt},tertiary:{lineStyle:{stroke:a,strokeWidth:1,strokeDasharray:"2 6"},textStyle:{fontFamily:ze,fontSize:He,fill:a},...wt}}}},Ue=({className:e="",items:t=[],text:s="",type:n})=>{const r=m=>{const u=t.length-1,p={zero:"",max:" and ",more:", "},h=[m===0&&"zero",m===u&&"max",m>0&&"more"].find(Boolean);return p[h]},a=({color:m,label:u})=>o.jsx("span",{style:{color:m,borderBottomColor:m},className:"saved-line",children:u}),l=({color:m,label:u})=>o.jsx("span",{style:{color:m},children:u}),c={average:"Average",trimmedAverage:"Trimmed Average",sum:"Total",count:"Total",teamDistribution:"",median:"",percentWith:"",growth:"",averagePerDev:""},d=[...new Set(t.filter(m=>"groupMath"in m).map(m=>"groupMath"in m&&m.groupMath))],i=(t.length>0&&n==="line"&&d.length<2?d[0]||"average":"")||"";return o.jsxs("h4",{className:e,children:[`${s} `,i&&`${c[i]} `,t.map((m,u)=>o.jsxs(w.Fragment,{children:[r(u),n==="line"?o.jsx(a,{...m}):o.jsx(l,{...m})]},u))]})},Le=Dn,Me=jn,$e=Nn,Ne=w.forwardRef(({className:e,children:t,...s},n)=>o.jsxs(As,{ref:n,className:j("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,o.jsx(vn,{asChild:!0,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 opacity-50","aria-hidden":"true",children:o.jsx("path",{d:"m6 9 6 6 6-6"})})})]}));Ne.displayName=As.displayName;const Zs=w.forwardRef(({className:e,...t},s)=>o.jsx(Ts,{ref:s,className:j("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4","aria-hidden":"true",children:o.jsx("path",{d:"m18 15-6-6-6 6"})})}));Zs.displayName=Ts.displayName;const eo=w.forwardRef(({className:e,...t},s)=>o.jsx(Ds,{ref:s,className:j("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 opacity-50","aria-hidden":"true",children:o.jsx("path",{d:"m6 9 6 6 6-6"})})}));eo.displayName=Ds.displayName;const Pe=w.forwardRef(({className:e,children:t,position:s="popper",...n},r)=>o.jsx(wn,{children:o.jsxs(js,{ref:r,className:j("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...n,children:[o.jsx(Zs,{}),o.jsx(bn,{className:j("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(eo,{})]})}));Pe.displayName=js.displayName;const Sr=w.forwardRef(({className:e,...t},s)=>o.jsx(Ns,{ref:s,className:j("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Sr.displayName=Ns.displayName;const J=w.forwardRef(({className:e,children:t,...s},n)=>o.jsxs(Ps,{ref:n,className:j("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(An,{children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4","aria-hidden":"true",children:o.jsx("path",{d:"M20 6 9 17l-5-5"})})})}),o.jsx(Tn,{children:t})]}));J.displayName=Ps.displayName;const vr=w.forwardRef(({className:e,...t},s)=>o.jsx(Cs,{ref:s,className:j("-mx-1 my-1 h-px bg-muted",e),...t}));vr.displayName=Cs.displayName;const to=w.forwardRef(({className:e,...t},s)=>o.jsx(Is,{className:j("grid gap-2",e),...t,ref:s}));to.displayName=Is.displayName;const It=w.forwardRef(({className:e,...t},s)=>o.jsx(_s,{ref:s,className:j("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:o.jsx(Pn,{className:"flex items-center justify-center",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-2.5 w-2.5 fill-current text-current",children:o.jsx("circle",{cx:"12",cy:"12",r:"10"})})})}));It.displayName=_s.displayName;const wr=Ft("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ze=w.forwardRef(({className:e,...t},s)=>o.jsx(ks,{ref:s,className:j(wr(),e),...t}));Ze.displayName=ks.displayName;const _=["#E82573","#8b4ff0","#1F77B4","#4ECC7A","#DBD523","#EB9830","#D14B41"],L={dark:{primary:"#E82573",secondary:"#1F77B4",tertiary:"#E2E2E2"},light:{primary:"#E82573",secondary:"#1F77B4",tertiary:"#777"}},ae=["average","trimmedAverage","sum","median"],Gt=[{label:"Comments",dataKey:"comments",groupMaths:[...ae,"percentWith","teamDistribution"]},{label:"Code comments",dataKey:"codeComments",groupMaths:[...ae,"percentWith"]},{label:"Review comments",dataKey:"generalComments",groupMaths:[...ae,"percentWith"]},{label:"Approvals",dataKey:"approvals",groupMaths:[...ae,"percentWith","teamDistribution"]},{label:"Additions",dataKey:"additions",groupMaths:ae},{label:"Deletions",dataKey:"deletions",groupMaths:ae},{label:"PR size (additions + deletions)",dataKey:"prSize",groupMaths:ae},{label:"Codebase change (additions - deletions)",dataKey:"growth",groupMaths:["growth"]},{label:"PR count",dataKey:"author",groupMaths:["count","averagePerDev"]},{label:"PR Age(days)",dataKey:"age",groupMaths:ae},{label:"Sentiment",dataKey:"commentSentimentTotalScore",groupMaths:ae},{label:"Sentiment to team",dataKey:"commentSentimentScore",groupMaths:ae},{label:"Sentiment from team",dataKey:"commentAuthorSentimentScore",groupMaths:ae},{label:"Bug count",dataKey:"isBug",groupMaths:["count"]},{label:"Feature count",dataKey:"isFeature",groupMaths:["count"]}],br={average:"Average",trimmedAverage:"*Trimmed Average",sum:"Total",count:"Total",median:"Median",teamDistribution:"Team's % spread of",percentWith:"% of PRs with",growth:"",averagePerDev:"Average per Dev"},is=e=>({color:t,label:s="",dataKey:n,groupMath:r="average"},a)=>o.jsxs("div",{style:{color:t},children:[o.jsx("p",{className:"saved-line text-xl",children:s}),o.jsx("svg",{className:"w-[22px] h-[22px] fill-current inline-block",focusable:"false","aria-hidden":"true",viewBox:"0 0 32 32","data-qa-id":"RemoveCircleIcon",onClick:l=>{l.preventDefault(),e(n,r)},children:o.jsx("path",{d:"M15.5 3.5c-7.18 0-13 5.82-13 13s5.82 13 13 13c7.18 0 13-5.82 13-13s-5.82-13-13-13zM22 16.875c0 0.553-0.448 1-1 1h-11c-0.553 0-1-0.447-1-1v-1c0-0.552 0.447-1 1-1h11c0.552 0 1 0.448 1 1v1z"})})]},`${a}`),so=e=>[...e.left||[],...e.right||[]],_t=e=>{const t=so(e),s=[];return Gt.forEach(({label:n="",dataKey:r,groupMaths:a=[]})=>{const l=t.filter(d=>(d==null?void 0:d.dataKey)===r),c=a.filter(d=>l.every(i=>(i==null?void 0:i.groupMath)!==d));c.length>0&&s.push({label:n,dataKey:r,groupMaths:c})}),s},Ar=e=>{const s=so(e).map(r=>r==null?void 0:r.dataKey);return Gt.find(({dataKey:r})=>!s.includes(r))},Tr=(e,t)=>{const s=_t(t),n=e.dataKey,r=s.findIndex(a=>a.dataKey===n);return s[r+1]||s[0]||Gt[0]},ds={average:()=>"Average",trimmedAverage:()=>"Trimmed Average",sum:()=>"Total",median:()=>"Median",growth:()=>"Growth",percentWith:({label:e=""}={})=>`% of PRs with ${e}`,teamDistribution:({label:e=""}={})=>`Team's % spread of ${e}`,count:()=>"Total",averagePerDev:({label:e=""}={})=>`Average ${e} per DEV`},oo=({graphInfo:e,setGraph:t=()=>{},graphs:s=[]})=>{var p;const n=Ar(e),[r,a]=w.useState({label:(n==null?void 0:n.label)||"Comments",dataKey:(n==null?void 0:n.dataKey)||"comments",color:s.length>1?_[0]:_[1],lineSide:"left",groupMath:(p=n==null?void 0:n.groupMaths)==null?void 0:p[0]}),l=(h={})=>{a({...r,...h})},c=h=>{h.preventDefault();const{lineSide:g,label:x,groupMath:y}=r,f=e[g]||[];f.push({...r,label:`${br[y]} ${x}`,groupMath:y,.../teamDistribution|percentWith/.test(y)&&{yMax:100}});const S={...e,[g]:f},v=s.map(A=>S.graphId===A.graphId?S:A);t(v);const E=Tr(r,S),b=_.findIndex(A=>A===r.color);a({label:E.label,dataKey:E.dataKey,color:_[(b+1)%_.length],lineSide:g,groupMath:E==null?void 0:E.groupMaths[0]})},d=h=>(g,x)=>{const f=(e[h]||[]).filter(b=>!(b.dataKey===g&&b.groupMath===x)),S={...e,[h]:f},v=s.map(b=>S.graphId===b.graphId?S:b);t(v);const[E]=_t(S);a({label:E.label,dataKey:E.dataKey,color:_[0],lineSide:"left",groupMath:E.groupMaths[0]})},i=_t(e),m=i.find(h=>h.dataKey===r.dataKey),u=((m==null?void 0:m.groupMaths)||[]).filter(h=>!/growth/.test(h));return o.jsxs("div",{className:"w-full max-w-mw",children:[i.length>0&&o.jsxs("form",{className:"flex flex-wrap rounded-2xl justify-center paper pt-2 gap-4 mb-3",onSubmit:c,children:[o.jsxs(Le,{onValueChange:h=>{const g=i.find(x=>x.dataKey===h);l({dataKey:h,groupMath:g.groupMaths[0],label:g.label})},value:m==null?void 0:m.dataKey,children:[o.jsx(Ne,{className:"w-auto",children:o.jsx($e,{children:m==null?void 0:m.label})}),o.jsx(Pe,{children:o.jsx(Me,{children:i.map(({label:h,dataKey:g})=>o.jsx(J,{value:g,children:h},`${m==null?void 0:m.dataKey}${g}${h}`))})})]}),u.length>0&&o.jsxs(Le,{onValueChange:h=>h&&l({groupMath:h}),value:r.groupMath,children:[o.jsx(Ne,{className:"w-auto",children:o.jsx($e,{children:ds[r.groupMath](r)})}),o.jsx(Pe,{children:o.jsx(Me,{children:u.map(h=>o.jsx(J,{value:h,children:ds[h](r)},`${r.dataKey}${h}`))})})]}),o.jsx(to,{defaultValue:r.lineSide,onValueChange:h=>h&&l({lineSide:h}),children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(It,{value:"left",id:"r1"}),o.jsx(Ze,{htmlFor:"r1",children:"Axis: Left"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(It,{value:"right",id:"r2"}),o.jsx(Ze,{htmlFor:"r2",children:"Right"})]})]})}),o.jsxs(Le,{onValueChange:h=>h&&l({color:h}),value:r.color,children:[o.jsx(Ne,{className:"w-auto",children:o.jsx($e,{placeholder:o.jsx("div",{style:{backgroundColor:r.color,width:"70px",height:"10px"}})})}),o.jsx(Pe,{children:o.jsx(Me,{children:_.map(h=>o.jsx(J,{value:h,children:o.jsx("div",{style:{backgroundColor:h,width:"70px",height:"10px"}})},h))})})]}),o.jsx(O,{color:"primary",type:"submit",children:"Add to graph"})]}),o.jsxs("div",{className:"custom-lines",children:[o.jsx("div",{children:(e.left||[]).map(is(d("left")))}),o.jsx("div",{children:(e.right||[]).map(is(d("right")))})]})]})},no=w.forwardRef(({className:e,...t},s)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:s,className:j("w-full caption-bottom text-sm",e),...t})}));no.displayName="Table";const ro=w.forwardRef(({className:e,...t},s)=>o.jsx("thead",{ref:s,className:j("[&_tr]:border-b",e),...t}));ro.displayName="TableHeader";const ao=w.forwardRef(({className:e,...t},s)=>o.jsx("tbody",{ref:s,className:j("[&_tr:last-child]:border-0",e),...t}));ao.displayName="TableBody";const Dr=w.forwardRef(({className:e,...t},s)=>o.jsx("tfoot",{ref:s,className:j("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Dr.displayName="TableFooter";const lt=w.forwardRef(({className:e,...t},s)=>o.jsx("tr",{ref:s,className:j("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));lt.displayName="TableRow";const lo=w.forwardRef(({className:e,...t},s)=>o.jsx("th",{ref:s,className:j("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));lo.displayName="TableHead";const kt=w.forwardRef(({className:e,...t},s)=>o.jsx("td",{ref:s,className:j("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));kt.displayName="TableCell";const jr=w.forwardRef(({className:e,...t},s)=>o.jsx("caption",{ref:s,className:j("mt-4 text-sm text-muted-foreground",e),...t}));jr.displayName="TableCaption";const Nr=({sort:e})=>({asc:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 h-4 w-4",children:[o.jsx("path",{d:"m5 12 7-7 7 7"}),o.jsx("path",{d:"M12 19V5"})]}),desc:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 h-4 w-4",children:[o.jsx("path",{d:"M12 5v14"}),o.jsx("path",{d:"m19 12-7 7-7-7"})]}),none:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 h-4 w-4",children:[o.jsx("path",{d:"m21 16-4 4-4-4"}),o.jsx("path",{d:"M17 20V4"}),o.jsx("path",{d:"m3 8 4-4 4 4"}),o.jsx("path",{d:"M7 4v16"})]})})[e],We=e=>({column:t})=>{const s=t.getIsSorted()||"none";return o.jsxs(O,{variant:"link",className:"p-0",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:[e,o.jsx(Nr,{sort:s})]})},Pr=[{accessorKey:"age",header:We("PR Age (days)")},{accessorKey:"prSize",header:We("PR Size")},{accessorKey:"author",header:We("Author")},{accessorKey:"mergedAt",header:We("Date"),cell:({row:e})=>{const t=e.getValue("mergedAt");return Dt(new Date(t),"do MMM yy")}},{accessorKey:"url",header:We("Link"),cell:({row:e})=>{const t=e.getValue("url"),s=t.split("/").at(-1);return o.jsx("a",{className:"text-primary",href:t,children:s})}}],Cr=({dataKeys:e,data:t,addClass:s=""})=>{var m;const[n,r]=w.useState([]),[a,l]=w.useState({pageIndex:0,pageSize:4}),c=[...e,"mergedAt","url"],d=Pr.filter(u=>c.includes(u.accessorKey)),i=Cn({data:t,columns:d,getCoreRowModel:In(),getPaginationRowModel:_n(),onSortingChange:r,getSortedRowModel:kn(),onPaginationChange:l,state:{sorting:n,pagination:a}});return o.jsxs("div",{className:`rounded-md border-2 border-primary mx-50 ${s}`,children:[o.jsxs(no,{children:[o.jsx(ro,{children:i.getHeaderGroups().map(u=>o.jsx(lt,{children:u.headers.map(p=>o.jsx(lo,{children:p.isPlaceholder?null:es(p.column.columnDef.header,p.getContext())},p.id))},u.id))}),o.jsx(ao,{children:(m=i.getRowModel().rows)!=null&&m.length?i.getRowModel().rows.map(u=>o.jsx(lt,{"data-state":u.getIsSelected()&&"selected",children:u.getVisibleCells().map(p=>o.jsx(kt,{children:es(p.column.columnDef.cell,p.getContext())},p.id))},u.id)):o.jsx(lt,{children:o.jsx(kt,{colSpan:d.length,className:"h-24 text-center",children:"No results."})})})]}),o.jsxs("div",{className:"flex items-center justify-end space-x-2 p-4",children:[o.jsxs("p",{children:[a.pageIndex+1," of ",i.getPageCount()]}),o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>i.previousPage(),disabled:!i.getCanPreviousPage(),children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:o.jsx("path",{d:"m15 18-6-6 6-6"})})}),o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>i.nextPage(),disabled:!i.getCanNextPage(),children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:o.jsx("path",{d:"m9 18 6-6-6-6"})})})]})]})},co=()=>o.jsx("svg",{className:"w-[22px] h-[22px] fill-background inline-block",focusable:"false","aria-hidden":"true",viewBox:"0 0 32 32","data-qa-id":"RemoveCircleIcon",children:o.jsx("path",{d:"M15.5 3.5c-7.18 0-13 5.82-13 13s5.82 13 13 13c7.18 0 13-5.82 13-13s-5.82-13-13-13zM22 16.875c0 0.553-0.448 1-1 1h-11c-0.553 0-1-0.447-1-1v-1c0-0.552 0.447-1 1-1h11c0.552 0 1 0.448 1 1v1z"})}),Ir=()=>o.jsx("svg",{className:"w-[22px] h-[22px] fill-current inline-block",focusable:"false","aria-hidden":"true",viewBox:"0 0 32 32","data-qa-id":"RemoveCircleIcon",children:o.jsx("path",{d:"M15.5 29.5c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM21.938 15.938c0-0.552-0.448-1-1-1h-4v-4c0-0.552-0.447-1-1-1h-1c-0.553 0-1 0.448-1 1v4h-4c-0.553 0-1 0.448-1 1v1c0 0.553 0.447 1 1 1h4v4c0 0.553 0.447 1 1 1h1c0.553 0 1-0.447 1-1v-4h4c0.552 0 1-0.447 1-1v-1z"})}),_r=({showTable:e=!1})=>e?o.jsx(Ir,{}):o.jsx(co,{}),kr=({dataKeys:e,data:t,tableOpenedByDefault:s=!1})=>{var h;const[n,r]=w.useState(t.length-1),[a,l]=w.useState(s),c=t.flat(),i=c.length>30?t:[c],m=n===0?"rounded-tl-none":"",u=n===t.length-1?"rounded-tr-none":"",p=m||u||"";return o.jsxs("div",{className:"mb-4",children:[i.length>0&&o.jsx("div",{className:"px-50 flex flex-row justify-stretch gap-x-1",children:i.map((g,x)=>o.jsx(O,{className:`rounded-lg relative w-full px-0 py-1 h-full ${n===x&&a?"slice rounded-t-lg rounded-b-none border-b-4 border-primary hover:bg-primary":"mb-1 bg-secondary hover:bg-secondary"}`,onClick:()=>{n===x&&l(!a),n!==x&&!a&&l(!0),r(x)},children:n===x?o.jsx(_r,{showTable:a}):o.jsx(co,{})},x))}),((h=i[n])==null?void 0:h.length)>0&&a&&o.jsx(Cr,{data:i[n],dataKeys:e,addClass:p})]})},Or=(e,t)=>{const s=e&&ts(new Date(e))+1,n=t&&ts(new Date(t))+1;return!!(s&&n&&s!==n)},Lr=(e,t)=>{const s=e&&ct(new Date(e)),n=t&&ct(new Date(t));return!!(s&&n&&s!==n)},ms=e=>(t,s)=>{const n=t&&ct(new Date(t)),r=s&&ct(new Date(s));return!!(n&&r&&n%e>0&&r%e===0)},Mr=(e,t)=>{const s=e&&it(new Date(e))+1,n=t&&it(new Date(t))+1;return!!(s&&n&&s!==n)},$r=e=>(t,s)=>{const n=t&&it(new Date(t))+1,r=s&&it(new Date(s))+1;return!!(n&&r&&n%e>0&&r%e===0)},Fr=(e,t)=>{const s=e&&ss(new Date(e)),n=t&&ss(new Date(t));return!!(s&&n&&s!==n)},Ur={"1day":Or,"1week":Lr,"2week":ms(2),"3week":ms(3),"1month":Mr,"1quarter":$r(3),"1year":Fr},Gr=(e,t,s=[])=>{const n=[];return s.forEach(r=>{const l=(n.at(-1)||[]).at(-1)||{};!l[e]||Ur[t](l[e],r[e])?n.push([r]):n.at(-1).push(r)}),n},Vr=(e=[])=>{const{mergedAt:t}=e.at(0),{mergedAt:s}=e.at(-1),n=xe(new Date(s),new Date(t)),r=[{batchType:"1year",maxPoints:Math.ceil(n/365)},{batchType:"1quarter",maxPoints:Math.ceil(n/89)},{batchType:"1month",maxPoints:Math.ceil(n/30)},{batchType:"2week",maxPoints:Math.ceil(n/14)},{batchType:"1week",maxPoints:Math.ceil(n/7)},{batchType:"1day",maxPoints:n}],{batchType:a}=r.reduce((l,c)=>!l.maxPoints||Math.abs(c.maxPoints-15)<Math.abs(l.maxPoints-15)?c:l,{});return Gr("mergedAt",a,e)},io=(e=[])=>e.length<1?[]:Vr(e),Ot=e=>(t=[])=>t.reduce((s,n)=>(n[e]||0)+s,0),Br=e=>t=>e.reduce((s,n)=>s+(t&&t[n]||0),0),be=(e=[])=>(t,s)=>{const n=Br(e),r=n(t);return n(s)-r},qr=e=>(t,s)=>e==="DESC"?new Date(s).getTime()-new Date(t).getTime():new Date(t).getTime()-new Date(s).getTime(),mo=e=>{const t=[];return e.forEach(({data:s})=>{const n=s.map(r=>r.y);t.push(...n)}),t.sort((s,n)=>s-n)},us=e=>{const t=mo(e),s=Math.round(t.length*.95),n=t[s]||0,r=t.at(-1)||0,a=n&&Math.round(n/r*100)||0;return n&&a<30?n:r},hs=e=>{const t=mo(e),s=t.length>0?On(Math.min,t):0;return s>0?0:s},Kr=e=>{const t=new Date(e),s=t.getMonth()+1,n=t.getDate();return`${t.getFullYear()}-${s<10?`0${s}`:s}-${n<10?`0${n}`:n}`},zr=({filteredBatch:e=[]})=>{const t={};return e.forEach(s=>"prSize"in s&&(t[s.author]=1)),Math.round(e.length/Object.keys(t).length)},Hr=({filteredBatch:e=[],dataKey:t})=>{const s=t,n=e.sort(be([s])),r=n.length,a=r>4?n.slice(Math.ceil(r*.05),Math.floor(r*.95)):n,l=a.reduce((c,d)=>c+(s&&d[s]||0),0)/a.length;return Math.round(l)},Wr=({filteredBatch:e=[],dataKey:t="comments"})=>{const s=new Set([]),n={};e.forEach(g=>{if(!("prSize"in g))return;const{teamApprovers:x={},teamCommenters:y={}}=g,f=/approvals/i.test(t)?x:y;Object.entries(f).forEach(([v,E])=>{n[v]=(n[v]||0)+E});const S=[...Object.keys(x)||[],...Object.keys(y)||[]];S.length>0&&S.map(v=>s.add(v))});const r={};s.forEach(g=>r[g]=0);const a={...r,...n},l=Object.values(a),c=l.length,d=l.reduce((g,x)=>g+x,0),i=d/c,m=i*(c-1)+(d-i),u=l.reduce((g,x)=>g+Math.abs(x-i),0),p=m-u,h=Math.round(100/m*p);return isNaN(h)?0:h},Yr=({filteredBatch:e=[],dataKey:t="comments"})=>{const s=e.length,r=e.filter(l=>!l[t]).length;return r>0?Math.round((s-r)/s*100):0},Qr=({filteredBatch:e,dataKey:t})=>{const s=e.length,n=e.sort(be([t])),r=Math.floor(s/2);return n[r][t]||0},Xr=({filteredBatch:e})=>e.reduce((s=0,n)=>{if(!("prSize"in n))return s;const{additions:r=0,deletions:a=0}=n;return s+(r-a)},0),Jr=({filterForKey:e=!1,dataKey:t,groupMath:s="average"},n=[])=>{const r=[];return n.forEach(a=>{const l=a.filter(d=>t&&e?/\d+/.test(`${d[t]}`):!0),c=l.length;if(!e||c>0){const d={average:()=>c>0?Math.round(Ot(t)(l)/c):0,trimmedAverage:Hr,sum:()=>Ot(t)(l),count:()=>c,averagePerDev:zr,median:Qr,percentWith:Yr,teamDistribution:Wr,growth:Xr};r.push({y:d[s]({filteredBatch:l,dataKey:t}),x:Kr(a[0].mergedAt)})}}),r},ps=({lines:e=[]})=>{const t=[];return e.forEach(s=>{const{label:n,color:r,data:a}=s,l=io(a),c=Jr(s,l);c.length&&t.push({id:n,color:r,data:c})}),t},Zr=(e,t,s)=>{let n,r;s.forEach(({data:d=[]})=>{const i=d[0].x,m=d[d.length-1].x;(!n||new Date(i)<n)&&(n=new Date(i)),(!r||new Date(m)>r)&&(r=new Date(m))});const a={MAJOR:"primary",MINOR:"secondary",PATCH:"tertiary"},l=[0,18,36,54,72,90];return e.filter(({date:d})=>{const i=new Date(d);return i>n&&i<r}).map((d,i)=>({axis:"x",value:new Date(d.date).getTime(),legend:d.description,...t.markers[a[d.releaseType]]||{},legendOffsetY:l[i%l.length]}))},ea=e=>{const t=`${e}`,s=Math.ceil(t.length*.4),[n]=t.split("").reduceRight(([a=[],l=!1],c,d)=>{const i=parseInt(c),m=l?i+1:i,u=d!==0&&(m>9||d>s&&m>4),p=u||d>s?0:m;return[[...a,p],u]},[[],!1]);return n.reverse().join("")},Ce=(e=[])=>{var d,i,m,u;const t=io(e),s=t.at(0)||[],n=t.at(-1)||[],r=s.at(0)&&new Date(((d=s.at(0))==null?void 0:d.mergedAt)||((i=s.at(0))==null?void 0:i.createdAt)),a=n.at(0)&&new Date(((m=n.at(0))==null?void 0:m.mergedAt)||((u=n.at(0))==null?void 0:u.createdAt)),l=r&&a?xe(a,r):0,c=[];return t.forEach((p=[])=>{const h=c.length,g=new Date((p.at(0)||{}).mergedAt||(p.at(0)||{}).createdAt),x=xe(g,r),y=Math.floor(x/l*100),f=10*h;h<1||y>=f&&h<10?c.push(p):c.at(-1).push(...p)}),c},ta=(e=[])=>{const t=[];return e.forEach(({data:s=[]})=>{t.push(new Date(s.at(0).x)),t.push(new Date(s.at(-1).x))}),t},sa=(e=[],t=[])=>{const s=ta([...e,...t]),n=Ln(s),r=Mn(s);return $n(r,n)},uo=({pullRequests:e=[],showNames:t=!0,usersInfo:s={}})=>{const n={};return e.forEach(l=>{const{author:c}=l,d=n[c]||[];d.push(l),n[c]=d}),[{lines:Object.entries(n).map(([l="",c=[]],d)=>{var m;const i=c.map(u=>({value:1,mergedAt:u.mergedAt}));return{label:t?((m=s[l])==null?void 0:m.name)||l:`${Array(d).fill(" ").join("")}Spartacus`,color:_[d%_.length],dataKey:"value",groupMath:"count",data:i}}),xAxis:"left"}]},ho=(e="repo",t={})=>{const s=Object.entries(t).sort(([,d],[,i])=>d-i),n=s.slice(-20),r=s.length>19?n.map(([d])=>d):Object.keys(t),a=n.map(([d,i],m)=>({id:d,label:d,color:_[m%_.length],value:i})),l=s.length>r.length?`PR rainbow split by top 20 ${e}s out of ${s.length}`:`PR ${e} rainbow (${r.length})`;return{pieData:a,reportItems:r,pieTitle:`PR by ${e} rainbow`,sectionTitle:l}},oa=e=>{var n;const t=r=>{const a=r.data.yFormatted,l=r.data.originalY;return/[\d.]/.test(l)?l:a},s=((n=e==null?void 0:e.slice)==null?void 0:n.points)||[];return o.jsx(Os,{rows:s.map((r,a)=>[o.jsx("span",{style:{display:"block",width:"12px",height:"12px",background:r.serieColor}},a),r.serieId,o.jsx("strong",{children:t(r)},a)])})},na=(e=[])=>({series:t,lineGenerator:s,xScale:n,yScale:r})=>t.map((a={})=>{const{id:l,data:c,color:d}=a,{lineStyles:i={strokeWidth:2}}=e.find(m=>m.label===l)||{};return o.jsx("path",{d:s(c.map(m=>({x:n(m.data.x),y:r(m.data.y)}))),fill:"none",stroke:d,style:i},l)}),gs=(e=[])=>e.filter(t=>t.yMax).map(t=>t.yMax),fs=(e,t)=>t-e,W=({title:e,combineTitles:t=!1,blockHeading:s=!1,data:n=[],markers:r=[],showLegends:a=!1,tableData:l=[],tableKeys:c=[],graphInfo:d,setGraph:i=()=>{},graphs:m=[],tableOpenedByDefault:u=!1}={})=>{const{theme:p}=q(),h=st(p),{showNumbers:g}=tt(),x=n.find(({xAxis:P})=>P==="left")||{data:[],lines:[],xAxis:"left"},y=gs(x.lines),f=ps(x),[S]=[...y,us(f)].sort(fs),v=hs(f),E=n.find(({xAxis:P})=>P==="right")||{data:[],lines:[],xAxis:"right"},b=gs(E.lines),A=ps(E),[D]=[...b,us(A)].sort(fs),N=hs(A),G=S||D,K=v>N?N:v,C=[];A.forEach(P=>{const k=P.data.map(F=>({y:F.y<0?F.y:Math.round(F.y*(G/D)),x:F.x,originalY:F.y}));k.length&&C.push({...P,data:k})});const $=x.lines,me=!t&&e||s?[]:$,Z=E.lines,ue=[...x.lines,...E.lines],ce=ue.map(P=>({label:P.label,default:P.color,current:P.color,clicked:!1})),[ee=[],z]=w.useState(ce);(ce.length!==ee.length||ee.length===1&&ee[0].color!==ce[0].color)&&z(ce);const V="rgba(120, 119, 120, 0.27)",he=(P={})=>{const k=ce.findIndex(F=>F.label===P.label);z(ee.map((F,B)=>({...F,current:B===k||F.clicked?F.default:V})))},Ae=()=>{const P=ee.some(k=>k.clicked);z(ee.map(k=>({...k,current:P&&k.clicked||!P?k.default:V})))},pe=(P={})=>{const k=ce.findIndex(B=>B.label===P.label),F=ee.map((B,te)=>{const Q=te===k&&!B.clicked;return{...B,current:Q||te!==k&&B.clicked?B.default:V,clicked:te===k?Q:B.clicked}});z(F)},ie={anchor:"top-right",direction:"column",justify:!1,translateX:-10,translateY:10,itemsSpacing:0,itemDirection:"right-to-left",itemWidth:80,itemHeight:20,itemOpacity:1,symbolSize:12,symbolShape:"square",symbolBorderColor:"rgba(0, 0, 0, .9)",itemTextColor:h.textColor},Ee=[];if(E.lines.length<1&&$.length>10){const P=[],k=[],F=Math.ceil($.length/2);$.forEach(({label:B,color:te},Q)=>{const{current:se}=ee.find(ge=>ge.label===B)||{},X={label:B,color:se||te};Q<F?P.push(X):k.push(X)}),Ee.push({...ie,data:P,anchor:"top-left",direction:"column",translateX:10,itemDirection:"left-to-right"},{...ie,data:k})}const ot=Ee.length>0?Ee.map(P=>({...P,onMouseEnter:he,onMouseLeave:Ae,onClick:pe})):[{...ie,onMouseEnter:he,onMouseLeave:Ae,onClick:pe}],Te=f.concat(C),Ie=Zr(r,h,Te),De=P=>P.some(k=>((k==null?void 0:k.data)||[]).length),Ke=sa(f,A)>90?"%Y":"%y/%m";return De(Te)&&o.jsxs("div",{className:"z-10 w-full max-w-mw",children:[d&&m.length>0&&o.jsx(oo,{graphInfo:d,setGraph:i,graphs:m}),o.jsxs("div",{className:"flex flex-wrap justify-between",children:[o.jsx(Ue,{type:"line",text:e,items:me}),!s&&Z.length>0&&o.jsx(Ue,{type:"line",items:Z})]}),o.jsx("div",{className:"chart-wrap",children:o.jsx(Fn,{margin:{top:14,right:50,bottom:50,left:50},data:Te,colors:ee.map(P=>P.current),lineWidth:2,curve:"monotoneX",animate:!1,isInteractive:g,xScale:{type:"time",format:"%Y-%m-%d"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",min:K,max:G},axisBottom:{format:Ke,tickSize:0,tickPadding:10,tickRotation:-45},legends:a?ot:[],axisLeft:{...!g&&{renderTick:void 0},tickSize:0,tickValues:8},pointLabelYOffset:0,...Ie.length&&{markers:Ie},...C.length&&{axisRight:{...!g&&{renderTick:void 0},tickSize:0,tickValues:8,format:P=>{const k=Math.round(P*(D/G));return P<0?P:ea(k)}}},enableGridX:!1,enableSlices:"x",sliceTooltip:oa,theme:h,layers:["grid","markers","areas",na(ue),"slices","points","axes","legends"]})}),l.length>0&&o.jsx(kr,{data:l,dataKeys:c,tableOpenedByDefault:u})]})},ra=(e=[],t=[])=>s=>{const n=i=>{const m=i.dataKey;return["isBug","isFeature"].includes(m)?t.filter(({isBug:h=!1})=>h&&m==="isBug"||!h&&m==="isFeature"):e},{left:r=[],right:a=[]}=s,l={lines:r.map(i=>({...i,data:n(i)})),xAxis:"left"},c={lines:a.map(i=>({...i,data:n(i)})),xAxis:"right"};return[...r.length>0?[l]:[],...a.length>0?[c]:[]]},aa=e=>{const t=[...(e==null?void 0:e.left)||[],...(e==null?void 0:e.right)||[]].map(n=>n.dataKey);return t.length>0?[...t,"author"]:["comments","approvals","age","prSize","author"]};let la=1;const ca=()=>++la,ia=(e=[])=>{const t=[];return e.forEach(({left:s=[],right:n=[]})=>{s.forEach(r=>(r==null?void 0:r.groupMath)&&t.push(r.groupMath)),n.forEach(r=>(r==null?void 0:r.groupMath)&&t.push(r.groupMath))}),t},da=(e=[])=>ia(e).includes("trimmedAverage"),ma=({chunkyData:e=[],pullRequests:t=[],issues:s=[],releases:n=[],tableOpenedByDefault:r=!1})=>{const{theme:a}=q(),l=L[a].secondary,c=L[a].primary,d=[{graphId:1,left:[{label:"*Trimmed Average PR Age (days)",color:l,dataKey:"age",groupMath:"trimmedAverage"}],right:[{label:"*Trimmed Average PR Size",color:c,dataKey:"prSize",groupMath:"trimmedAverage"}]}],[i,m]=w.useState(d),u=da(i),p=ra(t,s);return t.length>0&&o.jsxs(Y,{children:[o.jsxs(de,{title:"Your graphs",expandText:"guidance",children:[o.jsx("p",{children:"You can build multiple graphs with data you want to see to help you find insights and track trends."}),o.jsx("p",{children:"Questions worth asking (with team context):"}),o.jsxs("ul",{children:[o.jsx("li",{children:"What metrics do you want to look and and compare against?"}),o.jsx("li",{children:"Any insights or things you would like to try to impact these metrics?"}),o.jsx("li",{children:"This graph initially had PR age and size as they are often impactful metrics, what do you think about the trends of these metrics?"})]})]}),o.jsxs(we,{children:[i.map((h,g)=>{var y,f;const x=p(h);return((y=h==null?void 0:h.left)==null?void 0:y.length)<1&&((f=h==null?void 0:h.right)==null?void 0:f.length)<1?o.jsx(oo,{graphInfo:h,setGraph:m,graphs:i},g):o.jsx(W,{graphInfo:h,setGraph:m,graphs:i,blockHeading:!0,markers:n,showLegends:!1,data:x,tableKeys:aa(h),tableData:e,tableOpenedByDefault:g===0&&r},g)}),u&&o.jsx("p",{children:"*Trimmed average is the average after the top and bottom 5% is trimmed."})]}),o.jsxs("div",{className:"flex flex-nowrap basis-full justify-center gap-x-3 mb-08",children:[i.length>1&&o.jsx(O,{variant:"secondary",onClick:h=>{h.preventDefault(),m(i.slice(0,-1))},children:"Remove above graph"}),o.jsx(O,{onClick:h=>{h.preventDefault(),m([...i,{graphId:ca(),left:[],right:[]}])},children:"Add another custom graph"})]})]})},ua=e=>({issues:e.issues}),xt=M(ua)(ma),po=(e,t)=>t.some(s=>e.some(n=>n[s])),dt=({data:e=[],bars:t=[],sortBy:s="",indexBy:n="user",max:r=20,title:a=""})=>{const{theme:l}=q(),c=st(l),{showNumbers:d}=tt(),i=Ls(g=>t.some(x=>g[x.dataKey]),e),m=g=>(x,y)=>+((x[g]||0)<(y[g]||0))||+((x[g]||0)===(y[g]||0))-1,u=s?i.sort(m(s)):i,p=r?u.slice(0,r):u,h=t.map(g=>g.dataKey);return po(e,h)&&o.jsxs("div",{className:"w-full max-w-mw mb-4",children:[o.jsx(Ue,{text:a,items:t}),o.jsx("div",{className:"chart-wrap",children:o.jsx(Un,{data:p,keys:h,indexBy:n,margin:{top:5,right:50,bottom:60,left:50},padding:.3,groupMode:"grouped",layout:"vertical",valueFormat:g=>`${g}`,colors:t.map(g=>g.color),axisBottom:{tickSize:0,tickRotation:-45},axisLeft:{...!d&&{renderTick:void 0},tickSize:0},isInteractive:d,enableLabel:!1,animate:!1,theme:c})})]})},ha=(e,t,s=!1)=>{const n={},r={};e.forEach(u=>{const p=u.author,h=u[t]||{},g=jt(Object.values(h));n[p]=g,r[p]=u.name||p});const a=Object.entries(n).sort(([,u],[,p])=>p-u),l=jt(Object.values(n)),c=u=>{const p=100/l;return u*p},d=[];a.forEach(([u,p])=>{const h=c(p);p>0&&h>5&&d.push(u)});const i=d.length===e.length-1?a.map(([u])=>u):d,m=s?e.filter(u=>i.includes(u.author)).map(u=>u.author):i;return[m,m.map(u=>r[u]||u)]},pa=(e=[],t)=>{const s=Object.entries(t).filter(([r])=>!e.some(a=>a===r));return jt(s.map(r=>r[1]))},ga=(e=[],t,s=[],n=!1)=>{const r=c=>[...s.map(d=>{var i;return((i=c==null?void 0:c[t])==null?void 0:i[d])||0}),...n?[pa(s,c[t])]:[]],a=s.map(c=>{const d=e.find(i=>i.author===c);return r(d)});let l=[];return e.forEach(c=>{if(!s.some(d=>d===c.author)){const i=r(c).map((m,u)=>m+(l[u]||0));l=[...i.slice(0,i.length-1),0]}}),[...a,...l.length?[l]:[]]},fa=({data:e,dataKey:t,preSorted:s,showNames:n=!0})=>{const[r,a]=ha(e,t,s),l=a.length<e.length,c=ga(e,t,r,l),d=[...a,...l?["Others"]:[]];return{names:n?d:d.map((i,m)=>`Spartacus${Array(m).fill(" ").join("")}`),matrix:c}},mt=({title:e,data:t=[],preSorted:s=!1,dataKey:n})=>{const{theme:r}=q(),a=st(r),{showNumbers:l}=tt(),{showNames:c}=ve(),{names:d,matrix:i}=fa({data:t,dataKey:n,preSorted:s,showNames:c});return(u=>u.some(p=>p.some(Boolean)))(i)&&o.jsxs("div",{children:[o.jsx(Ue,{text:e,className:"text-center"}),o.jsx("div",{className:"chord-wrap",children:o.jsx(Gn,{label:"id",data:i,keys:d,margin:{top:0,right:10,bottom:10,left:10},arcBorderColor:{from:"color",modifiers:[["darker",.4]]},ribbonOpacity:.5,ribbonBorderWidth:.5,ribbonBorderColor:{from:"color",modifiers:[["darker",.4]]},innerRadiusRatio:.85,labelRotation:0,padAngle:.06,innerRadiusOffset:.03,labelOffset:-23,labelTextColor:{from:"color",modifiers:[["darker",2]]},colors:_,isInteractive:l,activeArcOpacity:1,inactiveArcOpacity:1,activeRibbonOpacity:.75,inactiveRibbonOpacity:.25,animate:!1,motionConfig:"stiff",theme:a})})]})},go=({title:e="",data:t=[]})=>{const{theme:s}=q(),n=st(s),{showNumbers:r}=tt();return t.length&&o.jsxs("div",{className:"z-10 w-full max-w-mw",children:[o.jsx("div",{className:"flex flex-wrap justify-between",children:o.jsx(Ue,{type:"line",text:e})}),o.jsx("div",{className:"pie-wrap",children:o.jsx(Vn,{data:t,colors:{datum:"data.color"},margin:{top:15,right:80,bottom:0,left:80},animate:!1,innerRadius:.65,padAngle:1,cornerRadius:4,activeOuterRadiusOffset:5,borderWidth:1,startAngle:-90,endAngle:90,enableArcLabels:!1,arcLinkLabelsSkipAngle:4,arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLinkLabelsDiagonalLength:10,arcLinkLabelsStraightLength:15,arcLinkLabelsTextColor:n.textColor,theme:n,isInteractive:r})})]})},xa=({pullRequests:e=[],releases:t=[],chunkyData:s=[],usersData:n=[],allRepos:r={},userIds:a=[],usersInfo:l={}})=>{var E,b;const{theme:c}=q(),d=L[c].secondary,i=L[c].primary,{showNames:m}=ve(),u=a.length||15,p=["commentsGiven","approvalsGiven"],h=n.sort(be(p)),g=h.map((A,D)=>{var N;return{commentsGiven:A.commentsGiven,commentsReceived:A.commentsReceived,uniquePRsApproved:A.uniquePRsApproved,totalPRs:A.totalPRs,author:m?A.author:`${Array(D).fill(" ").join("")}Spartacus`,name:m?((N=l[A.author])==null?void 0:N.name)||A.author:`${Array(D).fill(" ").join("")}Spartacus`}}),x=h.map(A=>{var D;return{...A,name:((D=l[A.author])==null?void 0:D.name)||A.author}}),y=ho("repo",r),f=uo({pullRequests:e,showNames:m,usersInfo:l}),S=x.filter(A=>A.approvalsGiven>0).length,v=x.filter(A=>A.commentsGiven>0).length;return n.length>0&&o.jsxs(Y,{children:[o.jsxs(de,{title:"Contributions",expandText:"guidance",children:[o.jsx("p",{children:"Questions worth asking (with team context):"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Is there a bus factor risk?"}),o.jsx("li",{children:"Are there any data points that stand out?"}),o.jsx("li",{children:"How do the given and received metrics look?"}),o.jsx("li",{children:"How well spread are the collaboration metrics?"}),o.jsx("li",{children:"Any insights or things you would like to try to impact these metrics?"})]})]}),o.jsxs(we,{children:[o.jsxs("div",{className:"flex flex-wrap justify-center w-full",children:[o.jsxs("div",{className:"w-1/2 max-mm:w-full",children:[o.jsx(dt,{data:g,indexBy:"name",title:"Comments",sortBy:"commentsGiven",max:u,bars:[{dataKey:"commentsGiven",color:d,label:"given"},{dataKey:"commentsReceived",color:i,label:"*received"}]}),o.jsx("p",{children:"*Received comments can also come from out of team so can be higher."})]}),o.jsx("div",{className:"w-1/2 max-mm:w-full",children:o.jsx(dt,{data:g,indexBy:"name",title:"PRs",sortBy:"uniquePRsApproved",max:u,bars:[{dataKey:"uniquePRsApproved",color:d,label:"approved"},{dataKey:"totalPRs",color:i,label:"opened"}]})})]}),(v>0||S>0)&&o.jsxs("div",{className:"w-full flex flex-wrap justify-center gap-4",children:[v>0&&o.jsx(mt,{data:x,preSorted:!0,dataKey:"commentsByUser",title:"Comment contributions"}),S>0&&o.jsx(mt,{data:x,preSorted:!0,dataKey:"approvalsByUser",title:"Approval contributions"})]}),o.jsx("p",{children:"These chord charts show how contributions are given and received, the dominant colour indicates more contribution"}),f.length>0&&((b=(E=f==null?void 0:f[0])==null?void 0:E.lines)==null?void 0:b.length)<21&&o.jsx(W,{title:"PRs by author",markers:t,showLegends:!0,data:f,tableData:s,tableKeys:["author","repo"]}),y.pieData.length>0&&o.jsx(go,{data:y.pieData,title:y.sectionTitle})]})]})},ya=e=>({usersData:e.usersData,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),Vt=M(ya)(xa),fo=w.forwardRef(({className:e,...t},s)=>o.jsx(Ms,{className:j("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:o.jsx(Bn,{className:j("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));fo.displayName=Ms.displayName;const Ra={warn:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 fill-current",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),error:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 fill-current",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})})},Bt=({error:{level:e="error",message:t},className:s})=>{const n=e==="error"?"bg-error":"bg-warn";return o.jsxs("div",{className:`${n} p-3 flex items-center rounded-sm ${s}`,children:[Ra[e],o.jsx("p",{className:"m-0 ml-2 p-0",children:t})]})},Ea=(e,t)=>[e&&"fetching",t.length&&"Get more data","Get data"].find(Boolean),Sa=e=>{const{fetching:t,error:s,pullRequests:n=[],qaId:r}=e;return o.jsxs("div",{className:"grid grid-cols-1 gap-2 max-mm:grid-cols-2",children:[o.jsx(O,{className:"m-0 w-full col-span-full",type:"submit",disabled:t,color:"primary","data-qa-id":r,children:Ea(t,n)}),s&&o.jsx(Bt,{error:s,className:"col-span-full"})]})},va=e=>({fetching:e.fetching,error:e.error,pullRequests:e.pullRequests}),xo=M(va)(Sa),wa=e=>{const{setValue:t,amountOfData:s,pullRequests:n=[],preFetchedName:r="",className:a=""}=e,l=!r&&n.length>0,c=d=>`Get ${d} ${d===1?"month":"months"} ${l?"more ":""}data`;return o.jsxs(Le,{onValueChange:d=>t("amountOfData",d==="all"?d:Number(d)),value:`${s}`,children:[o.jsx(Ne,{className:`w-auto ${a}`,children:o.jsx($e,{children:s==="all"?"Get it all!":c(Number(s))})}),o.jsx(Pe,{children:o.jsxs(Me,{children:[o.jsx(J,{value:"1",children:c(1)}),o.jsx(J,{value:"3",children:c(3)}),o.jsx(J,{value:"6",children:c(6)}),o.jsx(J,{value:"12",children:c(12)}),o.jsx(J,{value:"24",children:c(24)}),o.jsx(J,{value:"all",children:"Get it all!"})]})})]})},ba=e=>({pullRequests:e.pullRequests,preFetchedName:e.preFetchedName}),yo=M(ba)(wa),Ro=w.forwardRef(({className:e,type:t,...s},n)=>o.jsx("input",{type:t,"data-qa-id":`input-${t}`,className:j("flex mt-8 h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground  focus:border-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring  disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));Ro.displayName="Input";const Eo={org:"Organization",repo:"Repository",team:"Team name (from GitHub Org team url)",gitTeamUrl:"Org's team url",token:"Token",excludeIds:"Exclude GitHub users e.g. remove bot PRs and comments, ',' separated",enterpriseAPI:"Enterprise API full url",userIds:"Comma separated list GitHub users",userId:"GitHub user ID",startDate:"Joined yyyy/mm/dd",endDate:"Left yyyy/mm/dd",events:"Comma separated list of events (optional)",teamName:"Team name",name:"Name"},Aa=({dates:e=[]})=>{const t=e.every(({startDate:a="",endDate:l=""})=>{const c=!a||Nt(new Date(a)),d=!l||Nt(new Date(l));return c&&d}),s=[];e.forEach(({startDate:a="",endDate:l=""})=>{a&&s.push(a),l&&s.push(l)});const n=Kn((a,l)=>new Date(a).getTime()-new Date(l).getTime(),s),r=oe(s,n);return t&&r},Ta=(e={})=>{const t=Object.values(e).every(s=>Aa(s));return Object.keys(e).length>0&&t},xs=(e="")=>!e||/^\d{4}[/-]\d{2}[/-]\d{2}$/.test(e)&&Nt(new Date(e)),So=({key:e,value:t})=>ne([[oe("gitTeamUrl"),T(/^(https:\/\/.+\..+$)/.test(t))],[oe("enterpriseAPI"),T(/^(https:\/\/.+\..+|^$)/.test(t))],[oe("excludeIds"),T(/^([\w-.,\s]+|)$/.test(t))],[oe("events"),T(/^([\w-.,&\s=]+|)$/.test(t))],[oe("name"),T(/.?/.test(t))],[oe("usersInfo"),()=>Ta(t)],[oe("startDate"),()=>xs(t)],[oe("endDate"),()=>xs(t)],[U,T(/^[\w-_.]+$/.test(t))]])(e),Da=e=>t=>{const s=e[t];return!So({key:t,value:s})},vo=e=>{const t=Da(e),s={};return Object.keys(e).forEach(r=>{s[r]=t(r)}),{isValid:Object.values(s).every(r=>!r),validationErrors:s}},Lt=(e,t)=>{const s=e[t],n=typeof s=="object"?"":s;return Array.isArray(s)?qn(", ",s):n},H=e=>{const{type:t,className:s="",inputError:n={},setInputError:r=()=>{},formInfo:a={},setValue:l}=e,c=n[t]?"border-red-500":"";return o.jsxs(Ze,{children:[o.jsx("p",{className:"mb-1 block",children:Eo[t]}),o.jsx(Ro,{className:`${s} m-0 w-full ${c}`,value:Lt(a,t),type:t,onBlur:d=>{const i=I("",["target","value"],d),m=So({key:t,value:i});r({...n,[t]:!m}),m&&l(t,i)},onChange:d=>{const i=I("",["target","value"],d);r({...n,[t]:!1}),l(t,i)},onFocus:()=>r({...n,[t]:!1})}),o.jsx("p",{className:"text-red-500 text-xs",children:n[t]&&"Invalid input"})]})},wo=Fs,ja=Us,bo=$s,qt=w.forwardRef(({className:e,...t},s)=>o.jsx(ht,{ref:s,className:j("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));qt.displayName=ht.displayName;const Ao=w.forwardRef(({className:e,children:t,...s},n)=>o.jsxs(bo,{children:[o.jsx(qt,{}),o.jsxs(Ve,{ref:n,className:j("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,o.jsxs(Ut,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[o.jsx("path",{d:"M18 6 6 18"}),o.jsx("path",{d:"m6 6 12 12"})]}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ao.displayName=Ve.displayName;const To=w.forwardRef(({className:e,children:t,...s},n)=>o.jsxs(bo,{children:[o.jsx(qt,{}),o.jsx(Ve,{ref:n,className:j("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:t})]}));To.displayName=Ve.displayName;const Do=w.forwardRef(({className:e,...t},s)=>o.jsx(pt,{ref:s,className:j("text-lg font-semibold leading-none tracking-tight",e),...t}));Do.displayName=pt.displayName;const Na=w.forwardRef(({className:e,...t},s)=>o.jsx(gt,{ref:s,className:j("text-sm text-muted-foreground",e),...t}));Na.displayName=gt.displayName;const Pa=({onSubmit:e=()=>{},gitUsers:t=[],usersInfo:s={}})=>{const n=Object.entries(s).map(([f,{name:S="",dates:v=[]}])=>({userId:f,name:S,dates:v})),r=n.length>0?n:[{userId:"",name:"",dates:[]}],[a,l]=w.useState(r),c=f=>(S,v)=>{const E=[...a];E[f][S]=v,l(E)},d=(f,S)=>(v,E)=>{const b=[...a];b[f].dates[S][v]=E,l(b)},i=f=>{f.preventDefault();const S={};a.forEach(({userId:v,name:E,dates:b})=>{S[v]={userId:v,name:E,dates:b}}),e(S)},m=f=>{f.preventDefault(),l([...a,{userId:"",name:"",dates:[]}])},u=(f,S)=>{S.preventDefault();const v=[...a];v.splice(f,1),l(v)},p=(f,S)=>{S.preventDefault();const v=[...a],E={startDate:"",endDate:""};v[f].dates.push(E),l(v)},h=({userIndex:f,dateIndex:S})=>{const v=[...a],b=v[f].dates.filter((A,D)=>D!==S);v[f].dates=b,l(v)},[g,x]=w.useState({}),y=t.length>0&&"Edit Github Team members"||Object.keys(s).length>0&&"Edit team members"||"Or manually add team members";return o.jsxs("form",{children:[o.jsx("h4",{children:y}),a.map((f,S)=>o.jsxs("div",{className:"grid grid-cols-1 gap-2 max-mm:grid-cols-2 mb-8",children:[o.jsx(H,{type:"userId",formInfo:f,inputError:g,setInputError:x,setValue:c(S)}),o.jsx(H,{type:"name",formInfo:f,setValue:c(S),inputError:g,setInputError:x}),f.dates.map((v,E)=>o.jsxs("div",{className:"flex items-stretch gap-2 justify-between col-span-full",children:[o.jsx(H,{type:"startDate",formInfo:v,inputError:g,setInputError:x,setValue:d(S,E)}),o.jsx(H,{type:"endDate",inputError:g,formInfo:v,setInputError:x,setValue:d(S,E)}),o.jsx("svg",{onClick:()=>h({userIndex:S,dateIndex:E}),className:"w-6 fill-current min-h-12 rounded-sm bg-destructive test-[#CCC] px-0 py-2 h-auto",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-testid":"DeleteIcon",children:o.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})})]},E)),o.jsx(O,{className:"min-h-12 m-0",color:"primary",onClick:v=>p(S,v),children:`Add ${f.dates.length>0?"more dates":"dates"}`}),o.jsx(O,{className:"bg-destructive text=[#CCC] min-h-12 m-0",onClick:v=>u(S,v),children:"Remove User"})]},S)),o.jsx(O,{className:"mr-0 w-full min-h-12",color:"primary",onClick:f=>m(f),children:"Create new user"}),o.jsx(O,{className:"mr-0 w-full min-h-12",color:"primary",onClick:f=>i(f),children:"Save and close"})]})},R={SET_TEAM_NAME:"SET_TEAM_NAME",CLEAR_TEAM_NAME:"CLEAR_TEAM_NAME",STORE_ORG:"STORE_ORG",CLEAR_ORG:"CLEAR_ORG",STORE_TOKEN:"STORE_TOKEN",STORE_FORM_UNTIL_DATE:"STORE_FORM_UNTIL_DATE",CLEAR_FORM_UNTIL_DATE:"CLEAR_FORM_UNTIL_DATE",STORE_UNTIL_DATE:"STORE_UNTIL_DATE",CLEAR_UNTIL_DATE:"CLEAR_UNTIL_DATE",SET_PR_PAGINATION:"SET_PR_PAGINATION",CLEAR_PR_PAGINATION:"CLEAR_PR_PAGINATION",SET_PR_REVIEWED_PAGINATION:"SET_PR_REVIEWED_PAGINATION",CLEAR_PR_REVIEWED_PAGINATION:"CLEAR_PR_REVIEWED_PAGINATION",SET_RELEASES_PAGINATION:"SET_RELEASES_PAGINATION",CLEAR_RELEASES_PAGINATION:"CLEAR_RELEASES_PAGINATION",SET_ISSUES_PAGINATION:"SET_ISSUES_PAGINATION",CLEAR_ISSUES_PAGINATION:"CLEAR_ISSUES_PAGINATION",SET_DESC:"SET_DESC",CLEAR_DESC:"CLEAR_DESC",FETCH_STATUS:"FETCH_STATUS",FETCH_START:"FETCH_START",PRE_FETCH_ERROR:"PRE_FETCH_ERROR",CLEAR_PRE_FETCH_ERROR:"CLEAR_PRE_FETCH_ERROR",FETCH_ERROR:"FETCH_ERROR",CLEAR_FETCH_ERROR:"CLEAR_FETCH_ERROR",FETCH_END:"FETCH_END",STORE_REPOS:"STORE_REPOS",STORE_REPO:"STORE_REPO",CLEAR_REPO:"CLEAR_REPO",STORE_AMOUNT:"STORE_AMOUNT",STORE_SORT:"STORE_SORT",STORE_ENT_URL:"STORE_ENT_URL",STORE_EX_IDS:"STORE_EX_IDS",CLEAR_EX_IDS:"CLEAR_EX_IDS",STORE_EVENTS:"STORE_EVENTS",CLEAR_EVENTS:"CLEAR_EVENTS",STORE_USERS_INFO:"STORE_USERS_INFO",CLEAR_USERS_INFO:"CLEAR_USERS_INFO",STORE_USER_IDS:"STORE_USER_IDS",CLEAR_USER_IDS:"CLEAR_USER_IDS",ADD_ITEMS_DATE_RANGE:"ADD_ITEMS_DATE_RANGE",CLEAR_ITEMS_DATE_RANGE:"CLEAR_ITEMS_DATE_RANGE",ADD_TRIMMED_ITEMS:"ADD_TRIMMED_ITEMS",CLEAR_TRIMMED_ITEMS:"CLEAR_TRIMMED_ITEMS",ADD_PRS:"ADD_PRS",ADD_FILTERED_PRS:"ADD_FILTERED_PRS",CLEAR_PRS:"CLEAR_PRS",CLEAR_FILTERED_PRS:"CLEAR_FILTERED_PRS",ADD_REVIEWED_PRS:"ADD_REVIEWED_PRS",ADD_REVIEWED_FILTERED_PRS:"ADD_REVIEWED_FILTERED_PRS",CLEAR_REVIEWED_PRS:"CLEAR_REVIEWED_PRS",CLEAR_REVIEWED_FILTERED_PRS:"CLEAR_REVIEWED_FILTERED_PRS",ADD_ISSUES:"ADD_ISSUES",ADD_FILTERED_ISSUES:"ADD_FILTERED_ISSUES",CLEAR_FILTERED_ISSUES:"CLEAR_FILTERED_ISSUES",CLEAR_ISSUES:"CLEAR_ISSUES",ADD_RELEASES:"ADD_RELEASES",CLEAR_RELEASES:"CLEAR_RELEASES",ADD_FILTERED_RELEASES:"ADD_FILTERED_RELEASES",CLEAR_FILTERED_RELEASES:"CLEAR_FILTERED_RELEASES",PREFETCHED_NAME:"PREFETCHED_NAME",CLEAR_PREFETCHED_NAME:"CLEAR_PREFETCHED_NAME",ADD_USERS_DATA:"ADD_USERS_DATA",CLEAR_USERS_DATA:"CLEAR_USERS_DATA"},jo=(e,t,s=[])=>new Promise((n,r)=>{const[a,...l]=e;Promise.all(a.map(c=>t(c))).then(c=>l&&l.length?jo(l,t,c).then(d=>n(s.concat(d))).catch(r):n(s.concat(c))).catch(r)}),Xe=(e=[],t,s=2)=>{const n=zn(s,e);return e.length?jo(n,t):[]},Kt=(e,t="DESC",s="")=>n=>{const r=I("",e,n),a=r&&new Date(r),l=s?new Date(s):new Date;return t==="DESC"?a&&et(a,l):a&&Be(a,l)},yt=e=>e?` after:"${e}" `:"",zt=(e,{oldest:t,newest:s})=>{const n=e==="DESC"?t:s,a=n?` ${e==="DESC"?"after":"before"}:"${n}" `:"",l=a?50:10;return`
    ${e==="DESC"?`last: ${l}`:`first: ${l}`}
    ${a}
  `},Ht=e=>({oldest:t,newest:s})=>yt(e==="DESC"?t:s),ye="pageInfo { endCursor hasNextPage hasPreviousPage startCursor }",Ge=e=>`
    comments(first: ${e?100:10} ${yt(e)}) {
      totalCount
      edges {
        node {
          author {
            login
            url
          }
          publishedAt
          body
        }
      }
      ${ye}
    }
`,No=e=>t=>`
pullRequests(
  first: 50
  ${Ht(e)(t)}
  states: [MERGED]
  orderBy: {field: CREATED_AT direction: ${e}}
) {
  totalCount
  edges {
    node {
      id
      url
      author {
        login
        url
      }
      repository {
        name
        owner {
          login
        }
      }
      additions
      deletions
      mergedAt
      createdAt
      commits(first:1) {
        edges {
          node {
            commit {
              committedDate
            }
          }
        }
      }
      ${Co(void 0)}
      ${Ge(void 0)}
    }
  }
  ${ye}
}`,Po=e=>t=>`
issues(
  ${Ht(e)(t)}
  first: 50
  orderBy: { field:CREATED_AT direction: ${e} }
) {
  totalCount
  edges {
    node {
      title
      url
      createdAt
      closedAt
      state
      labels(first:5) {
        edges {
          node {
            name
          }
        }
      }
    }
  }
  ${ye}
}`,Ca=e=>t=>`
releases(
  ${Ht(e)(t)}
  first: 50
  orderBy:{ field:CREATED_AT direction: ${e} }
) {
  totalCount
  edges {
    node {
      id
      name
      createdAt
      tag {
        name
      }
    }
  }
  ${ye}
}`,Co=e=>`
    reviews(first: ${e?100:10} ${yt(e)}) {
      edges {
        node {
          id
          state
          author {
            login
            url
          }
          ${Ge(void 0)}
        }
      }
      ${ye}
    }
`,Io=(e={},t="",s={},n)=>r=>{const{hasNextPage:a=!1,startCursor:l,endCursor:c}=I({},["data","result",r,"pageInfo"],s),d=I([],["data","result",r,"edges"],s),i=r==="pullRequests"?"mergedAt":"createdAt",m=re(t)?d.filter(Kt(["node",i],n,t)):[],u={pullRequests:"prPagination",issues:"issuesPagination",releases:"releasesPagination"},h=I(n==="DESC"?c:l,[u[r],"oldest"],e),x=I(n==="ASC"?c:l,[u[r],"newest"],e),y=m.length,f=ne([[T(a===!1),le],[T(!re(t)),T(a)],[T(y===0),le],[T(y>0&&d.length>y),le],[U,T(a)]])();return{newest:n==="ASC"&&c?c:x,oldest:n==="DESC"&&c?c:h,hasNextPage:a,hasNextPageForDate:f}},Ia=(e={},t="",s={},n)=>r=>{const a=r==="usersReviews"?["data","result"]:["data","result",r],{hasNextPage:l=!1,hasPreviousPage:c=!1,startCursor:d,endCursor:i}=I({},[...a,"pageInfo"],s),m=I([],[...a,"edges"],s),u=["pullRequests","usersReviews"].includes(r)?"mergedAt":"createdAt",p=re(t)?m.filter(Kt(["node",u],n,t)):[],h={commitComments:"commitCommentsPagination",issueComments:"issueCommentsPagination",usersReviews:"usersReviewsPagination"},g=r==="usersReviews"||n==="ASC"?"right":"left",y=I(g==="right"?i:d,[h[r],"oldest"],e),S=I(g==="right"?d:i,[h[r],"newest"],e),v=g==="right"?l:c,E=p.length,b=ne([[T(v===!1),le],[T(!re(t)),T(v)],[T(E===0),le],[T(E>0&&m.length>E),le],[U,T(v)]])();return{newest:g==="right"&&i?i:S,oldest:g==="left"&&d?d:y,hasNextPage:v,hasNextPageForDate:b}},_a=(e={},t="",s={},n)=>{const{hasNextPage:r=!1,hasPreviousPage:a=!1,startCursor:l,endCursor:c}=I({},["data","result","pageInfo"],s),d=I([],["data","result","edges"],s),i=re(t)?d.filter(Kt(["node","mergedAt"],n,t)):[],u=I(n==="DESC"?c:l,["usersReviewsPagination","oldest"],e),h=I(n==="DESC"?l:c,["usersReviewsPagination","newest"],e),g=n==="DESC"?r:a,x=i.length,y=ne([[T(g===!1),le],[T(!re(t)),T(g)],[T(x===0),le],[U,T(g)]])();return{newest:n==="ASC"&&l?l:h,oldest:n==="DESC"&&c?c:u,hasNextPage:g,hasNextPageForDate:y}},Wt=e=>{const t=["issues","pullRequests","releases"],[s]=t.map(n=>{var r,a,l;return((l=(a=(r=e==null?void 0:e.data)==null?void 0:r.result)==null?void 0:a[n])==null?void 0:l.totalCount)||0}).sort((n,r)=>r-n);return Math.ceil(s/50)-1},ka=e=>t=>`
    commitComments(
      ${zt(e,t)}
    ) {
      edges {
        cursor
        node {
          createdAt
          commit {
            repository {
              nameWithOwner
            }
            url
            associatedPullRequests(last: 10) {
              edges {
                node {
                  number
                  url
                }
              }
            }
          }
          body
        }
      }
      ${ye}
    }
`,Oa=e=>t=>`
    issueComments(
      ${zt(e,t)}
    ) {
      edges {
        cursor
        node {
          createdAt
          url
          repository {
            nameWithOwner
          }
          issue {
            number
          }
          pullRequest {
            number
          }
          body
        }
      }
      ${ye}
    }
`,La=e=>({user:t,sortDirection:s="DESC",amountOfData:n,usersReviewsPagination:r={}})=>({query:`{
    result: search(
      query: "type:pr state:closed reviewed-by:${t}"
      type: ISSUE
      ${zt(s,r)}
    ) {
      issueCount
      ${ye}
      edges {
        node {
          ... on PullRequest {
            id
            number
            url
            author {
              login
              url
            }
            repository {
              name
              owner {
                login
              }
            }
            additions
            deletions
            mergedAt
            createdAt
            ${Ge(void 0)}
            reviews(last: 10 states: [COMMENTED,APPROVED,CHANGES_REQUESTED] author: "${t}") {
              ${ye}
              edges {
                node {
                  id
                  state
                  author {
                    login
                    url
                  }
                  ${Ge(void 0)}
                }
              }
            }
          }
        }
      }
    }
  }`,sortDirection:s,user:t,resultInfo:a=>{const l=_a({usersReviewsPagination:r,amountOfData:n},e,a,s),c=ne([[T(n==="all"),T(n)],[T(re(e)),T(n)],[T(Number.isInteger(n)),T(n-1)],[U,Wt]])(a),d={usersReviewsPagination:Object.assign(l,{hasNextPage:!1})},i=re(e)?"hasNextPageForDate":"hasNextPage";return{hasNextPage:d.usersReviewsPagination[i]===!0,nextPageInfo:{...d,amountOfData:c}}},fillerType:"pullRequests",hasMoreResults:[r.hasNextPage].some(a=>a!==!1)}),Fe=e=>{const{hasNextPageForDate:t}=e;return t!==!1},_o=e=>({user:t,sortDirection:s="DESC",amountOfData:n,issuesPagination:r={},prPagination:a={},commitCommentsPagination:l={},issueCommentsPagination:c={}})=>({query:`{
    result: user(login: "${t}") {
      login
      ${Fe(c)?Oa(s)(c):""}
      ${Fe(l)?ka(s)(l):""}
      ${Fe(a)?No(s)(a):""}
      ${r[e?"hasNextPageForDate":"hasNextPage"]!==!1?Po(s)(r):""}
    }
  }`,sortDirection:s,user:t,resultInfo:d=>{const i=Io({issuesPagination:r,prPagination:a,amountOfData:n},e,d,s),m=Ia({commitCommentsPagination:l,issueCommentsPagination:c,amountOfData:n},e,d,s),u=ne([[T(n==="all"),T(n)],[T(re(e)),T(n)],[T(Number.isInteger(n)),T(n-1)],[U,Wt]])(d);Object.assign(i("pullRequests"),{hasNextPage:!1});const p={prPagination:Object.assign(i("pullRequests"),{hasNextPage:!1}),issuesPagination:Object.assign(i("issues"),{hasNextPage:!1}),commitCommentsPagination:Object.assign(m("commitComments"),{hasNextPage:!1}),issueCommentsPagination:Object.assign(m("issueComments"),{hasNextPage:!1})},h=re(e)?"hasNextPageForDate":"hasNextPage";return{hasNextPage:Object.values(p).some(x=>x[h]===!0),nextPageInfo:{...p,amountOfData:u}}},hasMoreResults:[a.hasNextPage,r.hasNextPage,l.hasNextPage,c.hasNextPage].some(d=>d!==!1)}),ko=e=>({org:t,repo:s,sortDirection:n="DESC",amountOfData:r,issuesPagination:a={},releasesPagination:l={},prPagination:c={}})=>({query:`{
      result: repository(name: "${s}" owner: "${t}") {
        id
        description
        name
        owner {
          org: login
        }
        ${Fe(c)?No(n)(c):""}
        ${Fe(a)?Po(n)(a):""}
        ${Fe(l)?Ca(n)(l):""}
      }
    }`,sortDirection:n,resultInfo:d=>{const i=Io({issuesPagination:a,releasesPagination:l,prPagination:c},e,d,n),m=ne([[T(r==="all"),T(r)],[T(re(e)),T(r)],[T(Number.isInteger(r)),T(r-1)],[U,Wt]])(d),u={prPagination:Object.assign({hasNextPage:!1},i("pullRequests")),issuesPagination:Object.assign({hasNextPage:!1},i("issues")),releasesPagination:Object.assign({hasNextPage:!1},i("releases"))},p=re(e)?"hasNextPageForDate":"hasNextPage";return{hasNextPage:Object.values(u).some(g=>g[p]===!0),nextPageInfo:{...u,amountOfData:m}}},fillerType:"batchedQuery",hasMoreResults:[c.hasNextPage,a.hasNextPage,l.hasNextPage].some(d=>d!==!1)}),Ma=({nodeId:e,cursor:t})=>({query:`{
      node(id:"${e}") {
          ... on PullRequest {
            id
            ${Ge(t)}
          }
        }
    }`,resultInfo:s=>{var n,r,a,l,c,d,i,m,u,p,h,g,x;return{rawData:s,results:((a=(r=(n=s==null?void 0:s.data)==null?void 0:n.node)==null?void 0:r.comments)==null?void 0:a.edges)||[],hasNextPage:((i=(d=(c=(l=s==null?void 0:s.data)==null?void 0:l.node)==null?void 0:c.comments)==null?void 0:d.pageInfo)==null?void 0:i.hasNextPage)||!1,nextArgs:{nodeId:((u=(m=s==null?void 0:s.data)==null?void 0:m.node)==null?void 0:u.id)||"",cursor:((x=(g=(h=(p=s==null?void 0:s.data)==null?void 0:p.node)==null?void 0:h.comments)==null?void 0:g.pageInfo)==null?void 0:x.endCursor)||""}}},fillerType:""}),$a=({nodeId:e,cursor:t})=>({query:`{
      node(id:"${e}") {
          ... on PullRequest {
            id
            ${Co(t)}
          }
        }
    }`,resultInfo:s=>{var n,r,a,l,c,d,i,m,u,p,h,g,x;return{rawData:s,results:((a=(r=(n=s==null?void 0:s.data)==null?void 0:n.node)==null?void 0:r.reviews)==null?void 0:a.edges)||[],hasNextPage:((i=(d=(c=(l=s==null?void 0:s.data)==null?void 0:l.node)==null?void 0:c.reviews)==null?void 0:d.pageInfo)==null?void 0:i.hasNextPage)||!1,nextArgs:{nodeId:((u=(m=s==null?void 0:s.data)==null?void 0:m.node)==null?void 0:u.id)||"",cursor:((x=(g=(h=(p=s==null?void 0:s.data)==null?void 0:p.node)==null?void 0:h.reviews)==null?void 0:g.pageInfo)==null?void 0:x.endCursor)||""}}},fillerType:"pullRequestReviewComments"}),Fa=({nodeId:e,cursor:t})=>({query:`{
      node(id:"${e}") {
          ... on PullRequestReview {
            id
            ${Ge(t)}
          }
        }
    }`,resultInfo:s=>{var n,r,a,l,c,d,i,m,u,p,h,g,x;return{rawData:s,results:((a=(r=(n=s==null?void 0:s.data)==null?void 0:n.node)==null?void 0:r.comments)==null?void 0:a.edges)||[],hasNextPage:((i=(d=(c=(l=s==null?void 0:s.data)==null?void 0:l.node)==null?void 0:c.comments)==null?void 0:d.pageInfo)==null?void 0:i.hasNextPage)||!1,nextArgs:{nodeId:((u=(m=s==null?void 0:s.data)==null?void 0:m.node)==null?void 0:u.id)||"",cursor:((x=(g=(h=(p=s==null?void 0:s.data)==null?void 0:p.node)==null?void 0:h.comments)==null?void 0:g.pageInfo)==null?void 0:x.endCursor)||""}}},fillerType:""}),Ua=({org:e,orgPagination:t={}})=>({query:`{
    organization(login: "${e}") {
      repositories(
        first:100
        ${yt(t==null?void 0:t.cursor)}
        orderBy: {field: NAME, direction: ASC}
      ) {
        edges {
          node {
            name
          }
          cursor
        }
        pageInfo {
          endCursor
          hasNextPage
        }
      }
    }
  }`,fillerType:"org",resultInfo:s=>{var a,l,c,d,i,m,u,p,h,g,x,y,f,S,v;const n=((d=(c=(l=(a=s==null?void 0:s.data)==null?void 0:a.organization)==null?void 0:l.repositories)==null?void 0:c.pageInfo)==null?void 0:d.hasNextPage)||!1,r=((p=(u=(m=(i=s==null?void 0:s.data)==null?void 0:i.organization)==null?void 0:m.repositories)==null?void 0:u.pageInfo)==null?void 0:p.endCursor)||"";return{rawData:s,results:((x=(g=(h=s==null?void 0:s.data)==null?void 0:h.organization)==null?void 0:g.repositories)==null?void 0:x.edges)||[],hasNextPage:((v=(S=(f=(y=s==null?void 0:s.data)==null?void 0:y.organization)==null?void 0:f.repositories)==null?void 0:S.pageInfo)==null?void 0:v.hasNextPage)||!1,nextPageInfo:{orgPagination:{cursor:r,hasNextPage:n,hasNextPageForDate:n},amountOfData:"all"}}}}),Ga=({org:e,team:t})=>({query:`{
    organization(login: "${e}") {
      team(slug:"${t}") {
        members(
          first:100
        ) {
          edges {
            node {
              name
              email
              login
              createdAt
            }
          }
          pageInfo {
            endCursor
            hasNextPage
          }
        }
      }
    }
  }`,fillerType:"team",resultInfo:s=>{var n,r,a,l,c;return{results:((c=(l=(a=(r=(n=s[0])==null?void 0:n.data)==null?void 0:r.organization)==null?void 0:a.team)==null?void 0:l.members)==null?void 0:c.edges)||[],hasNextPage:!1}}}),Va=(e,t)=>{const n={org:["data","organization","repositories","edges"],team:["data","organization","team","members","edges"]}[e];return n?I([],n,t):t},Ba=e=>{const t=i=>{const u={pullRequests:[d,l],pullRequestReviewComments:[a],batchedQuery:[d,l]}[i]||[];return p=>u.length?Promise.all(u.map(h=>h(p))).then(h=>h.reduce((g,x)=>x(g),p)):Va(i,p)},s=i=>m=>async(u=[])=>{const{hasNextPage:p}=m,{query:h,resultInfo:g,fillerType:x}=i(m),y=p?await e(h):{},{results:f=[],hasNextPage:S,nextArgs:v}=g(y),E=[...u,...f];return S&&x?s(i)(v)(E):await t(x)(E)},n=i=>m=>u=>{const p=Object.assign(i.node,{[m]:u});return Object.assign(i,{node:p})},r=i=>m=>{var u,p,h,g,x,y,f;return{nodeId:((u=m==null?void 0:m.node)==null?void 0:u.id)||"",cursor:((g=(h=(p=m==null?void 0:m.node)==null?void 0:p[i])==null?void 0:h.pageInfo)==null?void 0:g.endCursor)||"",hasNextPage:((f=(y=(x=m==null?void 0:m.node)==null?void 0:x[i])==null?void 0:y.pageInfo)==null?void 0:f.hasNextPage)||!1}},a=async(i=[])=>{const u=await Xe(i,async p=>{var y,f;const h=((f=(y=p==null?void 0:p.node)==null?void 0:y.comments)==null?void 0:f.edges)||[],g=r("comments")(p),x=await s(Fa)(g)(h);return n(p)("comments")({edges:x})},5);return()=>u},l=async i=>{var h,g,x;const m=((x=(g=(h=i==null?void 0:i.data)==null?void 0:h.result)==null?void 0:g.pullRequests)==null?void 0:x.edges)||[],p=await Xe(m,async y=>{var E,b,A;const f=((b=(E=y==null?void 0:y.node)==null?void 0:E.reviews)==null?void 0:b.edges)||[],S=r("reviews")(y),v=await s($a)(S)(f);return{nodeId:(A=y==null?void 0:y.node)==null?void 0:A.id,results:{edges:v}}},5);return y=>{const f=c(y)("reviews")(p);return{data:Object.assign((y==null?void 0:y.data)||{},{result:Object.assign(I({pullRequests:f},["data","result"],y))})}}},c=i=>m=>u=>{var x,y,f,S,v;const p=((y=(x=i==null?void 0:i.data)==null?void 0:x.result)==null?void 0:y.pullRequests)||{},g=(((v=(S=(f=i==null?void 0:i.data)==null?void 0:f.result)==null?void 0:S.pullRequests)==null?void 0:v.edges)||[]).map(E=>{var D;const b=((D=E==null?void 0:E.node)==null?void 0:D.id)||"",A=u.find(N=>N.nodeId===b);return A?n(E)(m)(A.results):E});return Object.assign(p,{edges:g})},d=async i=>{var h,g,x;const m=((x=(g=(h=i==null?void 0:i.data)==null?void 0:h.result)==null?void 0:g.pullRequests)==null?void 0:x.edges)||[],p=await Xe(m,async y=>{var E,b,A;const f=((b=(E=y==null?void 0:y.node)==null?void 0:E.comments)==null?void 0:b.edges)||[],S=r("comments")(y),v=await s(Ma)(S)(f);return{nodeId:((A=y==null?void 0:y.node)==null?void 0:A.id)||"",results:{edges:v}}},5);return y=>{var S;const f=c(y)("comments")(p);return{data:Object.assign((y==null?void 0:y.data)||{},{result:Object.assign(((S=y==null?void 0:y.data)==null?void 0:S.result)||{pullRequests:f})})}}};return t},qa=e=>new Promise((t,s)=>{e.json().then(n=>e.status===200?t(n):s(Object.assign(n,{status:e.status}))).catch(n=>{console.log("-=-=--parseJSON error",n),n.status=e.status,s(n)})}),ys=({message:e=""})=>/(You have triggered an abuse detection mechanism|You have exceeded a secondary rate limit)/.test(e),Ka=({message:e=""})=>/Unexpected end of JSON input/.test(e),za=e=>t=>fetch(e.enterpriseAPI||"https://api.github.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify({query:t})}).then(qa),Ha=(e,{amountOfData:t})=>ne([[T(e===!1),le],[T(e&&typeof t=="number"&&t>=1),U],[T(e&&t==="all"),U],[U,le]])(),Wa=(e=3e4)=>new Promise(t=>setTimeout(()=>t(),e));let Rs=0;const Ya=async(e,t)=>(console.log("-=-=--paused",Date.now()),await Wa(),console.log("-=-=--resume",Date.now()),++Rs,Rs<=10?Re(e,t):{errorMessage:{level:"error",message:"Hit rate limit over ten times"},fetchInfo:e.fetchInfo,results:t,reviewResults:[]}),bt=(e,t)=>t.reduce((n,r)=>{var l,c,d;const a=((d=(c=(l=r==null?void 0:r.data)==null?void 0:l.result)==null?void 0:c[e])==null?void 0:d.edges)||[];return n+a.length},0),Qa=e=>(t,s=[])=>{var i,m,u,p;const r=I(!1,[{pullRequests:"prPagination",issues:"issuesPagination",releases:"releasesPagination"}[t],"hasNextPageForDate"],e),a=s[s.length-1]||{},l=((u=(m=(i=a==null?void 0:a.data)==null?void 0:i.result)==null?void 0:m[t])==null?void 0:u.edges)||[],c=l[l.length-1],d=t==="pullRequests"?"createdAt":"closedAt";return r&&((p=c==null?void 0:c.node)==null?void 0:p[d])||""},Re=async({fetchInfo:e,queryInfo:t,dispatch:s=()=>{}},n=[])=>{const{query:r,resultInfo:a,fillerType:l,user:c,sortDirection:d}=t(e),i=Qa(e),[m]=[i("pullRequests",n),i("issues",n),i("releases",n)].filter(Boolean).sort(qr(d));s({type:R.FETCH_STATUS,payload:{prCount:bt("pullRequests",n),issueCount:bt("issues",n),releasesCount:bt("releases",n),latestItemDate:m,user:c}});const u=za(e);try{const p=await u(r);if(ys(p))throw new Error("Abuse rate triggered");const h=await Ba(u)(l)(p),g=[...n,h],{hasNextPage:x,nextPageInfo:y={}}=a(p),f=ft(e,y);return Ha(x,f)?Re({fetchInfo:f,queryInfo:t,dispatch:s},g):{fetchInfo:f,results:g,reviewResults:[]}}catch(p){const h=p,g=ne([[ys,U],[Ka,U],[f=>f.status===500,U],[f=>f.status===502,U],[f=>f.message==="Abuse rate triggered",U],[Qe(nt(/ENOTFOUND|ECONNRESET/),je("","code")),U],[Qe(nt(/fetch/i),je("","message")),U],[U,le]]),y=ne([[g,T({level:"warn",message:"You may have triggered the api's abuse detection, please wait a minute before trying again"})],[Qe(nt(/50\d/i),je("","status")),T({level:"error",message:"GitHub API 500 error, could be CORS or rate limiting"})],[f=>f.status===401,T({level:"error",message:"GitHub token does not have correct settings, please see README"})],[Qe(nt(/40\d/i),je("","status")),f=>({level:"error",message:`Auth error: ${f.message||"UNKOWN"}`})],[f=>f.status===void 0,T({level:"error",message:"Error while processing data after, please check the console"})],[U,f=>({level:"error",message:`ERROR: ${f.message||"UNKOWN"}`})]])(h);if(g(h))return Ya({fetchInfo:e,queryInfo:t,dispatch:s},n);throw new Error(y.message)}},Xa=async({fetchInfo:e,setGitUsers:t,setInputError:s})=>{try{const{results:n=[]}=await Re({fetchInfo:e,queryInfo:Ga,dispatch:()=>{}}),r=[];n.flat().forEach(({node:a})=>{const{name:l,email:c,login:d}=a,i=l?l.replace(",",""):c.split(".")[0];r.push({userId:d,name:i})}),t(r)}catch(n){const r=n;s({level:"error",message:`Api call error: ${(r==null?void 0:r.message)||"unknown"}`})}},Ja=e=>{var i;const{setGitUsers:t}=e,[s,n]=w.useState({}),r={gitTeamUrl:"",token:""},[a,l]=w.useState(r),d={inputError:s,setInputError:n,formInfo:a,setValue:(m,u)=>l({...a,[m]:u})};return o.jsxs("form",{onSubmit:m=>{m.preventDefault();const{gitTeamUrl:u="",token:p=""}=a,h=u.split("/"),g=h.at(-2)||"",x=h.at(-2)||"";[g,x,p].every(f=>f&&f.length>0)?Xa({fetchInfo:{name:g,org:x,token:p},setGitUsers:t,setInputError:n}):n({level:"error",message:"Invalid inputs"})},children:[o.jsx("h4",{children:"Getting team members from a GitHub Org team page"}),o.jsx(H,{type:"gitTeamUrl",...d},"gitTeamUrl"),o.jsx(H,{type:"token",...d}),o.jsx(O,{className:"w-full mr-0 min-h-12",type:"submit",children:"Get team members"}),((i=s==null?void 0:s.message)==null?void 0:i.length)>0&&o.jsx(Bt,{error:s})]})},Oo=({setParentValues:e,usersInfo:t={}})=>{const[s,n]=w.useState(!1),[r,a]=w.useState([]),l=r.length>0&&"Edit Github Team members"||Object.keys(t).length>0&&"Edit team members"||"Fill in team by:";return o.jsxs("div",{children:[o.jsxs("p",{className:"mb-1",children:["Team members: ",Object.values(t).map(({name:c,userId:d})=>c||d).join(", ")||"None"]}),o.jsxs(wo,{open:s,onOpenChange:n,children:[o.jsx(ja,{asChild:!0,children:o.jsx(O,{className:"w-full",type:"button",children:Object.keys(t).length===0?"Add team members":"Edit team members"})}),o.jsxs(Ao,{className:"overflow-scroll max-h-full w-4/5",children:[o.jsx(Do,{children:l}),Object.keys(t).length===0&&o.jsx(Ja,{setGitUsers:a}),o.jsx(Pa,{gitUsers:r,usersInfo:t,onSubmit:c=>{const d=Object.keys(c).filter(Boolean).length>0;e(d?{usersInfo:c}:{usersInfo:{}}),n(!1)}})]})]})]})},Za=async({fetchInfo:e,untilDate:t,dispatch:s})=>{try{const r=e.userIds.map(m=>({fetchInfo:{...e,issuesPagination:e.issuesPagination[m]||{hasNextPage:!0},prPagination:e.prPagination[m]||{hasNextPage:!0},user:m},queryInfo:_o(t),dispatch:s})),a=await Xe(r,Re,1),l={issuesPagination:{},prPagination:{}},c=[];return a.forEach(({fetchInfo:m,results:u})=>{c.push(u);const p=(m==null?void 0:m.user)||"";l.issuesPagination[p]=Se("issuesPagination",m),l.prPagination[p]=Se("prPagination",m)}),{fetchInfo:ft(e,l),results:c.flat(),reviewResults:[]}}catch(n){throw console.log("-=-=--getUsersData:error",n),n}},el=async({fetchInfo:e,untilDate:t,dispatch:s})=>{var n;try{const[r]=e.userIds,a={fetchInfo:{...e,issuesPagination:e.issuesPagination[r]||{hasNextPage:!0},prPagination:e.prPagination[r]||{hasNextPage:!0},user:r},queryInfo:_o(t),dispatch:s},l=await Re(a),c=l.results,d={fetchInfo:{...e,usersReviewsPagination:((n=e.usersReviewsPagination)==null?void 0:n[r])||{hasNextPage:!0},user:r},queryInfo:La(t),dispatch:s},i=await Re(d),m=i.results,u={issuesPagination:{[r]:Se("issuesPagination",l.fetchInfo)},prPagination:{[r]:Se("prPagination",l.fetchInfo)},usersReviewsPagination:{[r]:Se("usersReviewsPagination",i.fetchInfo)}};return{fetchInfo:ft(e,u),results:c.flat(),reviewResults:m.flat()}}catch(r){throw console.log("-=-=--getUserData:error",r),r}},tl=async({fetchInfo:e,untilDate:t,dispatch:s})=>{try{const n=await Re({fetchInfo:e,queryInfo:Ua,dispatch:s}),a=((n==null?void 0:n.results.flat())||[]).filter(h=>{var g;return(g=h==null?void 0:h.node)==null?void 0:g.name}).map(h=>{var g;return(g=h==null?void 0:h.node)==null?void 0:g.name}),l=e.org,c=a.map(h=>({fetchInfo:{...e,issuesPagination:(e==null?void 0:e.issuesPagination[h])||{hasNextPage:!0},prPagination:(e==null?void 0:e.prPagination[h])||{hasNextPage:!0},org:l,repo:h},queryInfo:ko(t),dispatch:s})),d=await Xe(c,Re,1),i={issuesPagination:{},releasesPagination:{},prPagination:{}},m=[];return d.forEach(({fetchInfo:h,results:g=[]})=>{m.push(g);const{repo:x,issuesPagination:y,releasesPagination:f,prPagination:S}=h;i.issuesPagination[x]=y,i.releasesPagination[x]=f,i.prPagination[x]=S}),{fetchInfo:ft(e,i),results:m.flat(),reviewResults:[]}}catch(n){throw console.log("-=-=--getOrgData:error",n),n}},sl=(e,t=[])=>{var a;const s=e==="DESC"?0:-1,n=t.at(s),r=((a=n==null?void 0:n.node)==null?void 0:a.mergedAt)||(n==null?void 0:n.mergedAt);return new Date(r)},ol=(e,t=[])=>{const{untilDate:s="",amountOfData:n=0,sortDirection:r="DESC"}=e,a={months:n},l=rt(Gs(String),Se("amountOfData")),c=rt(u=>!(typeof u=="string"&&u.length>1),Se("untilDate")),d=rt(u=>Pt(u,a),u=>u?new Date(u):new Date,Se("untilDate")),i=rt(({prDate:u,sortDirection:p})=>p==="DESC"?Pt(u,a):Ct(u,a),u=>({prDate:sl(u,t),sortDirection:u}),je("","sortDirection")),[,m]=[[l(e),""],[c(e)&&t.length>0,i(e)],[r==="DESC",d(e)],[r==="ASC",Ct(new Date(s),a)],[!0,""]].find(([u])=>u)||[];return m},nl=e=>t=>{const s={};return t.forEach(n=>{const r=Hn(e,n);s[r]=(s[r]||0)+1}),s},Lo=nl(["node","author","login"]),rl=e=>{const t={};return e.forEach(({author:s="",score:n=0})=>{t[s]=(t[s]||0)+n}),t},Es=(e=[])=>{const t=new Wn,s=e.map(n=>{var l,c,d;const r=((l=n==null?void 0:n.node)==null?void 0:l.body)||"";return{author:((d=(c=n==null?void 0:n.node)==null?void 0:c.author)==null?void 0:d.login)||"",score:t.analyze(r).score}});return{sentimentScore:Ot("score")(s),sentiments:rl(s)}},al=e=>{var n,r;const t=((r=(n=e==null?void 0:e.node)==null?void 0:n.reviews)==null?void 0:r.edges)||[],s=[];return t.forEach(a=>{var c,d;const l=((d=(c=a==null?void 0:a.node)==null?void 0:c.comments)==null?void 0:d.edges)||[];s.push(...l)}),s},Mo=e=>t=>{var s,n;return e.includes((n=(s=t==null?void 0:t.node)==null?void 0:s.author)==null?void 0:n.login)},ll=e=>t=>{var r,a;const s=!Mo(e)(t);return!/\/apps\//.test(((a=(r=t==null?void 0:t.node)==null?void 0:r.author)==null?void 0:a.url)||"")&&s},At=(e,t,s)=>{var g,x;const n=(x=(g=s==null?void 0:s.node)==null?void 0:g.author)==null?void 0:x.login,r=I([],["node","comments","edges"],s),a=al(s),c={general:r,code:a,all:[...a,...r]}[e]||[],d=c.filter(ll([...t,n])),{sentimentScore:i=0,sentiments:m={}}=Es(d),u=c.filter(Mo([n])),{sentimentScore:p=0}=Es(u),h=e==="all"?"c":`${e}C`;return{[`${h}omments`]:d.length,[`${h}ommenters`]:Lo(d),[`${h}ommentSentimentScore`]:i,[`${h}ommentSentiments`]:m,[`${h}ommentsAuthor`]:u.length,[`${h}ommentAuthorSentimentScore`]:p,[`${h}ommentSentimentTotalScore`]:(p||0)+(i||0)}},cl=(e,t)=>{const s=At("general",e,t),n=At("code",e,t),r=At("all",e,t);return{...s,...n,...r}},il=e=>{var r,a;const s=(((a=(r=e==null?void 0:e.node)==null?void 0:r.reviews)==null?void 0:a.edges)||[]).filter(l=>{var c;return((c=l==null?void 0:l.node)==null?void 0:c.state)==="APPROVED"}),n=Lo(s);return{approvals:s.length,approvers:n}},dl=(e=[],t)=>{var f,S,v,E,b,A;const s=I("",["node","repository","owner","login"],t),n=I("",["node","repository","name"],t),r=I("",["node","author","login"],t),a=I("",["node","author","url"],t),l=I("",["node","url"],t),c=I(0,["node","additions"],t),d=I(0,["node","deletions"],t),i=I("",["node","createdAt"],t),m=I("",["node","mergedAt"],t),u=((A=(b=(E=(v=(S=(f=t==null?void 0:t.node)==null?void 0:f.commits)==null?void 0:S.edges)==null?void 0:v[0])==null?void 0:E.node)==null?void 0:b.commit)==null?void 0:A.committedDate)||"",p=Be(new Date(u),new Date(i))?u:i,h=cl(e,t),{approvals:g,approvers:x}=il(t);return{repo:n,org:s,author:/\/apps\//.test(a)?"GIT_APP_PR":r,url:l,additions:c,deletions:d,prSize:c+d,mergedAt:m,cycleTime:xe(new Date(m),new Date(p))||1,age:xe(new Date(m),new Date(i))||1,approvals:g,approvers:x,...h}},$o=(e,t)=>(s,n)=>{const r=s[e],a=n[e];return t==="DESC"?new Date(a).getTime()-new Date(r).getTime():new Date(r).getTime()-new Date(a).getTime()},Ss=(e,t=[])=>{const{excludeIds:s=[]}=e;return t.map(r=>{var a,l,c,d,i;return((c=(l=(a=r==null?void 0:r.data)==null?void 0:a.result)==null?void 0:l.pullRequests)==null?void 0:c.edges)||((i=(d=r==null?void 0:r.data)==null?void 0:d.result)==null?void 0:i.edges)}).flat().map(r=>dl(s,r))},ml=(e="")=>({startDate:t="",endDate:s=""}={})=>{const n=new Date(e),r=t?et(n,new Date(t)):!0,a=s?Be(n,new Date(s)):!0;return r&&a},ul=(e,t=[])=>{const s=e.usersInfo||{};return t.filter(r=>{const a=r.author,{dates:l=[]}=s[a]||{},c=ml(r.mergedAt);return l.length>0?l.some(c):!0})},vs=({excludeIds:e=[]},{reportStartDate:t="",reportEndDate:s=""},n=[])=>{const r=[];return[n.filter(l=>{const c=je("","author",l),d=["GIT_APP_PR",...e].some(p=>p===c),i=l.mergedAt,u=et(new Date(i),new Date(t))&&Be(new Date(i),new Date(s))&&!d;return!u&&r.push(l),u}).sort($o("mergedAt","ASC")),r]},Fo=e=>({reportStartDate:t="",reportEndDate:s=""},n=[])=>{const r=[];return[n.filter(l=>{const c=l==null?void 0:l[e],d=et(new Date(c),new Date(t))&&Be(new Date(c),new Date(s));return!d&&r.push(l),d}).sort($o(e,"ASC")),r]},hl=Fo("mergedAt"),pl=Fo("date"),gl=e=>{var l,c,d,i,m,u;const t=((l=e==null?void 0:e.node)==null?void 0:l.createdAt)||"",s=((c=e==null?void 0:e.node)==null?void 0:c.closedAt)||"",n=((d=e==null?void 0:e.node)==null?void 0:d.title)||"",r=((i=e==null?void 0:e.node)==null?void 0:i.url)||"",a=((u=(m=e==null?void 0:e.node)==null?void 0:m.labels)==null?void 0:u.edges)||[];return{mergedAt:t,createdAt:t,age:xe(new Date(s),new Date(t))||1,url:r,isBug:/bug/i.test(n)||a.some(p=>{var h;return/bug/i.test((h=p==null?void 0:p.node)==null?void 0:h.name)})}},fl=(e=[])=>{const t=e.map(a=>{var l,c,d;return((d=(c=(l=a==null?void 0:a.data)==null?void 0:l.result)==null?void 0:c.issues)==null?void 0:d.edges)||[]});return Vs(t).filter(Boolean).map(a=>gl(a))},xl=e=>{var n,r,a;const t=((n=e==null?void 0:e.node)==null?void 0:n.createdAt)||"",s=((a=(r=e==null?void 0:e.node)==null?void 0:r.tag)==null?void 0:a.name)||"";return{date:t,description:s}},yl=(e=[])=>{const t=e.map(a=>{var l,c,d;return((d=(c=(l=a==null?void 0:a.data)==null?void 0:l.result)==null?void 0:c.releases)==null?void 0:d.edges)||[]});return Vs(t).filter(Boolean).map(a=>xl(a))},Uo=e=>typeof e=="string"&&e.length&&e||/^-?[\d.]+$/.test(`${e}`)&&/^-?[^0]/.test(`${e}`)&&e||Array.isArray(e)&&e.length&&Rl(e)||e&&Object.keys(e).length&&Go(e)||typeof e=="boolean"&&e,Rl=e=>{const t=[];return e.forEach(s=>{const n=Uo(s);n&&t.push(n)}),t.length&&t},Go=e=>{const t={};return Object.entries(e).forEach(([s,n])=>{const r=Uo(n);r&&(t[s]=r)}),Object.keys(t).length&&t},ut={author:"",approvalsGiven:0,approvalsByUser:{},commentsGiven:0,commentsReceived:0,codeCommentsGiven:0,codeCommentsReceived:0,generalCommentsGiven:0,generalCommentsReceived:0,totalPRs:0,uniquePRsContributedTo:0,commentsByUser:{},prSizes:[],prTotalAdditions:0,prTotalDeletions:0,prAdditions:[],prDeletions:[],prAges:[],sentimentTotalScores:[],orgs:new Set,repos:new Set,sentimentTotalPositiveScore:0,sentimentAveragePositiveScore:0,sentimentPositiveCount:0,sentimentTotalNegativeScore:0,sentimentNegativeCount:0,sentimentAverageNegativeScore:0},Ye=(e,t,s,n)=>{const r={};return Object.entries(s).forEach(([a,l])=>{const c=e[a]||{},d={...ut,...c,user:a,[t]:(c[t]||0)+(n||l)};r[a]=d}),r},ws=(e,t,s,n,r,a)=>{const l={};return Object.entries(s).filter(([c])=>a&&n!==a?c===a:!0).forEach(([c,d])=>{const i=e[c]||{},m=i[t]||{},u={...m,[n]:(m[n]||0)+(r||d||0)},p={...ut,...i,author:c,[t]:u};l[c]=p}),l},Rt=(e=[],t={},s="")=>{const n=new Set,r={};e.forEach(d=>{var se;const{org:i,repo:m,author:u,additions:p=0,deletions:h=0,age:g=0,approvals:x=0,approvers:y={},comments:f=0,commenters:S={},codeComments:v=0,codeCommenters:E={},generalComments:b=0,generalCommenters:A={},commentSentimentTotalScore:D=0,commentSentimentScore:N=0,commentAuthorSentimentScore:G=0}=d;n.add(u);const K=ws(r,"commentsByUser",S,u,0,s);Object.assign(r,K);const C=ws(r,"approvalsByUser",y,u,1,s);Object.assign(r,C);const $=Ye(r,"commentsGiven",S);Object.assign(r,$);const me=Ye(r,"codeCommentsGiven",E);Object.assign(r,me);const Z=Ye(r,"generalCommentsGiven",A);Object.assign(r,Z);const ue=Ye(r,"approvalsGiven",y);Object.assign(r,ue);const ce=Ye(r,"uniquePRsApproved",y,1);Object.assign(r,ce),[...new Set([...Object.keys(E),...Object.keys(A),...Object.keys(y)])].forEach(X=>{const ge=r[X]||{},ke={...ut,...ge,author:X,uniquePRsContributedTo:(ge.uniquePRsContributedTo||0)+1};r[X]=ke}),r[u]||(r[u]={...ut}),r[u].orgs.add(i),r[u].repos.add(m);const z=D||N+G;r[u].sentimentTotalScores.push(z);const V=(X="",ge=0)=>(r[u][X]||0)+ge,he=V("totalPRs",1),Ae=V("prTotalAge",g),pe=Math.round(Ae/he),ie=V("prTotalAdditions",p),Ee=V("prTotalDeletions",h),ot=Math.round((ie+Ee)/he),Te=z>0?z:0,Ie=z>0?1:0,De=V("sentimentTotalPositiveScore",Te),_e=V("sentimentPositiveCount",Ie),Ke=_e?Math.round(De/_e):0,P=z<0?z:0,k=z<0?1:0,F=V("sentimentNegativeCount",k),B=V("sentimentTotalNegativeScore",P),te=F?Math.round(B/F):0,Q={author:u,name:((se=t[u])==null?void 0:se.name)||u,user:u,totalPRs:he,age:pe,prTotalAge:Ae,prSize:ot,prTotalAdditions:ie,prTotalDeletions:Ee,approvalsReceived:V("approvalsReceived",x),commentsReceived:V("commentsReceived",f),codeCommentsReceived:V("codeCommentsReceived",v),generalCommentsReceived:V("generalCommentsReceived",b),commentSentimentTotalScore:V("commentSentimentTotalScore",z),sentimentPositiveCount:_e,sentimentTotalPositiveScore:De,sentimentAveragePositiveScore:Ke,sentimentNegativeCount:F,sentimentTotalNegativeScore:B,sentimentAverageNegativeScore:te,orgCount:r[u].orgs.size,repoCount:r[u].repos.size};Object.assign(r[u],Q)});const a=Object.values(r).filter(({author:d})=>n.has(d)).map((d={})=>Bs(["author","user","name","approvalsGiven","approvalsByUser","uniquePRsApproved","commentsGiven","commentsReceived","codeCommentsGiven","codeCommentsReceived","generalCommentsGiven","generalCommentsReceived","totalPRs","uniquePRsContributedTo","commentsByUser","prTotalAdditions","prTotalDeletions","orgCount","repoCount","user","approvalsReceived","prSize","prTotalAge","age","sentimentAveragePositiveScore","sentimentTotalPositiveScore","sentimentAverageNegativeScore","sentimentTotalNegativeScore"],d)),l=["commentsGiven","commentsReceived","approvalsGiven","approvalsReceived"];return a.filter(({author:d})=>Object.keys(t).length>0?t[d]:!0).sort(be(l))},El=(e,t)=>{const s=(e==null?void 0:e.date)||"",n=(t==null?void 0:t.date)||"";return new Date(s).getTime()-new Date(n).getTime()},Je=e=>(e==null?void 0:e.description)||"",Sl=(e,t)=>{let s;try{s=qs.lt(Je(e),Je(t))?-1:1}catch{s=0}return s},Vo=(e=[])=>{const t=e.filter(a=>/^v\d+\.\d+\.\d+$/.test(Je(a))).sort(Sl),s=t.map((a,l)=>{const c=Je(a);let d="";try{const m=l>0?Je(t[l-1]):"v0.0.0",u=qs.diff(m,c)||"EMPTY";d={minor:"MINOR",major:"MAJOR",patch:"PATCH",premajor:"PATCH",preminor:"PATCH",prepatch:"PATCH",prerelease:"PATCH",EMPTY:"PATCH"}[u]||"PATCH"}catch{d="PATCH"}return{...a,releaseType:d||"MAJOR"}}),n=s.length>70?a=>a.releaseType!=="PATCH":()=>!0;return s.filter(n).sort((a,l)=>El(a,l))},Bo=({usersInfo:e={},events:t=[]})=>{const s=[];Object.values(e).forEach(({name:l="",userId:c="",dates:d=[]})=>{d.forEach(i=>{const{startDate:m,endDate:u}=i;m&&s.push({date:m,description:l||c,releaseType:"MINOR"}),u&&s.push({date:u,description:l||c,releaseType:"PATCH"})})});const n=t.map(({date:l,name:c}={})=>({date:l,description:c,releaseType:"MAJOR"})),r=(l,c)=>{const d=(l==null?void 0:l.date)||"",i=(c==null?void 0:c.date)||"";return new Date(d).getTime()-new Date(i).getTime()};return[...s,...n].sort(r)},qo=(e="")=>({type:R.STORE_TOKEN,payload:e}),vl=(e="")=>t=>t({type:R.STORE_ORG,payload:e}),wl=(e="")=>t=>t({type:R.STORE_ENT_URL,payload:e}),bl=(e="")=>t=>t({type:R.SET_TEAM_NAME,payload:e}),Yt=Ks(Xn(","),Yn(Qn),Ls(Boolean)),Ko=(e={})=>t=>{const s=Object.keys(e);return t({type:R.STORE_USERS_INFO,payload:e}),t({type:R.STORE_USER_IDS,payload:s})},zo=(e="")=>t=>{const s=Yt(e);return t({type:R.STORE_EX_IDS,payload:s})},Ho=(e="")=>t=>{const n=Yt(e).map((r="")=>{const[a,l]=r.split("=");return{name:a,date:l}});return t({type:R.STORE_EVENTS,payload:n})},Al=(e="")=>t=>t({type:R.STORE_REPO,payload:e}),Wo=e=>t=>t({type:R.STORE_AMOUNT,payload:e||""}),Yo=e=>(t,s)=>{const{fetches:n,pullRequests:r=[]}=s(),a=ol({...n,amountOfData:e||""},r);t({type:R.STORE_FORM_UNTIL_DATE,payload:a})},Qo=(e="DESC")=>t=>t({type:R.STORE_SORT,payload:e}),Tl=(e={},t={})=>(s="")=>e[s]&&t[s]&&e[s]!==t[s],Dl=(e={},t={})=>(s="")=>{const n=je("",s,e),r=Yt(n),a=t[s];return a.length&&zs(oe(a,r))},jl=(e={},t={})=>{const s=e.userId,[n]=t.userIds,r=(e==null?void 0:e.usersInfo)||{},a=t.usersInfo||{},l=s&&n&&s!==n,c=zs(oe(r,a));return l||c},Nl=e=>(t,s)=>{const{fetches:n={}}=s(),r=Tl(e,n),a=Dl(e,n);(r("org")||r("repo")||r("teamName")||r("enterpriseAPI")||jl(e,n)||a("excludeIds"))&&Et(t)},Et=e=>{e({type:R.CLEAR_ORG}),e({type:R.CLEAR_REPO}),e({type:R.CLEAR_TRIMMED_ITEMS}),e({type:R.CLEAR_PRS}),e({type:R.CLEAR_FILTERED_PRS}),e({type:R.CLEAR_REVIEWED_PRS}),e({type:R.CLEAR_REVIEWED_FILTERED_PRS}),e({type:R.CLEAR_ITEMS_DATE_RANGE}),e({type:R.CLEAR_PR_PAGINATION}),e({type:R.CLEAR_PREFETCHED_NAME}),e({type:R.CLEAR_DESC}),e({type:R.CLEAR_UNTIL_DATE}),e({type:R.CLEAR_FORM_UNTIL_DATE}),e({type:R.CLEAR_USER_IDS}),e({type:R.CLEAR_USERS_INFO}),e({type:R.CLEAR_EX_IDS}),e({type:R.CLEAR_EVENTS}),e({type:R.CLEAR_USERS_DATA}),e({type:R.CLEAR_TEAM_NAME}),e({type:R.CLEAR_RELEASES}),e({type:R.CLEAR_RELEASES_PAGINATION}),e({type:R.CLEAR_ISSUES}),e({type:R.CLEAR_FILTERED_ISSUES}),e({type:R.CLEAR_ISSUES_PAGINATION}),e({type:R.CLEAR_FETCH_ERROR}),e({type:R.CLEAR_PRE_FETCH_ERROR})},Pl=Et,Cl=e=>{const{fetches:{org:t="",repo:s="",token:n="",userIds:r=[]}={}}=e,a=r.length<1,l=[a&&!t&&"Organization",a&&!s&&"Repository",!n&&"GitHib token",!t&&!s&&a&&"GitHub Ids"].filter(Boolean),c=i=>{const m=l.length-1;return[i===0?"Missing ":"",i===m?" and ":"",i>0?", ":""].find(p=>p.length>0)||""};return l.reduce((i,m,u)=>i+c(u)+m,"")},Il=e=>{const{fetches:{org:t="",repo:s="",token:n="",userIds:r=[]}={}}=e,a=[n];t&&a.push(t),s&&a.push(s);const l=a.every(m=>typeof m=="string"&&m.length>0),d=(r.length?[r]:[]).every(m=>m.length>0),i=l&&d;return{isValid:i,error:i?null:{level:"error",message:Cl(e)}}},_l=(e="",t="")=>(s="mergedAt",n=[])=>{const r=[],a=[],l=[],c=(d=[])=>d.forEach(i=>{const m=new Date(i[s]);Be(m,new Date(e))?r.push(i):et(m,new Date(t))?l.push(i):a.push(i)});return n.forEach(c),[r,a,l]},kl=(e="",t="")=>async(s,n)=>{const{fetches:{usersInfo:r={}}={},trimmedItems:{trimmedPRs:{trimmedLeftPrs:a=[],trimmedRightPrs:l=[]}={},trimmedReviewedPRs:{trimmedLeftReviewedPrs:c=[],trimmedRightReviewedPrs:d=[]}={},trimmedReleases:{trimmedLeftReleases:i=[],trimmedRightReleases:m=[]}={}}={},pullRequests:u=[],reviewedPullRequests:p=[],releases:h=[]}=n(),g=_l(e,t),x=[a,u,l],[y,f,S]=g("mergedAt",x);s({type:R.ADD_PRS,payload:f});const v=[c,p,d],[E,b,A]=g("mergedAt",v);s({type:R.ADD_REVIEWED_PRS,payload:b}),s({type:R.ADD_USERS_DATA,payload:Rt(f.concat(b),r)});const D=[i,h,m],[N,G,K]=g("date",D);s({type:R.ADD_RELEASES,payload:G}),s({type:R.ADD_TRIMMED_ITEMS,payload:{trimmedPRs:{trimmedLeftPrs:y,trimmedRightPrs:S},trimmedReviewedPRs:{trimmedLeftReviewedPrs:E,trimmedRightReviewedPrs:A},trimmedReleases:{trimmedLeftReleases:N,trimmedRightReleases:K}}})},Xo=(e=[])=>{const{mergedAt:t=""}=e.at(0)||{mergedAt:""},{mergedAt:s=""}=e.at(-1)||{mergedAt:""};return[t,s]},Jo=()=>async(e,t)=>{var r,a,l,c,d,i;const s=t(),{isValid:n}=Il(s);n&&e({type:R.CLEAR_FETCH_ERROR}),n&&e({type:R.FETCH_START});try{if(!n)throw new Error("Not a valid request");const{fetches:m,filteredPRs:u=[],pullRequests:p=[],filteredReviewedPRs:h=[],reviewedPullRequests:g=[],issues:x=[],filteredIssues:y=[],formUntilDate:f="",releases:S=[],filteredReleases:v=[]}=t(),{usersInfo:E}=m,b=(m==null?void 0:m.userIds)||[],A=(m==null?void 0:m.repo)||"",D=(m==null?void 0:m.org)||"",N=f,G=b.length===1&&"user"||b.length>1&&"team"||!A&&D&&"org"||"repo",K={user:()=>el({fetchInfo:m,untilDate:N,dispatch:e}),team:()=>Za({fetchInfo:m,untilDate:N,dispatch:e}),repo:()=>Re({fetchInfo:m,queryInfo:ko(N),dispatch:e}),org:()=>tl({fetchInfo:m,untilDate:N,dispatch:e})},{fetchInfo:C={},results:$=[],reviewResults:me=[]}=await K[G](),Z=Ss(m,$),ue=ul(m,Z),ce=p.concat(u).concat(ue),ee=(a=(r=p.at(-1))==null?void 0:r.mergedAt)==null?void 0:a.slice(0,10),z=(c=(l=p.at(0))==null?void 0:l.mergedAt)==null?void 0:c.slice(0,10),V=(i=(d=Z.at(-1))==null?void 0:d.mergedAt)==null?void 0:i.slice(0,10),he=new Date().toISOString().slice(0,10),{sortDirection:Ae="DESC"}=m,pe=Ae==="DESC"?{reportStartDate:N||V,reportEndDate:ee||he}:{reportStartDate:z,reportEndDate:N||he},[ie,Ee]=vs(m,pe,ce);e({type:R.ADD_PRS,payload:ie}),e({type:R.ADD_FILTERED_PRS,payload:Ee});const Te=Ss(m,me).filter(({author:Q="",mergedAt:se=""})=>se&&Q!==b[0]),Ie=g.concat(h).concat(Te),[De=[],_e=[]]=vs(m,pe,Ie);e({type:R.ADD_REVIEWED_PRS,payload:De}),e({type:R.ADD_REVIEWED_FILTERED_PRS,payload:_e});const Ke=Xo(ie);if(e({type:R.ADD_ITEMS_DATE_RANGE,payload:Ke}),e({type:R.ADD_USERS_DATA,payload:Rt(ie.concat(De),E)}),G==="repo"){const Q=yl($),se=Vo([...v,...S,...Q]),[X,ge]=pl(pe,se);e({type:R.ADD_RELEASES,payload:X}),e({type:R.ADD_FILTERED_RELEASES,payload:ge})}const P=fl($),k=x.concat(y).concat(P),[F,B]=hl(pe,k);e({type:R.ADD_ISSUES,payload:F}),e({type:R.ADD_FILTERED_ISSUES,payload:B}),e({type:R.STORE_UNTIL_DATE,payload:f});const te=(Q={})=>{const se=Bs(["newest","oldest"]),X={};return Object.entries(Q).filter(([,ke])=>Gs(Object,ke)&&Jn(se(ke)).length>0).forEach(([ke,fn])=>{X[ke]=se(fn)}),{...se(Q),...X}};e({type:R.SET_PR_PAGINATION,payload:te(C.prPagination)}),e({type:R.SET_PR_REVIEWED_PAGINATION,payload:te(C.usersReviewsPagination)}),e({type:R.SET_ISSUES_PAGINATION,payload:te(C.issuesPagination)}),e({type:R.SET_RELEASES_PAGINATION,payload:te(C.releasesPagination)}),e({type:R.FETCH_END})}catch(m){const u=m;e({type:R.FETCH_ERROR,payload:{level:"error",message:u.message||"Unknown error"}}),e({type:R.FETCH_END})}},Ol=(e,t)=>{const{fetches:s,preFetchedName:n="",reportDescription:r="",pullRequests:a=[],filteredPRs:l=[],reviewedPullRequests:c=[],filteredReviewedPRs:d=[],usersData:i=[],issues:m=[],filteredIssues:u=[],releases:p=[],filteredReleases:h=[]}=e,{teamName:g="",userIds:x=[],usersInfo:y={},excludeIds:f=[],events:S=[],repo:v="",org:E=""}=s;Et(t),[["token","STORE_TOKEN",""],["org","STORE_ORG",""],["repo","STORE_REPO",""],["enterpriseAPI","STORE_ENT_URL",""],["prPagination","SET_PR_PAGINATION",{}],["usersReviewsPagination","SET_PR_REVIEWED_PAGINATION",{}],["releasesPagination","SET_RELEASES_PAGINATION",{}],["issuesPagination","SET_ISSUES_PAGINATION",{}]].forEach(([N,G="",K])=>{t({type:R[G],payload:(s==null?void 0:s[N])||K})}),t({type:R.PREFETCHED_NAME,payload:n}),t({type:R.STORE_SORT,payload:"ASC"}),t({type:R.STORE_AMOUNT,payload:"all"}),t({type:R.SET_DESC,payload:r}),t({type:R.SET_TEAM_NAME,payload:g}),t({type:R.STORE_USER_IDS,payload:x}),t({type:R.STORE_USERS_INFO,payload:y}),t({type:R.STORE_EX_IDS,payload:f}),t({type:R.STORE_EVENTS,payload:S});const A=Xo(a);t({type:R.ADD_ITEMS_DATE_RANGE,payload:A}),t({type:R.ADD_PRS,payload:a}),t({type:R.ADD_FILTERED_PRS,payload:l}),t({type:R.ADD_REVIEWED_PRS,payload:c}),t({type:R.ADD_REVIEWED_FILTERED_PRS,payload:d}),t({type:R.ADD_USERS_DATA,payload:i.length?i:Rt(a.concat(c),y)});const D=m.sort(({mergedAt:N=""},{mergedAt:G=""})=>new Date(N).getTime()-new Date(G).getTime());if(t({type:R.ADD_ISSUES,payload:D}),t({type:R.ADD_FILTERED_ISSUES,payload:u}),v&&E){const N=Vo(p);t({type:R.ADD_RELEASES,payload:N}),t({type:R.ADD_FILTERED_RELEASES,payload:h})}t({type:R.FETCH_END})},Ll=e=>new Promise((t,s)=>{e.json().then(n=>e.status===200?t(n):s(new Error(`Error status code ${e.status}`))).catch(n=>{const r=n;console.log("-=-=--parseJSON error",r),r.status=e.status,s(r)})}),Zo=({fileName:e="",externalURL:t="",localData:s}={})=>async n=>{Et(n),n({type:R.CLEAR_PRE_FETCH_ERROR}),n({type:R.FETCH_START}),n({type:R.FETCH_STATUS,payload:{savedReportName:e}});const r=t?`${t}${e}.json`:`https://n07734.github.io/community-health/data/${e}.json`;try{const a=s||await fetch(r).then(Ll);Ol(a,n)}catch(a){const l=a;console.log("-=-=--api data error",l,l.status);const c=l.status!==200?`Error status code ${l.status} loading ${e}`:`${l.message} loading ${e}`;n({type:R.PRE_FETCH_ERROR,payload:{level:"error",message:c||"Unknown error"}}),n({type:R.FETCH_END})}},en=(e,t)=>{const s=t(),{repo:n,org:r,teamName:a,userIds:l=[]}=(s==null?void 0:s.fetches)||{},c=(l==null?void 0:l.length)===1?l[0]:"",d=a||c||`${r}${n?`-${n}`:""}`,m=Ks(os("HOW_TO","1: Add this file to ./src/myReports 2: Run the app. If you want multiple reports you will need to edit ./src/myReports/myReportsConfig.js."),Zn(["fetches","pullRequests","filteredPRs","reviewedPullRequests","filteredReviewedPRs","userData","issues","filteredIssues","releases","teamName"]),Oe(["fetches","token"]),Oe(["sortDirection"]),Oe(["fetches","amountOfData"]),Oe(["fetches","prPagination","hasNextPage"]),Oe(["fetches","issuesPagination","hasNextPage"]),Oe(["fetches","releasesPagination","hasNextPage"]),os("preFetchedName",d),Go)(s),u=JSON.stringify(m,null,2),p=new Blob([u],{type:"application/json"});return{href:URL.createObjectURL(p),download:`${d}.json`}},Ml=(e="")=>(t,s)=>{const{fetches:{sortDirection:n=""}={}}=s();n!==e&&t({type:R.CLEAR_UNTIL_DATE})&&t({type:R.CLEAR_FORM_UNTIL_DATE})},$l=({fetching:e,pullRequests:t,getDownloadInfo:s})=>{const n=s();return!e&&t.length>0?o.jsx("p",{children:o.jsx("a",{className:"text-primary",...n,children:"Download report data"})}):null},Fl=e=>({fetching:e.fetching,pullRequests:e.pullRequests}),Ul=e=>({getDownloadInfo:()=>e(en)}),tn=M(Fl,Ul)($l),Gl=e=>{const{setValues:t,getData:s,fetches:n,fetching:r}=e,{repo:a,org:l,excludeIds:c=[],userIds:d=[],usersInfo:i={},events:m=[]}=n,u=d.length>1&&"team"||d.length===1&&"user"||!a&&l&&"org"||"repo",p=m.map(({name:C,date:$})=>`${C}=${$}`).join(", "),h=c.join(", "),[g,x]=w.useState({sortDirection:n.sortDirection,amountOfData:n.amountOfData||"all",token:n.token,...p&&{events:p},...h&&{excludeIds:h},...n.org&&{org:n.org},...n.repo&&{repo:n.repo}}),[y,f]=w.useState({}),[S,v]=w.useState(!1),E=(C,$)=>x({...g,[C]:$}),b=(C={})=>{const $={...g,...C};x($)},A={inputError:y,setInputError:f,formInfo:g,setValue:E},D=C=>{C.preventDefault();const{isValid:$,validationErrors:me}=vo(g);f(me),$&&!r&&t(g),$&&!r&&s(),$&&v(!0)},K=[...{repo:["org","repo"],org:["org"],team:["teamName"],user:["userId","name"]}[u],"enterpriseAPI"];return o.jsx(de,{className:"mb-0 col-span-full",title:"",expandText:"here",intro:"Top up this report's data",expandQaId:"expand-prefetch-form",children:o.jsxs("div",{className:"mb-3",children:[o.jsxs("form",{onSubmit:D,children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 max-mm:grid-cols-1 items-end mb-4",children:[o.jsxs("div",{className:"col-span-full",children:[K.filter(C=>Lt(n,C)).map(C=>o.jsxs("p",{children:[Eo[C],": ",o.jsx("b",{children:Lt(n,C)})]},C)),u==="team"&&o.jsx(Oo,{usersInfo:i,setParentValues:b})]}),o.jsx(H,{type:"events",className:"col-span-full",...A}),o.jsx("p",{className:"col-span-full",children:"Key events can impact the data e.g. starting or launching a new feature or major version. These events can help give more context while viewing the data. e.g. ProjectA=2013-12-01."}),o.jsx(H,{type:"excludeIds",...A}),o.jsx(H,{type:"token",...A}),o.jsxs("p",{className:"col-span-full",children:["To create a token go to your GitHub ",o.jsx("a",{className:"text-primary",href:"https://github.com/settings/tokens",children:"tokens"})," page, click on 'generate new token', choose the settings 'repo' (all), 'read:org' and 'user' then click 'Generate token'."]}),o.jsxs(Le,{onValueChange:C=>E("sortDirection",C),value:g.sortDirection,children:[o.jsx(Ne,{className:"w-auto",children:o.jsx($e,{children:g.sortDirection==="DESC"?"Prepend data":"Append data"})}),o.jsx(Pe,{children:o.jsxs(Me,{children:[o.jsx(J,{value:"DESC",children:"Prepend data"}),o.jsx(J,{value:"ASC",children:"Append data"})]})})]}),o.jsx(yo,{setValue:E,amountOfData:g.amountOfData})]}),o.jsx(xo,{qaId:"prefetch-top-up"})]}),S&&o.jsx(tn,{})]})})},Vl=e=>({fetches:e.fetches,fetching:e.fetching,error:e.error,pullRequests:e.pullRequests}),Bl=e=>({setValues:t=>{const{token:s,amountOfData:n,sortDirection:r,excludeIds:a,events:l,userId:c,usersInfo:d={},name:i}=t;c&&i&&(d[c]={userId:c,name:i}),e(Ml(r)),e(qo(s)),e(zo(a)),e(Wo(n)),e(Qo(r)),e(Yo(n)),e(Ho(l)),Object.keys(d).length>0&&e(Ko(d))},getData:()=>e(Jo()),getDownloadInfo:()=>e(en)}),ql=M(Vl,Bl)(Gl),sn=w.forwardRef(({className:e,...t},s)=>o.jsxs(Hs,{ref:s,className:j("relative flex w-full touch-none select-none items-center",e),...t,children:[o.jsx(er,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:o.jsx(tr,{className:"absolute h-full bg-primary"})}),o.jsx(ns,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),o.jsx(ns,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));sn.displayName=Hs.displayName;const Kl=({pullRequests:e=[],itemsDateRange:t=["",""],issues:s=[],usersInfo:n,trim:r})=>{const[a,l]=t,c=a?xe(new Date(l),new Date(a)):0,d=c/100,[[i,m],u]=w.useState([0,100]),p=Math.floor(d*i),h=Math.ceil(d*m),g=a?rs(Ct(new Date(a),{days:p}),{representation:"date"}):"",x=l?rs(Pt(new Date(l),{days:c-h}),{representation:"date"}):"",y=b=>{Array.isArray(b)&&b.length===2&&u(b)},f=()=>{r(g,x)},S=Object.keys(n).length,v=S>1?`by ${S} contributors`:"",E=s.length>0?`and ${s.length} issues`:"";return e.length>0&&g&&o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"w-full",children:[o.jsxs("b",{children:["Showing ",e.length," PRs ",v," ",E]}),". Drag the points to change the date range of the report."]}),o.jsxs("div",{className:"w-full flex justify-between",children:[o.jsx("p",{className:"text-2xl mb-1",children:Dt(new Date(g),"do MMM yy")}),o.jsx("p",{className:"text-2xl mb-1",children:Dt(new Date(x),"do MMM yy")})]}),o.jsx(sn,{value:[i,m],onValueChange:y,onValueCommit:f,className:"pb-08"})]})},zl=e=>({pullRequests:e.pullRequests,issues:e.issues,itemsDateRange:e.itemsDateRange,usersInfo:e.fetches.usersInfo}),Hl=e=>({trim:(t,s)=>e(kl(t,s))}),Wl=M(zl,Hl)(Kl),Yl=e=>{const{repo:t="",org:s="",teamName:n="",usersInfo:r={},userIds:a=[],colorA:l="",colorB:c=""}=e,{userId:d="",name:i=""}=r[a[0]]||{},m=s||n||i||d,u=!n&&i&&d||t&&s!==t&&t||"",p=u?l:c;return o.jsxs(o.Fragment,{children:[o.jsx("span",{style:{color:p},children:m}),u&&o.jsxs(o.Fragment,{children:["/",o.jsx("span",{style:{color:c},children:u})]})]})},Ql=({fetches:e,preFetchedName:t="",pullRequests:s=[],issues:n=[],userIds:r=[],reportDescription:a=""})=>{const{theme:l}=q(),c=L[l].secondary,d=L[l].primary,{showNames:i,toggleShowNames:m}=ve();return(s.length>0||n.length>0)&&o.jsxs(Y,{children:[o.jsx("h2",{"data-qa-id":"report-title",children:o.jsx(Yl,{...e,colorA:c,colorB:d})}),a&&o.jsx("p",{children:a}),r.length>1&&o.jsxs("p",{children:["Team's GitHub IDs: ",r.join(", ")]}),o.jsxs("div",{className:"flex items-center space-x-2 pb-08",children:[o.jsx(fo,{id:"spartacus-mode",onCheckedChange:m,checked:!i,name:"checkedA",className:"dark:data-[state=unchecked]:bg-white"}),o.jsx(Ze,{htmlFor:"spartacus-mode",children:"Spartacus mode, this can help look for trends."})]}),o.jsx(Wl,{}),t.length>0&&o.jsx(ql,{})]})},Xl=e=>({fetches:e.fetches,preFetchedName:e.preFetchedName,pullRequests:e.pullRequests,issues:e.issues,userIds:e.fetches.userIds,reportDescription:e.reportDescription}),St=M(Xl)(Ql),Jl=({chunkyData:e=[],pullRequests:t=[],releases:s=[],userIds:n=[],usersInfo:r={}})=>{const{theme:a}=q(),l=L[a].secondary,c=L[a].primary,d=L[a].tertiary,{showNames:i}=ve(),m=n.length>0,u=m?uo({pullRequests:t,showNames:i,usersInfo:r}):[];return t.length>0&&o.jsxs(Y,{children:[o.jsx(de,{title:"Pull Request trends",children:s.length>1&&o.jsx("div",{children:o.jsx("p",{children:"Vertical lines are releases: Green is a Major release, solid purple is Minor and dotted purple is Patch or Alpha"})})}),o.jsxs(we,{children:[m&&o.jsx(o.Fragment,{children:o.jsx(W,{title:"PRs by author",markers:s,showLegends:!0,data:u,tableData:e,tableKeys:["author","repo"]})}),o.jsx(W,{markers:s,data:[{lines:[{label:"PRs over time",color:l,dataKey:"url",groupMath:"count",data:t}],xAxis:"left"}],tableData:e,tableKeys:["author"]}),o.jsx(W,{markers:s,data:[{lines:[{label:"Comments",color:l,dataKey:"comments",data:t},{label:"Approvals",color:c,dataKey:"approvals",data:t}],xAxis:"left"},{lines:[{label:"PR Size",color:d,dataKey:"prSize",data:t}],xAxis:"right"}],tableData:e,tableKeys:["comments","approvals","prSize","author"]}),o.jsx(W,{markers:s,data:[{lines:[{label:"Age (days)",color:c,dataKey:"age",data:t}],xAxis:"left"},{lines:[{label:"PR Size",color:d,dataKey:"prSize",data:t}],xAxis:"right"}],tableData:e,tableKeys:["age","prSize","author"]})]})]})},Zl=e=>({releases:e.releases,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),on=M(Zl)(Jl),ec=({pullRequests:e=[],events:t=[]})=>{const s={},n=e.map((l,c)=>(s[l.repo]=(s[l.repo]||0)+1,{...l,id:`${c}-${l.repo}-${l.number}`,[`repo-${l.repo}`]:1,commentSentimentTotalScore:(l.commentSentimentScore||0)+(l.commentAuthorSentimentScore||0)})),r=Ce(n),a=Bo({events:t});return o.jsxs(o.Fragment,{children:[o.jsx(St,{}),o.jsx(Vt,{pullRequests:n,chunkyData:r,releases:a,allRepos:s}),o.jsx(xt,{pullRequests:n,chunkyData:r,releases:a,tableOpenedByDefault:!0}),o.jsx(on,{pullRequests:n,chunkyData:r})]})},tc=e=>({pullRequests:e.pullRequests,events:e.fetches.events}),sc=M(tc)(ec),oc=(e=[])=>e.map(t=>({mergedAt:t.mergedAt,...t.isBug?{bug:1}:{issue:1}})),nc=({issues:e=[],releases:t=[]})=>{const{theme:s}=q(),n=L[s].secondary,r=L[s].primary,a=oc(e),l=Ce(e);return a&&a.length>0&&o.jsxs(Y,{children:[o.jsx(de,{title:"Feature and bug trends"}),o.jsx(we,{children:o.jsx(W,{markers:t,data:[{lines:[{label:"Issues",color:n,filterForKey:!0,dataKey:"issue",groupMath:"count",data:a},{label:"Bugs*",color:r,filterForKey:!0,dataKey:"bug",groupMath:"count",data:a}],xAxis:"left"}],tableKeys:["isBug"],tableData:l})}),o.jsx("p",{className:"w-full text-center",children:"*Bugs in this graph are issues that have a title or a label that contains the word 'bug'"})]})},rc=e=>({issues:e.issues,releases:e.releases}),Qt=M(rc)(nc),ac=({chunkyData:e=[],pullRequests:t=[],releases:s=[],userIds:n=[]})=>{const{showNames:r}=ve(),a=n.map((l,c)=>{const d=r?l:`Spartacus${Array(c).fill(" ").join("")}`;return[{label:`To ${d}`,color:_[c%_.length],filterForKey:!0,dataKey:`${l}-commentsSentimentScore`,data:t},{label:`From ${d}`,color:_[c%_.length],filterForKey:!0,dataKey:`${l}-commentAuthorSentimentScore`,data:t}]}).flat();return t.length>0&&o.jsx(o.Fragment,{children:o.jsxs(Y,{children:[o.jsx(de,{title:"Sentiment analysis*",children:o.jsxs("div",{children:[o.jsx("p",{children:"*Adding this is an experiment to see if it can provide useful insights."}),o.jsxs("p",{children:["Uses npm package ",o.jsx("a",{className:"text-primary",href:"https://github.com/thisandagain/sentiment",children:"sentiment"})," which uses AFINN-165 word list and Emoji ranking to perform sentiment analysis."]})]})}),o.jsxs(we,{children:[o.jsx(W,{markers:s,showLegends:!0,title:"Sentiment in PRs between team and reviewers",data:[{lines:[{label:"To team",color:_[0],dataKey:"commentSentimentScore",data:t},{label:"From team",color:_[2],dataKey:"commentAuthorSentimentScore",data:t}],xAxis:"left"}],tableKeys:["commentSentimentScore","commentAuthorSentimentScore","author"],tableData:e}),n.length>0&&o.jsx(o.Fragment,{children:o.jsx(W,{showLegends:!0,title:"Sentiment in PRs between authors and reviewers",data:[{lines:a,xAxis:"left"}],tableKeys:["commentSentimentScore","commentAuthorSentimentScore","author"],tableData:e})})]})]})})},lc=e=>({releases:e.releases,userIds:e.fetches.userIds}),cc=M(lc)(ac),ic=e=>({index:t,data:s})=>{const n=e.find(a=>a.area===t),r=s.map(({id:a,color:l})=>[o.jsx(or,{color:l},a),a,n[`${a}Original`]]);return o.jsx(Os,{title:o.jsx("strong",{children:t}),rows:r})},dc=({title:e="",showTitle:t=!0,data:s=[],keys:n=[],colors:r=[],width:a=410,height:l=300})=>{const{theme:c}=q(),d=st(c),i=L[c].secondary,m=L[c].primary,u=r.length>0?r:[i,m],{showNumbers:p}=tt();return po(s,n)&&o.jsxs("div",{children:[t&&o.jsx(Ue,{className:"text-center",items:[{label:e,color:m}]}),o.jsx(sr,{width:a,height:l,margin:{top:0,bottom:0,right:100,left:100},dotSize:8,dotBorderColor:d.dotColor,dotBorderWidth:2,colors:u,gridShape:"linear",enableDotLabel:!1,gridLabelOffset:10,gridLevels:3,animate:!1,indexBy:"area",keys:n,data:s,maxValue:100,theme:d,sliceTooltip:ic(s),isInteractive:p})]})},mc=(e,t)=>{const s={age:0,approvalsGiven:0,approvalsReceived:0,codeCommentsGiven:0,codeCommentsReceived:0,commentsGiven:0,commentsReceived:0,generalCommentsGiven:0,generalCommentsReceived:0,prSize:0,totalPRs:0,uniquePRsApproved:0,uniquePRsContributedTo:0},n=["commentsGiven","commentsReceived","uniquePRsApproved","totalPRs"],a=e.filter(p=>n.some(x=>p[x]>1)).sort(be(n)),l=Math.ceil(a.length/100*10),c=l>10?a.slice(0,l):a,d={};c.filter(p=>!t).forEach(p=>{Object.entries(p).filter(([,h])=>!Array.isArray(h)&&/^\d+$/.test(h)&&h>0).forEach(([h,g])=>{const x=d[h]||0;d[h]=+g+x})});const i=c.length,m={...s,user:"Peers",userCount:i};Object.entries(d).forEach(([p,h])=>{m[p]=Math.round(h/i)}),e.find(p=>p.author===t);const u=s;return e.forEach(p=>{Object.entries(p).filter(([,h])=>!Array.isArray(h)&&/^\d+$/.test(h)&&h>0).forEach(([h,g])=>{const x=u[h]||0,y=+g;u[h]=x>y?x:y})}),{averagedData:m,maxValues:u,users:e,user:{}}},uc=({maxValues:e={},users:t=[]},s)=>{const n=["commentsGiven","commentsReceived","uniquePRsApproved","totalPRs"],r=s?t:t.sort(be(n)).slice(0,6),a=[{area:"Comments received",dataKey:"commentsReceived"},{area:"Comments given",dataKey:"commentsGiven"},{area:"Approved PRs",dataKey:"uniquePRsApproved"},{area:"PR count",dataKey:"totalPRs"},{area:"PR size",dataKey:"prSize"}];return r.map(c=>{const d=a.map(({area:i,dataKey:m})=>{const u=c[m]||0,p=e[m]||0;return{area:i,value:u&&p?u/p*100:0,valueOriginal:u}});return{title:c.author,data:d,keys:["value"]}})},hc=({usersData:e=[],userIds:t=[],usersInfo:s={}})=>{const{theme:n}=q(),{togglePvPPage:r,setUserPage:a}=qe(),l=L[n].secondary,c=L[n].primary,{showNames:d}=ve(),i=mc(e),m=uc(i,t.length>0),u=t.length>0,p=u?"Team members":"Top contributors";return m.length>0&&o.jsxs(Y,{className:"flex flex-wrap flex-row justify-center",children:[o.jsx(de,{title:p}),m.map((h,g)=>{var f;const x=h.title,y=((f=s[x])==null?void 0:f.name)||x;return o.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[o.jsx(dc,{showTitle:!1,height:240,colors:[(g+1)%2===0?l:c],...h}),o.jsx(O,{variant:(g+1)%2===0?"secondary":void 0,onClick:S=>{S.preventDefault(),a(x),window&&window.scrollTo(0,0)},children:d?y:"Spartacus"})]},g)}),u&&o.jsx(O,{className:"w-full mb-4",color:"primary",onClick:h=>{h.preventDefault(),r(),window&&window.scrollTo(0,0)},children:"PvP arena"})]})},pc=e=>({usersData:e.usersData,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),nn=M(pc)(hc),gc=({usersData:e=[]})=>{const{showNames:t}=ve(),{togglePvPPage:s,setUserPage:n}=qe();return e.length>0&&o.jsx(o.Fragment,{children:o.jsxs(Y,{className:"justify-between",children:[o.jsx(O,{className:"w-full mb-4",color:"primary",onClick:r=>{r.preventDefault(),s(),window&&window.scrollTo(0,0)},children:"PvP arena"}),o.jsx("h3",{className:"w-full",children:"User pages"}),o.jsx("div",{className:"flex flex-wrap justify-between gap-2",children:e.map(({author:r,user:a},l)=>o.jsx(O,{className:"flex-grow",variant:"secondary",onClick:c=>{c.preventDefault(),n(a),window&&window.scrollTo(0,0)},children:t?r:"Spartacus"},`${l}`))})]})})},fc=e=>({usersData:e.usersData}),xc=M(fc)(gc),yc=({pullRequests:e=[],releases:t=[]})=>{const s=e.map((r,a)=>({...r,id:`${a}-${r.repo}-${r.number}`,commentSentimentTotalScore:(r.commentSentimentScore||0)+(r.commentAuthorSentimentScore||0),[`${r.author}-commentsSentimentScore`]:r.commentSentimentScore,[`${r.author}-commentAuthorSentimentScore`]:r.commentAuthorSentimentScore})),n=Ce(s);return o.jsxs(o.Fragment,{children:[o.jsx(St,{}),o.jsx(Vt,{pullRequests:s,chunkyData:n}),o.jsx(xt,{pullRequests:s,chunkyData:n,releases:t,tableOpenedByDefault:!0}),o.jsx(cc,{pullRequests:s,chunkyData:n}),o.jsx(on,{pullRequests:s,chunkyData:n}),o.jsx(Qt,{}),o.jsx(nn,{}),o.jsx(xc,{})]})},Rc=e=>({pullRequests:e.pullRequests,releases:e.releases}),Ec=M(Rc)(yc),bs=({player:e="",className:t="",otherPlayer:s,setPlayerId:n,players:r=[]})=>o.jsxs(Le,{value:e,onValueChange:a=>n(a),children:[o.jsx(Ne,{className:`text-3xl w-auto ${t}`,children:o.jsx($e,{children:e})}),o.jsx(Pe,{children:o.jsx(Me,{children:r.filter(({author:a})=>a!==s).map(({author:a,name:l})=>o.jsx(J,{value:a,children:l},a))})})]}),rn=({player1:e,player2:t,setPlayer1Id:s=()=>({}),setPlayer2Id:n=()=>({}),players:r=[]})=>{const{theme:a}=q(),l=L[a].secondary,c=L[a].primary,i=[{title:"Total Merged",id:"totalPRs"},{title:"Total approved",id:"uniquePRsApproved"},{title:"Comments given",id:"commentsGiven"},{title:"Comments received",id:"commentsReceived"},{title:"Average positive sentiment",id:"sentimentAveragePositiveScore"},{title:"Average negative sentiment",id:"sentimentAverageNegativeScore"},{title:"Average size",id:"prSize"},{title:"Total additions",id:"prTotalAdditions"},{title:"Total deletions",id:"prTotalDeletions"},{title:"Average days open",id:"age"},{title:"Orgs contributed to",id:"orgCount"},{title:"Repos contributed to",id:"repoCount"}].filter(({id:m})=>Number.isInteger(e[m])&&Number.isInteger(t[m])&&(!["orgCount","repoCount"].includes(m)||["orgCount","repoCount"].includes(m)&&e[m]!==1&&t[m]!==1)).map(m=>{const u=m.id,p=e[u],h=t[u],g=l,x=c,y=Math.ceil(100*p/(p+h)),f=100-y;return{...m,lValue:p,lColor:g,lPercent:y,rValue:h,rColor:x,rPercent:f}});return o.jsxs("div",{className:"w-full flex flex-col items-center basis-full",children:[o.jsx("div",{className:"w-full flex flex-nowrap justify-between mb-4 max-w-mw",children:r.length>0?o.jsxs(o.Fragment,{children:[o.jsx(bs,{player:e.author,className:"text-secondary",otherPlayer:t.author,setPlayerId:s,players:r}),o.jsx(bs,{player:t.author,className:"text-primary",otherPlayer:e.author,setPlayerId:n,players:r})]}):o.jsxs(o.Fragment,{children:[o.jsx("h3",{style:{color:l,margin:0},children:e.name}),o.jsx("h3",{style:{color:c,margin:0},children:t.name})]})}),i.map((m,u)=>o.jsxs("div",{className:"w-full relative max-w-mw mb-2",children:[o.jsx("p",{className:"z-[1] absolute w-full top-2 text-center m-0",children:m.title}),o.jsxs("div",{className:"w-full flex flex-nowrap content-stretch justify-between",children:[o.jsx("div",{className:"relative h-9",style:{width:`${m.lPercent}%`,backgroundColor:`${m.lColor}`},children:o.jsx("p",{className:"z-[1] min-w-3 w-full absolute top-2 left-2 text-left m-0",children:m.lValue})}),o.jsx("div",{className:"relative h-9",style:{width:`${m.rPercent}%`,backgroundColor:`${m.rColor}`},children:o.jsx("p",{className:"z-[1] min-w-3 w-full absolute top-2 right-2 text-right m-0",children:m.rValue})})]},m.id)]},`${m.id}${u}`))]})},Sc=(e,t)=>{const s={age:0,approvalsGiven:0,approvalsReceived:0,codeCommentsGiven:0,codeCommentsReceived:0,commentsGiven:0,commentsReceived:0,generalCommentsGiven:0,generalCommentsReceived:0,prSize:0,prTotalAdditions:0,prTotalDeletions:0,totalPRs:0,uniquePRsApproved:0,uniquePRsContributedTo:0,sentimentAveragePositiveScore:0,sentimentAverageNegativeScore:0,orgCount:0,repoCount:0},n=["commentsGiven","commentsReceived","approvalsGiven","approvalsReceived"],a=e.filter(h=>{const g=h.author!==t,x=n.some(y=>h[y]>1);return g&&x}).sort(be(n)),l=Math.ceil(a.length/100*10),c=l>10?a.slice(0,l):a,d={};c.filter(h=>h.author!==t).forEach(h=>{Object.entries(h).filter(([,g])=>!Array.isArray(g)&&/^\d+$/.test(g)&&g>0).forEach(([g,x])=>{const y=d[g]||0;d[g]=+x+y})});const i=c.length,m={...s};Object.entries(d).forEach(([h,g])=>{m[h]=Math.round(g/i)});const u={...m,user:"Peers",name:"Peers"},p=e.find(h=>h.author===t)||{approvalsGivenByTeam:{}};return[{...p,user:p.author,name:p.name||p.author},u,i]},vc=(e=[],t=[],s,n,r)=>{const a=[],l=[],c=new Set;e.forEach(u=>{const{author:p,repo:h}=u;c.add(h),u[`repo-${h}`]=1,p===s?l.push(u):a.push(u)});const d=[];Array.from(c).forEach((u,p)=>{d.push({label:u,color:_[p%_.length],groupMath:"count",filterForKey:!0,dataKey:`repo-${u}`,data:l})});const m=Ce(l);return[{markers:t,showLegends:!0,title:"Sentiments in PR",data:[{lines:[{label:`${s} received`,color:_[2],dataKey:"commentSentimentScore",data:l},{label:`${s} given`,color:_[1],dataKey:"commentAuthorSentimentScore",data:l},{label:"Peer received",color:_[4],dataKey:"commentSentimentScore",data:a},{label:"Peer given",color:_[5],dataKey:"commentAuthorSentimentScore",data:a}],xAxis:"left"}],tableKeys:["commentSentimentScore","commentAuthorSentimentScore"],tableData:m},{markers:t,data:[{lines:[{label:"User PR size",color:n,dataKey:"prSize",data:l},{label:"Peer PR size",color:r,dataKey:"prSize",data:a}],xAxis:"left"}],tableKeys:["prSize"],tableData:m},{markers:t,data:[{lines:[{label:"User PR age",color:n,dataKey:"age",data:l},{label:"Peer PR age",color:r,dataKey:"age",data:a}],xAxis:"left"}],tableKeys:["age"],tableData:m}]},wc=({pullRequests:e=[],releases:t=[],usersData:s=[]})=>{const{userPage:n,clearUserPage:r}=qe(),{theme:a}=q(),l=L[a].secondary,c=L[a].primary,d=vc(e,t,n,l,c),[i,m,u]=Sc(s,n),p=i.name||n;return o.jsxs(Y,{children:[o.jsx(O,{className:"w-full mb-4",color:"secondary",onClick:h=>{h.preventDefault(),r(),window&&window.scrollTo(0,0)},children:"Back to main view"}),o.jsxs("p",{className:"w-full text-center",children:["A collection metrics showing ",p,"'s data and average data from the top ",u," peers"]}),o.jsx(rn,{player1:i,player2:m}),d.length&&d.map((h,g)=>o.jsx(W,{...h},`${g}-${n}`)),o.jsx(O,{className:"w-full mb-4",color:"secondary",onClick:h=>{h.preventDefault(),r(),window&&window.scrollTo(0,0)},children:"Back to main view"})]})},bc=e=>({pullRequests:e.pullRequests,releases:e.releases,usersData:e.usersData}),Ac=M(bc)(wc),Tc=I("",["location","search"],window),an=new URLSearchParams(Tc),Dc=(e=[])=>{var t;return an.get("player1")||((t=e[0])==null?void 0:t.author)},jc=(e=[])=>{var t;return an.get("player2")||((t=e[1])==null?void 0:t.author)},Nc=({pullRequests:e=[],releases:t=[],usersData:s=[]})=>{const{togglePvPPage:n}=qe(),{theme:r}=q(),a=L[r].secondary,l=L[r].primary,[c,d]=w.useState(Dc(s)),[i,m]=w.useState(jc(s)),u=s.find(f=>f.author===c),p=s.find(f=>f.author===i),h=[],g=[],x=[];e.forEach(f=>{const S=f.author;S===c?(h.push(f),x.push(f)):S===i&&(g.push(f),x.push(f))});const y=Ce(x);return s.length>0&&o.jsx(o.Fragment,{children:o.jsxs(Y,{children:[o.jsx(O,{className:"w-full mr-0 mb-4",color:"secondary",onClick:f=>{f.preventDefault(),n()},children:"Back to main view"}),o.jsx("p",{className:"w-full text-center",children:"This page is just for fun, a bigger or smaller number could be good, bad or not mean much, it depends on context."}),o.jsx(rn,{player1:u,player2:p,setPlayer1Id:d,setPlayer2Id:m,players:s}),o.jsx("p",{className:"w-full text-center",children:"And the winner is.... Both! Thanks for your great work!"}),o.jsxs(we,{children:[o.jsx(W,{markers:t,showLegends:!0,title:"Sentiments in PR",data:[{lines:[{label:`${u.name} received`,color:_[0],dataKey:"commentSentimentScore",data:h},{label:`${u.name} given`,color:_[2],dataKey:"commentAuthorSentimentScore",data:h},{label:`${p.name} received`,color:_[0],dataKey:"commentSentimentScore",data:g},{label:`${p.name} given`,color:_[2],dataKey:"commentAuthorSentimentScore",data:g}],xAxis:"left"}],tableData:y,tableKeys:["author","commentSentimentScore","commentAuthorSentimentScore"]}),o.jsx(W,{markers:t,data:[{lines:[{label:`${u.name} PR size`,color:a,dataKey:"prSize",data:h},{label:`${p.name} PR size`,color:l,dataKey:"prSize",data:g}],xAxis:"left"}],tableKeys:["author","prSize"],tableData:y}),o.jsx(W,{markers:t,data:[{lines:[{label:`${u.name} PR age`,color:a,dataKey:"age",data:h},{label:`${p.name} PR age`,color:l,dataKey:"age",data:g}],xAxis:"left"}],tableKeys:["author","age"],tableData:y})]}),o.jsx(O,{className:"w-full mr-0 mb-4",color:"secondary",onClick:f=>{f.preventDefault(),n(),window&&window.scrollTo(0,0)},children:"Back to main view"})]})})},Pc=e=>({pullRequests:e.pullRequests,releases:e.releases,usersData:e.usersData}),Cc=M(Pc)(Nc),Ic=({pullRequests:e=[],releases:t=[]})=>{const{theme:s}=q(),n=L[s].secondary,r=L[s].primary;return e.length>0&&o.jsxs(Y,{children:[o.jsxs(de,{title:"Team's contribution spread",expandText:"guidance",children:[o.jsx("p",{children:"Questions worth asking (with team context):"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Is there a healthy percentage spread?"}),o.jsx("li",{children:"Are the Approval and comments spreads similar?"}),o.jsx("li",{children:"Any insights or things you would like to try to impact these metrics?"})]})]}),o.jsx("p",{children:"Y axis is the percentage spread of approvals and comments within the active team*, 100% is an EVEN spread across the team, 0% is contribution from only ONE engineer."}),o.jsx(we,{children:o.jsx(W,{title:"Percentage spread within team for ",markers:t,data:[{lines:[{label:"Comments given",color:n,dataKey:"comments",groupMath:"teamDistribution",yMax:100,data:e},{label:"Approvals given",color:r,dataKey:"approvals",groupMath:"teamDistribution",yMax:100,data:e}],xAxis:"left"}]})}),o.jsx("p",{children:"*Active team per data point are those who have approved, commented or raised a PR within that time frame."})]})},_c=({pullRequests:e=[],userIds:t=[],events:s=[],usersInfo:n={}})=>{const r=i=>{const m={};return t.forEach(u=>{const p=i==null?void 0:i[u];p&&(m[u]=p)}),m},a={},l=e.map((i,m)=>(a[i.repo]=(a[i.repo]||0)+1,{...i,id:`${m}-${i.repo}-${i.number}`,teamApprovers:r(i.approvers),teamCommenters:r(i.commenters),[`repo-${i.repo}`]:1,commentSentimentTotalScore:(i.commentSentimentScore||0)+(i.commentAuthorSentimentScore||0),[`${i.author}-commentsSentimentScore`]:i.commentSentimentScore,[`${i.author}-commentAuthorSentimentScore`]:i.commentAuthorSentimentScore})),c=Ce(l),d=Bo({events:s,usersInfo:n});return o.jsxs(o.Fragment,{children:[o.jsx(St,{}),o.jsx(Ic,{pullRequests:l,releases:d}),o.jsx(xt,{pullRequests:l,chunkyData:c,releases:d,tableOpenedByDefault:!0}),o.jsx(Vt,{pullRequests:l,chunkyData:c,releases:d,allRepos:a}),o.jsx(Qt,{}),o.jsx(nn,{})]})},kc=e=>({pullRequests:e.pullRequests,userIds:e.fetches.userIds,events:e.fetches.events,usersInfo:e.fetches.usersInfo}),Oc=M(kc)(_c),Lc=({pullRequests:e=[],reviewedPullRequests:t=[],userIds:s=[],usersInfo:n={}})=>{const[r]=s,{showNames:a}=ve(),{theme:l}=q(),c=L[l].secondary,d=L[l].primary,i={},m={},u={},p=e.map(E=>{const b=E.commenters||{};Object.keys(b).forEach(D=>{const N=b[D]||0;u[D]||(u[D]={}),u[D].commentsReceived=(u[D].commentsReceived||0)+N});const A=E.approvers||{};return Object.keys(A).forEach(D=>{const N=A[D]||0;u[D]||(u[D]={}),u[D].approvalsReceived=(u[D].approvalsReceived||0)+N}),i[E.repo]=(i[E.repo]||0)+1,m[E.org]=(m[E.org]||0)+1,{...E,[`repo-${E.repo}`]:1,commentSentimentTotalScore:(E.commentSentimentScore||0)+(E.commentAuthorSentimentScore||0),[`${E.author}-commentsSentimentScore`]:E.commentSentimentScore,[`${E.author}-commentAuthorSentimentScore`]:E.commentAuthorSentimentScore}}),h={...n};t.map(E=>{var N,G;const b=E.author;h[b]={userId:b};const A=((N=E==null?void 0:E.commenters)==null?void 0:N[r])||0,D=((G=E==null?void 0:E.approvers)==null?void 0:G[r])||0;u[b]||(u[b]={}),u[b].commentsGiven=(u[b].commentsGiven||0)+A,u[b].approvalsGiven=(u[b].approvalsGiven||0)+D});const g=Object.entries(u).map(([E,b],A)=>{var D;return{...b,author:a?E:`${Array(A).fill(" ").join("")}Spartacus`,name:a?((D=n[E])==null?void 0:D.name)||E:`${Array(A).fill(" ").join("")}Spartacus`}}),x=Rt(e.concat(t),h,r),y=["commentsGiven","approvalsGiven"],f=x.sort(be(y)),S=Ce(p),v=ho("repo",i);return o.jsxs(o.Fragment,{children:[o.jsx(St,{}),o.jsx(Y,{children:o.jsxs(we,{children:[o.jsxs("div",{className:"flex flex-wrap justify-center w-full",children:[o.jsx(dt,{data:g,indexBy:"name",title:"Comments",sortBy:"commentsGiven",bars:[{dataKey:"commentsGiven",color:c,label:"given"},{dataKey:"commentsReceived",color:d,label:"received"}]}),o.jsx(dt,{data:g,indexBy:"name",title:"Approvals",sortBy:"approvalsGiven",bars:[{dataKey:"approvalsGiven",color:c,label:"given"},{dataKey:"approvalsReceived",color:d,label:"received"}]})]}),o.jsxs("div",{className:"w-full flex flex-wrap justify-center gap-4",children:[o.jsx(mt,{data:f,preSorted:!0,dataKey:"commentsByUser",title:"Comment contributions"}),o.jsx(mt,{data:f,preSorted:!0,dataKey:"approvalsByUser",title:"Approval contributions"})]}),v.pieData.length>0&&o.jsx(go,{data:v.pieData,title:v.sectionTitle})]})}),o.jsx(xt,{pullRequests:p,chunkyData:S,tableOpenedByDefault:!0}),o.jsx(Qt,{})]})},Mc=e=>({pullRequests:e.pullRequests,reviewedPullRequests:e.reviewedPullRequests,userIds:e.fetches.userIds,usersInfo:e.fetches.usersInfo}),$c=M(Mc)(Lc),Fc=e=>{const{showPvP:t,userPage:s}=qe(),n=!!(s&&s.length>0);return o.jsx("div",{children:ne([[T(t),T(o.jsx(Cc,{}))],[T(n),T(o.jsx(Ac,{}))],[as(Boolean,"teamName"),T(o.jsx(Oc,{}))],[as(r=>r.length===1,"userIds"),T(o.jsx($c,{}))],[({repo:r,org:a})=>r===""&&a&&a.length>0,T(o.jsx(sc,{}))],[U,T(o.jsx(Ec,{}))]])(e)})},Uc=e=>({userIds:e.fetches.userIds,teamName:e.fetches.teamName,repo:e.fetches.repo,org:e.fetches.org}),Gc=M(Uc)(Fc),Vc=()=>{const{toggleTheme:e}=q();return o.jsxs("div",{className:"grow self-center flex flex-nowrap justify-end gap-x-2 mr-2",children:[o.jsx("a",{className:"hover:text-primary",href:"https://twitter.com/chris_07734",children:o.jsx("svg",{className:"h-6 w-6 fill-current",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-qa-id":"TwitterIcon",children:o.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})})}),o.jsx("a",{className:"hover:text-primary",href:"https://github.com/n07734/community-health",children:o.jsx("svg",{className:"h-6 w-6 fill-current",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-testid":"GitHubIcon",children:o.jsx("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"})})}),o.jsxs("a",{href:"#theme",onClick:t=>{t.preventDefault(),e()},className:"theme-icon hover:text-primary",children:[o.jsx("svg",{className:"h-6 w-6 sun fill-current dark:display-none",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-qa-id":"SunnyIcon",children:o.jsx("path",{d:"m6.76 4.84-1.8-1.79-1.41 1.41 1.79 1.79zM4 10.5H1v2h3zm9-9.95h-2V3.5h2zm7.45 3.91-1.41-1.41-1.79 1.79 1.41 1.41zm-3.21 13.7 1.79 1.8 1.41-1.41-1.8-1.79zM20 10.5v2h3v-2zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6m-1 16.95h2V19.5h-2zm-7.45-3.91 1.41 1.41 1.79-1.8-1.41-1.41z"})}),o.jsx("svg",{className:"h-6 w-6 moon fill-current",focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-qa-id":"MoonIcon",children:o.jsx("path",{d:"M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2"})})]})]})},ln=Fs,cn=Us,dn=Ut,Bc=$s,mn=w.forwardRef(({className:e,...t},s)=>o.jsx(ht,{className:j("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));mn.displayName=ht.displayName;const qc=Ft("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Xt=w.forwardRef(({side:e="right",className:t,children:s,...n},r)=>o.jsxs(Bc,{children:[o.jsx(mn,{}),o.jsxs(Ve,{ref:r,className:j(qc({side:e}),t),...n,children:[s,o.jsxs(Ut,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx(nr,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Xt.displayName=Ve.displayName;const Jt=({className:e,...t})=>o.jsx("div",{className:j("flex flex-col space-y-2 text-center sm:text-left",e),...t});Jt.displayName="SheetHeader";const Zt=w.forwardRef(({className:e,...t},s)=>o.jsx(pt,{ref:s,className:j("text-lg font-semibold text-foreground",e),...t}));Zt.displayName=pt.displayName;const un=w.forwardRef(({className:e,...t},s)=>o.jsx(gt,{ref:s,className:j("text-sm text-muted-foreground",e),...t}));un.displayName=gt.displayName;const Kc=[["Individual report","user"],["Team report","team"],["Repo report","repo"],["Org report","org"]],zc=({setNewReportType:e,clearReport:t})=>o.jsxs(ln,{children:[o.jsx(cn,{asChild:!0,children:o.jsx(O,{variant:"link",className:"normal-case",children:"Make a report"})}),o.jsxs(Xt,{className:"bg-background",children:[o.jsxs(Jt,{children:[o.jsx(Zt,{children:"Make a report"}),o.jsx(un,{children:o.jsx("p",{children:"Choose the type of report you want to make"})})]}),o.jsx("div",{children:Kc.map(([s,n],r)=>o.jsx(dn,{asChild:!0,children:o.jsx(O,{className:"text-xl normal-case mr-2 mb-3 w-full",variant:"secondary",onClick:()=>{const a=new URL(window.location.href);a.searchParams.delete("report"),history.pushState(null,"",a),t(),e(n)},children:s})},`${r}`))})]})]}),Hc=e=>({clearReport:()=>e(Pl)}),Wc=M(()=>({}),Hc)(zc),Mt=[],hn=[{name:"React",fileName:"facebook-react"},{name:"NextJS",fileName:"vercel-next.js"},{name:"Remix",fileName:"remix-run-remix"},{name:"Vue",fileName:"vuejs-core"},{name:"Svelte",fileName:"sveltejs-svelte"},{name:"Typescript",fileName:"microsoft-typescript"},{name:"Typescript 10th anniversary",fileName:"microsoft-typescript-10"},{name:"MSW",fileName:"mswjs-msw"},{name:"SWC",fileName:"swc-project-swc"},{name:"vscode",fileName:"microsoft-vscode"},{name:"Node",fileName:"nodejs-node"},{name:"Bluesky",fileName:"bluesky-social-social-app"}],pn=[{name:"Vite",fileName:"vitejs"},{name:"testing-library",fileName:"testing-library"}],gn=[{name:"ReactCore",fileName:"ReactCore"},{name:"ViteCore",fileName:"ViteCore"},{name:"TypeScriptCore",fileName:"TypeScriptCore"}],Yc=[{name:"Theo",fileName:"t3dotgg"},{name:"Daniel Roe",fileName:"danielroe"},{name:"Kent",fileName:"kentcdodds"},{name:"Hailey",fileName:"haileyok"},{name:"shadcn",fileName:"shadcn"},{name:"Dominik",fileName:"tkdodo"},{name:"Tyler",fileName:"coolsoftwaretyler"}],Qc=[{name:"Vite",fileName:"vitejs"},{name:"Vitest",fileName:"vitest-dev-vitest"},{name:"Playwright",fileName:"microsoft-playwright"},{name:"Astro",fileName:"withastro-astro"},{name:"PNPM",fileName:"pnpm-pnpm"},{name:"esbuild",fileName:"evanw-esbuild"},{name:"Testing Library",fileName:"testing-library"},{name:"SvelteKit",fileName:"sveltejs-kit"}],Xc=({setNewReportType:e,getPreFetchedReport:t,preFetchedName:s})=>{const n=(r,a=1)=>o.jsx(dn,{asChild:!0,children:o.jsx(O,{className:"mr-2 mb-3","data-qa-id":`prefetch-${r.name}`,variant:s===r.fileName?void 0:"secondary",onClick:()=>{const l=new URL(window.location.href);l.searchParams.set("report",r.fileName),history.pushState(null,"",l),e(""),t(r)},children:(r==null?void 0:r.name)||"Report"})},`${a}`);return o.jsxs(ln,{children:[o.jsx(cn,{asChild:!0,children:o.jsx(O,{variant:"link",className:"normal-case",children:"Other reports"})}),o.jsxs(Xt,{className:"bg-background overflow-scroll",children:[o.jsx(Jt,{children:o.jsx(Zt,{children:"See a different report"})}),o.jsxs("div",{className:"mb-4",children:[Mt.map(n),o.jsxs("div",{children:[o.jsxs("p",{children:[o.jsx("a",{className:"text-primary",href:"https://2024.stateofjs.com/en-US/libraries/#tier_list",children:"StateOfJS 24"})," S tier list"]}),Qc.map(n)]}),o.jsx("p",{children:"Other reports"}),o.jsxs(o.Fragment,{children:[o.jsx("p",{children:"Repository reports"}),hn.map(n),o.jsx("p",{children:"Org reports"}),pn.map(n),o.jsx("p",{children:"Team reports"}),gn.map(n),o.jsx("p",{children:"Individual reports"}),Yc.map(n)]})]})]})]})},Jc=e=>({preFetchedName:e.preFetchedName}),Zc=e=>({getPreFetchedReport:t=>e(Zo(t))}),ei=M(Jc,Zc)(Xc),ti=e=>{var y,f;const{error:t,preFetchedName:s="",getPreFetchedReport:n}=e,{togglePvPPage:r,setUserPage:a}=qe(),l=(y=window==null?void 0:window.location)==null?void 0:y.search,c=new URLSearchParams(l),d=c.get("player1")||"",i=c.get("player2")||"",m=c.get("user")||"",u=[...Mt,...hn,...gn,...pn],h=c.get("report")||((f=Mt[0])==null?void 0:f.fileName)||"vitejs",x=u.some(S=>S.fileName===h)?u.find(S=>S.fileName===(s||h)):{fileName:h};return w.useEffect(()=>{n(x),d&&i?r():m&&a(m)},[n,d,i,m]),o.jsx(o.Fragment,{children:t&&o.jsx(Bt,{error:t,className:"col-span-full mb-4"})})},si=e=>({preFetchedName:e.preFetchedName,error:e.preFetchedError}),oi=e=>({getPreFetchedReport:t=>e(Zo(t))}),ni=M(si,oi)(ti),ri=e=>{const{setValues:t,getData:s,fetching:n,reportType:r="repo"}=e,l={repo:"Get community data for any repo",team:"Get community data for any Team(list of users)",user:"Get data for an individual",org:"Get community data for any Org"}[r],i={sortDirection:"DESC",amountOfData:1,token:"",excludeIds:"",enterpriseAPI:"",...{repo:{org:"",repo:""},org:{org:""},team:{usersInfo:{},teamName:""},user:{userId:"",name:""}}[r]},[m,u]=w.useState({}),[p,h]=w.useState(i),g=(E={})=>{const b={...p,...E};h(b)};w.useEffect(()=>{h(i)},[r,h]);const x=(E,b)=>h({...p,[E]:b}),y={inputError:m,setInputError:u,formInfo:p,setValue:x},f=E=>{E.preventDefault();const{isValid:b,validationErrors:A}=vo(p);u(A),b&&!n&&t(p),b&&!n&&s()},v={repo:[{type:"org"},{type:"repo"}],org:[{type:"org",className:"col-span-full"}],team:[{type:"teamName",className:"col-span-full"}],user:[{type:"userId"},{type:"name"}]}[r];return o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{children:l}),o.jsxs("form",{onSubmit:f,children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 max-mm:grid-cols-1 items-end",children:[v.map(E=>o.jsx(H,{className:E.className,type:E.type,...y},E.type)),r==="team"&&o.jsx(Oo,{usersInfo:p.usersInfo,setParentValues:g}),o.jsx(H,{className:"col-span-full",type:"events",...y}),o.jsx("p",{className:"col-span-full",children:"Key events can give context when viewing the data e.g. started using copilot, launched a feature. These events can help give more context while viewing the data. e.g.  Copilot adopted=2024-02-01,Feature A=2024-04-10."}),o.jsx(H,{type:"token",...y}),o.jsx(yo,{className:"mb-3 max-mm:mb-0",setValue:x,amountOfData:p.amountOfData}),o.jsxs("p",{className:"col-span-full",children:["To create a token go to your GitHub ",o.jsx("a",{className:"text-primary",href:"https://github.com/settings/tokens",children:"tokens"})," page, click on 'generate new token', choose the settings 'repo' (all), 'read:org' and 'user' then click 'Generate token'."]})]}),o.jsx(de,{className:"mb-0 col-span-full",expandText:"show",intro:"Advanced options",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2 max-mm:grid-cols-1 items-end",children:[o.jsx(H,{type:"excludeIds",...y}),o.jsx(H,{type:"enterpriseAPI",...y})]})}),o.jsx(xo,{})]}),o.jsx(tn,{})]})},ai=e=>({fetching:e.fetching,error:e.error}),li=e=>({setValues:t=>{const{org:s,repo:n,token:r,amountOfData:a,sortDirection:l,teamName:c,usersInfo:d={},userId:i,name:m="",enterpriseAPI:u,excludeIds:p,events:h}=t;i&&(d[i]={userId:i,name:m,dates:[]}),e(Nl({...t,usersInfo:d})),e(qo(r)),e(Wo(a)),e(Qo(l)),e(Yo(a)),s&&e(vl(s)),n&&e(Al(n)),Object.keys(d).length>0&&e(Ko(d)),c&&e(bl(c)),e(wl(u)),e(zo(p)),h&&e(Ho(h))},getData:()=>e(Jo())}),ci=M(ai,li)(ri),ii=()=>{const[e,t]=w.useState("");return o.jsxs("div",{className:"p-0 overflow-auto",children:[o.jsxs("header",{children:[o.jsxs("nav",{className:"w-full flex flex-wrap",children:[o.jsx(ei,{setNewReportType:t}),o.jsx(Wc,{setNewReportType:t}),o.jsx(Vc,{})]}),"  ",o.jsx(Y,{children:o.jsxs(de,{title:"Code Health",hLevel:1,expandText:"more",children:[o.jsx("p",{children:"Coding is a team activity, healthy collaboration produces better code. This tool gives in depth collaboration and contribution metrics for teams to analyze their code health."}),o.jsx("p",{children:"You can create your own reports for individuals, teams, repos and orgs from public or enterprise GitHub."})]})})]}),o.jsx(ni,{}),e!==""&&o.jsx(Y,{className:"block",children:o.jsx(ci,{reportType:e})}),o.jsx(Gc,{})]})},$t=w.forwardRef(({className:e,value:t,...s},n)=>o.jsx(Ws,{ref:n,className:j("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:o.jsx(rr,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));$t.displayName=Ws.displayName;const di=ne([[oe(1),e=>`${e} day remaining`],[e=>e>1,e=>`${e} days remaining`],[e=>e<0,T("Wrapping up")],[U,T("")]]),mi=({fetches:e,fetching:t=!1,fetchStatus:s={},pullRequests:n=[],formUntilDate:r=""})=>{const{userIds:a=[],sortDirection:l=""}=e,{user:c="",prCount:d=0,latestItemDate:i="",issueCount:m=0,savedReportName:u="",reviewCount:p=0,repoCount:h=0}=s,g=a.length>1,x=(Z,ue)=>l==="DESC"?xe(Z,ue):xe(ue,Z),y=l==="DESC"?0:-1,f=n.length>0?new Date(n.at(y).mergedAt):new Date,S=i?new Date(i):f,v=new Date(r),E=x(f,v),b=x(f,S),A=E-b,D=di(A),N=100/(E||10),G=b*N,K=c?a.findIndex(Z=>Z===c):0,C=K>0?a.slice(0,K):[],$=100/(a.length||10),me=K*$;return t&&o.jsx(wo,{open:!0,children:o.jsxs(To,{"data-qa-id":"loader",className:"overflow-scroll max-h-full w-4/5",children:[g&&o.jsxs(o.Fragment,{children:[o.jsxs("h2",{children:["Loading ",K+1," of ",a.length," ",a.length===1?"user":"users"]}),o.jsx($t,{value:me})]}),D&&o.jsx("h2",{children:D}),u&&o.jsxs("h2",{children:["Fetching ",u]}),o.jsx($t,{value:G}),h>0&&o.jsxs("h2",{children:[h," Repos"]}),!u&&!g&&o.jsxs(o.Fragment,{children:[o.jsxs("h2",{children:[d," Pull Requests"]}),o.jsxs("h2",{children:[m," Issues"]})]}),p>0&&o.jsxs("h2",{children:[p," Reviews"]}),g&&C.length>0&&o.jsxs("p",{children:["Loaded users: ",C.join(", ")]})]})})},ui=e=>({fetches:e.fetches,fetching:e.fetching,fetchStatus:e.fetchStatus,pullRequests:e.pullRequests,formUntilDate:e.formUntilDate}),hi=M(ui)(mi);class pi extends w.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,s){console.error("Uncaught error:",t,s)}render(){return this.state.hasError?o.jsx("h1",{className:"text-center mt-4",children:"Something went wrong."}):this.props.children}}const gi=()=>o.jsx(pi,{children:o.jsxs(fr,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:[o.jsx(hi,{}),o.jsx(ii,{})]})}),vt=e=>(t,s)=>(n=e,r)=>{const a={[R[t]]:()=>r.payload,[R[s]]:()=>e}[r.type];return a?a():n},fe=vt(""),Tt=vt([]),fi=vt({}),at=vt({hasNextPage:!0}),xi=ls({fetches:ls({token:(e="",t)=>t.type===R.STORE_TOKEN?t.payload:e,org:fe("STORE_ORG","CLEAR_ORG"),repo:fe("STORE_REPO","CLEAR_REPO"),teamName:fe("SET_TEAM_NAME","CLEAR_TEAM_NAME"),untilDate:fe("STORE_UNTIL_DATE","CLEAR_UNTIL_DATE"),amountOfData:(e=1,t)=>t.type===R.STORE_AMOUNT?t.payload:e,sortDirection:(e="DESC",t)=>t.type===R.STORE_SORT?t.payload:e,enterpriseAPI:(e="",t)=>t.type===R.STORE_ENT_URL?t.payload:e,userIds:Tt("STORE_USER_IDS","CLEAR_USER_IDS"),usersInfo:fi("STORE_USERS_INFO","CLEAR_USERS_INFO"),excludeIds:Tt("STORE_EX_IDS","CLEAR_EX_IDS"),events:Tt("STORE_EVENTS","CLEAR_EVENTS"),prPagination:at("SET_PR_PAGINATION","CLEAR_PR_PAGINATION"),usersReviewsPagination:at("SET_PR_REVIEWED_PAGINATION","CLEAR_PR_REVIEWED_PAGINATION"),releasesPagination:at("SET_RELEASES_PAGINATION","CLEAR_RELEASES_PAGINATION"),issuesPagination:at("SET_ISSUES_PAGINATION","CLEAR_ISSUES_PAGINATION")}),reportDescription:fe("SET_DESC","CLEAR_DESC"),formUntilDate:fe("STORE_FORM_UNTIL_DATE","CLEAR_FORM_UNTIL_DATE"),fetching:(e=!1,t)=>{const{FETCH_START:s,FETCH_END:n}=R,r={[s]:!0,[n]:!1};return[s,n].includes(t.type)?r[t.type]:e},fetchStatus:(e={},t)=>t.type===R.FETCH_STATUS?t.payload:e,error:fe("FETCH_ERROR","CLEAR_FETCH_ERROR"),preFetchedError:fe("PRE_FETCH_ERROR","CLEAR_PRE_FETCH_ERROR"),preFetchedName:fe("PREFETCHED_NAME","CLEAR_PREFETCHED_NAME"),pullRequests:(e=[],t)=>[t.type===R.ADD_PRS&&t.payload,t.type===R.CLEAR_PRS&&[],e].find(Boolean),reviewedPullRequests:(e=[],t)=>[t.type===R.ADD_REVIEWED_PRS&&t.payload,t.type===R.CLEAR_REVIEWED_PRS&&[],e].find(Boolean),itemsDateRange:(e=["",""],t)=>[t.type===R.ADD_ITEMS_DATE_RANGE&&t.payload,t.type===R.CLEAR_ITEMS_DATE_RANGE&&["",""],e].find(Boolean),trimmedItems:(e={},t)=>[t.type===R.ADD_TRIMMED_ITEMS&&t.payload,t.type===R.CLEAR_TRIMMED_ITEMS&&{},e].find(Boolean),filteredPRs:(e=[],t)=>[t.type===R.ADD_FILTERED_PRS&&t.payload,t.type===R.CLEAR_FILTERED_PRS&&[],e].find(Boolean),filteredReviewedPRs:(e=[],t)=>[t.type===R.ADD_REVIEWED_FILTERED_PRS&&t.payload,t.type===R.CLEAR_REVIEWED_FILTERED_PRS&&[],e].find(Boolean),usersData:(e=[],t)=>[t.type===R.ADD_USERS_DATA&&t.payload,t.type===R.CLEAR_USERS_DATA&&[],e].find(Boolean),issues:(e=[],t)=>[t.type===R.ADD_ISSUES&&t.payload,t.type===R.CLEAR_ISSUES&&[],e].find(Boolean),filteredIssues:(e=[],t)=>[t.type===R.ADD_FILTERED_ISSUES&&t.payload,t.type===R.CLEAR_FILTERED_ISSUES&&[],e].find(Boolean),releases:(e=[],t)=>[t.type===R.ADD_RELEASES&&t.payload,t.type===R.CLEAR_RELEASES&&[],e].find(Boolean),filteredReleases:(e=[],t)=>[t.type===R.ADD_FILTERED_RELEASES&&t.payload,t.type===R.CLEAR_FILTERED_RELEASES&&[],e].find(Boolean)}),yi=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Qe,Ri=ar(xi,yi(lr(mr)));cr.createRoot(document.getElementById("root")).render(o.jsx(ir.StrictMode,{children:o.jsx(dr,{store:Ri,children:o.jsx(ur,{children:o.jsx(hr,{children:o.jsx(pr,{children:o.jsx(gi,{})})})})})}));
